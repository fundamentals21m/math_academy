import{j as R,A as Bg,m as ge}from"./vendor-animation-BJuqxk1_.js";import{r as G,a as y2,H as _2}from"./vendor-react-CgkhWqxT.js";import"./vendor-math-Bv-ElLdm.js";import{o as v2,L as T2,_ as E2,C as A2,r as k_,F as b2,a as vs,g as gE,S as S2,i as w2,b as R2}from"./vendor-firebase-core-BHG-4ugW.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var yE={exports:{}},od={},_E={exports:{}},vE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,ne){var ie=X.length;X.push(ne);e:for(;0<ie;){var be=ie-1>>>1,He=X[be];if(0<r(He,ne))X[be]=ne,X[ie]=He,ie=be;else break e}}function n(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var ne=X[0],ie=X.pop();if(ie!==ne){X[0]=ie;e:for(var be=0,He=X.length,Ve=He>>>1;be<Ve;){var et=2*(be+1)-1,de=X[et],Ht=et+1,Te=X[Ht];if(0>r(de,ie))Ht<He&&0>r(Te,de)?(X[be]=Te,X[Ht]=ie,be=Ht):(X[be]=de,X[et]=ie,be=et);else if(Ht<He&&0>r(Te,ie))X[be]=Te,X[Ht]=ie,be=Ht;else break e}}return ne}function r(X,ne){var ie=X.sortIndex-ne.sortIndex;return ie!==0?ie:X.id-ne.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],h=[],m=1,T=null,g=3,w=!1,O=!1,M=!1,L=!1,x=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function z(X){for(var ne=n(h);ne!==null;){if(ne.callback===null)i(h);else if(ne.startTime<=X)i(h),ne.sortIndex=ne.expirationTime,e(c,ne);else break;ne=n(h)}}function F(X){if(M=!1,z(X),!O)if(n(c)!==null)O=!0,$||($=!0,I());else{var ne=n(h);ne!==null&&pe(F,ne.startTime-X)}}var $=!1,S=-1,p=5,y=-1;function A(){return L?!0:!(t.unstable_now()-y<p)}function b(){if(L=!1,$){var X=t.unstable_now();y=X;var ne=!0;try{e:{O=!1,M&&(M=!1,k(S),S=-1),w=!0;var ie=g;try{t:{for(z(X),T=n(c);T!==null&&!(T.expirationTime>X&&A());){var be=T.callback;if(typeof be=="function"){T.callback=null,g=T.priorityLevel;var He=be(T.expirationTime<=X);if(X=t.unstable_now(),typeof He=="function"){T.callback=He,z(X),ne=!0;break t}T===n(c)&&i(c),z(X)}else i(c);T=n(c)}if(T!==null)ne=!0;else{var Ve=n(h);Ve!==null&&pe(F,Ve.startTime-X),ne=!1}}break e}finally{T=null,g=ie,w=!1}ne=void 0}}finally{ne?I():$=!1}}}var I;if(typeof D=="function")I=function(){D(b)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,se=_.port2;_.port1.onmessage=b,I=function(){se.postMessage(null)}}else I=function(){x(b,0)};function pe(X,ne){S=x(function(){X(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):p=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(X){switch(g){case 1:case 2:case 3:var ne=3;break;default:ne=g}var ie=g;g=ne;try{return X()}finally{g=ie}},t.unstable_requestPaint=function(){L=!0},t.unstable_runWithPriority=function(X,ne){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ie=g;g=X;try{return ne()}finally{g=ie}},t.unstable_scheduleCallback=function(X,ne,ie){var be=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?be+ie:be):ie=be,X){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=ie+He,X={id:m++,callback:ne,priorityLevel:X,startTime:ie,expirationTime:He,sortIndex:-1},ie>be?(X.sortIndex=ie,e(h,X),n(c)===null&&X===n(h)&&(M?(k(S),S=-1):M=!0,pe(F,ie-be))):(X.sortIndex=He,e(c,X),O||w||(O=!0,$||($=!0,I()))),X},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(X){var ne=g;return function(){var ie=g;g=ne;try{return X.apply(this,arguments)}finally{g=ie}}}})(vE);_E.exports=vE;var I2=_E.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lt=I2,TE=G,C2=y2;function q(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function EE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _c(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function AE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function bE(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function O_(t){if(_c(t)!==t)throw Error(q(188))}function N2(t){var e=t.alternate;if(!e){if(e=_c(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return O_(r),t;if(s===i)return O_(r),e;s=s.sibling}throw Error(q(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==i)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function SE(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=SE(t),e!==null)return e;t=t.sibling}return null}var st=Object.assign,x2=Symbol.for("react.element"),th=Symbol.for("react.transitional.element"),du=Symbol.for("react.portal"),Ia=Symbol.for("react.fragment"),wE=Symbol.for("react.strict_mode"),lp=Symbol.for("react.profiler"),RE=Symbol.for("react.consumer"),Mr=Symbol.for("react.context"),Fg=Symbol.for("react.forward_ref"),up=Symbol.for("react.suspense"),cp=Symbol.for("react.suspense_list"),Hg=Symbol.for("react.memo"),ys=Symbol.for("react.lazy"),hp=Symbol.for("react.activity"),k2=Symbol.for("react.memo_cache_sentinel"),D_=Symbol.iterator;function Jl(t){return t===null||typeof t!="object"?null:(t=D_&&t[D_]||t["@@iterator"],typeof t=="function"?t:null)}var O2=Symbol.for("react.client.reference");function fp(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===O2?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ia:return"Fragment";case lp:return"Profiler";case wE:return"StrictMode";case up:return"Suspense";case cp:return"SuspenseList";case hp:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case du:return"Portal";case Mr:return t.displayName||"Context";case RE:return(t._context.displayName||"Context")+".Consumer";case Fg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hg:return e=t.displayName||null,e!==null?e:fp(t.type)||"Memo";case ys:e=t._payload,t=t._init;try{return fp(t(e))}catch{}}return null}var mu=Array.isArray,le=TE.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Le=C2.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Oo={pending:!1,data:null,method:null,action:null},dp=[],Ca=-1;function yr(t){return{current:t}}function Ft(t){0>Ca||(t.current=dp[Ca],dp[Ca]=null,Ca--)}function We(t,e){Ca++,dp[Ca]=t.current,t.current=e}var cr=yr(null),Zu=yr(null),Ls=yr(null),af=yr(null);function lf(t,e){switch(We(Ls,e),We(Zu,t),We(cr,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?U0(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=U0(e),t=$b(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Ft(cr),We(cr,t)}function nl(){Ft(cr),Ft(Zu),Ft(Ls)}function mp(t){t.memoizedState!==null&&We(af,t);var e=cr.current,n=$b(e,t.type);e!==n&&(We(Zu,t),We(cr,n))}function uf(t){Zu.current===t&&(Ft(cr),Ft(Zu)),af.current===t&&(Ft(af),rc._currentValue=Oo)}var $d,M_;function So(t){if($d===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$d=e&&e[1]||"",M_=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$d+t+M_}var Zd=!1;function Kd(t,e){if(!t||Zd)return"";Zd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var T=function(){throw Error()};if(Object.defineProperty(T.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(T,[])}catch(w){var g=w}Reflect.construct(t,[],T)}else{try{T.call()}catch(w){g=w}t.call(T.prototype)}}else{try{throw Error()}catch(w){g=w}(T=t())&&typeof T.catch=="function"&&T.catch(function(){})}}catch(w){if(w&&g&&typeof w.stack=="string")return[w.stack,g.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var c=o.split(`
`),h=a.split(`
`);for(r=i=0;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;for(;r<h.length&&!h[r].includes("DetermineComponentFrameRoot");)r++;if(i===c.length||r===h.length)for(i=c.length-1,r=h.length-1;1<=i&&0<=r&&c[i]!==h[r];)r--;for(;1<=i&&0<=r;i--,r--)if(c[i]!==h[r]){if(i!==1||r!==1)do if(i--,r--,0>r||c[i]!==h[r]){var m=`
`+c[i].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=i&&0<=r);break}}}finally{Zd=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?So(n):""}function D2(t,e){switch(t.tag){case 26:case 27:case 5:return So(t.type);case 16:return So("Lazy");case 13:return t.child!==e&&e!==null?So("Suspense Fallback"):So("Suspense");case 19:return So("SuspenseList");case 0:case 15:return Kd(t.type,!1);case 11:return Kd(t.type.render,!1);case 1:return Kd(t.type,!0);case 31:return So("Activity");default:return""}}function P_(t){try{var e="",n=null;do e+=D2(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var pp=Object.prototype.hasOwnProperty,qg=Lt.unstable_scheduleCallback,Xd=Lt.unstable_cancelCallback,M2=Lt.unstable_shouldYield,P2=Lt.unstable_requestPaint,Wn=Lt.unstable_now,L2=Lt.unstable_getCurrentPriorityLevel,IE=Lt.unstable_ImmediatePriority,CE=Lt.unstable_UserBlockingPriority,cf=Lt.unstable_NormalPriority,z2=Lt.unstable_LowPriority,NE=Lt.unstable_IdlePriority,V2=Lt.log,U2=Lt.unstable_setDisableYieldValue,vc=null,ei=null;function Ns(t){if(typeof V2=="function"&&U2(t),ei&&typeof ei.setStrictMode=="function")try{ei.setStrictMode(vc,t)}catch{}}var ti=Math.clz32?Math.clz32:F2,j2=Math.log,B2=Math.LN2;function F2(t){return t>>>=0,t===0?32:31-(j2(t)/B2|0)|0}var nh=256,ih=262144,rh=4194304;function wo(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ad(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var r=0,s=t.suspendedLanes,o=t.pingedLanes;t=t.warmLanes;var a=i&134217727;return a!==0?(i=a&~s,i!==0?r=wo(i):(o&=a,o!==0?r=wo(o):n||(n=a&~t,n!==0&&(r=wo(n))))):(a=i&~s,a!==0?r=wo(a):o!==0?r=wo(o):n||(n=i&~t,n!==0&&(r=wo(n)))),r===0?0:e!==0&&e!==r&&!(e&s)&&(s=r&-r,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:r}function Tc(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function H2(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xE(){var t=rh;return rh<<=1,!(rh&62914560)&&(rh=4194304),t}function Yd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ec(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function q2(t,e,n,i,r,s){var o=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var a=t.entanglements,c=t.expirationTimes,h=t.hiddenUpdates;for(n=o&~n;0<n;){var m=31-ti(n),T=1<<m;a[m]=0,c[m]=-1;var g=h[m];if(g!==null)for(h[m]=null,m=0;m<g.length;m++){var w=g[m];w!==null&&(w.lane&=-536870913)}n&=~T}i!==0&&kE(t,i,0),s!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=s&~(o&~e))}function kE(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-ti(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function OE(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ti(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}function DE(t,e){var n=e&-e;return n=n&42?1:Gg(n),n&(t.suspendedLanes|e)?0:n}function Gg(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function $g(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function ME(){var t=Le.p;return t!==0?t:(t=window.event,t===void 0?32:iS(t.type))}function L_(t,e){var n=Le.p;try{return Le.p=t,e()}finally{Le.p=n}}var ro=Math.random().toString(36).slice(2),Qt="__reactFiber$"+ro,zn="__reactProps$"+ro,bl="__reactContainer$"+ro,gp="__reactEvents$"+ro,G2="__reactListeners$"+ro,$2="__reactHandles$"+ro,z_="__reactResources$"+ro,Ac="__reactMarker$"+ro;function Zg(t){delete t[Qt],delete t[zn],delete t[gp],delete t[G2],delete t[$2]}function Na(t){var e=t[Qt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[bl]||n[Qt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=q0(t);t!==null;){if(n=t[Qt])return n;t=q0(t)}return e}t=n,n=t.parentNode}return null}function Sl(t){if(t=t[Qt]||t[bl]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function pu(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(q(33))}function Fa(t){var e=t[z_];return e||(e=t[z_]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Bt(t){t[Ac]=!0}var PE=new Set,LE={};function Qo(t,e){il(t,e),il(t+"Capture",e)}function il(t,e){for(LE[t]=e,t=0;t<e.length;t++)PE.add(e[t])}var Z2=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),V_={},U_={};function K2(t){return pp.call(U_,t)?!0:pp.call(V_,t)?!1:Z2.test(t)?U_[t]=!0:(V_[t]=!0,!1)}function kh(t,e,n){if(K2(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function sh(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Rr(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function fi(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function X2(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function yp(t){if(!t._valueTracker){var e=zE(t)?"checked":"value";t._valueTracker=X2(t,e,""+t[e])}}function VE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=zE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function hf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Y2=/[\n"\\]/g;function pi(t){return t.replace(Y2,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function _p(t,e,n,i,r,s,o,a){t.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.type=o:t.removeAttribute("type"),e!=null?o==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+fi(e)):t.value!==""+fi(e)&&(t.value=""+fi(e)):o!=="submit"&&o!=="reset"||t.removeAttribute("value"),e!=null?vp(t,o,fi(e)):n!=null?vp(t,o,fi(n)):i!=null&&t.removeAttribute("value"),r==null&&s!=null&&(t.defaultChecked=!!s),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.name=""+fi(a):t.removeAttribute("name")}function UE(t,e,n,i,r,s,o,a){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null)){yp(t);return}n=n!=null?""+fi(n):"",e=e!=null?""+fi(e):n,a||e===t.value||(t.value=e),t.defaultValue=e}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=a?t.checked:!!i,t.defaultChecked=!!i,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(t.name=o),yp(t)}function vp(t,e,n){e==="number"&&hf(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Ha(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+fi(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function jE(t,e,n){if(e!=null&&(e=""+fi(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+fi(n):""}function BE(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(q(92));if(mu(i)){if(1<i.length)throw Error(q(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=fi(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),yp(t)}function rl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Q2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function j_(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||Q2.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function FE(t,e,n){if(e!=null&&typeof e!="object")throw Error(q(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&n[r]!==i&&j_(t,r,i)}else for(var s in e)e.hasOwnProperty(s)&&j_(t,s,e[s])}function Kg(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var J2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),W2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oh(t){return W2.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Pr(){}var Tp=null;function Xg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xa=null,qa=null;function B_(t){var e=Sl(t);if(e&&(t=e.stateNode)){var n=t[zn]||null;e:switch(t=e.stateNode,e.type){case"input":if(_p(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+pi(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=i[zn]||null;if(!r)throw Error(q(90));_p(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&VE(i)}break e;case"textarea":jE(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Ha(t,!!n.multiple,e,!1)}}}var Qd=!1;function HE(t,e,n){if(Qd)return t(e,n);Qd=!0;try{var i=t(e);return i}finally{if(Qd=!1,(xa!==null||qa!==null)&&(vd(),xa&&(e=xa,t=qa,qa=xa=null,B_(e),t)))for(e=0;e<t.length;e++)B_(t[e])}}function Ku(t,e){var n=t.stateNode;if(n===null)return null;var i=n[zn]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var Hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ep=!1;if(Hr)try{var Wl={};Object.defineProperty(Wl,"passive",{get:function(){Ep=!0}}),window.addEventListener("test",Wl,Wl),window.removeEventListener("test",Wl,Wl)}catch{Ep=!1}var xs=null,Yg=null,Dh=null;function qE(){if(Dh)return Dh;var t,e=Yg,n=e.length,i,r="value"in xs?xs.value:xs.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Dh=r.slice(t,1<i?1-i:void 0)}function Mh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function oh(){return!0}function F_(){return!1}function Vn(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?oh:F_,this.isPropagationStopped=F_,this}return st(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=oh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=oh)},persist:function(){},isPersistent:oh}),e}var Jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ld=Vn(Jo),bc=st({},Jo,{view:0,detail:0}),eR=Vn(bc),Jd,Wd,eu,ud=st({},bc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==eu&&(eu&&t.type==="mousemove"?(Jd=t.screenX-eu.screenX,Wd=t.screenY-eu.screenY):Wd=Jd=0,eu=t),Jd)},movementY:function(t){return"movementY"in t?t.movementY:Wd}}),H_=Vn(ud),tR=st({},ud,{dataTransfer:0}),nR=Vn(tR),iR=st({},bc,{relatedTarget:0}),em=Vn(iR),rR=st({},Jo,{animationName:0,elapsedTime:0,pseudoElement:0}),sR=Vn(rR),oR=st({},Jo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),aR=Vn(oR),lR=st({},Jo,{data:0}),q_=Vn(lR),uR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hR[t])?!!e[t]:!1}function Qg(){return fR}var dR=st({},bc,{key:function(t){if(t.key){var e=uR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Mh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qg,charCode:function(t){return t.type==="keypress"?Mh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mR=Vn(dR),pR=st({},ud,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),G_=Vn(pR),gR=st({},bc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qg}),yR=Vn(gR),_R=st({},Jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),vR=Vn(_R),TR=st({},ud,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ER=Vn(TR),AR=st({},Jo,{newState:0,oldState:0}),bR=Vn(AR),SR=[9,13,27,32],Jg=Hr&&"CompositionEvent"in window,wu=null;Hr&&"documentMode"in document&&(wu=document.documentMode);var wR=Hr&&"TextEvent"in window&&!wu,GE=Hr&&(!Jg||wu&&8<wu&&11>=wu),$_=" ",Z_=!1;function $E(t,e){switch(t){case"keyup":return SR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ZE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ka=!1;function RR(t,e){switch(t){case"compositionend":return ZE(e);case"keypress":return e.which!==32?null:(Z_=!0,$_);case"textInput":return t=e.data,t===$_&&Z_?null:t;default:return null}}function IR(t,e){if(ka)return t==="compositionend"||!Jg&&$E(t,e)?(t=qE(),Dh=Yg=xs=null,ka=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return GE&&e.locale!=="ko"?null:e.data;default:return null}}var CR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!CR[t.type]:e==="textarea"}function KE(t,e,n,i){xa?qa?qa.push(i):qa=[i]:xa=i,e=Nf(e,"onChange"),0<e.length&&(n=new ld("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ru=null,Xu=null;function NR(t){Hb(t,0)}function cd(t){var e=pu(t);if(VE(e))return t}function X_(t,e){if(t==="change")return e}var XE=!1;if(Hr){var tm;if(Hr){var nm="oninput"in document;if(!nm){var Y_=document.createElement("div");Y_.setAttribute("oninput","return;"),nm=typeof Y_.oninput=="function"}tm=nm}else tm=!1;XE=tm&&(!document.documentMode||9<document.documentMode)}function Q_(){Ru&&(Ru.detachEvent("onpropertychange",YE),Xu=Ru=null)}function YE(t){if(t.propertyName==="value"&&cd(Xu)){var e=[];KE(e,Xu,t,Xg(t)),HE(NR,e)}}function xR(t,e,n){t==="focusin"?(Q_(),Ru=e,Xu=n,Ru.attachEvent("onpropertychange",YE)):t==="focusout"&&Q_()}function kR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cd(Xu)}function OR(t,e){if(t==="click")return cd(e)}function DR(t,e){if(t==="input"||t==="change")return cd(e)}function MR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ii=typeof Object.is=="function"?Object.is:MR;function Yu(t,e){if(ii(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!pp.call(e,r)||!ii(t[r],e[r]))return!1}return!0}function J_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function W_(t,e){var n=J_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=J_(n)}}function QE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?QE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function JE(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=hf(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=hf(t.document)}return e}function Wg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var PR=Hr&&"documentMode"in document&&11>=document.documentMode,Oa=null,Ap=null,Iu=null,bp=!1;function e0(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bp||Oa==null||Oa!==hf(i)||(i=Oa,"selectionStart"in i&&Wg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Iu&&Yu(Iu,i)||(Iu=i,i=Nf(Ap,"onSelect"),0<i.length&&(e=new ld("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Oa)))}function Ao(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Da={animationend:Ao("Animation","AnimationEnd"),animationiteration:Ao("Animation","AnimationIteration"),animationstart:Ao("Animation","AnimationStart"),transitionrun:Ao("Transition","TransitionRun"),transitionstart:Ao("Transition","TransitionStart"),transitioncancel:Ao("Transition","TransitionCancel"),transitionend:Ao("Transition","TransitionEnd")},im={},WE={};Hr&&(WE=document.createElement("div").style,"AnimationEvent"in window||(delete Da.animationend.animation,delete Da.animationiteration.animation,delete Da.animationstart.animation),"TransitionEvent"in window||delete Da.transitionend.transition);function Wo(t){if(im[t])return im[t];if(!Da[t])return t;var e=Da[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in WE)return im[t]=e[n];return t}var eA=Wo("animationend"),tA=Wo("animationiteration"),nA=Wo("animationstart"),LR=Wo("transitionrun"),zR=Wo("transitionstart"),VR=Wo("transitioncancel"),iA=Wo("transitionend"),rA=new Map,Sp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sp.push("scrollEnd");function Gi(t,e){rA.set(t,e),Qo(e,[t])}var ff=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ci=[],Ma=0,ey=0;function hd(){for(var t=Ma,e=ey=Ma=0;e<t;){var n=ci[e];ci[e++]=null;var i=ci[e];ci[e++]=null;var r=ci[e];ci[e++]=null;var s=ci[e];if(ci[e++]=null,i!==null&&r!==null){var o=i.pending;o===null?r.next=r:(r.next=o.next,o.next=r),i.pending=r}s!==0&&sA(n,r,s)}}function fd(t,e,n,i){ci[Ma++]=t,ci[Ma++]=e,ci[Ma++]=n,ci[Ma++]=i,ey|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function ty(t,e,n,i){return fd(t,e,n,i),df(t)}function ea(t,e){return fd(t,null,null,e),df(t)}function sA(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=t.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(r=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,r&&e!==null&&(r=31-ti(n),t=s.hiddenUpdates,i=t[r],i===null?t[r]=[e]:i.push(e),e.lane=n|536870912),s):null}function df(t){if(50<Lu)throw Lu=0,Gp=null,Error(q(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Pa={};function UR(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(t,e,n,i){return new UR(t,e,n,i)}function ny(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ur(t,e){var n=t.alternate;return n===null?(n=Qn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function oA(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Ph(t,e,n,i,r,s){var o=0;if(i=t,typeof t=="function")ny(t)&&(o=1);else if(typeof t=="string")o=qI(t,n,cr.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case hp:return t=Qn(31,n,e,r),t.elementType=hp,t.lanes=s,t;case Ia:return Do(n.children,r,s,e);case wE:o=8,r|=24;break;case lp:return t=Qn(12,n,e,r|2),t.elementType=lp,t.lanes=s,t;case up:return t=Qn(13,n,e,r),t.elementType=up,t.lanes=s,t;case cp:return t=Qn(19,n,e,r),t.elementType=cp,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Mr:o=10;break e;case RE:o=9;break e;case Fg:o=11;break e;case Hg:o=14;break e;case ys:o=16,i=null;break e}o=29,n=Error(q(130,t===null?"null":typeof t,"")),i=null}return e=Qn(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Do(t,e,n,i){return t=Qn(7,t,i,e),t.lanes=n,t}function rm(t,e,n){return t=Qn(6,t,null,e),t.lanes=n,t}function aA(t){var e=Qn(18,null,null,0);return e.stateNode=t,e}function sm(t,e,n){return e=Qn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var t0=new WeakMap;function gi(t,e){if(typeof t=="object"&&t!==null){var n=t0.get(t);return n!==void 0?n:(e={value:t,source:e,stack:P_(e)},t0.set(t,e),e)}return{value:t,source:e,stack:P_(e)}}var La=[],za=0,mf=null,Qu=0,di=[],mi=0,Zs=null,ar=1,lr="";function Or(t,e){La[za++]=Qu,La[za++]=mf,mf=t,Qu=e}function lA(t,e,n){di[mi++]=ar,di[mi++]=lr,di[mi++]=Zs,Zs=t;var i=ar;t=lr;var r=32-ti(i)-1;i&=~(1<<r),n+=1;var s=32-ti(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,ar=1<<32-ti(e)+r|n<<r|i,lr=s+t}else ar=1<<s|n<<r|i,lr=t}function iy(t){t.return!==null&&(Or(t,1),lA(t,1,0))}function ry(t){for(;t===mf;)mf=La[--za],La[za]=null,Qu=La[--za],La[za]=null;for(;t===Zs;)Zs=di[--mi],di[mi]=null,lr=di[--mi],di[mi]=null,ar=di[--mi],di[mi]=null}function uA(t,e){di[mi++]=ar,di[mi++]=lr,di[mi++]=Zs,ar=e.id,lr=e.overflow,Zs=t}var Jt=null,rt=null,Ae=!1,zs=null,yi=!1,wp=Error(q(519));function Ks(t){var e=Error(q(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ju(gi(e,t)),wp}function n0(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[Qt]=t,e[zn]=i,n){case"dialog":_e("cancel",e),_e("close",e);break;case"iframe":case"object":case"embed":_e("load",e);break;case"video":case"audio":for(n=0;n<nc.length;n++)_e(nc[n],e);break;case"source":_e("error",e);break;case"img":case"image":case"link":_e("error",e),_e("load",e);break;case"details":_e("toggle",e);break;case"input":_e("invalid",e),UE(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":_e("invalid",e);break;case"textarea":_e("invalid",e),BE(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||Gb(e.textContent,n)?(i.popover!=null&&(_e("beforetoggle",e),_e("toggle",e)),i.onScroll!=null&&_e("scroll",e),i.onScrollEnd!=null&&_e("scrollend",e),i.onClick!=null&&(e.onclick=Pr),e=!0):e=!1,e||Ks(t,!0)}function i0(t){for(Jt=t.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:yi=!1;return;case 27:case 3:yi=!0;return;default:Jt=Jt.return}}function ya(t){if(t!==Jt)return!1;if(!Ae)return i0(t),Ae=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Yp(t.type,t.memoizedProps)),n=!n),n&&rt&&Ks(t),i0(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));rt=H0(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));rt=H0(t)}else e===27?(e=rt,so(t.type)?(t=eg,eg=null,rt=t):rt=e):rt=Jt?Ti(t.stateNode.nextSibling):null;return!0}function Uo(){rt=Jt=null,Ae=!1}function om(){var t=zs;return t!==null&&(On===null?On=t:On.push.apply(On,t),zs=null),t}function Ju(t){zs===null?zs=[t]:zs.push(t)}var Rp=yr(null),ta=null,Lr=null;function Ts(t,e,n){We(Rp,e._currentValue),e._currentValue=n}function jr(t){t._currentValue=Rp.current,Ft(Rp)}function Ip(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Cp(t,e,n,i){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var s=r.dependencies;if(s!==null){var o=r.child;s=s.firstContext;e:for(;s!==null;){var a=s;s=r;for(var c=0;c<e.length;c++)if(a.context===e[c]){s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Ip(s.return,n,t),i||(o=null);break e}s=a.next}}else if(r.tag===18){if(o=r.return,o===null)throw Error(q(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),Ip(o,n,t),o=null}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===t){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}}function wl(t,e,n,i){t=null;for(var r=e,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var o=r.alternate;if(o===null)throw Error(q(387));if(o=o.memoizedProps,o!==null){var a=r.type;ii(r.pendingProps.value,o.value)||(t!==null?t.push(a):t=[a])}}else if(r===af.current){if(o=r.alternate,o===null)throw Error(q(387));o.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(rc):t=[rc])}r=r.return}t!==null&&Cp(e,t,n,i),e.flags|=262144}function pf(t){for(t=t.firstContext;t!==null;){if(!ii(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function jo(t){ta=t,Lr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Wt(t){return cA(ta,t)}function ah(t,e){return ta===null&&jo(t),cA(t,e)}function cA(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Lr===null){if(t===null)throw Error(q(308));Lr=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Lr=Lr.next=e;return n}var jR=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},BR=Lt.unstable_scheduleCallback,FR=Lt.unstable_NormalPriority,Ct={$$typeof:Mr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sy(){return{controller:new jR,data:new Map,refCount:0}}function Sc(t){t.refCount--,t.refCount===0&&BR(FR,function(){t.controller.abort()})}var Cu=null,Np=0,sl=0,Ga=null;function HR(t,e){if(Cu===null){var n=Cu=[];Np=0,sl=xy(),Ga={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Np++,e.then(r0,r0),e}function r0(){if(--Np===0&&Cu!==null){Ga!==null&&(Ga.status="fulfilled");var t=Cu;Cu=null,sl=0,Ga=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function qR(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var s0=le.S;le.S=function(t,e){Sb=Wn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&HR(t,e),s0!==null&&s0(t,e)};var Mo=yr(null);function oy(){var t=Mo.current;return t!==null?t:Ke.pooledCache}function Lh(t,e){e===null?We(Mo,Mo.current):We(Mo,e.pool)}function hA(){var t=oy();return t===null?null:{parent:Ct._currentValue,pool:t}}var Rl=Error(q(460)),ay=Error(q(474)),dd=Error(q(542)),gf={then:function(){}};function o0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function fA(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Pr,Pr),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,l0(t),t;default:if(typeof e.status=="string")e.then(Pr,Pr);else{if(t=Ke,t!==null&&100<t.shellSuspendCounter)throw Error(q(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=i}},function(i){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,l0(t),t}throw Po=e,Rl}}function Ro(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Po=n,Rl):n}}var Po=null;function a0(){if(Po===null)throw Error(q(459));var t=Po;return Po=null,t}function l0(t){if(t===Rl||t===dd)throw Error(q(483))}var $a=null,Wu=0;function lh(t){var e=Wu;return Wu+=1,$a===null&&($a=[]),fA($a,t,e)}function tu(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function uh(t,e){throw e.$$typeof===x2?Error(q(525)):(t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function dA(t){function e(x,k){if(t){var D=x.deletions;D===null?(x.deletions=[k],x.flags|=16):D.push(k)}}function n(x,k){if(!t)return null;for(;k!==null;)e(x,k),k=k.sibling;return null}function i(x){for(var k=new Map;x!==null;)x.key!==null?k.set(x.key,x):k.set(x.index,x),x=x.sibling;return k}function r(x,k){return x=Ur(x,k),x.index=0,x.sibling=null,x}function s(x,k,D){return x.index=D,t?(D=x.alternate,D!==null?(D=D.index,D<k?(x.flags|=67108866,k):D):(x.flags|=67108866,k)):(x.flags|=1048576,k)}function o(x){return t&&x.alternate===null&&(x.flags|=67108866),x}function a(x,k,D,z){return k===null||k.tag!==6?(k=rm(D,x.mode,z),k.return=x,k):(k=r(k,D),k.return=x,k)}function c(x,k,D,z){var F=D.type;return F===Ia?m(x,k,D.props.children,z,D.key):k!==null&&(k.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===ys&&Ro(F)===k.type)?(k=r(k,D.props),tu(k,D),k.return=x,k):(k=Ph(D.type,D.key,D.props,null,x.mode,z),tu(k,D),k.return=x,k)}function h(x,k,D,z){return k===null||k.tag!==4||k.stateNode.containerInfo!==D.containerInfo||k.stateNode.implementation!==D.implementation?(k=sm(D,x.mode,z),k.return=x,k):(k=r(k,D.children||[]),k.return=x,k)}function m(x,k,D,z,F){return k===null||k.tag!==7?(k=Do(D,x.mode,z,F),k.return=x,k):(k=r(k,D),k.return=x,k)}function T(x,k,D){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=rm(""+k,x.mode,D),k.return=x,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case th:return D=Ph(k.type,k.key,k.props,null,x.mode,D),tu(D,k),D.return=x,D;case du:return k=sm(k,x.mode,D),k.return=x,k;case ys:return k=Ro(k),T(x,k,D)}if(mu(k)||Jl(k))return k=Do(k,x.mode,D,null),k.return=x,k;if(typeof k.then=="function")return T(x,lh(k),D);if(k.$$typeof===Mr)return T(x,ah(x,k),D);uh(x,k)}return null}function g(x,k,D,z){var F=k!==null?k.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return F!==null?null:a(x,k,""+D,z);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case th:return D.key===F?c(x,k,D,z):null;case du:return D.key===F?h(x,k,D,z):null;case ys:return D=Ro(D),g(x,k,D,z)}if(mu(D)||Jl(D))return F!==null?null:m(x,k,D,z,null);if(typeof D.then=="function")return g(x,k,lh(D),z);if(D.$$typeof===Mr)return g(x,k,ah(x,D),z);uh(x,D)}return null}function w(x,k,D,z,F){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return x=x.get(D)||null,a(k,x,""+z,F);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case th:return x=x.get(z.key===null?D:z.key)||null,c(k,x,z,F);case du:return x=x.get(z.key===null?D:z.key)||null,h(k,x,z,F);case ys:return z=Ro(z),w(x,k,D,z,F)}if(mu(z)||Jl(z))return x=x.get(D)||null,m(k,x,z,F,null);if(typeof z.then=="function")return w(x,k,D,lh(z),F);if(z.$$typeof===Mr)return w(x,k,D,ah(k,z),F);uh(k,z)}return null}function O(x,k,D,z){for(var F=null,$=null,S=k,p=k=0,y=null;S!==null&&p<D.length;p++){S.index>p?(y=S,S=null):y=S.sibling;var A=g(x,S,D[p],z);if(A===null){S===null&&(S=y);break}t&&S&&A.alternate===null&&e(x,S),k=s(A,k,p),$===null?F=A:$.sibling=A,$=A,S=y}if(p===D.length)return n(x,S),Ae&&Or(x,p),F;if(S===null){for(;p<D.length;p++)S=T(x,D[p],z),S!==null&&(k=s(S,k,p),$===null?F=S:$.sibling=S,$=S);return Ae&&Or(x,p),F}for(S=i(S);p<D.length;p++)y=w(S,x,p,D[p],z),y!==null&&(t&&y.alternate!==null&&S.delete(y.key===null?p:y.key),k=s(y,k,p),$===null?F=y:$.sibling=y,$=y);return t&&S.forEach(function(b){return e(x,b)}),Ae&&Or(x,p),F}function M(x,k,D,z){if(D==null)throw Error(q(151));for(var F=null,$=null,S=k,p=k=0,y=null,A=D.next();S!==null&&!A.done;p++,A=D.next()){S.index>p?(y=S,S=null):y=S.sibling;var b=g(x,S,A.value,z);if(b===null){S===null&&(S=y);break}t&&S&&b.alternate===null&&e(x,S),k=s(b,k,p),$===null?F=b:$.sibling=b,$=b,S=y}if(A.done)return n(x,S),Ae&&Or(x,p),F;if(S===null){for(;!A.done;p++,A=D.next())A=T(x,A.value,z),A!==null&&(k=s(A,k,p),$===null?F=A:$.sibling=A,$=A);return Ae&&Or(x,p),F}for(S=i(S);!A.done;p++,A=D.next())A=w(S,x,p,A.value,z),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?p:A.key),k=s(A,k,p),$===null?F=A:$.sibling=A,$=A);return t&&S.forEach(function(I){return e(x,I)}),Ae&&Or(x,p),F}function L(x,k,D,z){if(typeof D=="object"&&D!==null&&D.type===Ia&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case th:e:{for(var F=D.key;k!==null;){if(k.key===F){if(F=D.type,F===Ia){if(k.tag===7){n(x,k.sibling),z=r(k,D.props.children),z.return=x,x=z;break e}}else if(k.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===ys&&Ro(F)===k.type){n(x,k.sibling),z=r(k,D.props),tu(z,D),z.return=x,x=z;break e}n(x,k);break}else e(x,k);k=k.sibling}D.type===Ia?(z=Do(D.props.children,x.mode,z,D.key),z.return=x,x=z):(z=Ph(D.type,D.key,D.props,null,x.mode,z),tu(z,D),z.return=x,x=z)}return o(x);case du:e:{for(F=D.key;k!==null;){if(k.key===F)if(k.tag===4&&k.stateNode.containerInfo===D.containerInfo&&k.stateNode.implementation===D.implementation){n(x,k.sibling),z=r(k,D.children||[]),z.return=x,x=z;break e}else{n(x,k);break}else e(x,k);k=k.sibling}z=sm(D,x.mode,z),z.return=x,x=z}return o(x);case ys:return D=Ro(D),L(x,k,D,z)}if(mu(D))return O(x,k,D,z);if(Jl(D)){if(F=Jl(D),typeof F!="function")throw Error(q(150));return D=F.call(D),M(x,k,D,z)}if(typeof D.then=="function")return L(x,k,lh(D),z);if(D.$$typeof===Mr)return L(x,k,ah(x,D),z);uh(x,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,k!==null&&k.tag===6?(n(x,k.sibling),z=r(k,D),z.return=x,x=z):(n(x,k),z=rm(D,x.mode,z),z.return=x,x=z),o(x)):n(x,k)}return function(x,k,D,z){try{Wu=0;var F=L(x,k,D,z);return $a=null,F}catch(S){if(S===Rl||S===dd)throw S;var $=Qn(29,S,null,x.mode);return $.lanes=z,$.return=x,$}finally{}}}var Bo=dA(!0),mA=dA(!1),_s=!1;function ly(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Vs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Us(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Pe&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=df(t),sA(t,null,n),e}return fd(t,i,e,n),df(t)}function Nu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,OE(t,n)}}function am(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var kp=!1;function xu(){if(kp){var t=Ga;if(t!==null)throw t}}function ku(t,e,n,i){kp=!1;var r=t.updateQueue;_s=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var c=a,h=c.next;c.next=null,o===null?s=h:o.next=h,o=c;var m=t.alternate;m!==null&&(m=m.updateQueue,a=m.lastBaseUpdate,a!==o&&(a===null?m.firstBaseUpdate=h:a.next=h,m.lastBaseUpdate=c))}if(s!==null){var T=r.baseState;o=0,m=h=c=null,a=s;do{var g=a.lane&-536870913,w=g!==a.lane;if(w?(Ee&g)===g:(i&g)===g){g!==0&&g===sl&&(kp=!0),m!==null&&(m=m.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var O=t,M=a;g=e;var L=n;switch(M.tag){case 1:if(O=M.payload,typeof O=="function"){T=O.call(L,T,g);break e}T=O;break e;case 3:O.flags=O.flags&-65537|128;case 0:if(O=M.payload,g=typeof O=="function"?O.call(L,T,g):O,g==null)break e;T=st({},T,g);break e;case 2:_s=!0}}g=a.callback,g!==null&&(t.flags|=64,w&&(t.flags|=8192),w=r.callbacks,w===null?r.callbacks=[g]:w.push(g))}else w={lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},m===null?(h=m=w,c=T):m=m.next=w,o|=g;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;w=a,a=w.next,w.next=null,r.lastBaseUpdate=w,r.shared.pending=null}}while(!0);m===null&&(c=T),r.baseState=c,r.firstBaseUpdate=h,r.lastBaseUpdate=m,s===null&&(r.shared.lanes=0),Ys|=o,t.lanes=o,t.memoizedState=T}}function pA(t,e){if(typeof t!="function")throw Error(q(191,t));t.call(e)}function gA(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)pA(n[t],e)}var ol=yr(null),yf=yr(0);function u0(t,e){t=Zr,We(yf,t),We(ol,e),Zr=t|e.baseLanes}function Op(){We(yf,Zr),We(ol,ol.current)}function uy(){Zr=yf.current,Ft(ol),Ft(yf)}var ri=yr(null),vi=null;function Es(t){var e=t.alternate;We(At,At.current&1),We(ri,t),vi===null&&(e===null||ol.current!==null||e.memoizedState!==null)&&(vi=t)}function Dp(t){We(At,At.current),We(ri,t),vi===null&&(vi=t)}function yA(t){t.tag===22?(We(At,At.current),We(ri,t),vi===null&&(vi=t)):As()}function As(){We(At,At.current),We(ri,ri.current)}function Yn(t){Ft(ri),vi===t&&(vi=null),Ft(At)}var At=yr(0);function _f(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Jp(n)||Wp(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qr=0,fe=null,$e=null,Rt=null,vf=!1,Za=!1,Fo=!1,Tf=0,ec=0,Ka=null,GR=0;function ft(){throw Error(q(321))}function cy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ii(t[n],e[n]))return!1;return!0}function hy(t,e,n,i,r,s){return qr=s,fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,le.H=t===null||t.memoizedState===null?KA:Ay,Fo=!1,s=n(i,r),Fo=!1,Za&&(s=vA(e,n,i,r)),_A(t),s}function _A(t){le.H=tc;var e=$e!==null&&$e.next!==null;if(qr=0,Rt=$e=fe=null,vf=!1,ec=0,Ka=null,e)throw Error(q(300));t===null||Nt||(t=t.dependencies,t!==null&&pf(t)&&(Nt=!0))}function vA(t,e,n,i){fe=t;var r=0;do{if(Za&&(Ka=null),ec=0,Za=!1,25<=r)throw Error(q(301));if(r+=1,Rt=$e=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}le.H=XA,s=e(n,i)}while(Za);return s}function $R(){var t=le.H,e=t.useState()[0];return e=typeof e.then=="function"?wc(e):e,t=t.useState()[0],($e!==null?$e.memoizedState:null)!==t&&(fe.flags|=1024),e}function fy(){var t=Tf!==0;return Tf=0,t}function dy(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function my(t){if(vf){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}vf=!1}qr=0,Rt=$e=fe=null,Za=!1,ec=Tf=0,Ka=null}function gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?fe.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function bt(){if($e===null){var t=fe.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=Rt===null?fe.memoizedState:Rt.next;if(e!==null)Rt=e,$e=t;else{if(t===null)throw fe.alternate===null?Error(q(467)):Error(q(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Rt===null?fe.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function md(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wc(t){var e=ec;return ec+=1,Ka===null&&(Ka=[]),t=fA(Ka,t,e),e=fe,(Rt===null?e.memoizedState:Rt.next)===null&&(e=e.alternate,le.H=e===null||e.memoizedState===null?KA:Ay),t}function pd(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return wc(t);if(t.$$typeof===Mr)return Wt(t)}throw Error(q(438,String(t)))}function py(t){var e=null,n=fe.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=fe.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=md(),fe.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=k2;return e.index++,n}function Gr(t,e){return typeof e=="function"?e(t):e}function zh(t){var e=bt();return gy(e,$e,t)}function gy(t,e,n){var i=t.queue;if(i===null)throw Error(q(311));i.lastRenderedReducer=n;var r=t.baseQueue,s=i.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}e.baseQueue=r=s,i.pending=null}if(s=t.baseState,r===null)t.memoizedState=s;else{e=r.next;var a=o=null,c=null,h=e,m=!1;do{var T=h.lane&-536870913;if(T!==h.lane?(Ee&T)===T:(qr&T)===T){var g=h.revertLane;if(g===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),T===sl&&(m=!0);else if((qr&g)===g){h=h.next,g===sl&&(m=!0);continue}else T={lane:0,revertLane:h.revertLane,gesture:null,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},c===null?(a=c=T,o=s):c=c.next=T,fe.lanes|=g,Ys|=g;T=h.action,Fo&&n(s,T),s=h.hasEagerState?h.eagerState:n(s,T)}else g={lane:T,revertLane:h.revertLane,gesture:h.gesture,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},c===null?(a=c=g,o=s):c=c.next=g,fe.lanes|=T,Ys|=T;h=h.next}while(h!==null&&h!==e);if(c===null?o=s:c.next=a,!ii(s,t.memoizedState)&&(Nt=!0,m&&(n=Ga,n!==null)))throw n;t.memoizedState=s,t.baseState=o,t.baseQueue=c,i.lastRenderedState=s}return r===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function lm(t){var e=bt(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);ii(s,e.memoizedState)||(Nt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function TA(t,e,n){var i=fe,r=bt(),s=Ae;if(s){if(n===void 0)throw Error(q(407));n=n()}else n=e();var o=!ii(($e||r).memoizedState,n);if(o&&(r.memoizedState=n,Nt=!0),r=r.queue,yy(bA.bind(null,i,r,t),[t]),r.getSnapshot!==e||o||Rt!==null&&Rt.memoizedState.tag&1){if(i.flags|=2048,al(9,{destroy:void 0},AA.bind(null,i,r,n,e),null),Ke===null)throw Error(q(349));s||qr&127||EA(i,e,n)}return n}function EA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=fe.updateQueue,e===null?(e=md(),fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function AA(t,e,n,i){e.value=n,e.getSnapshot=i,SA(e)&&wA(t)}function bA(t,e,n){return n(function(){SA(e)&&wA(t)})}function SA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ii(t,n)}catch{return!0}}function wA(t){var e=ea(t,2);e!==null&&Pn(e,t,2)}function Mp(t){var e=gn();if(typeof t=="function"){var n=t;if(t=n(),Fo){Ns(!0);try{n()}finally{Ns(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:t},e}function RA(t,e,n,i){return t.baseState=n,gy(t,$e,typeof i=="function"?i:Gr)}function ZR(t,e,n,i,r){if(yd(t))throw Error(q(485));if(t=e.action,t!==null){var s={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){s.listeners.push(o)}};le.T!==null?n(!0):s.isTransition=!1,i(s),n=e.pending,n===null?(s.next=e.pending=s,IA(e,s)):(s.next=n.next,e.pending=n.next=s)}}function IA(t,e){var n=e.action,i=e.payload,r=t.state;if(e.isTransition){var s=le.T,o={};le.T=o;try{var a=n(r,i),c=le.S;c!==null&&c(o,a),c0(t,e,a)}catch(h){Pp(t,e,h)}finally{s!==null&&o.types!==null&&(s.types=o.types),le.T=s}}else try{s=n(r,i),c0(t,e,s)}catch(h){Pp(t,e,h)}}function c0(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){h0(t,e,i)},function(i){return Pp(t,e,i)}):h0(t,e,n)}function h0(t,e,n){e.status="fulfilled",e.value=n,CA(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,IA(t,n)))}function Pp(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,CA(e),e=e.next;while(e!==i)}t.action=null}function CA(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function NA(t,e){return e}function f0(t,e){if(Ae){var n=Ke.formState;if(n!==null){e:{var i=fe;if(Ae){if(rt){t:{for(var r=rt,s=yi;r.nodeType!==8;){if(!s){r=null;break t}if(r=Ti(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){rt=Ti(r.nextSibling),i=r.data==="F!";break e}}Ks(i)}i=!1}i&&(e=n[0])}}return n=gn(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:NA,lastRenderedState:e},n.queue=i,n=GA.bind(null,fe,i),i.dispatch=n,i=Mp(!1),s=Ey.bind(null,fe,!1,i.queue),i=gn(),r={state:e,dispatch:null,action:t,pending:null},i.queue=r,n=ZR.bind(null,fe,r,s,n),r.dispatch=n,i.memoizedState=t,[e,n,!1]}function d0(t){var e=bt();return xA(e,$e,t)}function xA(t,e,n){if(e=gy(t,e,NA)[0],t=zh(Gr)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=wc(e)}catch(o){throw o===Rl?dd:o}else i=e;e=bt();var r=e.queue,s=r.dispatch;return n!==e.memoizedState&&(fe.flags|=2048,al(9,{destroy:void 0},KR.bind(null,r,n),null)),[i,s,t]}function KR(t,e){t.action=e}function m0(t){var e=bt(),n=$e;if(n!==null)return xA(e,n,t);bt(),e=e.memoizedState,n=bt();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function al(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=fe.updateQueue,e===null&&(e=md(),fe.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function kA(){return bt().memoizedState}function Vh(t,e,n,i){var r=gn();fe.flags|=t,r.memoizedState=al(1|e,{destroy:void 0},n,i===void 0?null:i)}function gd(t,e,n,i){var r=bt();i=i===void 0?null:i;var s=r.memoizedState.inst;$e!==null&&i!==null&&cy(i,$e.memoizedState.deps)?r.memoizedState=al(e,s,n,i):(fe.flags|=t,r.memoizedState=al(1|e,s,n,i))}function p0(t,e){Vh(8390656,8,t,e)}function yy(t,e){gd(2048,8,t,e)}function XR(t){fe.flags|=4;var e=fe.updateQueue;if(e===null)e=md(),fe.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function OA(t){var e=bt().memoizedState;return XR({ref:e,nextImpl:t}),function(){if(Pe&2)throw Error(q(440));return e.impl.apply(void 0,arguments)}}function DA(t,e){return gd(4,2,t,e)}function MA(t,e){return gd(4,4,t,e)}function PA(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function LA(t,e,n){n=n!=null?n.concat([t]):null,gd(4,4,PA.bind(null,e,t),n)}function _y(){}function zA(t,e){var n=bt();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&cy(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function VA(t,e){var n=bt();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&cy(e,i[1]))return i[0];if(i=t(),Fo){Ns(!0);try{t()}finally{Ns(!1)}}return n.memoizedState=[i,e],i}function vy(t,e,n){return n===void 0||qr&1073741824&&!(Ee&261930)?t.memoizedState=e:(t.memoizedState=n,t=Rb(),fe.lanes|=t,Ys|=t,n)}function UA(t,e,n,i){return ii(n,e)?n:ol.current!==null?(t=vy(t,n,i),ii(t,e)||(Nt=!0),t):!(qr&42)||qr&1073741824&&!(Ee&261930)?(Nt=!0,t.memoizedState=n):(t=Rb(),fe.lanes|=t,Ys|=t,e)}function jA(t,e,n,i,r){var s=Le.p;Le.p=s!==0&&8>s?s:8;var o=le.T,a={};le.T=a,Ey(t,!1,e,n);try{var c=r(),h=le.S;if(h!==null&&h(a,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var m=qR(c,i);Ou(t,e,m,ni(t))}else Ou(t,e,i,ni(t))}catch(T){Ou(t,e,{then:function(){},status:"rejected",reason:T},ni())}finally{Le.p=s,o!==null&&a.types!==null&&(o.types=a.types),le.T=o}}function YR(){}function Lp(t,e,n,i){if(t.tag!==5)throw Error(q(476));var r=BA(t).queue;jA(t,r,e,Oo,n===null?YR:function(){return FA(t),n(i)})}function BA(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Oo,baseState:Oo,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:Oo},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function FA(t){var e=BA(t);e.next===null&&(e=t.alternate.memoizedState),Ou(t,e.next.queue,{},ni())}function Ty(){return Wt(rc)}function HA(){return bt().memoizedState}function qA(){return bt().memoizedState}function QR(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=ni();t=Vs(n);var i=Us(e,t,n);i!==null&&(Pn(i,e,n),Nu(i,e,n)),e={cache:sy()},t.payload=e;return}e=e.return}}function JR(t,e,n){var i=ni();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},yd(t)?$A(e,n):(n=ty(t,e,n,i),n!==null&&(Pn(n,t,i),ZA(n,e,i)))}function GA(t,e,n){var i=ni();Ou(t,e,n,i)}function Ou(t,e,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(yd(t))$A(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ii(a,o))return fd(t,e,r,0),Ke===null&&hd(),!1}catch{}finally{}if(n=ty(t,e,r,i),n!==null)return Pn(n,t,i),ZA(n,e,i),!0}return!1}function Ey(t,e,n,i){if(i={lane:2,revertLane:xy(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},yd(t)){if(e)throw Error(q(479))}else e=ty(t,n,i,2),e!==null&&Pn(e,t,2)}function yd(t){var e=t.alternate;return t===fe||e!==null&&e===fe}function $A(t,e){Za=vf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ZA(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,OE(t,n)}}var tc={readContext:Wt,use:pd,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useLayoutEffect:ft,useInsertionEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useSyncExternalStore:ft,useId:ft,useHostTransitionStatus:ft,useFormState:ft,useActionState:ft,useOptimistic:ft,useMemoCache:ft,useCacheRefresh:ft};tc.useEffectEvent=ft;var KA={readContext:Wt,use:pd,useCallback:function(t,e){return gn().memoizedState=[t,e===void 0?null:e],t},useContext:Wt,useEffect:p0,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Vh(4194308,4,PA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Vh(4194308,4,t,e)},useInsertionEffect:function(t,e){Vh(4,2,t,e)},useMemo:function(t,e){var n=gn();e=e===void 0?null:e;var i=t();if(Fo){Ns(!0);try{t()}finally{Ns(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=gn();if(n!==void 0){var r=n(e);if(Fo){Ns(!0);try{n(e)}finally{Ns(!1)}}}else r=e;return i.memoizedState=i.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},i.queue=t,t=t.dispatch=JR.bind(null,fe,t),[i.memoizedState,t]},useRef:function(t){var e=gn();return t={current:t},e.memoizedState=t},useState:function(t){t=Mp(t);var e=t.queue,n=GA.bind(null,fe,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:_y,useDeferredValue:function(t,e){var n=gn();return vy(n,t,e)},useTransition:function(){var t=Mp(!1);return t=jA.bind(null,fe,t.queue,!0,!1),gn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=fe,r=gn();if(Ae){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),Ke===null)throw Error(q(349));Ee&127||EA(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,p0(bA.bind(null,i,s,t),[t]),i.flags|=2048,al(9,{destroy:void 0},AA.bind(null,i,s,n,e),null),n},useId:function(){var t=gn(),e=Ke.identifierPrefix;if(Ae){var n=lr,i=ar;n=(i&~(1<<32-ti(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Tf++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=GR++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:Ty,useFormState:f0,useActionState:f0,useOptimistic:function(t){var e=gn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Ey.bind(null,fe,!0,n),n.dispatch=e,[t,e]},useMemoCache:py,useCacheRefresh:function(){return gn().memoizedState=QR.bind(null,fe)},useEffectEvent:function(t){var e=gn(),n={impl:t};return e.memoizedState=n,function(){if(Pe&2)throw Error(q(440));return n.impl.apply(void 0,arguments)}}},Ay={readContext:Wt,use:pd,useCallback:zA,useContext:Wt,useEffect:yy,useImperativeHandle:LA,useInsertionEffect:DA,useLayoutEffect:MA,useMemo:VA,useReducer:zh,useRef:kA,useState:function(){return zh(Gr)},useDebugValue:_y,useDeferredValue:function(t,e){var n=bt();return UA(n,$e.memoizedState,t,e)},useTransition:function(){var t=zh(Gr)[0],e=bt().memoizedState;return[typeof t=="boolean"?t:wc(t),e]},useSyncExternalStore:TA,useId:HA,useHostTransitionStatus:Ty,useFormState:d0,useActionState:d0,useOptimistic:function(t,e){var n=bt();return RA(n,$e,t,e)},useMemoCache:py,useCacheRefresh:qA};Ay.useEffectEvent=OA;var XA={readContext:Wt,use:pd,useCallback:zA,useContext:Wt,useEffect:yy,useImperativeHandle:LA,useInsertionEffect:DA,useLayoutEffect:MA,useMemo:VA,useReducer:lm,useRef:kA,useState:function(){return lm(Gr)},useDebugValue:_y,useDeferredValue:function(t,e){var n=bt();return $e===null?vy(n,t,e):UA(n,$e.memoizedState,t,e)},useTransition:function(){var t=lm(Gr)[0],e=bt().memoizedState;return[typeof t=="boolean"?t:wc(t),e]},useSyncExternalStore:TA,useId:HA,useHostTransitionStatus:Ty,useFormState:m0,useActionState:m0,useOptimistic:function(t,e){var n=bt();return $e!==null?RA(n,$e,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:py,useCacheRefresh:qA};XA.useEffectEvent=OA;function um(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:st({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zp={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ni(),r=Vs(i);r.payload=e,n!=null&&(r.callback=n),e=Us(t,r,i),e!==null&&(Pn(e,t,i),Nu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ni(),r=Vs(i);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Us(t,r,i),e!==null&&(Pn(e,t,i),Nu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ni(),i=Vs(n);i.tag=2,e!=null&&(i.callback=e),e=Us(t,i,n),e!==null&&(Pn(e,t,n),Nu(e,t,n))}};function g0(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Yu(n,i)||!Yu(r,s):!0}function y0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&zp.enqueueReplaceState(e,e.state,null)}function Ho(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=st({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}function YA(t){ff(t)}function QA(t){console.error(t)}function JA(t){ff(t)}function Ef(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function _0(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Vp(t,e,n){return n=Vs(n),n.tag=3,n.payload={element:null},n.callback=function(){Ef(t,e)},n}function WA(t){return t=Vs(t),t.tag=3,t}function eb(t,e,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;t.payload=function(){return r(s)},t.callback=function(){_0(e,n,i)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){_0(e,n,i),typeof r!="function"&&(js===null?js=new Set([this]):js.add(this));var a=i.stack;this.componentDidCatch(i.value,{componentStack:a!==null?a:""})})}function WR(t,e,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&wl(e,n,r,!0),n=ri.current,n!==null){switch(n.tag){case 31:case 13:return vi===null?Rf():n.alternate===null&&dt===0&&(dt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===gf?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Tm(t,i,r)),!1;case 22:return n.flags|=65536,i===gf?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Tm(t,i,r)),!1}throw Error(q(435,n.tag))}return Tm(t,i,r),Rf(),!1}if(Ae)return e=ri.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==wp&&(t=Error(q(422),{cause:i}),Ju(gi(t,n)))):(i!==wp&&(e=Error(q(423),{cause:i}),Ju(gi(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,i=gi(i,n),r=Vp(t.stateNode,i,r),am(t,r),dt!==4&&(dt=2)),!1;var s=Error(q(520),{cause:i});if(s=gi(s,n),Pu===null?Pu=[s]:Pu.push(s),dt!==4&&(dt=2),e===null)return!0;i=gi(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=Vp(n.stateNode,i,t),am(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(js===null||!js.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=WA(r),eb(r,t,n,i),am(n,r),!1}n=n.return}while(n!==null);return!1}var by=Error(q(461)),Nt=!1;function Kt(t,e,n,i){e.child=t===null?mA(e,null,n,i):Bo(e,t.child,n,i)}function v0(t,e,n,i,r){n=n.render;var s=e.ref;if("ref"in i){var o={};for(var a in i)a!=="ref"&&(o[a]=i[a])}else o=i;return jo(e),i=hy(t,e,n,o,s,r),a=fy(),t!==null&&!Nt?(dy(t,e,r),$r(t,e,r)):(Ae&&a&&iy(e),e.flags|=1,Kt(t,e,i,r),e.child)}function T0(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!ny(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,tb(t,e,s,i,r)):(t=Ph(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!Sy(t,r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Yu,n(o,i)&&t.ref===e.ref)return $r(t,e,r)}return e.flags|=1,t=Ur(s,i),t.ref=e.ref,t.return=e,e.child=t}function tb(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Yu(s,i)&&t.ref===e.ref)if(Nt=!1,e.pendingProps=i=s,Sy(t,r))t.flags&131072&&(Nt=!0);else return e.lanes=t.lanes,$r(t,e,r)}return Up(t,e,n,i,r)}function nb(t,e,n,i){var r=i.children,s=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(s=s!==null?s.baseLanes|n:n,t!==null){for(i=e.child=t.child,r=0;i!==null;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~s}else i=0,e.child=null;return E0(t,e,s,n,i)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Lh(e,s!==null?s.cachePool:null),s!==null?u0(e,s):Op(),yA(e);else return i=e.lanes=536870912,E0(t,e,s!==null?s.baseLanes|n:n,n,i)}else s!==null?(Lh(e,s.cachePool),u0(e,s),As(),e.memoizedState=null):(t!==null&&Lh(e,null),Op(),As());return Kt(t,e,r,n),e.child}function gu(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function E0(t,e,n,i,r){var s=oy();return s=s===null?null:{parent:Ct._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&Lh(e,null),Op(),yA(e),t!==null&&wl(t,e,i,!0),e.childLanes=r,null}function Uh(t,e){return e=Af({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function A0(t,e,n){return Bo(e,t.child,null,n),t=Uh(e,e.pendingProps),t.flags|=2,Yn(e),e.memoizedState=null,t}function eI(t,e,n){var i=e.pendingProps,r=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(Ae){if(i.mode==="hidden")return t=Uh(e,i),e.lanes=536870912,gu(null,t);if(Dp(e),(t=rt)?(t=Kb(t,yi),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Zs!==null?{id:ar,overflow:lr}:null,retryLane:536870912,hydrationErrors:null},n=aA(t),n.return=e,e.child=n,Jt=e,rt=null)):t=null,t===null)throw Ks(e);return e.lanes=536870912,null}return Uh(e,i)}var s=t.memoizedState;if(s!==null){var o=s.dehydrated;if(Dp(e),r)if(e.flags&256)e.flags&=-257,e=A0(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(q(558));else if(Nt||wl(t,e,n,!1),r=(n&t.childLanes)!==0,Nt||r){if(i=Ke,i!==null&&(o=DE(i,n),o!==0&&o!==s.retryLane))throw s.retryLane=o,ea(t,o),Pn(i,t,o),by;Rf(),e=A0(t,e,n)}else t=s.treeContext,rt=Ti(o.nextSibling),Jt=e,Ae=!0,zs=null,yi=!1,t!==null&&uA(e,t),e=Uh(e,i),e.flags|=4096;return e}return t=Ur(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function jh(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(q(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Up(t,e,n,i,r){return jo(e),n=hy(t,e,n,i,void 0,r),i=fy(),t!==null&&!Nt?(dy(t,e,r),$r(t,e,r)):(Ae&&i&&iy(e),e.flags|=1,Kt(t,e,n,r),e.child)}function b0(t,e,n,i,r,s){return jo(e),e.updateQueue=null,n=vA(e,i,n,r),_A(t),i=fy(),t!==null&&!Nt?(dy(t,e,s),$r(t,e,s)):(Ae&&i&&iy(e),e.flags|=1,Kt(t,e,n,s),e.child)}function S0(t,e,n,i,r){if(jo(e),e.stateNode===null){var s=Pa,o=n.contextType;typeof o=="object"&&o!==null&&(s=Wt(o)),s=new n(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=zp,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},ly(e),o=n.contextType,s.context=typeof o=="object"&&o!==null?Wt(o):Pa,s.state=e.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(um(e,n,o,i),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(o=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),o!==s.state&&zp.enqueueReplaceState(s,s.state,null),ku(e,i,s,r),xu(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){s=e.stateNode;var a=e.memoizedProps,c=Ho(n,a);s.props=c;var h=s.context,m=n.contextType;o=Pa,typeof m=="object"&&m!==null&&(o=Wt(m));var T=n.getDerivedStateFromProps;m=typeof T=="function"||typeof s.getSnapshotBeforeUpdate=="function",a=e.pendingProps!==a,m||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a||h!==o)&&y0(e,s,i,o),_s=!1;var g=e.memoizedState;s.state=g,ku(e,i,s,r),xu(),h=e.memoizedState,a||g!==h||_s?(typeof T=="function"&&(um(e,n,T,i),h=e.memoizedState),(c=_s||g0(e,n,c,i,g,h,o))?(m||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),s.props=i,s.state=h,s.context=o,i=c):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,xp(t,e),o=e.memoizedProps,m=Ho(n,o),s.props=m,T=e.pendingProps,g=s.context,h=n.contextType,c=Pa,typeof h=="object"&&h!==null&&(c=Wt(h)),a=n.getDerivedStateFromProps,(h=typeof a=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==T||g!==c)&&y0(e,s,i,c),_s=!1,g=e.memoizedState,s.state=g,ku(e,i,s,r),xu();var w=e.memoizedState;o!==T||g!==w||_s||t!==null&&t.dependencies!==null&&pf(t.dependencies)?(typeof a=="function"&&(um(e,n,a,i),w=e.memoizedState),(m=_s||g0(e,n,m,i,g,w,c)||t!==null&&t.dependencies!==null&&pf(t.dependencies))?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,w,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,w,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=w),s.props=i,s.state=w,s.context=c,i=m):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),i=!1)}return s=i,jh(t,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&i?(e.child=Bo(e,t.child,null,r),e.child=Bo(e,null,n,r)):Kt(t,e,n,r),e.memoizedState=s.state,t=e.child):t=$r(t,e,r),t}function w0(t,e,n,i){return Uo(),e.flags|=256,Kt(t,e,n,i),e.child}var cm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hm(t){return{baseLanes:t,cachePool:hA()}}function fm(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Jn),t}function ib(t,e,n){var i=e.pendingProps,r=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=t!==null&&t.memoizedState===null?!1:(At.current&2)!==0),o&&(r=!0,e.flags&=-129),o=(e.flags&32)!==0,e.flags&=-33,t===null){if(Ae){if(r?Es(e):As(),(t=rt)?(t=Kb(t,yi),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Zs!==null?{id:ar,overflow:lr}:null,retryLane:536870912,hydrationErrors:null},n=aA(t),n.return=e,e.child=n,Jt=e,rt=null)):t=null,t===null)throw Ks(e);return Wp(t)?e.lanes=32:e.lanes=536870912,null}var a=i.children;return i=i.fallback,r?(As(),r=e.mode,a=Af({mode:"hidden",children:a},r),i=Do(i,r,n,null),a.return=e,i.return=e,a.sibling=i,e.child=a,i=e.child,i.memoizedState=hm(n),i.childLanes=fm(t,o,n),e.memoizedState=cm,gu(null,i)):(Es(e),jp(e,a))}var c=t.memoizedState;if(c!==null&&(a=c.dehydrated,a!==null)){if(s)e.flags&256?(Es(e),e.flags&=-257,e=dm(t,e,n)):e.memoizedState!==null?(As(),e.child=t.child,e.flags|=128,e=null):(As(),a=i.fallback,r=e.mode,i=Af({mode:"visible",children:i.children},r),a=Do(a,r,n,null),a.flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,Bo(e,t.child,null,n),i=e.child,i.memoizedState=hm(n),i.childLanes=fm(t,o,n),e.memoizedState=cm,e=gu(null,i));else if(Es(e),Wp(a)){if(o=a.nextSibling&&a.nextSibling.dataset,o)var h=o.dgst;o=h,i=Error(q(419)),i.stack="",i.digest=o,Ju({value:i,source:null,stack:null}),e=dm(t,e,n)}else if(Nt||wl(t,e,n,!1),o=(n&t.childLanes)!==0,Nt||o){if(o=Ke,o!==null&&(i=DE(o,n),i!==0&&i!==c.retryLane))throw c.retryLane=i,ea(t,i),Pn(o,t,i),by;Jp(a)||Rf(),e=dm(t,e,n)}else Jp(a)?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,rt=Ti(a.nextSibling),Jt=e,Ae=!0,zs=null,yi=!1,t!==null&&uA(e,t),e=jp(e,i.children),e.flags|=4096);return e}return r?(As(),a=i.fallback,r=e.mode,c=t.child,h=c.sibling,i=Ur(c,{mode:"hidden",children:i.children}),i.subtreeFlags=c.subtreeFlags&65011712,h!==null?a=Ur(h,a):(a=Do(a,r,n,null),a.flags|=2),a.return=e,i.return=e,i.sibling=a,e.child=i,gu(null,i),i=e.child,a=t.child.memoizedState,a===null?a=hm(n):(r=a.cachePool,r!==null?(c=Ct._currentValue,r=r.parent!==c?{parent:c,pool:c}:r):r=hA(),a={baseLanes:a.baseLanes|n,cachePool:r}),i.memoizedState=a,i.childLanes=fm(t,o,n),e.memoizedState=cm,gu(t.child,i)):(Es(e),n=t.child,t=n.sibling,n=Ur(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(o=e.deletions,o===null?(e.deletions=[t],e.flags|=16):o.push(t)),e.child=n,e.memoizedState=null,n)}function jp(t,e){return e=Af({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Af(t,e){return t=Qn(22,t,null,e),t.lanes=0,t}function dm(t,e,n){return Bo(e,t.child,null,n),t=jp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function R0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Ip(t.return,e,n)}function mm(t,e,n,i,r,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r,o.treeForkCount=s)}function rb(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;i=i.children;var o=At.current,a=(o&2)!==0;if(a?(o=o&1|2,e.flags|=128):o&=1,We(At,o),Kt(t,e,i,n),i=Ae?Qu:0,!a&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&R0(t,n,e);else if(t.tag===19)R0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&_f(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),mm(e,!1,r,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&_f(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}mm(e,!0,n,null,s,i);break;case"together":mm(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function $r(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ys|=e.lanes,!(n&e.childLanes))if(t!==null){if(wl(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=Ur(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ur(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Sy(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&pf(t)))}function tI(t,e,n){switch(e.tag){case 3:lf(e,e.stateNode.containerInfo),Ts(e,Ct,t.memoizedState.cache),Uo();break;case 27:case 5:mp(e);break;case 4:lf(e,e.stateNode.containerInfo);break;case 10:Ts(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Dp(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(Es(e),e.flags|=128,null):n&e.child.childLanes?ib(t,e,n):(Es(e),t=$r(t,e,n),t!==null?t.sibling:null);Es(e);break;case 19:var r=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(wl(t,e,n,!1),i=(n&e.childLanes)!==0),r){if(i)return rb(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),We(At,At.current),i)break;return null;case 22:return e.lanes=0,nb(t,e,n,e.pendingProps);case 24:Ts(e,Ct,t.memoizedState.cache)}return $r(t,e,n)}function sb(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Nt=!0;else{if(!Sy(t,n)&&!(e.flags&128))return Nt=!1,tI(t,e,n);Nt=!!(t.flags&131072)}else Nt=!1,Ae&&e.flags&1048576&&lA(e,Qu,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=Ro(e.elementType),e.type=t,typeof t=="function")ny(t)?(i=Ho(t,i),e.tag=1,e=S0(null,e,t,i,n)):(e.tag=0,e=Up(null,e,t,i,n));else{if(t!=null){var r=t.$$typeof;if(r===Fg){e.tag=11,e=v0(null,e,t,i,n);break e}else if(r===Hg){e.tag=14,e=T0(null,e,t,i,n);break e}}throw e=fp(t)||t,Error(q(306,e,""))}}return e;case 0:return Up(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,r=Ho(i,e.pendingProps),S0(t,e,i,r,n);case 3:e:{if(lf(e,e.stateNode.containerInfo),t===null)throw Error(q(387));i=e.pendingProps;var s=e.memoizedState;r=s.element,xp(t,e),ku(e,i,null,n);var o=e.memoizedState;if(i=o.cache,Ts(e,Ct,i),i!==s.cache&&Cp(e,[Ct],n,!0),xu(),i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=w0(t,e,i,n);break e}else if(i!==r){r=gi(Error(q(424)),e),Ju(r),e=w0(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(rt=Ti(t.firstChild),Jt=e,Ae=!0,zs=null,yi=!0,n=mA(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Uo(),i===r){e=$r(t,e,n);break e}Kt(t,e,i,n)}e=e.child}return e;case 26:return jh(t,e),t===null?(n=$0(e.type,null,e.pendingProps,null))?e.memoizedState=n:Ae||(n=e.type,t=e.pendingProps,i=xf(Ls.current).createElement(n),i[Qt]=e,i[zn]=t,en(i,n,t),Bt(i),e.stateNode=i):e.memoizedState=$0(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return mp(e),t===null&&Ae&&(i=e.stateNode=Xb(e.type,e.pendingProps,Ls.current),Jt=e,yi=!0,r=rt,so(e.type)?(eg=r,rt=Ti(i.firstChild)):rt=r),Kt(t,e,e.pendingProps.children,n),jh(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Ae&&((r=i=rt)&&(i=kI(i,e.type,e.pendingProps,yi),i!==null?(e.stateNode=i,Jt=e,rt=Ti(i.firstChild),yi=!1,r=!0):r=!1),r||Ks(e)),mp(e),r=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,i=s.children,Yp(r,s)?i=null:o!==null&&Yp(r,o)&&(e.flags|=32),e.memoizedState!==null&&(r=hy(t,e,$R,null,null,n),rc._currentValue=r),jh(t,e),Kt(t,e,i,n),e.child;case 6:return t===null&&Ae&&((t=n=rt)&&(n=OI(n,e.pendingProps,yi),n!==null?(e.stateNode=n,Jt=e,rt=null,t=!0):t=!1),t||Ks(e)),null;case 13:return ib(t,e,n);case 4:return lf(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Bo(e,null,i,n):Kt(t,e,i,n),e.child;case 11:return v0(t,e,e.type,e.pendingProps,n);case 7:return Kt(t,e,e.pendingProps,n),e.child;case 8:return Kt(t,e,e.pendingProps.children,n),e.child;case 12:return Kt(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,Ts(e,e.type,i.value),Kt(t,e,i.children,n),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,jo(e),r=Wt(r),i=i(r),e.flags|=1,Kt(t,e,i,n),e.child;case 14:return T0(t,e,e.type,e.pendingProps,n);case 15:return tb(t,e,e.type,e.pendingProps,n);case 19:return rb(t,e,n);case 31:return eI(t,e,n);case 22:return nb(t,e,n,e.pendingProps);case 24:return jo(e),i=Wt(Ct),t===null?(r=oy(),r===null&&(r=Ke,s=sy(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),e.memoizedState={parent:i,cache:r},ly(e),Ts(e,Ct,r)):(t.lanes&n&&(xp(t,e),ku(e,null,null,n),xu()),r=t.memoizedState,s=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),Ts(e,Ct,i)):(i=s.cache,Ts(e,Ct,i),i!==r.cache&&Cp(e,[Ct],n,!0))),Kt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(q(156,e.tag))}function Ir(t){t.flags|=4}function pm(t,e,n,i,r){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(r&335544128)===r)if(t.stateNode.complete)t.flags|=8192;else if(Nb())t.flags|=8192;else throw Po=gf,ay}else t.flags&=-16777217}function I0(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!Jb(e))if(Nb())t.flags|=8192;else throw Po=gf,ay}function ch(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?xE():536870912,t.lanes|=e,ll|=e)}function nu(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function it(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function nI(t,e,n){var i=e.pendingProps;switch(ry(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(e),null;case 1:return it(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),jr(Ct),nl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ya(e)?Ir(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,om())),it(e),null;case 26:var r=e.type,s=e.memoizedState;return t===null?(Ir(e),s!==null?(it(e),I0(e,s)):(it(e),pm(e,r,null,i,n))):s?s!==t.memoizedState?(Ir(e),it(e),I0(e,s)):(it(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&Ir(e),it(e),pm(e,r,t,i,n)),null;case 27:if(uf(e),n=Ls.current,r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&Ir(e);else{if(!i){if(e.stateNode===null)throw Error(q(166));return it(e),null}t=cr.current,ya(e)?n0(e):(t=Xb(r,i,n),e.stateNode=t,Ir(e))}return it(e),null;case 5:if(uf(e),r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&Ir(e);else{if(!i){if(e.stateNode===null)throw Error(q(166));return it(e),null}if(s=cr.current,ya(e))n0(e);else{var o=xf(Ls.current);switch(s){case 1:s=o.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:s=o.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":s=o.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":s=o.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":s=o.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?o.createElement("select",{is:i.is}):o.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?o.createElement(r,{is:i.is}):o.createElement(r)}}s[Qt]=e,s[zn]=i;e:for(o=e.child;o!==null;){if(o.tag===5||o.tag===6)s.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break e;for(;o.sibling===null;){if(o.return===null||o.return===e)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}e.stateNode=s;e:switch(en(s,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Ir(e)}}return it(e),pm(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&Ir(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(q(166));if(t=Ls.current,ya(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,r=Jt,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}t[Qt]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||Gb(t.nodeValue,n)),t||Ks(e,!0)}else t=xf(t).createTextNode(i),t[Qt]=e,e.stateNode=t}return it(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=ya(e),n!==null){if(t===null){if(!i)throw Error(q(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(557));t[Qt]=e}else Uo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;it(e),t=!1}else n=om(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Yn(e),e):(Yn(e),null);if(e.flags&128)throw Error(q(558))}return it(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=ya(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(q(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(q(317));r[Qt]=e}else Uo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;it(e),r=!1}else r=om(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(Yn(e),e):(Yn(e),null)}return Yn(e),e.flags&128?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),ch(e,e.updateQueue),it(e),null);case 4:return nl(),t===null&&ky(e.stateNode.containerInfo),it(e),null;case 10:return jr(e.type),it(e),null;case 19:if(Ft(At),i=e.memoizedState,i===null)return it(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)nu(i,!1);else{if(dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=_f(t),s!==null){for(e.flags|=128,nu(i,!1),t=s.updateQueue,e.updateQueue=t,ch(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)oA(n,t),n=n.sibling;return We(At,At.current&1|2),Ae&&Or(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&Wn()>Sf&&(e.flags|=128,r=!0,nu(i,!1),e.lanes=4194304)}else{if(!r)if(t=_f(s),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,ch(e,t),nu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!Ae)return it(e),null}else 2*Wn()-i.renderingStartTime>Sf&&n!==536870912&&(e.flags|=128,r=!0,nu(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Wn(),t.sibling=null,n=At.current,We(At,r?n&1|2:n&1),Ae&&Or(e,i.treeForkCount),t):(it(e),null);case 22:case 23:return Yn(e),uy(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(it(e),e.subtreeFlags&6&&(e.flags|=8192)):it(e),n=e.updateQueue,n!==null&&ch(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&Ft(Mo),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),jr(Ct),it(e),null;case 25:return null;case 30:return null}throw Error(q(156,e.tag))}function iI(t,e){switch(ry(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return jr(Ct),nl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return uf(e),null;case 31:if(e.memoizedState!==null){if(Yn(e),e.alternate===null)throw Error(q(340));Uo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Yn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));Uo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ft(At),null;case 4:return nl(),null;case 10:return jr(e.type),null;case 22:case 23:return Yn(e),uy(),t!==null&&Ft(Mo),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return jr(Ct),null;case 25:return null;default:return null}}function ob(t,e){switch(ry(e),e.tag){case 3:jr(Ct),nl();break;case 26:case 27:case 5:uf(e);break;case 4:nl();break;case 31:e.memoizedState!==null&&Yn(e);break;case 13:Yn(e);break;case 19:Ft(At);break;case 10:jr(e.type);break;case 22:case 23:Yn(e),uy(),t!==null&&Ft(Mo);break;case 24:jr(Ct)}}function Rc(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&t)===t){i=void 0;var s=n.create,o=n.inst;i=s(),o.destroy=i}n=n.next}while(n!==r)}}catch(a){Be(e,e.return,a)}}function Xs(t,e,n){try{var i=e.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&t)===t){var o=i.inst,a=o.destroy;if(a!==void 0){o.destroy=void 0,r=e;var c=n,h=a;try{h()}catch(m){Be(r,c,m)}}}i=i.next}while(i!==s)}}catch(m){Be(e,e.return,m)}}function ab(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{gA(e,n)}catch(i){Be(t,t.return,i)}}}function lb(t,e,n){n.props=Ho(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Be(t,e,i)}}function Du(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(r){Be(t,e,r)}}function ur(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Be(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Be(t,e,r)}else n.current=null}function ub(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Be(t,t.return,r)}}function gm(t,e,n){try{var i=t.stateNode;wI(i,t.type,n,e),i[zn]=e}catch(r){Be(t,t.return,r)}}function cb(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&so(t.type)||t.tag===4}function ym(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&so(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pr));else if(i!==4&&(i===27&&so(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Bp(t,e,n),t=t.sibling;t!==null;)Bp(t,e,n),t=t.sibling}function bf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&so(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(bf(t,e,n),t=t.sibling;t!==null;)bf(t,e,n),t=t.sibling}function hb(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);en(e,i,n),e[Qt]=t,e[zn]=n}catch(s){Be(t,t.return,s)}}var Dr=!1,It=!1,_m=!1,C0=typeof WeakSet=="function"?WeakSet:Set,jt=null;function rI(t,e){if(t=t.containerInfo,Kp=Mf,t=JE(t),Wg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,h=0,m=0,T=t,g=null;t:for(;;){for(var w;T!==n||r!==0&&T.nodeType!==3||(a=o+r),T!==s||i!==0&&T.nodeType!==3||(c=o+i),T.nodeType===3&&(o+=T.nodeValue.length),(w=T.firstChild)!==null;)g=T,T=w;for(;;){if(T===t)break t;if(g===n&&++h===r&&(a=o),g===s&&++m===i&&(c=o),(w=T.nextSibling)!==null)break;T=g,g=T.parentNode}T=w}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xp={focusedElem:t,selectionRange:n},Mf=!1,jt=e;jt!==null;)if(e=jt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,jt=t;else for(;jt!==null;){switch(e=jt,s=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)r=t[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var O=Ho(n.type,r);t=i.getSnapshotBeforeUpdate(O,s),i.__reactInternalSnapshotBeforeUpdate=t}catch(M){Be(n,n.return,M)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Qp(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Qp(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(q(163))}if(t=e.sibling,t!==null){t.return=e.return,jt=t;break}jt=e.return}}function fb(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Nr(t,n),i&4&&Rc(5,n);break;case 1:if(Nr(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(o){Be(n,n.return,o)}else{var r=Ho(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(o){Be(n,n.return,o)}}i&64&&ab(n),i&512&&Du(n,n.return);break;case 3:if(Nr(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{gA(t,e)}catch(o){Be(n,n.return,o)}}break;case 27:e===null&&i&4&&hb(n);case 26:case 5:Nr(t,n),e===null&&i&4&&ub(n),i&512&&Du(n,n.return);break;case 12:Nr(t,n);break;case 31:Nr(t,n),i&4&&pb(t,n);break;case 13:Nr(t,n),i&4&&gb(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=dI.bind(null,n),DI(t,n))));break;case 22:if(i=n.memoizedState!==null||Dr,!i){e=e!==null&&e.memoizedState!==null||It,r=Dr;var s=It;Dr=i,(It=e)&&!s?kr(t,n,(n.subtreeFlags&8772)!==0):Nr(t,n),Dr=r,It=s}break;case 30:break;default:Nr(t,n)}}function db(t){var e=t.alternate;e!==null&&(t.alternate=null,db(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Zg(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var lt=null,kn=!1;function Cr(t,e,n){for(n=n.child;n!==null;)mb(t,e,n),n=n.sibling}function mb(t,e,n){if(ei&&typeof ei.onCommitFiberUnmount=="function")try{ei.onCommitFiberUnmount(vc,n)}catch{}switch(n.tag){case 26:It||ur(n,e),Cr(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:It||ur(n,e);var i=lt,r=kn;so(n.type)&&(lt=n.stateNode,kn=!1),Cr(t,e,n),zu(n.stateNode),lt=i,kn=r;break;case 5:It||ur(n,e);case 6:if(i=lt,r=kn,lt=null,Cr(t,e,n),lt=i,kn=r,lt!==null)if(kn)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(n.stateNode)}catch(s){Be(n,e,s)}else try{lt.removeChild(n.stateNode)}catch(s){Be(n,e,s)}break;case 18:lt!==null&&(kn?(t=lt,B0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),fl(t)):B0(lt,n.stateNode));break;case 4:i=lt,r=kn,lt=n.stateNode.containerInfo,kn=!0,Cr(t,e,n),lt=i,kn=r;break;case 0:case 11:case 14:case 15:Xs(2,n,e),It||Xs(4,n,e),Cr(t,e,n);break;case 1:It||(ur(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&lb(n,e,i)),Cr(t,e,n);break;case 21:Cr(t,e,n);break;case 22:It=(i=It)||n.memoizedState!==null,Cr(t,e,n),It=i;break;default:Cr(t,e,n)}}function pb(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{fl(t)}catch(n){Be(e,e.return,n)}}}function gb(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{fl(t)}catch(n){Be(e,e.return,n)}}function sI(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new C0),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new C0),e;default:throw Error(q(435,t.tag))}}function hh(t,e){var n=sI(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var r=mI.bind(null,t,i);i.then(r,r)}})}function Nn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 27:if(so(a.type)){lt=a.stateNode,kn=!1;break e}break;case 5:lt=a.stateNode,kn=!1;break e;case 3:case 4:lt=a.stateNode.containerInfo,kn=!0;break e}a=a.return}if(lt===null)throw Error(q(160));mb(s,o,r),lt=null,kn=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)yb(e,t),e=e.sibling}var ji=null;function yb(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Nn(e,t),xn(t),i&4&&(Xs(3,t,t.return),Rc(3,t),Xs(5,t,t.return));break;case 1:Nn(e,t),xn(t),i&512&&(It||n===null||ur(n,n.return)),i&64&&Dr&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=ji;if(Nn(e,t),xn(t),i&512&&(It||n===null||ur(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[Ac]||s[Qt]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),en(s,i,n),s[Qt]=t,Bt(s),i=s;break e;case"link":var o=K0("link","href",r).get(i+(n.href||""));if(o){for(var a=0;a<o.length;a++)if(s=o[a],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(a,1);break t}}s=r.createElement(i),en(s,i,n),r.head.appendChild(s);break;case"meta":if(o=K0("meta","content",r).get(i+(n.content||""))){for(a=0;a<o.length;a++)if(s=o[a],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(a,1);break t}}s=r.createElement(i),en(s,i,n),r.head.appendChild(s);break;default:throw Error(q(468,i))}s[Qt]=t,Bt(s),i=s}t.stateNode=i}else X0(r,t.type,t.stateNode);else t.stateNode=Z0(r,i,t.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?X0(r,t.type,t.stateNode):Z0(r,i,t.memoizedProps)):i===null&&t.stateNode!==null&&gm(t,t.memoizedProps,n.memoizedProps)}break;case 27:Nn(e,t),xn(t),i&512&&(It||n===null||ur(n,n.return)),n!==null&&i&4&&gm(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Nn(e,t),xn(t),i&512&&(It||n===null||ur(n,n.return)),t.flags&32){r=t.stateNode;try{rl(r,"")}catch(O){Be(t,t.return,O)}}i&4&&t.stateNode!=null&&(r=t.memoizedProps,gm(t,r,n!==null?n.memoizedProps:r)),i&1024&&(_m=!0);break;case 6:if(Nn(e,t),xn(t),i&4){if(t.stateNode===null)throw Error(q(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(O){Be(t,t.return,O)}}break;case 3:if(Hh=null,r=ji,ji=kf(e.containerInfo),Nn(e,t),ji=r,xn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{fl(e.containerInfo)}catch(O){Be(t,t.return,O)}_m&&(_m=!1,_b(t));break;case 4:i=ji,ji=kf(t.stateNode.containerInfo),Nn(e,t),xn(t),ji=i;break;case 12:Nn(e,t),xn(t);break;case 31:Nn(e,t),xn(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,hh(t,i)));break;case 13:Nn(e,t),xn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(_d=Wn()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,hh(t,i)));break;case 22:r=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,h=Dr,m=It;if(Dr=h||r,It=m||c,Nn(e,t),It=m,Dr=h,xn(t),i&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||c||Dr||It||Io(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){c=n=e;try{if(s=c.stateNode,r)o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{a=c.stateNode;var T=c.memoizedProps.style,g=T!=null&&T.hasOwnProperty("display")?T.display:null;a.style.display=g==null||typeof g=="boolean"?"":(""+g).trim()}}catch(O){Be(c,c.return,O)}}}else if(e.tag===6){if(n===null){c=e;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(O){Be(c,c.return,O)}}}else if(e.tag===18){if(n===null){c=e;try{var w=c.stateNode;r?F0(w,!0):F0(c.stateNode,!1)}catch(O){Be(c,c.return,O)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,hh(t,n))));break;case 19:Nn(e,t),xn(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,hh(t,i)));break;case 30:break;case 21:break;default:Nn(e,t),xn(t)}}function xn(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(cb(i)){n=i;break}i=i.return}if(n==null)throw Error(q(160));switch(n.tag){case 27:var r=n.stateNode,s=ym(t);bf(t,s,r);break;case 5:var o=n.stateNode;n.flags&32&&(rl(o,""),n.flags&=-33);var a=ym(t);bf(t,a,o);break;case 3:case 4:var c=n.stateNode.containerInfo,h=ym(t);Bp(t,h,c);break;default:throw Error(q(161))}}catch(m){Be(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _b(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;_b(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Nr(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)fb(t,e.alternate,e),e=e.sibling}function Io(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Xs(4,e,e.return),Io(e);break;case 1:ur(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&lb(e,e.return,n),Io(e);break;case 27:zu(e.stateNode);case 26:case 5:ur(e,e.return),Io(e);break;case 22:e.memoizedState===null&&Io(e);break;case 30:Io(e);break;default:Io(e)}t=t.sibling}}function kr(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,r=t,s=e,o=s.flags;switch(s.tag){case 0:case 11:case 15:kr(r,s,n),Rc(4,s);break;case 1:if(kr(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(h){Be(i,i.return,h)}if(i=s,r=i.updateQueue,r!==null){var a=i.stateNode;try{var c=r.shared.hiddenCallbacks;if(c!==null)for(r.shared.hiddenCallbacks=null,r=0;r<c.length;r++)pA(c[r],a)}catch(h){Be(i,i.return,h)}}n&&o&64&&ab(s),Du(s,s.return);break;case 27:hb(s);case 26:case 5:kr(r,s,n),n&&i===null&&o&4&&ub(s),Du(s,s.return);break;case 12:kr(r,s,n);break;case 31:kr(r,s,n),n&&o&4&&pb(r,s);break;case 13:kr(r,s,n),n&&o&4&&gb(r,s);break;case 22:s.memoizedState===null&&kr(r,s,n),Du(s,s.return);break;case 30:break;default:kr(r,s,n)}e=e.sibling}}function wy(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Sc(n))}function Ry(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Sc(t))}function Vi(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)vb(t,e,n,i),e=e.sibling}function vb(t,e,n,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:Vi(t,e,n,i),r&2048&&Rc(9,e);break;case 1:Vi(t,e,n,i);break;case 3:Vi(t,e,n,i),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Sc(t)));break;case 12:if(r&2048){Vi(t,e,n,i),t=e.stateNode;try{var s=e.memoizedProps,o=s.id,a=s.onPostCommit;typeof a=="function"&&a(o,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){Be(e,e.return,c)}}else Vi(t,e,n,i);break;case 31:Vi(t,e,n,i);break;case 13:Vi(t,e,n,i);break;case 23:break;case 22:s=e.stateNode,o=e.alternate,e.memoizedState!==null?s._visibility&2?Vi(t,e,n,i):Mu(t,e):s._visibility&2?Vi(t,e,n,i):(s._visibility|=2,Ta(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),r&2048&&wy(o,e);break;case 24:Vi(t,e,n,i),r&2048&&Ry(e.alternate,e);break;default:Vi(t,e,n,i)}}function Ta(t,e,n,i,r){for(r=r&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var s=t,o=e,a=n,c=i,h=o.flags;switch(o.tag){case 0:case 11:case 15:Ta(s,o,a,c,r),Rc(8,o);break;case 23:break;case 22:var m=o.stateNode;o.memoizedState!==null?m._visibility&2?Ta(s,o,a,c,r):Mu(s,o):(m._visibility|=2,Ta(s,o,a,c,r)),r&&h&2048&&wy(o.alternate,o);break;case 24:Ta(s,o,a,c,r),r&&h&2048&&Ry(o.alternate,o);break;default:Ta(s,o,a,c,r)}e=e.sibling}}function Mu(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,r=i.flags;switch(i.tag){case 22:Mu(n,i),r&2048&&wy(i.alternate,i);break;case 24:Mu(n,i),r&2048&&Ry(i.alternate,i);break;default:Mu(n,i)}e=e.sibling}}var yu=8192;function _a(t,e,n){if(t.subtreeFlags&yu)for(t=t.child;t!==null;)Tb(t,e,n),t=t.sibling}function Tb(t,e,n){switch(t.tag){case 26:_a(t,e,n),t.flags&yu&&t.memoizedState!==null&&GI(n,ji,t.memoizedState,t.memoizedProps);break;case 5:_a(t,e,n);break;case 3:case 4:var i=ji;ji=kf(t.stateNode.containerInfo),_a(t,e,n),ji=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=yu,yu=16777216,_a(t,e,n),yu=i):_a(t,e,n));break;default:_a(t,e,n)}}function Eb(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function iu(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];jt=i,bb(i,t)}Eb(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ab(t),t=t.sibling}function Ab(t){switch(t.tag){case 0:case 11:case 15:iu(t),t.flags&2048&&Xs(9,t,t.return);break;case 3:iu(t);break;case 12:iu(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Bh(t)):iu(t);break;default:iu(t)}}function Bh(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];jt=i,bb(i,t)}Eb(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Xs(8,e,e.return),Bh(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Bh(e));break;default:Bh(e)}t=t.sibling}}function bb(t,e){for(;jt!==null;){var n=jt;switch(n.tag){case 0:case 11:case 15:Xs(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Sc(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,jt=i;else e:for(n=t;jt!==null;){i=jt;var r=i.sibling,s=i.return;if(db(i),i===n){jt=null;break e}if(r!==null){r.return=s,jt=r;break e}jt=s}}}var oI={getCacheForType:function(t){var e=Wt(Ct),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Wt(Ct).controller.signal}},aI=typeof WeakMap=="function"?WeakMap:Map,Pe=0,Ke=null,ve=null,Ee=0,je=0,Xn=null,ks=!1,Il=!1,Iy=!1,Zr=0,dt=0,Ys=0,Lo=0,Cy=0,Jn=0,ll=0,Pu=null,On=null,Fp=!1,_d=0,Sb=0,Sf=1/0,wf=null,js=null,Ot=0,Bs=null,ul=null,Br=0,Hp=0,qp=null,wb=null,Lu=0,Gp=null;function ni(){return Pe&2&&Ee!==0?Ee&-Ee:le.T!==null?xy():ME()}function Rb(){if(Jn===0)if(!(Ee&536870912)||Ae){var t=ih;ih<<=1,!(ih&3932160)&&(ih=262144),Jn=t}else Jn=536870912;return t=ri.current,t!==null&&(t.flags|=32),Jn}function Pn(t,e,n){(t===Ke&&(je===2||je===9)||t.cancelPendingCommit!==null)&&(cl(t,0),Os(t,Ee,Jn,!1)),Ec(t,n),(!(Pe&2)||t!==Ke)&&(t===Ke&&(!(Pe&2)&&(Lo|=n),dt===4&&Os(t,Ee,Jn,!1)),_r(t))}function Ib(t,e,n){if(Pe&6)throw Error(q(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Tc(t,e),r=i?cI(t,e):vm(t,e,!0),s=i;do{if(r===0){Il&&!i&&Os(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!lI(n)){r=vm(t,e,!1),s=!1;continue}if(r===2){if(s=e,t.errorRecoveryDisabledLanes&s)var o=0;else o=t.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){e=o;e:{var a=t;r=Pu;var c=a.current.memoizedState.isDehydrated;if(c&&(cl(a,o).flags|=256),o=vm(a,o,!1),o!==2){if(Iy&&!c){a.errorRecoveryDisabledLanes|=s,Lo|=s,r=4;break e}s=On,On=r,s!==null&&(On===null?On=s:On.push.apply(On,s))}r=o}if(s=!1,r!==2)continue}}if(r===1){cl(t,0),Os(t,e,0,!0);break}e:{switch(i=t,s=r,s){case 0:case 1:throw Error(q(345));case 4:if((e&4194048)!==e)break;case 6:Os(i,e,Jn,!ks);break e;case 2:On=null;break;case 3:case 5:break;default:throw Error(q(329))}if((e&62914560)===e&&(r=_d+300-Wn(),10<r)){if(Os(i,e,Jn,!ks),ad(i,0,!0)!==0)break e;Br=e,i.timeoutHandle=Zb(N0.bind(null,i,n,On,wf,Fp,e,Jn,Lo,ll,ks,s,"Throttled",-0,0),r);break e}N0(i,n,On,wf,Fp,e,Jn,Lo,ll,ks,s,null,-0,0)}}break}while(!0);_r(t)}function N0(t,e,n,i,r,s,o,a,c,h,m,T,g,w){if(t.timeoutHandle=-1,T=e.subtreeFlags,T&8192||(T&16785408)===16785408){T={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pr},Tb(e,s,T);var O=(s&62914560)===s?_d-Wn():(s&4194048)===s?Sb-Wn():0;if(O=$I(T,O),O!==null){Br=s,t.cancelPendingCommit=O(k0.bind(null,t,e,s,n,i,r,o,a,c,m,T,null,g,w)),Os(t,s,o,!h);return}}k0(t,e,s,n,i,r,o,a,c)}function lI(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ii(s(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Os(t,e,n,i){e&=~Cy,e&=~Lo,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var r=e;0<r;){var s=31-ti(r),o=1<<s;i[s]=-1,r&=~o}n!==0&&kE(t,n,e)}function vd(){return Pe&6?!0:(Ic(0),!1)}function Ny(){if(ve!==null){if(je===0)var t=ve.return;else t=ve,Lr=ta=null,my(t),$a=null,Wu=0,t=ve;for(;t!==null;)ob(t.alternate,t),t=t.return;ve=null}}function cl(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,CI(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Br=0,Ny(),Ke=t,ve=n=Ur(t.current,null),Ee=e,je=0,Xn=null,ks=!1,Il=Tc(t,e),Iy=!1,ll=Jn=Cy=Lo=Ys=dt=0,On=Pu=null,Fp=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var r=31-ti(i),s=1<<r;e|=t[r],i&=~s}return Zr=e,hd(),n}function Cb(t,e){fe=null,le.H=tc,e===Rl||e===dd?(e=a0(),je=3):e===ay?(e=a0(),je=4):je=e===by?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Xn=e,ve===null&&(dt=1,Ef(t,gi(e,t.current)))}function Nb(){var t=ri.current;return t===null?!0:(Ee&4194048)===Ee?vi===null:(Ee&62914560)===Ee||Ee&536870912?t===vi:!1}function xb(){var t=le.H;return le.H=tc,t===null?tc:t}function kb(){var t=le.A;return le.A=oI,t}function Rf(){dt=4,ks||(Ee&4194048)!==Ee&&ri.current!==null||(Il=!0),!(Ys&134217727)&&!(Lo&134217727)||Ke===null||Os(Ke,Ee,Jn,!1)}function vm(t,e,n){var i=Pe;Pe|=2;var r=xb(),s=kb();(Ke!==t||Ee!==e)&&(wf=null,cl(t,e)),e=!1;var o=dt;e:do try{if(je!==0&&ve!==null){var a=ve,c=Xn;switch(je){case 8:Ny(),o=6;break e;case 3:case 2:case 9:case 6:ri.current===null&&(e=!0);var h=je;if(je=0,Xn=null,Va(t,a,c,h),n&&Il){o=0;break e}break;default:h=je,je=0,Xn=null,Va(t,a,c,h)}}uI(),o=dt;break}catch(m){Cb(t,m)}while(!0);return e&&t.shellSuspendCounter++,Lr=ta=null,Pe=i,le.H=r,le.A=s,ve===null&&(Ke=null,Ee=0,hd()),o}function uI(){for(;ve!==null;)Ob(ve)}function cI(t,e){var n=Pe;Pe|=2;var i=xb(),r=kb();Ke!==t||Ee!==e?(wf=null,Sf=Wn()+500,cl(t,e)):Il=Tc(t,e);e:do try{if(je!==0&&ve!==null){e=ve;var s=Xn;t:switch(je){case 1:je=0,Xn=null,Va(t,e,s,1);break;case 2:case 9:if(o0(s)){je=0,Xn=null,x0(e);break}e=function(){je!==2&&je!==9||Ke!==t||(je=7),_r(t)},s.then(e,e);break e;case 3:je=7;break e;case 4:je=5;break e;case 7:o0(s)?(je=0,Xn=null,x0(e)):(je=0,Xn=null,Va(t,e,s,7));break;case 5:var o=null;switch(ve.tag){case 26:o=ve.memoizedState;case 5:case 27:var a=ve;if(o?Jb(o):a.stateNode.complete){je=0,Xn=null;var c=a.sibling;if(c!==null)ve=c;else{var h=a.return;h!==null?(ve=h,Td(h)):ve=null}break t}}je=0,Xn=null,Va(t,e,s,5);break;case 6:je=0,Xn=null,Va(t,e,s,6);break;case 8:Ny(),dt=6;break e;default:throw Error(q(462))}}hI();break}catch(m){Cb(t,m)}while(!0);return Lr=ta=null,le.H=i,le.A=r,Pe=n,ve!==null?0:(Ke=null,Ee=0,hd(),dt)}function hI(){for(;ve!==null&&!M2();)Ob(ve)}function Ob(t){var e=sb(t.alternate,t,Zr);t.memoizedProps=t.pendingProps,e===null?Td(t):ve=e}function x0(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=b0(n,e,e.pendingProps,e.type,void 0,Ee);break;case 11:e=b0(n,e,e.pendingProps,e.type.render,e.ref,Ee);break;case 5:my(e);default:ob(n,e),e=ve=oA(e,Zr),e=sb(n,e,Zr)}t.memoizedProps=t.pendingProps,e===null?Td(t):ve=e}function Va(t,e,n,i){Lr=ta=null,my(e),$a=null,Wu=0;var r=e.return;try{if(WR(t,r,e,n,Ee)){dt=1,Ef(t,gi(n,t.current)),ve=null;return}}catch(s){if(r!==null)throw ve=r,s;dt=1,Ef(t,gi(n,t.current)),ve=null;return}e.flags&32768?(Ae||i===1?t=!0:Il||Ee&536870912?t=!1:(ks=t=!0,(i===2||i===9||i===3||i===6)&&(i=ri.current,i!==null&&i.tag===13&&(i.flags|=16384))),Db(e,t)):Td(e)}function Td(t){var e=t;do{if(e.flags&32768){Db(e,ks);return}t=e.return;var n=nI(e.alternate,e,Zr);if(n!==null){ve=n;return}if(e=e.sibling,e!==null){ve=e;return}ve=e=t}while(e!==null);dt===0&&(dt=5)}function Db(t,e){do{var n=iI(t.alternate,t);if(n!==null){n.flags&=32767,ve=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){ve=t;return}ve=t=n}while(t!==null);dt=6,ve=null}function k0(t,e,n,i,r,s,o,a,c){t.cancelPendingCommit=null;do Ed();while(Ot!==0);if(Pe&6)throw Error(q(327));if(e!==null){if(e===t.current)throw Error(q(177));if(s=e.lanes|e.childLanes,s|=ey,q2(t,n,s,o,a,c),t===Ke&&(ve=Ke=null,Ee=0),ul=e,Bs=t,Br=n,Hp=s,qp=r,wb=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,pI(cf,function(){return Vb(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=le.T,le.T=null,r=Le.p,Le.p=2,o=Pe,Pe|=4;try{rI(t,e,n)}finally{Pe=o,Le.p=r,le.T=i}}Ot=1,Mb(),Pb(),Lb()}}function Mb(){if(Ot===1){Ot=0;var t=Bs,e=ul,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=le.T,le.T=null;var i=Le.p;Le.p=2;var r=Pe;Pe|=4;try{yb(e,t);var s=Xp,o=JE(t.containerInfo),a=s.focusedElem,c=s.selectionRange;if(o!==a&&a&&a.ownerDocument&&QE(a.ownerDocument.documentElement,a)){if(c!==null&&Wg(a)){var h=c.start,m=c.end;if(m===void 0&&(m=h),"selectionStart"in a)a.selectionStart=h,a.selectionEnd=Math.min(m,a.value.length);else{var T=a.ownerDocument||document,g=T&&T.defaultView||window;if(g.getSelection){var w=g.getSelection(),O=a.textContent.length,M=Math.min(c.start,O),L=c.end===void 0?M:Math.min(c.end,O);!w.extend&&M>L&&(o=L,L=M,M=o);var x=W_(a,M),k=W_(a,L);if(x&&k&&(w.rangeCount!==1||w.anchorNode!==x.node||w.anchorOffset!==x.offset||w.focusNode!==k.node||w.focusOffset!==k.offset)){var D=T.createRange();D.setStart(x.node,x.offset),w.removeAllRanges(),M>L?(w.addRange(D),w.extend(k.node,k.offset)):(D.setEnd(k.node,k.offset),w.addRange(D))}}}}for(T=[],w=a;w=w.parentNode;)w.nodeType===1&&T.push({element:w,left:w.scrollLeft,top:w.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<T.length;a++){var z=T[a];z.element.scrollLeft=z.left,z.element.scrollTop=z.top}}Mf=!!Kp,Xp=Kp=null}finally{Pe=r,Le.p=i,le.T=n}}t.current=e,Ot=2}}function Pb(){if(Ot===2){Ot=0;var t=Bs,e=ul,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=le.T,le.T=null;var i=Le.p;Le.p=2;var r=Pe;Pe|=4;try{fb(t,e.alternate,e)}finally{Pe=r,Le.p=i,le.T=n}}Ot=3}}function Lb(){if(Ot===4||Ot===3){Ot=0,P2();var t=Bs,e=ul,n=Br,i=wb;e.subtreeFlags&10256||e.flags&10256?Ot=5:(Ot=0,ul=Bs=null,zb(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(js=null),$g(n),e=e.stateNode,ei&&typeof ei.onCommitFiberRoot=="function")try{ei.onCommitFiberRoot(vc,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=le.T,r=Le.p,Le.p=2,le.T=null;try{for(var s=t.onRecoverableError,o=0;o<i.length;o++){var a=i[o];s(a.value,{componentStack:a.stack})}}finally{le.T=e,Le.p=r}}Br&3&&Ed(),_r(t),r=t.pendingLanes,n&261930&&r&42?t===Gp?Lu++:(Lu=0,Gp=t):Lu=0,Ic(0)}}function zb(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Sc(e)))}function Ed(){return Mb(),Pb(),Lb(),Vb()}function Vb(){if(Ot!==5)return!1;var t=Bs,e=Hp;Hp=0;var n=$g(Br),i=le.T,r=Le.p;try{Le.p=32>n?32:n,le.T=null,n=qp,qp=null;var s=Bs,o=Br;if(Ot=0,ul=Bs=null,Br=0,Pe&6)throw Error(q(331));var a=Pe;if(Pe|=4,Ab(s.current),vb(s,s.current,o,n),Pe=a,Ic(0,!1),ei&&typeof ei.onPostCommitFiberRoot=="function")try{ei.onPostCommitFiberRoot(vc,s)}catch{}return!0}finally{Le.p=r,le.T=i,zb(t,e)}}function O0(t,e,n){e=gi(n,e),e=Vp(t.stateNode,e,2),t=Us(t,e,2),t!==null&&(Ec(t,2),_r(t))}function Be(t,e,n){if(t.tag===3)O0(t,t,n);else for(;e!==null;){if(e.tag===3){O0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(js===null||!js.has(i))){t=gi(n,t),n=WA(2),i=Us(e,n,2),i!==null&&(eb(n,i,e,t),Ec(i,2),_r(i));break}}e=e.return}}function Tm(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new aI;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(Iy=!0,r.add(n),t=fI.bind(null,t,e,n),e.then(t,t))}function fI(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Ke===t&&(Ee&n)===n&&(dt===4||dt===3&&(Ee&62914560)===Ee&&300>Wn()-_d?!(Pe&2)&&cl(t,0):Cy|=n,ll===Ee&&(ll=0)),_r(t)}function Ub(t,e){e===0&&(e=xE()),t=ea(t,e),t!==null&&(Ec(t,e),_r(t))}function dI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ub(t,n)}function mI(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(q(314))}i!==null&&i.delete(e),Ub(t,n)}function pI(t,e){return qg(t,e)}var If=null,Ea=null,$p=!1,Cf=!1,Em=!1,Ds=0;function _r(t){t!==Ea&&t.next===null&&(Ea===null?If=Ea=t:Ea=Ea.next=t),Cf=!0,$p||($p=!0,yI())}function Ic(t,e){if(!Em&&Cf){Em=!0;do for(var n=!1,i=If;i!==null;){if(t!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var o=i.suspendedLanes,a=i.pingedLanes;s=(1<<31-ti(42|t)+1)-1,s&=r&~(o&~a),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,D0(i,s))}else s=Ee,s=ad(i,i===Ke?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||Tc(i,s)||(n=!0,D0(i,s));i=i.next}while(n);Em=!1}}function gI(){jb()}function jb(){Cf=$p=!1;var t=0;Ds!==0&&II()&&(t=Ds);for(var e=Wn(),n=null,i=If;i!==null;){var r=i.next,s=Bb(i,e);s===0?(i.next=null,n===null?If=r:n.next=r,r===null&&(Ea=n)):(n=i,(t!==0||s&3)&&(Cf=!0)),i=r}Ot!==0&&Ot!==5||Ic(t),Ds!==0&&(Ds=0)}function Bb(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var o=31-ti(s),a=1<<o,c=r[o];c===-1?(!(a&n)||a&i)&&(r[o]=H2(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}if(e=Ke,n=Ee,n=ad(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(je===2||je===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&Xd(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Tc(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&Xd(i),$g(n)){case 2:case 8:n=CE;break;case 32:n=cf;break;case 268435456:n=NE;break;default:n=cf}return i=Fb.bind(null,t),n=qg(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&Xd(i),t.callbackPriority=2,t.callbackNode=null,2}function Fb(t,e){if(Ot!==0&&Ot!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Ed()&&t.callbackNode!==n)return null;var i=Ee;return i=ad(t,t===Ke?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(Ib(t,i,e),Bb(t,Wn()),t.callbackNode!=null&&t.callbackNode===n?Fb.bind(null,t):null)}function D0(t,e){if(Ed())return null;Ib(t,e,!0)}function yI(){NI(function(){Pe&6?qg(IE,gI):jb()})}function xy(){if(Ds===0){var t=sl;t===0&&(t=nh,nh<<=1,!(nh&261888)&&(nh=256)),Ds=t}return Ds}function M0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Oh(""+t)}function P0(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function _I(t,e,n,i,r){if(e==="submit"&&n&&n.stateNode===r){var s=M0((r[zn]||null).action),o=i.submitter;o&&(e=(e=o[zn]||null)?M0(e.formAction):o.getAttribute("formAction"),e!==null&&(s=e,o=null));var a=new ld("action","action",null,i,r);t.push({event:a,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Ds!==0){var c=o?P0(r,o):new FormData(r);Lp(n,{pending:!0,data:c,method:r.method,action:s},null,c)}}else typeof s=="function"&&(a.preventDefault(),c=o?P0(r,o):new FormData(r),Lp(n,{pending:!0,data:c,method:r.method,action:s},s,c))},currentTarget:r}]})}}for(var Am=0;Am<Sp.length;Am++){var bm=Sp[Am],vI=bm.toLowerCase(),TI=bm[0].toUpperCase()+bm.slice(1);Gi(vI,"on"+TI)}Gi(eA,"onAnimationEnd");Gi(tA,"onAnimationIteration");Gi(nA,"onAnimationStart");Gi("dblclick","onDoubleClick");Gi("focusin","onFocus");Gi("focusout","onBlur");Gi(LR,"onTransitionRun");Gi(zR,"onTransitionStart");Gi(VR,"onTransitionCancel");Gi(iA,"onTransitionEnd");il("onMouseEnter",["mouseout","mouseover"]);il("onMouseLeave",["mouseout","mouseover"]);il("onPointerEnter",["pointerout","pointerover"]);il("onPointerLeave",["pointerout","pointerover"]);Qo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nc));function Hb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],c=a.instance,h=a.currentTarget;if(a=a.listener,c!==s&&r.isPropagationStopped())break e;s=a,r.currentTarget=h;try{s(r)}catch(m){ff(m)}r.currentTarget=null,s=c}else for(o=0;o<i.length;o++){if(a=i[o],c=a.instance,h=a.currentTarget,a=a.listener,c!==s&&r.isPropagationStopped())break e;s=a,r.currentTarget=h;try{s(r)}catch(m){ff(m)}r.currentTarget=null,s=c}}}}function _e(t,e){var n=e[gp];n===void 0&&(n=e[gp]=new Set);var i=t+"__bubble";n.has(i)||(qb(e,t,2,!1),n.add(i))}function Sm(t,e,n){var i=0;e&&(i|=4),qb(n,t,i,e)}var fh="_reactListening"+Math.random().toString(36).slice(2);function ky(t){if(!t[fh]){t[fh]=!0,PE.forEach(function(n){n!=="selectionchange"&&(EI.has(n)||Sm(n,!1,t),Sm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fh]||(e[fh]=!0,Sm("selectionchange",!1,e))}}function qb(t,e,n,i){switch(iS(e)){case 2:var r=XI;break;case 8:r=YI;break;default:r=Py}n=r.bind(null,e,n,t),r=void 0,!Ep||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function wm(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r)break;if(o===4)for(o=i.return;o!==null;){var c=o.tag;if((c===3||c===4)&&o.stateNode.containerInfo===r)return;o=o.return}for(;a!==null;){if(o=Na(a),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){i=s=o;continue e}a=a.parentNode}}i=i.return}HE(function(){var h=s,m=Xg(n),T=[];e:{var g=rA.get(t);if(g!==void 0){var w=ld,O=t;switch(t){case"keypress":if(Mh(n)===0)break e;case"keydown":case"keyup":w=mR;break;case"focusin":O="focus",w=em;break;case"focusout":O="blur",w=em;break;case"beforeblur":case"afterblur":w=em;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=H_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=nR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=yR;break;case eA:case tA:case nA:w=sR;break;case iA:w=vR;break;case"scroll":case"scrollend":w=eR;break;case"wheel":w=ER;break;case"copy":case"cut":case"paste":w=aR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=G_;break;case"toggle":case"beforetoggle":w=bR}var M=(e&4)!==0,L=!M&&(t==="scroll"||t==="scrollend"),x=M?g!==null?g+"Capture":null:g;M=[];for(var k=h,D;k!==null;){var z=k;if(D=z.stateNode,z=z.tag,z!==5&&z!==26&&z!==27||D===null||x===null||(z=Ku(k,x),z!=null&&M.push(ic(k,z,D))),L)break;k=k.return}0<M.length&&(g=new w(g,O,null,n,m),T.push({event:g,listeners:M}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==Tp&&(O=n.relatedTarget||n.fromElement)&&(Na(O)||O[bl]))break e;if((w||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,w?(O=n.relatedTarget||n.toElement,w=h,O=O?Na(O):null,O!==null&&(L=_c(O),M=O.tag,O!==L||M!==5&&M!==27&&M!==6)&&(O=null)):(w=null,O=h),w!==O)){if(M=H_,z="onMouseLeave",x="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(M=G_,z="onPointerLeave",x="onPointerEnter",k="pointer"),L=w==null?g:pu(w),D=O==null?g:pu(O),g=new M(z,k+"leave",w,n,m),g.target=L,g.relatedTarget=D,z=null,Na(m)===h&&(M=new M(x,k+"enter",O,n,m),M.target=D,M.relatedTarget=L,z=M),L=z,w&&O)t:{for(M=AI,x=w,k=O,D=0,z=x;z;z=M(z))D++;z=0;for(var F=k;F;F=M(F))z++;for(;0<D-z;)x=M(x),D--;for(;0<z-D;)k=M(k),z--;for(;D--;){if(x===k||k!==null&&x===k.alternate){M=x;break t}x=M(x),k=M(k)}M=null}else M=null;w!==null&&L0(T,g,w,M,!1),O!==null&&L!==null&&L0(T,L,O,M,!0)}}e:{if(g=h?pu(h):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var $=X_;else if(K_(g))if(XE)$=DR;else{$=kR;var S=xR}else w=g.nodeName,!w||w.toLowerCase()!=="input"||g.type!=="checkbox"&&g.type!=="radio"?h&&Kg(h.elementType)&&($=X_):$=OR;if($&&($=$(t,h))){KE(T,$,n,m);break e}S&&S(t,g,h),t==="focusout"&&h&&g.type==="number"&&h.memoizedProps.value!=null&&vp(g,"number",g.value)}switch(S=h?pu(h):window,t){case"focusin":(K_(S)||S.contentEditable==="true")&&(Oa=S,Ap=h,Iu=null);break;case"focusout":Iu=Ap=Oa=null;break;case"mousedown":bp=!0;break;case"contextmenu":case"mouseup":case"dragend":bp=!1,e0(T,n,m);break;case"selectionchange":if(PR)break;case"keydown":case"keyup":e0(T,n,m)}var p;if(Jg)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else ka?$E(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(GE&&n.locale!=="ko"&&(ka||y!=="onCompositionStart"?y==="onCompositionEnd"&&ka&&(p=qE()):(xs=m,Yg="value"in xs?xs.value:xs.textContent,ka=!0)),S=Nf(h,y),0<S.length&&(y=new q_(y,t,null,n,m),T.push({event:y,listeners:S}),p?y.data=p:(p=ZE(n),p!==null&&(y.data=p)))),(p=wR?RR(t,n):IR(t,n))&&(y=Nf(h,"onBeforeInput"),0<y.length&&(S=new q_("onBeforeInput","beforeinput",null,n,m),T.push({event:S,listeners:y}),S.data=p)),_I(T,t,h,n,m)}Hb(T,e)})}function ic(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Nf(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=Ku(t,n),r!=null&&i.unshift(ic(t,r,s)),r=Ku(t,e),r!=null&&i.push(ic(t,r,s))),t.tag===3)return i;t=t.return}return[]}function AI(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function L0(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,c=a.alternate,h=a.stateNode;if(a=a.tag,c!==null&&c===i)break;a!==5&&a!==26&&a!==27||h===null||(c=h,r?(h=Ku(n,s),h!=null&&o.unshift(ic(n,h,c))):r||(h=Ku(n,s),h!=null&&o.push(ic(n,h,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var bI=/\r\n?/g,SI=/\u0000|\uFFFD/g;function z0(t){return(typeof t=="string"?t:""+t).replace(bI,`
`).replace(SI,"")}function Gb(t,e){return e=z0(e),z0(t)===e}function Ge(t,e,n,i,r,s){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||rl(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&rl(t,""+i);break;case"className":sh(t,"class",i);break;case"tabIndex":sh(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":sh(t,n,i);break;case"style":FE(t,i,s);break;case"data":if(e!=="object"){sh(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Oh(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&Ge(t,e,"name",r.name,r,null),Ge(t,e,"formEncType",r.formEncType,r,null),Ge(t,e,"formMethod",r.formMethod,r,null),Ge(t,e,"formTarget",r.formTarget,r,null)):(Ge(t,e,"encType",r.encType,r,null),Ge(t,e,"method",r.method,r,null),Ge(t,e,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Oh(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=Pr);break;case"onScroll":i!=null&&_e("scroll",t);break;case"onScrollEnd":i!=null&&_e("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(q(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(q(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Oh(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":_e("beforetoggle",t),_e("toggle",t),kh(t,"popover",i);break;case"xlinkActuate":Rr(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Rr(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Rr(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Rr(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Rr(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Rr(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Rr(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Rr(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Rr(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":kh(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=J2.get(n)||n,kh(t,n,i))}}function Zp(t,e,n,i,r,s){switch(n){case"style":FE(t,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(q(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(q(60));t.innerHTML=n}}break;case"children":typeof i=="string"?rl(t,i):(typeof i=="number"||typeof i=="bigint")&&rl(t,""+i);break;case"onScroll":i!=null&&_e("scroll",t);break;case"onScrollEnd":i!=null&&_e("scrollend",t);break;case"onClick":i!=null&&(t.onclick=Pr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!LE.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),s=t[zn]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,r);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):kh(t,n,i)}}}function en(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_e("error",t),_e("load",t);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var o=n[s];if(o!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(q(137,e));default:Ge(t,e,s,o,n,null)}}r&&Ge(t,e,"srcSet",n.srcSet,n,null),i&&Ge(t,e,"src",n.src,n,null);return;case"input":_e("invalid",t);var a=s=o=r=null,c=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var m=n[i];if(m!=null)switch(i){case"name":r=m;break;case"type":o=m;break;case"checked":c=m;break;case"defaultChecked":h=m;break;case"value":s=m;break;case"defaultValue":a=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(q(137,e));break;default:Ge(t,e,i,m,n,null)}}UE(t,s,a,c,h,o,r,!1);return;case"select":_e("invalid",t),i=o=s=null;for(r in n)if(n.hasOwnProperty(r)&&(a=n[r],a!=null))switch(r){case"value":s=a;break;case"defaultValue":o=a;break;case"multiple":i=a;default:Ge(t,e,r,a,n,null)}e=s,n=o,t.multiple=!!i,e!=null?Ha(t,!!i,e,!1):n!=null&&Ha(t,!!i,n,!0);return;case"textarea":_e("invalid",t),s=r=i=null;for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"value":i=a;break;case"defaultValue":r=a;break;case"children":s=a;break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(q(91));break;default:Ge(t,e,o,a,n,null)}BE(t,i,r,s);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Ge(t,e,c,i,n,null)}return;case"dialog":_e("beforetoggle",t),_e("toggle",t),_e("cancel",t),_e("close",t);break;case"iframe":case"object":_e("load",t);break;case"video":case"audio":for(i=0;i<nc.length;i++)_e(nc[i],t);break;case"image":_e("error",t),_e("load",t);break;case"details":_e("toggle",t);break;case"embed":case"source":case"link":_e("error",t),_e("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(q(137,e));default:Ge(t,e,h,i,n,null)}return;default:if(Kg(e)){for(m in n)n.hasOwnProperty(m)&&(i=n[m],i!==void 0&&Zp(t,e,m,i,n,void 0));return}}for(a in n)n.hasOwnProperty(a)&&(i=n[a],i!=null&&Ge(t,e,a,i,n,null))}function wI(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,o=null,a=null,c=null,h=null,m=null;for(w in n){var T=n[w];if(n.hasOwnProperty(w)&&T!=null)switch(w){case"checked":break;case"value":break;case"defaultValue":c=T;default:i.hasOwnProperty(w)||Ge(t,e,w,null,i,T)}}for(var g in i){var w=i[g];if(T=n[g],i.hasOwnProperty(g)&&(w!=null||T!=null))switch(g){case"type":s=w;break;case"name":r=w;break;case"checked":h=w;break;case"defaultChecked":m=w;break;case"value":o=w;break;case"defaultValue":a=w;break;case"children":case"dangerouslySetInnerHTML":if(w!=null)throw Error(q(137,e));break;default:w!==T&&Ge(t,e,g,w,i,T)}}_p(t,o,a,c,h,m,s,r);return;case"select":w=o=a=g=null;for(s in n)if(c=n[s],n.hasOwnProperty(s)&&c!=null)switch(s){case"value":break;case"multiple":w=c;default:i.hasOwnProperty(s)||Ge(t,e,s,null,i,c)}for(r in i)if(s=i[r],c=n[r],i.hasOwnProperty(r)&&(s!=null||c!=null))switch(r){case"value":g=s;break;case"defaultValue":a=s;break;case"multiple":o=s;default:s!==c&&Ge(t,e,r,s,i,c)}e=a,n=o,i=w,g!=null?Ha(t,!!n,g,!1):!!i!=!!n&&(e!=null?Ha(t,!!n,e,!0):Ha(t,!!n,n?[]:"",!1));return;case"textarea":w=g=null;for(a in n)if(r=n[a],n.hasOwnProperty(a)&&r!=null&&!i.hasOwnProperty(a))switch(a){case"value":break;case"children":break;default:Ge(t,e,a,null,i,r)}for(o in i)if(r=i[o],s=n[o],i.hasOwnProperty(o)&&(r!=null||s!=null))switch(o){case"value":g=r;break;case"defaultValue":w=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(q(91));break;default:r!==s&&Ge(t,e,o,r,i,s)}jE(t,g,w);return;case"option":for(var O in n)if(g=n[O],n.hasOwnProperty(O)&&g!=null&&!i.hasOwnProperty(O))switch(O){case"selected":t.selected=!1;break;default:Ge(t,e,O,null,i,g)}for(c in i)if(g=i[c],w=n[c],i.hasOwnProperty(c)&&g!==w&&(g!=null||w!=null))switch(c){case"selected":t.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Ge(t,e,c,g,i,w)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var M in n)g=n[M],n.hasOwnProperty(M)&&g!=null&&!i.hasOwnProperty(M)&&Ge(t,e,M,null,i,g);for(h in i)if(g=i[h],w=n[h],i.hasOwnProperty(h)&&g!==w&&(g!=null||w!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(q(137,e));break;default:Ge(t,e,h,g,i,w)}return;default:if(Kg(e)){for(var L in n)g=n[L],n.hasOwnProperty(L)&&g!==void 0&&!i.hasOwnProperty(L)&&Zp(t,e,L,void 0,i,g);for(m in i)g=i[m],w=n[m],!i.hasOwnProperty(m)||g===w||g===void 0&&w===void 0||Zp(t,e,m,g,i,w);return}}for(var x in n)g=n[x],n.hasOwnProperty(x)&&g!=null&&!i.hasOwnProperty(x)&&Ge(t,e,x,null,i,g);for(T in i)g=i[T],w=n[T],!i.hasOwnProperty(T)||g===w||g==null&&w==null||Ge(t,e,T,g,i,w)}function V0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function RI(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],s=r.transferSize,o=r.initiatorType,a=r.duration;if(s&&a&&V0(o)){for(o=0,a=r.responseEnd,i+=1;i<n.length;i++){var c=n[i],h=c.startTime;if(h>a)break;var m=c.transferSize,T=c.initiatorType;m&&V0(T)&&(c=c.responseEnd,o+=m*(c<a?1:(a-h)/(c-h)))}if(--i,e+=8*(s+o)/(r.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Kp=null,Xp=null;function xf(t){return t.nodeType===9?t:t.ownerDocument}function U0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $b(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Yp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rm=null;function II(){var t=window.event;return t&&t.type==="popstate"?t===Rm?!1:(Rm=t,!0):(Rm=null,!1)}var Zb=typeof setTimeout=="function"?setTimeout:void 0,CI=typeof clearTimeout=="function"?clearTimeout:void 0,j0=typeof Promise=="function"?Promise:void 0,NI=typeof queueMicrotask=="function"?queueMicrotask:typeof j0<"u"?function(t){return j0.resolve(null).then(t).catch(xI)}:Zb;function xI(t){setTimeout(function(){throw t})}function so(t){return t==="head"}function B0(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(r),fl(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")zu(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,zu(n);for(var s=n.firstChild;s;){var o=s.nextSibling,a=s.nodeName;s[Ac]||a==="SCRIPT"||a==="STYLE"||a==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=o}}else n==="body"&&zu(t.ownerDocument.body);n=r}while(n);fl(e)}function F0(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function Qp(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Qp(n),Zg(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function kI(t,e,n,i){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[Ac])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=Ti(t.nextSibling),t===null)break}return null}function OI(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Ti(t.nextSibling),t===null))return null;return t}function Kb(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Ti(t.nextSibling),t===null))return null;return t}function Jp(t){return t.data==="$?"||t.data==="$~"}function Wp(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function DI(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function Ti(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var eg=null;function H0(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return Ti(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function q0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function Xb(t,e,n){switch(e=xf(n),t){case"html":if(t=e.documentElement,!t)throw Error(q(452));return t;case"head":if(t=e.head,!t)throw Error(q(453));return t;case"body":if(t=e.body,!t)throw Error(q(454));return t;default:throw Error(q(451))}}function zu(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Zg(t)}var Ei=new Map,G0=new Set;function kf(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Jr=Le.d;Le.d={f:MI,r:PI,D:LI,C:zI,L:VI,m:UI,X:BI,S:jI,M:FI};function MI(){var t=Jr.f(),e=vd();return t||e}function PI(t){var e=Sl(t);e!==null&&e.tag===5&&e.type==="form"?FA(e):Jr.r(t)}var Cl=typeof document>"u"?null:document;function Yb(t,e,n){var i=Cl;if(i&&typeof e=="string"&&e){var r=pi(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),G0.has(r)||(G0.add(r),t={rel:t,crossOrigin:n,href:e},i.querySelector(r)===null&&(e=i.createElement("link"),en(e,"link",t),Bt(e),i.head.appendChild(e)))}}function LI(t){Jr.D(t),Yb("dns-prefetch",t,null)}function zI(t,e){Jr.C(t,e),Yb("preconnect",t,e)}function VI(t,e,n){Jr.L(t,e,n);var i=Cl;if(i&&t&&e){var r='link[rel="preload"][as="'+pi(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+pi(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+pi(n.imageSizes)+'"]')):r+='[href="'+pi(t)+'"]';var s=r;switch(e){case"style":s=hl(t);break;case"script":s=Nl(t)}Ei.has(s)||(t=st({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Ei.set(s,t),i.querySelector(r)!==null||e==="style"&&i.querySelector(Cc(s))||e==="script"&&i.querySelector(Nc(s))||(e=i.createElement("link"),en(e,"link",t),Bt(e),i.head.appendChild(e)))}}function UI(t,e){Jr.m(t,e);var n=Cl;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+pi(i)+'"][href="'+pi(t)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Nl(t)}if(!Ei.has(s)&&(t=st({rel:"modulepreload",href:t},e),Ei.set(s,t),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Nc(s)))return}i=n.createElement("link"),en(i,"link",t),Bt(i),n.head.appendChild(i)}}}function jI(t,e,n){Jr.S(t,e,n);var i=Cl;if(i&&t){var r=Fa(i).hoistableStyles,s=hl(t);e=e||"default";var o=r.get(s);if(!o){var a={loading:0,preload:null};if(o=i.querySelector(Cc(s)))a.loading=5;else{t=st({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Ei.get(s))&&Oy(t,n);var c=o=i.createElement("link");Bt(c),en(c,"link",t),c._p=new Promise(function(h,m){c.onload=h,c.onerror=m}),c.addEventListener("load",function(){a.loading|=1}),c.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Fh(o,e,i)}o={type:"stylesheet",instance:o,count:1,state:a},r.set(s,o)}}}function BI(t,e){Jr.X(t,e);var n=Cl;if(n&&t){var i=Fa(n).hoistableScripts,r=Nl(t),s=i.get(r);s||(s=n.querySelector(Nc(r)),s||(t=st({src:t,async:!0},e),(e=Ei.get(r))&&Dy(t,e),s=n.createElement("script"),Bt(s),en(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function FI(t,e){Jr.M(t,e);var n=Cl;if(n&&t){var i=Fa(n).hoistableScripts,r=Nl(t),s=i.get(r);s||(s=n.querySelector(Nc(r)),s||(t=st({src:t,async:!0,type:"module"},e),(e=Ei.get(r))&&Dy(t,e),s=n.createElement("script"),Bt(s),en(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function $0(t,e,n,i){var r=(r=Ls.current)?kf(r):null;if(!r)throw Error(q(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=hl(n.href),n=Fa(r).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=hl(n.href);var s=Fa(r).hoistableStyles,o=s.get(t);if(o||(r=r.ownerDocument||r,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,o),(s=r.querySelector(Cc(t)))&&!s._p&&(o.instance=s,o.state.loading=5),Ei.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ei.set(t,n),s||HI(r,t,n,o.state))),e&&i===null)throw Error(q(528,""));return o}if(e&&i!==null)throw Error(q(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Nl(n),n=Fa(r).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(q(444,t))}}function hl(t){return'href="'+pi(t)+'"'}function Cc(t){return'link[rel="stylesheet"]['+t+"]"}function Qb(t){return st({},t,{"data-precedence":t.precedence,precedence:null})}function HI(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),en(e,"link",n),Bt(e),t.head.appendChild(e))}function Nl(t){return'[src="'+pi(t)+'"]'}function Nc(t){return"script[async]"+t}function Z0(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+pi(n.href)+'"]');if(i)return e.instance=i,Bt(i),i;var r=st({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),Bt(i),en(i,"style",r),Fh(i,n.precedence,t),e.instance=i;case"stylesheet":r=hl(n.href);var s=t.querySelector(Cc(r));if(s)return e.state.loading|=4,e.instance=s,Bt(s),s;i=Qb(n),(r=Ei.get(r))&&Oy(i,r),s=(t.ownerDocument||t).createElement("link"),Bt(s);var o=s;return o._p=new Promise(function(a,c){o.onload=a,o.onerror=c}),en(s,"link",i),e.state.loading|=4,Fh(s,n.precedence,t),e.instance=s;case"script":return s=Nl(n.src),(r=t.querySelector(Nc(s)))?(e.instance=r,Bt(r),r):(i=n,(r=Ei.get(s))&&(i=st({},n),Dy(i,r)),t=t.ownerDocument||t,r=t.createElement("script"),Bt(r),en(r,"link",i),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(q(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,Fh(i,n.precedence,t));return e.instance}function Fh(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,o=0;o<i.length;o++){var a=i[o];if(a.dataset.precedence===e)s=a;else if(s!==r)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Oy(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Dy(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Hh=null;function K0(t,e,n){if(Hh===null){var i=new Map,r=Hh=new Map;r.set(n,i)}else r=Hh,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var s=n[r];if(!(s[Ac]||s[Qt]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var o=s.getAttribute(e)||"";o=t+o;var a=i.get(o);a?a.push(s):i.set(o,[s])}}return i}function X0(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function qI(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function Jb(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function GI(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var r=hl(i.href),s=e.querySelector(Cc(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Of.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=s,Bt(s);return}s=e.ownerDocument||e,i=Qb(i),(r=Ei.get(r))&&Oy(i,r),s=s.createElement("link"),Bt(s);var o=s;o._p=new Promise(function(a,c){o.onload=a,o.onerror=c}),en(s,"link",i),n.instance=s}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=Of.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Im=0;function $I(t,e){return t.stylesheets&&t.count===0&&qh(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&qh(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4+e);0<t.imgBytes&&Im===0&&(Im=62500*RI());var r=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&qh(t,t.stylesheets),t.unsuspend)){var s=t.unsuspend;t.unsuspend=null,s()}},(t.imgBytes>Im?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}function Of(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)qh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Df=null;function qh(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Df=new Map,e.forEach(ZI,t),Df=null,Of.call(t))}function ZI(t,e){if(!(e.state.loading&4)){var n=Df.get(t);if(n)var i=n.get(null);else{n=new Map,Df.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var o=r[s];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),i=o)}i&&n.set(null,i)}r=e.instance,o=r.getAttribute("data-precedence"),s=n.get(o)||i,s===i&&n.set(null,r),n.set(o,r),this.count++,i=Of.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var rc={$$typeof:Mr,Provider:null,Consumer:null,_currentValue:Oo,_currentValue2:Oo,_threadCount:0};function KI(t,e,n,i,r,s,o,a,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yd(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yd(0),this.hiddenUpdates=Yd(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function Wb(t,e,n,i,r,s,o,a,c,h,m,T){return t=new KI(t,e,n,o,c,h,m,T,a),e=1,s===!0&&(e|=24),s=Qn(3,null,null,e),t.current=s,s.stateNode=t,e=sy(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:e},ly(s),t}function eS(t){return t?(t=Pa,t):Pa}function tS(t,e,n,i,r,s){r=eS(r),i.context===null?i.context=r:i.pendingContext=r,i=Vs(e),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Us(t,i,e),n!==null&&(Pn(n,t,e),Nu(n,t,e))}function Y0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function My(t,e){Y0(t,e),(t=t.alternate)&&Y0(t,e)}function nS(t){if(t.tag===13||t.tag===31){var e=ea(t,67108864);e!==null&&Pn(e,t,67108864),My(t,67108864)}}function Q0(t){if(t.tag===13||t.tag===31){var e=ni();e=Gg(e);var n=ea(t,e);n!==null&&Pn(n,t,e),My(t,e)}}var Mf=!0;function XI(t,e,n,i){var r=le.T;le.T=null;var s=Le.p;try{Le.p=2,Py(t,e,n,i)}finally{Le.p=s,le.T=r}}function YI(t,e,n,i){var r=le.T;le.T=null;var s=Le.p;try{Le.p=8,Py(t,e,n,i)}finally{Le.p=s,le.T=r}}function Py(t,e,n,i){if(Mf){var r=tg(i);if(r===null)wm(t,e,i,Pf,n),J0(t,i);else if(JI(r,t,e,n,i))i.stopPropagation();else if(J0(t,i),e&4&&-1<QI.indexOf(t)){for(;r!==null;){var s=Sl(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var o=wo(s.pendingLanes);if(o!==0){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var c=1<<31-ti(o);a.entanglements[1]|=c,o&=~c}_r(s),!(Pe&6)&&(Sf=Wn()+500,Ic(0))}}break;case 31:case 13:a=ea(s,2),a!==null&&Pn(a,s,2),vd(),My(s,2)}if(s=tg(i),s===null&&wm(t,e,i,Pf,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else wm(t,e,i,null,n)}}function tg(t){return t=Xg(t),Ly(t)}var Pf=null;function Ly(t){if(Pf=null,t=Na(t),t!==null){var e=_c(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=AE(e),t!==null)return t;t=null}else if(n===31){if(t=bE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Pf=t,null}function iS(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(L2()){case IE:return 2;case CE:return 8;case cf:case z2:return 32;case NE:return 268435456;default:return 32}default:return 32}}var ng=!1,Fs=null,Hs=null,qs=null,sc=new Map,oc=new Map,bs=[],QI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function J0(t,e){switch(t){case"focusin":case"focusout":Fs=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":sc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":oc.delete(e.pointerId)}}function ru(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Sl(e),e!==null&&nS(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function JI(t,e,n,i,r){switch(e){case"focusin":return Fs=ru(Fs,t,e,n,i,r),!0;case"dragenter":return Hs=ru(Hs,t,e,n,i,r),!0;case"mouseover":return qs=ru(qs,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return sc.set(s,ru(sc.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,oc.set(s,ru(oc.get(s)||null,t,e,n,i,r)),!0}return!1}function rS(t){var e=Na(t.target);if(e!==null){var n=_c(e);if(n!==null){if(e=n.tag,e===13){if(e=AE(n),e!==null){t.blockedOn=e,L_(t.priority,function(){Q0(n)});return}}else if(e===31){if(e=bE(n),e!==null){t.blockedOn=e,L_(t.priority,function(){Q0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=tg(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Tp=i,n.target.dispatchEvent(i),Tp=null}else return e=Sl(n),e!==null&&nS(e),t.blockedOn=n,!1;e.shift()}return!0}function W0(t,e,n){Gh(t)&&n.delete(e)}function WI(){ng=!1,Fs!==null&&Gh(Fs)&&(Fs=null),Hs!==null&&Gh(Hs)&&(Hs=null),qs!==null&&Gh(qs)&&(qs=null),sc.forEach(W0),oc.forEach(W0)}function dh(t,e){t.blockedOn===e&&(t.blockedOn=null,ng||(ng=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,WI)))}var mh=null;function ev(t){mh!==t&&(mh=t,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,function(){mh===t&&(mh=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],r=t[e+2];if(typeof i!="function"){if(Ly(i||n)===null)continue;break}var s=Sl(n);s!==null&&(t.splice(e,3),e-=3,Lp(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function fl(t){function e(c){return dh(c,t)}Fs!==null&&dh(Fs,t),Hs!==null&&dh(Hs,t),qs!==null&&dh(qs,t),sc.forEach(e),oc.forEach(e);for(var n=0;n<bs.length;n++){var i=bs[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<bs.length&&(n=bs[0],n.blockedOn===null);)rS(n),n.blockedOn===null&&bs.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],o=r[zn]||null;if(typeof s=="function")o||ev(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(r=s,o=s[zn]||null)a=o.formAction;else if(Ly(r)!==null)continue}else a=o.action;typeof a=="function"?n[i+1]=a:(n.splice(i,3),i-=3),ev(n)}}}function sS(){function t(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(o){return r=o})},focusReset:"manual",scroll:"manual"})}function e(){r!==null&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,r=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),r!==null&&(r(),r=null)}}}function zy(t){this._internalRoot=t}Ad.prototype.render=zy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));var n=e.current,i=ni();tS(n,i,t,e,null,null)};Ad.prototype.unmount=zy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;tS(t.current,2,null,t,null,null),vd(),e[bl]=null}};function Ad(t){this._internalRoot=t}Ad.prototype.unstable_scheduleHydration=function(t){if(t){var e=ME();t={blockedOn:null,target:t,priority:e};for(var n=0;n<bs.length&&e!==0&&e<bs[n].priority;n++);bs.splice(n,0,t),n===0&&rS(t)}};var tv=TE.version;if(tv!=="19.2.3")throw Error(q(527,tv,"19.2.3"));Le.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=N2(e),t=t!==null?SE(t):null,t=t===null?null:t.stateNode,t};var eC={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:le,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ph.isDisabled&&ph.supportsFiber)try{vc=ph.inject(eC),ei=ph}catch{}}od.createRoot=function(t,e){if(!EE(t))throw Error(q(299));var n=!1,i="",r=YA,s=QA,o=JA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=Wb(t,1,!1,null,null,n,i,null,r,s,o,sS),t[bl]=e.current,ky(t),new zy(e)};od.hydrateRoot=function(t,e,n){if(!EE(t))throw Error(q(299));var i=!1,r="",s=YA,o=QA,a=JA,c=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(a=n.onRecoverableError),n.formState!==void 0&&(c=n.formState)),e=Wb(t,1,!0,e,n??null,i,r,c,s,o,a,sS),e.context=eS(null),n=e.current,i=ni(),i=Gg(i),r=Vs(i),r.callback=null,Us(n,r,i),n=i,e.current.lanes=n,Ec(e,n),_r(e),t[bl]=e.current,ky(t),new Ad(e)};od.version="19.2.3";function oS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oS)}catch(t){console.error(t)}}oS(),yE.exports=od;var tC=yE.exports;const nC="mod-race";/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:aS,setPrototypeOf:nv,isFrozen:iC,getPrototypeOf:rC,getOwnPropertyDescriptor:sC}=Object;let{freeze:Tn,seal:Ai,create:ig}=Object,{apply:rg,construct:sg}=typeof Reflect<"u"&&Reflect;Tn||(Tn=function(e){return e});Ai||(Ai=function(e){return e});rg||(rg=function(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];return e.apply(n,r)});sg||(sg=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return new e(...i)});const gh=En(Array.prototype.forEach),oC=En(Array.prototype.lastIndexOf),iv=En(Array.prototype.pop),su=En(Array.prototype.push),aC=En(Array.prototype.splice),$h=En(String.prototype.toLowerCase),Cm=En(String.prototype.toString),Nm=En(String.prototype.match),ou=En(String.prototype.replace),lC=En(String.prototype.indexOf),uC=En(String.prototype.trim),Ui=En(Object.prototype.hasOwnProperty),mn=En(RegExp.prototype.test),au=cC(TypeError);function En(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return rg(t,e,i)}}function cC(t){return function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return sg(t,n)}}function ye(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$h;nv&&nv(t,null);let i=e.length;for(;i--;){let r=e[i];if(typeof r=="string"){const s=n(r);s!==r&&(iC(e)||(e[i]=s),r=s)}t[r]=!0}return t}function hC(t){for(let e=0;e<t.length;e++)Ui(t,e)||(t[e]=null);return t}function sr(t){const e=ig(null);for(const[n,i]of aS(t))Ui(t,n)&&(Array.isArray(i)?e[n]=hC(i):i&&typeof i=="object"&&i.constructor===Object?e[n]=sr(i):e[n]=i);return e}function lu(t,e){for(;t!==null;){const i=sC(t,e);if(i){if(i.get)return En(i.get);if(typeof i.value=="function")return En(i.value)}t=rC(t)}function n(){return null}return n}const rv=Tn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),xm=Tn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),km=Tn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),fC=Tn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Om=Tn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),dC=Tn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),sv=Tn(["#text"]),ov=Tn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Dm=Tn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),av=Tn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),yh=Tn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),mC=Ai(/\{\{[\w\W]*|[\w\W]*\}\}/gm),pC=Ai(/<%[\w\W]*|[\w\W]*%>/gm),gC=Ai(/\$\{[\w\W]*/gm),yC=Ai(/^data-[\-\w.\u00B7-\uFFFF]+$/),_C=Ai(/^aria-[\-\w]+$/),lS=Ai(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),vC=Ai(/^(?:\w+script|data):/i),TC=Ai(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),uS=Ai(/^html$/i),EC=Ai(/^[a-z][.\w]*(-[.\w]+)+$/i);var lv=Object.freeze({__proto__:null,ARIA_ATTR:_C,ATTR_WHITESPACE:TC,CUSTOM_ELEMENT:EC,DATA_ATTR:yC,DOCTYPE_NAME:uS,ERB_EXPR:pC,IS_ALLOWED_URI:lS,IS_SCRIPT_OR_DATA:vC,MUSTACHE_EXPR:mC,TMPLIT_EXPR:gC});const uu={element:1,text:3,progressingInstruction:7,comment:8,document:9},AC=function(){return typeof window>"u"?null:window},bC=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const r="data-tt-policy-suffix";n&&n.hasAttribute(r)&&(i=n.getAttribute(r));const s="dompurify"+(i?"#"+i:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},uv=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function cS(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:AC();const e=ee=>cS(ee);if(e.version="3.3.1",e.removed=[],!t||!t.document||t.document.nodeType!==uu.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const i=n,r=i.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:c,NodeFilter:h,NamedNodeMap:m=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:T,DOMParser:g,trustedTypes:w}=t,O=c.prototype,M=lu(O,"cloneNode"),L=lu(O,"remove"),x=lu(O,"nextSibling"),k=lu(O,"childNodes"),D=lu(O,"parentNode");if(typeof o=="function"){const ee=n.createElement("template");ee.content&&ee.content.ownerDocument&&(n=ee.content.ownerDocument)}let z,F="";const{implementation:$,createNodeIterator:S,createDocumentFragment:p,getElementsByTagName:y}=n,{importNode:A}=i;let b=uv();e.isSupported=typeof aS=="function"&&typeof D=="function"&&$&&$.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:I,ERB_EXPR:_,TMPLIT_EXPR:se,DATA_ATTR:pe,ARIA_ATTR:X,IS_SCRIPT_OR_DATA:ne,ATTR_WHITESPACE:ie,CUSTOM_ELEMENT:be}=lv;let{IS_ALLOWED_URI:He}=lv,Ve=null;const et=ye({},[...rv,...xm,...km,...Om,...sv]);let de=null;const Ht=ye({},[...ov,...Dm,...av,...yh]);let Te=Object.seal(ig(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),wi=null,si=null;const oi=Object.seal(ig(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let uo=!0,$i=!0,Tr=!1,Er=!0,bn=!1,Ri=!0,jn=!1,Zi=!1,Ar=!1,Ii=!1,ot=!1,at=!1,Ki=!0,ra=!1;const Wr="user-content-";let br=!0,Sn=!1,Xe={},Ue=null;const ai=ye({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let co=null;const ho=ye({},["audio","video","img","source","image","track"]);let es=null;const Xi=ye({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Bn="http://www.w3.org/1998/Math/MathML",Ci="http://www.w3.org/2000/svg",qt="http://www.w3.org/1999/xhtml";let hn=qt,ts=!1,Ni=null;const fo=ye({},[Bn,Ci,qt],Cm);let Fn=ye({},["mi","mo","mn","ms","mtext"]),Hn=ye({},["annotation-xml"]);const _t=ye({},["title","style","font","a","script"]);let li=null;const fn=["application/xhtml+xml","text/html"],Yi="text/html";let Ye=null,xi=null;const wn=n.createElement("form"),mo=function(P){return P instanceof RegExp||P instanceof Function},vt=function(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(xi&&xi===P)){if((!P||typeof P!="object")&&(P={}),P=sr(P),li=fn.indexOf(P.PARSER_MEDIA_TYPE)===-1?Yi:P.PARSER_MEDIA_TYPE,Ye=li==="application/xhtml+xml"?Cm:$h,Ve=Ui(P,"ALLOWED_TAGS")?ye({},P.ALLOWED_TAGS,Ye):et,de=Ui(P,"ALLOWED_ATTR")?ye({},P.ALLOWED_ATTR,Ye):Ht,Ni=Ui(P,"ALLOWED_NAMESPACES")?ye({},P.ALLOWED_NAMESPACES,Cm):fo,es=Ui(P,"ADD_URI_SAFE_ATTR")?ye(sr(Xi),P.ADD_URI_SAFE_ATTR,Ye):Xi,co=Ui(P,"ADD_DATA_URI_TAGS")?ye(sr(ho),P.ADD_DATA_URI_TAGS,Ye):ho,Ue=Ui(P,"FORBID_CONTENTS")?ye({},P.FORBID_CONTENTS,Ye):ai,wi=Ui(P,"FORBID_TAGS")?ye({},P.FORBID_TAGS,Ye):sr({}),si=Ui(P,"FORBID_ATTR")?ye({},P.FORBID_ATTR,Ye):sr({}),Xe=Ui(P,"USE_PROFILES")?P.USE_PROFILES:!1,uo=P.ALLOW_ARIA_ATTR!==!1,$i=P.ALLOW_DATA_ATTR!==!1,Tr=P.ALLOW_UNKNOWN_PROTOCOLS||!1,Er=P.ALLOW_SELF_CLOSE_IN_ATTR!==!1,bn=P.SAFE_FOR_TEMPLATES||!1,Ri=P.SAFE_FOR_XML!==!1,jn=P.WHOLE_DOCUMENT||!1,Ii=P.RETURN_DOM||!1,ot=P.RETURN_DOM_FRAGMENT||!1,at=P.RETURN_TRUSTED_TYPE||!1,Ar=P.FORCE_BODY||!1,Ki=P.SANITIZE_DOM!==!1,ra=P.SANITIZE_NAMED_PROPS||!1,br=P.KEEP_CONTENT!==!1,Sn=P.IN_PLACE||!1,He=P.ALLOWED_URI_REGEXP||lS,hn=P.NAMESPACE||qt,Fn=P.MATHML_TEXT_INTEGRATION_POINTS||Fn,Hn=P.HTML_INTEGRATION_POINTS||Hn,Te=P.CUSTOM_ELEMENT_HANDLING||{},P.CUSTOM_ELEMENT_HANDLING&&mo(P.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Te.tagNameCheck=P.CUSTOM_ELEMENT_HANDLING.tagNameCheck),P.CUSTOM_ELEMENT_HANDLING&&mo(P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Te.attributeNameCheck=P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),P.CUSTOM_ELEMENT_HANDLING&&typeof P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Te.allowCustomizedBuiltInElements=P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),bn&&($i=!1),ot&&(Ii=!0),Xe&&(Ve=ye({},sv),de=[],Xe.html===!0&&(ye(Ve,rv),ye(de,ov)),Xe.svg===!0&&(ye(Ve,xm),ye(de,Dm),ye(de,yh)),Xe.svgFilters===!0&&(ye(Ve,km),ye(de,Dm),ye(de,yh)),Xe.mathMl===!0&&(ye(Ve,Om),ye(de,av),ye(de,yh))),P.ADD_TAGS&&(typeof P.ADD_TAGS=="function"?oi.tagCheck=P.ADD_TAGS:(Ve===et&&(Ve=sr(Ve)),ye(Ve,P.ADD_TAGS,Ye))),P.ADD_ATTR&&(typeof P.ADD_ATTR=="function"?oi.attributeCheck=P.ADD_ATTR:(de===Ht&&(de=sr(de)),ye(de,P.ADD_ATTR,Ye))),P.ADD_URI_SAFE_ATTR&&ye(es,P.ADD_URI_SAFE_ATTR,Ye),P.FORBID_CONTENTS&&(Ue===ai&&(Ue=sr(Ue)),ye(Ue,P.FORBID_CONTENTS,Ye)),P.ADD_FORBID_CONTENTS&&(Ue===ai&&(Ue=sr(Ue)),ye(Ue,P.ADD_FORBID_CONTENTS,Ye)),br&&(Ve["#text"]=!0),jn&&ye(Ve,["html","head","body"]),Ve.table&&(ye(Ve,["tbody"]),delete wi.tbody),P.TRUSTED_TYPES_POLICY){if(typeof P.TRUSTED_TYPES_POLICY.createHTML!="function")throw au('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof P.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw au('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');z=P.TRUSTED_TYPES_POLICY,F=z.createHTML("")}else z===void 0&&(z=bC(w,r)),z!==null&&typeof F=="string"&&(F=z.createHTML(""));Tn&&Tn(P),xi=P}},Sr=ye({},[...xm,...km,...fC]),Qi=ye({},[...Om,...dC]),Ji=function(P){let K=D(P);(!K||!K.tagName)&&(K={namespaceURI:hn,tagName:"template"});const W=$h(P.tagName),Se=$h(K.tagName);return Ni[P.namespaceURI]?P.namespaceURI===Ci?K.namespaceURI===qt?W==="svg":K.namespaceURI===Bn?W==="svg"&&(Se==="annotation-xml"||Fn[Se]):!!Sr[W]:P.namespaceURI===Bn?K.namespaceURI===qt?W==="math":K.namespaceURI===Ci?W==="math"&&Hn[Se]:!!Qi[W]:P.namespaceURI===qt?K.namespaceURI===Ci&&!Hn[Se]||K.namespaceURI===Bn&&!Fn[Se]?!1:!Qi[W]&&(_t[W]||!Sr[W]):!!(li==="application/xhtml+xml"&&Ni[P.namespaceURI]):!1},rn=function(P){su(e.removed,{element:P});try{D(P).removeChild(P)}catch{L(P)}},dn=function(P,K){try{su(e.removed,{attribute:K.getAttributeNode(P),from:K})}catch{su(e.removed,{attribute:null,from:K})}if(K.removeAttribute(P),P==="is")if(Ii||ot)try{rn(K)}catch{}else try{K.setAttribute(P,"")}catch{}},ki=function(P){let K=null,W=null;if(Ar)P="<remove></remove>"+P;else{const nt=Nm(P,/^[\r\n\t ]+/);W=nt&&nt[0]}li==="application/xhtml+xml"&&hn===qt&&(P='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+P+"</body></html>");const Se=z?z.createHTML(P):P;if(hn===qt)try{K=new g().parseFromString(Se,li)}catch{}if(!K||!K.documentElement){K=$.createDocument(hn,"template",null);try{K.documentElement.innerHTML=ts?F:Se}catch{}}const tt=K.body||K.documentElement;return P&&W&&tt.insertBefore(n.createTextNode(W),tt.childNodes[0]||null),hn===qt?y.call(K,jn?"html":"body")[0]:jn?K.documentElement:tt},qn=function(P){return S.call(P.ownerDocument||P,P,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},ns=function(P){return P instanceof T&&(typeof P.nodeName!="string"||typeof P.textContent!="string"||typeof P.removeChild!="function"||!(P.attributes instanceof m)||typeof P.removeAttribute!="function"||typeof P.setAttribute!="function"||typeof P.namespaceURI!="string"||typeof P.insertBefore!="function"||typeof P.hasChildNodes!="function")},Wi=function(P){return typeof a=="function"&&P instanceof a};function sn(ee,P,K){gh(ee,W=>{W.call(e,P,K,xi)})}const er=function(P){let K=null;if(sn(b.beforeSanitizeElements,P,null),ns(P))return rn(P),!0;const W=Ye(P.nodeName);if(sn(b.uponSanitizeElement,P,{tagName:W,allowedTags:Ve}),Ri&&P.hasChildNodes()&&!Wi(P.firstElementChild)&&mn(/<[/\w!]/g,P.innerHTML)&&mn(/<[/\w!]/g,P.textContent)||P.nodeType===uu.progressingInstruction||Ri&&P.nodeType===uu.comment&&mn(/<[/\w]/g,P.data))return rn(P),!0;if(!(oi.tagCheck instanceof Function&&oi.tagCheck(W))&&(!Ve[W]||wi[W])){if(!wi[W]&&Gn(W)&&(Te.tagNameCheck instanceof RegExp&&mn(Te.tagNameCheck,W)||Te.tagNameCheck instanceof Function&&Te.tagNameCheck(W)))return!1;if(br&&!Ue[W]){const Se=D(P)||P.parentNode,tt=k(P)||P.childNodes;if(tt&&Se){const nt=tt.length;for(let Tt=nt-1;Tt>=0;--Tt){const zt=M(tt[Tt],!0);zt.__removalCount=(P.__removalCount||0)+1,Se.insertBefore(zt,x(P))}}}return rn(P),!0}return P instanceof c&&!Ji(P)||(W==="noscript"||W==="noembed"||W==="noframes")&&mn(/<\/no(script|embed|frames)/i,P.innerHTML)?(rn(P),!0):(bn&&P.nodeType===uu.text&&(K=P.textContent,gh([I,_,se],Se=>{K=ou(K,Se," ")}),P.textContent!==K&&(su(e.removed,{element:P.cloneNode()}),P.textContent=K)),sn(b.afterSanitizeElements,P,null),!1)},tr=function(P,K,W){if(Ki&&(K==="id"||K==="name")&&(W in n||W in wn))return!1;if(!($i&&!si[K]&&mn(pe,K))){if(!(uo&&mn(X,K))){if(!(oi.attributeCheck instanceof Function&&oi.attributeCheck(K,P))){if(!de[K]||si[K]){if(!(Gn(P)&&(Te.tagNameCheck instanceof RegExp&&mn(Te.tagNameCheck,P)||Te.tagNameCheck instanceof Function&&Te.tagNameCheck(P))&&(Te.attributeNameCheck instanceof RegExp&&mn(Te.attributeNameCheck,K)||Te.attributeNameCheck instanceof Function&&Te.attributeNameCheck(K,P))||K==="is"&&Te.allowCustomizedBuiltInElements&&(Te.tagNameCheck instanceof RegExp&&mn(Te.tagNameCheck,W)||Te.tagNameCheck instanceof Function&&Te.tagNameCheck(W))))return!1}else if(!es[K]){if(!mn(He,ou(W,ie,""))){if(!((K==="src"||K==="xlink:href"||K==="href")&&P!=="script"&&lC(W,"data:")===0&&co[P])){if(!(Tr&&!mn(ne,ou(W,ie,"")))){if(W)return!1}}}}}}}return!0},Gn=function(P){return P!=="annotation-xml"&&Nm(P,be)},is=function(P){sn(b.beforeSanitizeAttributes,P,null);const{attributes:K}=P;if(!K||ns(P))return;const W={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:de,forceKeepAttr:void 0};let Se=K.length;for(;Se--;){const tt=K[Se],{name:nt,namespaceURI:Tt,value:zt}=tt,Gt=Ye(nt),Oi=zt;let ct=nt==="value"?Oi:uC(Oi);if(W.attrName=Gt,W.attrValue=ct,W.keepAttr=!0,W.forceKeepAttr=void 0,sn(b.uponSanitizeAttribute,P,W),ct=W.attrValue,ra&&(Gt==="id"||Gt==="name")&&(dn(nt,P),ct=Wr+ct),Ri&&mn(/((--!?|])>)|<\/(style|title|textarea)/i,ct)){dn(nt,P);continue}if(Gt==="attributename"&&Nm(ct,"href")){dn(nt,P);continue}if(W.forceKeepAttr)continue;if(!W.keepAttr){dn(nt,P);continue}if(!Er&&mn(/\/>/i,ct)){dn(nt,P);continue}bn&&gh([I,_,se],ss=>{ct=ou(ct,ss," ")});const rs=Ye(P.nodeName);if(!tr(rs,Gt,ct)){dn(nt,P);continue}if(z&&typeof w=="object"&&typeof w.getAttributeType=="function"&&!Tt)switch(w.getAttributeType(rs,Gt)){case"TrustedHTML":{ct=z.createHTML(ct);break}case"TrustedScriptURL":{ct=z.createScriptURL(ct);break}}if(ct!==Oi)try{Tt?P.setAttributeNS(Tt,nt,ct):P.setAttribute(nt,ct),ns(P)?rn(P):iv(e.removed)}catch{dn(nt,P)}}sn(b.afterSanitizeAttributes,P,null)},sa=function ee(P){let K=null;const W=qn(P);for(sn(b.beforeSanitizeShadowDOM,P,null);K=W.nextNode();)sn(b.uponSanitizeShadowNode,K,null),er(K),is(K),K.content instanceof s&&ee(K.content);sn(b.afterSanitizeShadowDOM,P,null)};return e.sanitize=function(ee){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K=null,W=null,Se=null,tt=null;if(ts=!ee,ts&&(ee="<!-->"),typeof ee!="string"&&!Wi(ee))if(typeof ee.toString=="function"){if(ee=ee.toString(),typeof ee!="string")throw au("dirty is not a string, aborting")}else throw au("toString is not a function");if(!e.isSupported)return ee;if(Zi||vt(P),e.removed=[],typeof ee=="string"&&(Sn=!1),Sn){if(ee.nodeName){const zt=Ye(ee.nodeName);if(!Ve[zt]||wi[zt])throw au("root node is forbidden and cannot be sanitized in-place")}}else if(ee instanceof a)K=ki("<!---->"),W=K.ownerDocument.importNode(ee,!0),W.nodeType===uu.element&&W.nodeName==="BODY"||W.nodeName==="HTML"?K=W:K.appendChild(W);else{if(!Ii&&!bn&&!jn&&ee.indexOf("<")===-1)return z&&at?z.createHTML(ee):ee;if(K=ki(ee),!K)return Ii?null:at?F:""}K&&Ar&&rn(K.firstChild);const nt=qn(Sn?ee:K);for(;Se=nt.nextNode();)er(Se),is(Se),Se.content instanceof s&&sa(Se.content);if(Sn)return ee;if(Ii){if(ot)for(tt=p.call(K.ownerDocument);K.firstChild;)tt.appendChild(K.firstChild);else tt=K;return(de.shadowroot||de.shadowrootmode)&&(tt=A.call(i,tt,!0)),tt}let Tt=jn?K.outerHTML:K.innerHTML;return jn&&Ve["!doctype"]&&K.ownerDocument&&K.ownerDocument.doctype&&K.ownerDocument.doctype.name&&mn(uS,K.ownerDocument.doctype.name)&&(Tt="<!DOCTYPE "+K.ownerDocument.doctype.name+`>
`+Tt),bn&&gh([I,_,se],zt=>{Tt=ou(Tt,zt," ")}),z&&at?z.createHTML(Tt):Tt},e.setConfig=function(){let ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};vt(ee),Zi=!0},e.clearConfig=function(){xi=null,Zi=!1},e.isValidAttribute=function(ee,P,K){xi||vt({});const W=Ye(ee),Se=Ye(P);return tr(W,Se,K)},e.addHook=function(ee,P){typeof P=="function"&&su(b[ee],P)},e.removeHook=function(ee,P){if(P!==void 0){const K=oC(b[ee],P);return K===-1?void 0:aC(b[ee],K,1)[0]}return iv(b[ee])},e.removeHooks=function(ee){b[ee]=[]},e.removeAllHooks=function(){b=uv()},e}cS();const SC=["ba","aa","linalg","advlinalg","ra","calc1","calc_lib_art","calc_easy","crypto","koblitz","coding","islr","west_graphs","wm","numbers-geometry","ross-prob","intro-discrete","rudin","df","euler-intro","tao-analysis-1","euclid","gauss","four_pillars","thales","mom","human_action","man_econ_state","road_to_serfdom","atlas_shrugged","only-the-strong-survive","orange_btc","mod-race","base-race","bfi","frost","math_history","template"];function wC(t){return SC.includes(t)}const Pt={SECTION_VISIT:10,SECTION_COMPLETE:25,QUIZ_EASY:15,QUIZ_MEDIUM:25,QUIZ_HARD:40,QUIZ_PERFECT_BONUS:.5,VISUALIZATION_USE:5,PART_COMPLETE_BONUS:50,STREAK_DAILY_BONUS:5,STREAK_BONUS_CAP:50},yn={GAME_PARTICIPATION:10,TIER_MULTIPLIER:{1:.5,2:.6,3:.8,4:1,5:1.2,6:1.5,7:1.8,8:2.2,9:2.7,10:3.5},POINTS_PER_XP_UNIT:500,PERFECT_GAME_BONUS:25,SPEED_DEMON_BONUS:15,STREAK_MASTER_BONUS:20,FIRST_PLACE_BONUS:30,SECOND_PLACE_BONUS:15,THIRD_PLACE_BONUS:5},dl=[{tier:1,name:"Beginner",unlockLevel:1,modulusRange:[2,5],dividendRange:[10,25],basePoints:50},{tier:2,name:"Novice",unlockLevel:2,modulusRange:[2,7],dividendRange:[15,50],basePoints:75},{tier:3,name:"Intermediate",unlockLevel:3,modulusRange:[3,10],dividendRange:[20,100],basePoints:100},{tier:4,name:"Advanced",unlockLevel:5,modulusRange:[5,13],dividendRange:[50,200],basePoints:150},{tier:5,name:"Expert",unlockLevel:7,modulusRange:[7,17],dividendRange:[100,500],basePoints:200},{tier:6,name:"Master",unlockLevel:9,modulusRange:[11,23],dividendRange:[200,999],basePoints:300},{tier:7,name:"Grandmaster",unlockLevel:12,modulusRange:[13,31],dividendRange:[500,2e3],basePoints:400},{tier:8,name:"Legend",unlockLevel:15,modulusRange:[17,47],dividendRange:[1e3,5e3],basePoints:500},{tier:9,name:"Mythic",unlockLevel:18,modulusRange:[23,67],dividendRange:[2e3,9999],basePoints:650},{tier:10,name:"Transcendent",unlockLevel:21,modulusRange:[31,97],dividendRange:[5e3,99999],basePoints:800}],Lf=[0,100,250,500,850,1300,1900,2650,3550,4600,5850,7300,9e3,10950,13150,15650,18450,21550,25e3,28800,33e3,37600,42600,48e3,54e3],hS=50;class RC{constructor(e="",n=!0){this.prefix=e?`[${e}]`:"",this.enabled=n}log(e,n,i){if(!this.enabled)return;const r=this.prefix?`${this.prefix} ${n}`:n;if(e==="debug"||e==="info")return;const s=console[e]||console.log;i!==void 0?s(r,i):s(r)}debug(e,n){this.log("debug",e,n)}info(e,n){this.log("info",e,n)}warn(e,n){this.log("warn",e,n)}error(e,n){this.log("error",e,n)}setEnabled(e){this.enabled=e}}const Mm={};function oo(t){const e=t||"__default__";return Mm[e]||(Mm[e]=new RC(t)),Mm[e]}const Ss=oo("Storage"),og="magic-internet-math-progress",Pm=2;function fS(){try{const t="__storage_test__";return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch{return!1}}function IC(t){if(t===null||typeof t!="object")return!1;const e=t;if(typeof e.version!="number"||typeof e.user!="object"||e.user===null||typeof e.sections!="object"||e.sections===null||typeof e.streak!="object"||e.streak===null)return!1;const n=e.user;if(typeof n.totalXP!="number"||typeof n.level!="number"||!Array.isArray(n.sectionsCompleted)||!Array.isArray(n.partsCompleted))return!1;const i=e.streak;return!(typeof i.currentStreak!="number"||typeof i.longestStreak!="number")}function zf(){if(!fS())return Ss.warn("localStorage is not available"),null;try{const t=localStorage.getItem(og);if(!t)return null;const e=JSON.parse(t);return IC(e)?(e.version!==Pm&&(Ss.info(`Migrating state from v${e.version} to v${Pm}`),e.version=Pm),e):(Ss.warn("Invalid gamification state structure in localStorage"),null)}catch(t){Ss.error("Failed to load gamification state:",t);try{localStorage.removeItem(og),Ss.info("Cleared corrupted gamification state from localStorage")}catch{}return null}}function Vy(t){if(!fS()){Ss.warn("localStorage is not available, state not saved");return}try{localStorage.setItem(og,JSON.stringify(t))}catch(e){Ss.error("Failed to save gamification state:",e)}}function CC(){const t=zf();t&&(t.migratedToServer=!0,Vy(t),Ss.info("Marked progress as migrated to server"))}function NC(){const t=zf();if(!t)return!1;const e=t.user.totalXP>0||Object.keys(t.sections).length>0,n=!t.migratedToServer;return e&&n}function dS(){const t=new Date().toISOString(),e=t.split("T")[0];return{version:2,user:{totalXP:0,level:1,sectionsCompleted:[],partsCompleted:[],quizzesTaken:0,perfectQuizzes:0,visualizationsUsed:0,totalTimeSpentMinutes:0,joinedAt:t},sections:{},achievements:xC(),streak:{currentStreak:0,longestStreak:0,lastActivityDate:null,freezesRemaining:2,freezeUsedToday:!1},dailyGoals:{date:e,xpEarned:0,xpGoal:hS,completed:!1},lastUpdated:t}}function xC(){return[{id:"first-section",unlockedAt:null,progress:0,target:1},{id:"ten-sections",unlockedAt:null,progress:0,target:10},{id:"half-course",unlockedAt:null,progress:0,target:50},{id:"course-complete",unlockedAt:null,progress:0,target:100},{id:"first-mastery",unlockedAt:null,progress:0,target:1},{id:"quiz-master",unlockedAt:null,progress:0,target:10},{id:"perfectionist",unlockedAt:null,progress:0,target:5},{id:"week-streak",unlockedAt:null,progress:0,target:7},{id:"month-streak",unlockedAt:null,progress:0,target:30},{id:"level-5",unlockedAt:null,progress:0,target:5},{id:"level-10",unlockedAt:null,progress:0,target:10},{id:"first-visualization",unlockedAt:null,progress:0,target:1},{id:"explorer",unlockedAt:null,progress:0,target:10},{id:"racing-rookie",unlockedAt:null,progress:0,target:1},{id:"speed-demon",unlockedAt:null,progress:0,target:50},{id:"streak-legend",unlockedAt:null,progress:0,target:20},{id:"tier-climber",unlockedAt:null,progress:0,target:6},{id:"modular-master",unlockedAt:null,progress:0,target:1e4},{id:"multiplayer-champion",unlockedAt:null,progress:0,target:5}]}const kC=50;function cv(t){return Math.round(t/kC*100)}const OC=[{id:"first-section",title:"First Steps",description:"Complete your first section",category:"progress",xpReward:25,check:t=>t.user.sectionsCompleted.length,target:1},{id:"ten-sections",title:"Getting Started",description:"Complete 10 sections",category:"progress",xpReward:50,check:t=>t.user.sectionsCompleted.length,target:10},{id:"half-course",title:"Halfway There",description:"Complete 50% of the course",category:"progress",xpReward:100,check:t=>cv(t.user.sectionsCompleted.length),target:50},{id:"course-complete",title:"Course Complete",description:"Complete 100% of the course",category:"progress",xpReward:200,check:t=>cv(t.user.sectionsCompleted.length),target:100},{id:"first-mastery",title:"Master of One",description:"Master your first section",category:"mastery",xpReward:30,check:t=>Object.values(t.sections).filter(e=>e.masteryLevel==="mastered").length,target:1},{id:"quiz-master",title:"Quiz Master",description:"Complete 10 quizzes",category:"mastery",xpReward:50,check:t=>t.user.quizzesTaken,target:10},{id:"perfectionist",title:"Perfectionist",description:"Get 5 perfect quiz scores",category:"mastery",xpReward:75,check:t=>t.user.perfectQuizzes,target:5},{id:"week-streak",title:"Week Warrior",description:"Maintain a 7-day streak",category:"dedication",xpReward:50,check:t=>t.streak.longestStreak,target:7},{id:"month-streak",title:"Monthly Master",description:"Maintain a 30-day streak",category:"dedication",xpReward:150,check:t=>t.streak.longestStreak,target:30},{id:"level-5",title:"Level Up",description:"Reach level 5",category:"dedication",xpReward:50,check:t=>t.user.level,target:5},{id:"level-10",title:"Expert",description:"Reach level 10",category:"dedication",xpReward:100,check:t=>t.user.level,target:10},{id:"first-visualization",title:"Visual Learner",description:"Use your first interactive visualization",category:"exploration",xpReward:15,check:t=>t.user.visualizationsUsed,target:1},{id:"explorer",title:"Explorer",description:"Use 10 different visualizations",category:"exploration",xpReward:50,check:t=>t.user.visualizationsUsed,target:10}];function DC(t){const e=[];for(const n of OC){const i=t.achievements.find(s=>s.id===n.id);if(i!=null&&i.unlockedAt)continue;n.check(t)>=n.target&&e.push({id:n.id,title:n.title,description:n.description,category:n.category,xpReward:n.xpReward,timestamp:Date.now()})}return e}function xl(t){for(let e=Lf.length-1;e>=0;e--)if(t>=Lf[e])return e+1;return 1}function MC(t,e){const n={easy:Pt.QUIZ_EASY,medium:Pt.QUIZ_MEDIUM,hard:Pt.QUIZ_HARD}[t];return Math.round(n*(e/100))}const PC=1e3*60*60*24;function LC(t){const e=new Date,n=e.toISOString().split("T")[0],i=t.streak.lastActivityDate;if(t.dailyGoals.date!==n&&(t={...t,dailyGoals:{date:n,xpEarned:0,xpGoal:hS,completed:!1},streak:{...t.streak,freezeUsedToday:!1}}),!i)return{...t,streak:{...t.streak,currentStreak:1,longestStreak:Math.max(1,t.streak.longestStreak),lastActivityDate:n}};const r=new Date(i),s=Math.floor((e.getTime()-r.getTime())/PC);if(s===0)return t;if(s===1){const o=t.streak.currentStreak+1;return{...t,streak:{...t.streak,currentStreak:o,longestStreak:Math.max(o,t.streak.longestStreak),lastActivityDate:n}}}return s===2&&t.streak.freezesRemaining>0&&!t.streak.freezeUsedToday?{...t,streak:{...t.streak,freezesRemaining:t.streak.freezesRemaining-1,freezeUsedToday:!0,lastActivityDate:n}}:{...t,streak:{...t.streak,currentStreak:1,lastActivityDate:n}}}function mS(t){const{quizAttempts:e}=t;if(e.length===0)return"learning";const n=Math.max(...e.map(r=>r.score)),i=e.reduce((r,s)=>r+s.score,0)/e.length;return n>80||i>=90&&e.length>=3?"mastered":n>=70||i>=70&&e.length>=2?"familiar":"learning"}const bd=oo("GamificationReducer");function zC(t,e,n){const i=t.sections[e];if(i!=null&&i.visitedAt)return t;const r=t.user.totalXP+Pt.SECTION_VISIT;return{...t,user:{...t.user,totalXP:r,level:xl(r)},sections:{...t.sections,[e]:{sectionId:e,visitedAt:n,completedAt:(i==null?void 0:i.completedAt)??null,timeSpentSeconds:(i==null?void 0:i.timeSpentSeconds)??0,quizAttempts:(i==null?void 0:i.quizAttempts)??[],masteryLevel:(i==null?void 0:i.masteryLevel)??"learning",visualizationsInteracted:(i==null?void 0:i.visualizationsInteracted)??[]}},dailyGoals:{...t.dailyGoals,xpEarned:t.dailyGoals.xpEarned+Pt.SECTION_VISIT},lastUpdated:n}}function VC(t,e,n){const i=t.sections[e];if(i!=null&&i.completedAt)return t;if(!i)return bd.warn(`Attempted to complete unvisited section: ${e}`),t;const r=t.user.totalXP+Pt.SECTION_COMPLETE,s=[...t.user.sectionsCompleted,e];return{...t,user:{...t.user,totalXP:r,level:xl(r),sectionsCompleted:s},sections:{...t.sections,[e]:{...i,completedAt:n,masteryLevel:mS(i)}},dailyGoals:{...t.dailyGoals,xpEarned:t.dailyGoals.xpEarned+Pt.SECTION_COMPLETE},lastUpdated:n}}function UC(t,e,n){const{sectionId:i,difficulty:r,score:s,correctAnswers:o,totalQuestions:a}=e,c=t.sections[i];if(!c)return bd.warn(`Section ${i} was not visited before quiz`),t;const h=MC(r,s),m=o===a,T=m?Math.round(h*(1+Pt.QUIZ_PERFECT_BONUS)):h,g=t.user.totalXP+T,w={timestamp:n,difficulty:r,score:s,correctAnswers:o,totalQuestions:a,xpEarned:T},O=[...c.quizAttempts,w],M={...c,quizAttempts:O},L=mS(M),x=s>=80&&!c.completedAt,k=x&&!t.user.sectionsCompleted.includes(i),D=k?Pt.SECTION_COMPLETE:0;return{...t,user:{...t.user,totalXP:g+D,level:xl(g+D),quizzesTaken:t.user.quizzesTaken+1,perfectQuizzes:m?t.user.perfectQuizzes+1:t.user.perfectQuizzes,sectionsCompleted:k?[...t.user.sectionsCompleted,i]:t.user.sectionsCompleted},sections:{...t.sections,[i]:{...M,masteryLevel:L,completedAt:x?c.completedAt||n:c.completedAt}},dailyGoals:{...t.dailyGoals,xpEarned:t.dailyGoals.xpEarned+T+D},lastUpdated:n}}function jC(t,e,n,i){const r=t.sections[e];if(r!=null&&r.visualizationsInteracted.includes(n))return t;if(!r)return bd.warn(`Section ${e} was not visited before visualization`),t;const s=t.user.totalXP+Pt.VISUALIZATION_USE,o=[...r.visualizationsInteracted,n];return{...t,user:{...t.user,totalXP:s,level:xl(s),visualizationsUsed:t.user.visualizationsUsed+1},sections:{...t.sections,[e]:{...r,visualizationsInteracted:o}},dailyGoals:{...t.dailyGoals,xpEarned:t.dailyGoals.xpEarned+Pt.VISUALIZATION_USE},lastUpdated:i}}function BC(t,e,n){if(t.user.partsCompleted.includes(e))return t;const i=t.user.totalXP+Pt.PART_COMPLETE_BONUS;return bd.info(`Part ${e} completed, awarding ${Pt.PART_COMPLETE_BONUS} XP`),{...t,user:{...t.user,totalXP:i,level:xl(i),partsCompleted:[...t.user.partsCompleted,e]},dailyGoals:{...t.dailyGoals,xpEarned:t.dailyGoals.xpEarned+Pt.PART_COMPLETE_BONUS},lastUpdated:n}}function FC(t,e,n){let i=yn.GAME_PARTICIPATION;const r=yn.TIER_MULTIPLIER[e.tier],s=Math.floor(Math.max(0,e.score)/yn.POINTS_PER_XP_UNIT*Pt.QUIZ_MEDIUM*r);if(i+=s,e.correctAnswers===e.totalQuestions&&e.totalQuestions>=10&&(i+=yn.PERFECT_GAME_BONUS),e.fastAnswers>=10&&(i+=yn.SPEED_DEMON_BONUS),e.maxStreak>=10&&(i+=yn.STREAK_MASTER_BONUS),e.isMultiplayer&&e.placement)switch(e.placement){case 1:i+=yn.FIRST_PLACE_BONUS;break;case 2:i+=yn.SECOND_PLACE_BONUS;break;case 3:i+=yn.THIRD_PLACE_BONUS;break}const o=t.user.totalXP+i,a=t.racingStats,c=e.score>((a==null?void 0:a.highScore)??0),h=e.isMultiplayer&&e.placement===1,m={gamesPlayed:((a==null?void 0:a.gamesPlayed)??0)+1,multiplayerGamesPlayed:((a==null?void 0:a.multiplayerGamesPlayed)??0)+(e.isMultiplayer?1:0),totalPoints:((a==null?void 0:a.totalPoints)??0)+Math.max(0,e.score),highScore:c?e.score:(a==null?void 0:a.highScore)??0,highestTierUnlocked:Math.max((a==null?void 0:a.highestTierUnlocked)??1,e.tier),longestStreak:Math.max((a==null?void 0:a.longestStreak)??0,e.maxStreak),fastAnswers:((a==null?void 0:a.fastAnswers)??0)+e.fastAnswers,totalCorrect:((a==null?void 0:a.totalCorrect)??0)+e.correctAnswers,totalAttempted:((a==null?void 0:a.totalAttempted)??0)+e.totalQuestions,multiplayerWins:((a==null?void 0:a.multiplayerWins)??0)+(h?1:0),lastPlayedAt:n},T=t.achievements.map(g=>{if(g.unlockedAt)return g;switch(g.id){case"racing-rookie":if(m.gamesPlayed>=1)return{...g,progress:1,unlockedAt:n};break;case"speed-demon":return m.fastAnswers>=50?{...g,progress:50,unlockedAt:n}:{...g,progress:Math.min(m.fastAnswers,50)};case"streak-legend":return m.longestStreak>=20?{...g,progress:20,unlockedAt:n}:{...g,progress:Math.min(m.longestStreak,20)};case"tier-climber":return m.highestTierUnlocked>=6?{...g,progress:6,unlockedAt:n}:{...g,progress:m.highestTierUnlocked};case"modular-master":return m.totalPoints>=1e4?{...g,progress:1e4,unlockedAt:n}:{...g,progress:Math.min(m.totalPoints,1e4)};case"multiplayer-champion":return m.multiplayerWins>=5?{...g,progress:5,unlockedAt:n}:{...g,progress:Math.min(m.multiplayerWins,5)}}return g});return{...t,user:{...t.user,totalXP:o,level:xl(o)},racingStats:m,achievements:T,dailyGoals:{...t.dailyGoals,xpEarned:t.dailyGoals.xpEarned+i},lastUpdated:n}}function HC(t,e){const n=new Date().toISOString();switch(e.type){case"LOAD_STATE":return e.payload;case"LOAD_FROM_SERVER":return{...e.payload,migratedToServer:!0};case"MERGE_WITH_SERVER":return{...e.payload,migratedToServer:!0};case"MARK_MIGRATED":return{...t,migratedToServer:!0,lastUpdated:n};case"VISIT_SECTION":return zC(t,e.payload.sectionId,n);case"COMPLETE_SECTION":return VC(t,e.payload.sectionId,n);case"COMPLETE_PART":return BC(t,e.payload.partId,n);case"RECORD_QUIZ":return UC(t,e.payload,n);case"USE_VISUALIZATION":return jC(t,e.payload.sectionId,e.payload.name,n);case"UPDATE_STREAK":return LC(t);case"RESET_PROGRESS":return dS();case"RECORD_RACE_GAME":return FC(t,e.payload,n);default:return t}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=()=>{};var hv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},GC=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},gS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,c=r+2<t.length,h=c?t[r+2]:0,m=s>>2,T=(s&3)<<4|a>>4;let g=(a&15)<<2|h>>6,w=h&63;c||(w=64,o||(g=64)),i.push(n[m],n[T],n[g],n[w])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):GC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const T=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||h==null||T==null)throw new $C;const g=s<<2|a>>4;if(i.push(g),h!==64){const w=a<<4&240|h>>2;if(i.push(w),T!==64){const O=h<<6&192|T;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $C extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZC=function(t){const e=pS(t);return gS.encodeByteArray(e,!0)},Vf=function(t){return ZC(t).replace(/\./g,"")},yS=function(t){try{return gS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=()=>KC().__FIREBASE_DEFAULTS__,YC=()=>{if(typeof process>"u"||typeof hv>"u")return;const t=hv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yS(t[1]);return e&&JSON.parse(e)},Uy=()=>{try{return qC()||XC()||YC()||QC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_S=t=>{var e,n;return(n=(e=Uy())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},vS=t=>{const e=_S(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},TS=()=>{var t;return(t=Uy())==null?void 0:t.config},ES=t=>{var e;return(e=Uy())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jy(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Vf(JSON.stringify(n)),Vf(JSON.stringify(o)),""].join(".")}const Vu={};function eN(){const t={prod:[],emulator:[]};for(const e of Object.keys(Vu))Vu[e]?t.emulator.push(e):t.prod.push(e);return t}function tN(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let fv=!1;function By(t,e){if(typeof window>"u"||typeof document>"u"||!na(window.location.host)||Vu[t]===e||Vu[t]||fv)return;Vu[t]=e;function n(g){return`__firebase__banner__${g}`}const i="__firebase__banner",s=eN().prod.length>0;function o(){const g=document.getElementById(i);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,w){g.setAttribute("width","24"),g.setAttribute("id",w),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{fv=!0,o()},g}function m(g,w){g.setAttribute("id",w),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function T(){const g=tN(i),w=n("text"),O=document.getElementById(w)||document.createElement("span"),M=n("learnmore"),L=document.getElementById(M)||document.createElement("a"),x=n("preprendIcon"),k=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const D=g.element;a(D),m(L,M);const z=h();c(k,x),D.append(k,O,L,z),document.body.appendChild(D)}s?(O.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(An())}function iN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oN(){const t=An();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function aN(){try{return typeof indexedDB=="object"}catch{return!1}}function lN(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="FirebaseError";class vr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=uN,Object.setPrototypeOf(this,vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xc.prototype.create)}}class xc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?cN(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new vr(r,a,i)}}function cN(t,e){return t.replace(hN,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const hN=/\{\$([^}]+)}/g;function fN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function qo(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(dv(s)&&dv(o)){if(!qo(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function dv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function dN(t,e){const n=new mN(t,e);return n.subscribe.bind(n)}class mN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");pN(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Lm),r.error===void 0&&(r.error=Lm),r.complete===void 0&&(r.complete=Lm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Lm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(t){return t&&t._delegate?t._delegate:t}class Qs{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new JC;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_N(e))try{this.getOrInitializeService({instanceIdentifier:Co})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Co){return this.instances.has(e)}getOptions(e=Co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:yN(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Co){return this.component?this.component.multipleInstances?e:Co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yN(t){return t===Co?void 0:t}function _N(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ze||(ze={}));const TN={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},EN=ze.INFO,AN={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},bN=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=AN[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fy{constructor(e){this.name=e,this._logLevel=EN,this._logHandler=bN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(wN(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function wN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ag="@firebase/app",mv="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=new Fy("@firebase/app"),RN="@firebase/app-compat",IN="@firebase/analytics-compat",CN="@firebase/analytics",NN="@firebase/app-check-compat",xN="@firebase/app-check",kN="@firebase/auth",ON="@firebase/auth-compat",DN="@firebase/database",MN="@firebase/data-connect",PN="@firebase/database-compat",LN="@firebase/functions",zN="@firebase/functions-compat",VN="@firebase/installations",UN="@firebase/installations-compat",jN="@firebase/messaging",BN="@firebase/messaging-compat",FN="@firebase/performance",HN="@firebase/performance-compat",qN="@firebase/remote-config",GN="@firebase/remote-config-compat",$N="@firebase/storage",ZN="@firebase/storage-compat",KN="@firebase/firestore",XN="@firebase/ai",YN="@firebase/firestore-compat",QN="firebase",JN="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="[DEFAULT]",WN={[ag]:"fire-core",[RN]:"fire-core-compat",[CN]:"fire-analytics",[IN]:"fire-analytics-compat",[xN]:"fire-app-check",[NN]:"fire-app-check-compat",[kN]:"fire-auth",[ON]:"fire-auth-compat",[DN]:"fire-rtdb",[MN]:"fire-data-connect",[PN]:"fire-rtdb-compat",[LN]:"fire-fn",[zN]:"fire-fn-compat",[VN]:"fire-iid",[UN]:"fire-iid-compat",[jN]:"fire-fcm",[BN]:"fire-fcm-compat",[FN]:"fire-perf",[HN]:"fire-perf-compat",[qN]:"fire-rc",[GN]:"fire-rc-compat",[$N]:"fire-gcs",[ZN]:"fire-gcs-compat",[KN]:"fire-fst",[YN]:"fire-fst-compat",[XN]:"fire-vertex","fire-js":"fire-js",[QN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=new Map,ex=new Map,ug=new Map;function pv(t,e){try{t.container.addComponent(e)}catch(n){Kr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Go(t){const e=t.name;if(ug.has(e))return Kr.debug(`There were multiple attempts to register component ${e}.`),!1;ug.set(e,t);for(const n of ac.values())pv(n,t);for(const n of ex.values())pv(n,t);return!0}function Sd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _i(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gs=new xc("app","Firebase",tx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=JN;function AS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:lg,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Gs.create("bad-app-name",{appName:String(r)});if(n||(n=TS()),!n)throw Gs.create("no-options");const s=ac.get(r);if(s){if(qo(n,s.options)&&qo(i,s.config))return s;throw Gs.create("duplicate-app",{appName:r})}const o=new vN(r);for(const c of ug.values())o.addComponent(c);const a=new nx(n,i,o);return ac.set(r,a),a}function Hy(t=lg){const e=ac.get(t);if(!e&&t===lg&&TS())return AS();if(!e)throw Gs.create("no-app",{appName:t});return e}function ix(){return Array.from(ac.values())}function hr(t,e,n){let i=WN[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=e.match(/\s|\//);if(r||s){const o=[`Unable to register library "${i}" with version "${e}":`];r&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kr.warn(o.join(" "));return}Go(new Qs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="firebase-heartbeat-database",sx=1,lc="firebase-heartbeat-store";let zm=null;function bS(){return zm||(zm=v2(rx,sx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(lc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gs.create("idb-open",{originalErrorMessage:t.message})})),zm}async function ox(t){try{const n=(await bS()).transaction(lc),i=await n.objectStore(lc).get(SS(t));return await n.done,i}catch(e){if(e instanceof vr)Kr.warn(e.message);else{const n=Gs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kr.warn(n.message)}}}async function gv(t,e){try{const i=(await bS()).transaction(lc,"readwrite");await i.objectStore(lc).put(e,SS(t)),await i.done}catch(n){if(n instanceof vr)Kr.warn(n.message);else{const i=Gs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Kr.warn(i.message)}}}function SS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=1024,lx=30;class ux{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hx(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=yv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>lx){const o=fx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Kr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=yv(),{heartbeatsToSend:i,unsentEntries:r}=cx(this._heartbeatsCache.heartbeats),s=Vf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Kr.warn(n),""}}}function yv(){return new Date().toISOString().substring(0,10)}function cx(t,e=ax){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),_v(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),_v(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class hx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aN()?lN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ox(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return gv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return gv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function _v(t){return Vf(JSON.stringify({version:2,heartbeats:t})).length}function fx(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(t){Go(new Qs("platform-logger",e=>new SN(e),"PRIVATE")),Go(new Qs("heartbeat",e=>new ux(e),"PRIVATE")),hr(ag,mv,t),hr(ag,mv,"esm2020"),hr("fire-js","")}dx("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="type.googleapis.com/google.protobuf.Int64Value",px="type.googleapis.com/google.protobuf.UInt64Value";function wS(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function Uf(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Uf(e));if(typeof t=="function"||typeof t=="object")return wS(t,e=>Uf(e));throw new Error("Data cannot be encoded in JSON: "+t)}function ml(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case mx:case px:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>ml(e)):typeof t=="function"||typeof t=="object"?wS(t,e=>ml(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Mn extends vr{constructor(e,n,i){super(`${qy}/${e}`,n||""),this.details=i,Object.setPrototypeOf(this,Mn.prototype)}}function gx(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function jf(t,e){let n=gx(t),i=n,r;try{const s=e&&e.error;if(s){const o=s.status;if(typeof o=="string"){if(!vv[o])return new Mn("internal","internal");n=vv[o],i=o}const a=s.message;typeof a=="string"&&(i=a),r=s.details,r!==void 0&&(r=ml(r))}}catch{}return n==="ok"?null:new Mn(n,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,n,i,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,_i(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||n.get().then(s=>this.auth=s,()=>{}),this.messaging||i.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r==null||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),r=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="us-central1",_x=/^data: (.*?)(?:\n|$)/;function vx(t){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new Mn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Tx{constructor(e,n,i,r,s=cg,o=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new yx(e,n,i,r),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=cg}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Ex(t,e,n){const i=na(e);t.emulatorOrigin=`http${i?"s":""}://${e}:${n}`,i&&(jy(t.emulatorOrigin+"/backends"),By("Functions",!0))}function Ax(t,e,n){const i=r=>Sx(t,e,r,{});return i.stream=(r,s)=>Rx(t,e,r,s),i}function RS(t){return t.emulatorOrigin&&na(t.emulatorOrigin)?"include":void 0}async function bx(t,e,n,i,r){n["Content-Type"]="application/json";let s;try{s=await i(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:RS(r)})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}async function IS(t,e){const n={},i=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(n.Authorization="Bearer "+i.authToken),i.messagingToken&&(n["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=i.appCheckToken),n}function Sx(t,e,n,i){const r=t._url(e);return wx(t,r,n,i)}async function wx(t,e,n,i){n=Uf(n);const r={data:n},s=await IS(t,i),o=i.timeout||7e4,a=vx(o),c=await Promise.race([bx(e,r,s,t.fetchImpl,t),a.promise,t.cancelAllRequests]);if(a.cancel(),!c)throw new Mn("cancelled","Firebase Functions instance was deleted.");const h=jf(c.status,c.json);if(h)throw h;if(!c.json)throw new Mn("internal","Response is not valid JSON object.");let m=c.json.data;if(typeof m>"u"&&(m=c.json.result),typeof m>"u")throw new Mn("internal","Response is missing data field.");return{data:ml(m)}}function Rx(t,e,n,i){const r=t._url(e);return Ix(t,r,n,i||{})}async function Ix(t,e,n,i){var g;n=Uf(n);const r={data:n},s=await IS(t,i);s["Content-Type"]="application/json",s.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(r),headers:s,signal:i==null?void 0:i.signal,credentials:RS(t)})}catch(w){if(w instanceof Error&&w.name==="AbortError"){const M=new Mn("cancelled","Request was cancelled.");return{data:Promise.reject(M),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(M)}}}}}}const O=jf(0,null);return{data:Promise.reject(O),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(O)}}}}}}let a,c;const h=new Promise((w,O)=>{a=w,c=O});(g=i==null?void 0:i.signal)==null||g.addEventListener("abort",()=>{const w=new Mn("cancelled","Request was cancelled.");c(w)});const m=o.body.getReader(),T=Cx(m,a,c,i==null?void 0:i.signal);return{stream:{[Symbol.asyncIterator](){const w=T.getReader();return{async next(){const{value:O,done:M}=await w.read();return{value:O,done:M}},async return(){return await w.cancel(),{done:!0,value:void 0}}}}},data:h}}function Cx(t,e,n,i){const r=(o,a)=>{const c=o.match(_x);if(!c)return;const h=c[1];try{const m=JSON.parse(h);if("result"in m){e(ml(m.result));return}if("message"in m){a.enqueue(ml(m.message));return}if("error"in m){const T=jf(0,m);a.error(T),n(T);return}}catch(m){if(m instanceof Mn){a.error(m),n(m);return}}},s=new TextDecoder;return new ReadableStream({start(o){let a="";return c();async function c(){if(i!=null&&i.aborted){const h=new Mn("cancelled","Request was cancelled");return o.error(h),n(h),Promise.resolve()}try{const{value:h,done:m}=await t.read();if(m){a.trim()&&r(a.trim(),o),o.close();return}if(i!=null&&i.aborted){const g=new Mn("cancelled","Request was cancelled");o.error(g),n(g),await t.cancel();return}a+=s.decode(h,{stream:!0});const T=a.split(`
`);a=T.pop()||"";for(const g of T)g.trim()&&r(g.trim(),o);return c()}catch(h){const m=h instanceof Mn?h:jf(0,null);o.error(m),n(m)}}},cancel(){return t.cancel()}})}const Tv="@firebase/functions",Ev="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="auth-internal",xx="app-check-internal",kx="messaging-internal";function Ox(t){const e=(n,{instanceIdentifier:i})=>{const r=n.getProvider("app").getImmediate(),s=n.getProvider(Nx),o=n.getProvider(kx),a=n.getProvider(xx);return new Tx(r,s,o,a,i)};Go(new Qs(qy,e,"PUBLIC").setMultipleInstances(!0)),hr(Tv,Ev,t),hr(Tv,Ev,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t=Hy(),e=cg){const i=Sd(bi(t),qy).getImmediate({identifier:e}),r=vS("functions");return r&&CS(i,...r),i}function CS(t,e,n){Ex(bi(t),e,n)}function hi(t,e,n){return Ax(bi(t),e)}Ox();var Mx="firebase",Px="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hr(Mx,Px,"app");function NS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Lx=NS,xS=new xc("auth","Firebase",NS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf=new Fy("@firebase/auth");function zx(t,...e){Bf.logLevel<=ze.WARN&&Bf.warn(`Auth (${kl}): ${t}`,...e)}function Zh(t,...e){Bf.logLevel<=ze.ERROR&&Bf.error(`Auth (${kl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t,...e){throw Gy(t,...e)}function fr(t,...e){return Gy(t,...e)}function kS(t,e,n){const i={...Lx(),[e]:n};return new xc("auth","Firebase",i).create(e,{appName:t.name})}function $s(t){return kS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gy(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return xS.create(t,...e)}function ue(t,e,...n){if(!t)throw Gy(e,...n)}function zr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zh(e),new Error(e)}function Yr(t,e){t||zr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Vx(){return Av()==="http:"||Av()==="https:"}function Av(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Vx()||rN()||"connection"in navigator)?navigator.onLine:!0}function jx(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yr(n>e,"Short delay should be less than long delay!"),this.isMobile=nN()||sN()}get(){return Ux()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(t,e){Yr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Hx=new Oc(3e4,6e4);function wd(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ol(t,e,n,i,r={}){return DS(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=kc({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:c,...s};return iN()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&na(t.emulatorConfig.host)&&(h.credentials="include"),OS.fetch()(await PS(t,t.config.apiHost,n,a),h)})}async function DS(t,e,n){t._canInitEmulator=!1;const i={...Bx,...e};try{const r=new qx(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw _h(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,h]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw _h(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw _h(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw _h(t,"user-disabled",o);const m=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw kS(t,m,h);Xr(t,m)}}catch(r){if(r instanceof vr)throw r;Xr(t,"network-request-failed",{message:String(r)})}}async function MS(t,e,n,i,r={}){const s=await Ol(t,e,n,i,r);return"mfaPendingCredential"in s&&Xr(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function PS(t,e,n,i){const r=`${e}${n}?${i}`,s=t,o=s.config.emulator?$y(t.config,r):`${t.config.apiScheme}://${r}`;return Fx.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class qx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(fr(this.auth,"network-request-failed")),Hx.get())})}}function _h(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=fr(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gx(t,e){return Ol(t,"POST","/v1/accounts:delete",e)}async function Ff(t,e){return Ol(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $x(t,e=!1){const n=bi(t),i=await n.getIdToken(e),r=Zy(i);ue(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Uu(Vm(r.auth_time)),issuedAtTime:Uu(Vm(r.iat)),expirationTime:Uu(Vm(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Vm(t){return Number(t)*1e3}function Zy(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Zh("JWT malformed, contained fewer than 3 sections"),null;try{const r=yS(n);return r?JSON.parse(r):(Zh("Failed to decode base64 JWT payload"),null)}catch(r){return Zh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function bv(t){const e=Zy(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uc(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof vr&&Zx(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function Zx({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uu(this.lastLoginAt),this.creationTime=Uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hf(t){var T;const e=t.auth,n=await t.getIdToken(),i=await uc(t,Ff(e,{idToken:n}));ue(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const s=(T=r.providerUserInfo)!=null&&T.length?LS(r.providerUserInfo):[],o=Yx(t.providerData,s),a=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!(o!=null&&o.length),h=a?c:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new fg(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(t,m)}async function Xx(t){const e=bi(t);await Hf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Yx(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function LS(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qx(t,e){const n=await DS(t,{},async()=>{const i=kc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=await PS(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:i};return t.emulatorConfig&&na(t.emulatorConfig.host)&&(c.credentials="include"),OS.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Jx(t,e){return Ol(t,"POST","/v2/accounts:revokeToken",wd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=bv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await Qx(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new Xa;return i&&(ue(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(ue(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(ue(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xa,this.toJSON())}_performRefresh(){return zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Fi{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new Kx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new fg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await uc(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $x(this,e)}reload(){return Xx(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Fi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Hf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_i(this.auth.app))return Promise.reject($s(this.auth));const e=await this.getIdToken();return await uc(this,Gx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,h=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:T,emailVerified:g,isAnonymous:w,providerData:O,stsTokenManager:M}=n;ue(T&&M,e,"internal-error");const L=Xa.fromJSON(this.name,M);ue(typeof T=="string",e,"internal-error"),ms(i,e.name),ms(r,e.name),ue(typeof g=="boolean",e,"internal-error"),ue(typeof w=="boolean",e,"internal-error"),ms(s,e.name),ms(o,e.name),ms(a,e.name),ms(c,e.name),ms(h,e.name),ms(m,e.name);const x=new Fi({uid:T,auth:e,email:r,emailVerified:g,displayName:i,isAnonymous:w,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:L,createdAt:h,lastLoginAt:m});return O&&Array.isArray(O)&&(x.providerData=O.map(k=>({...k}))),c&&(x._redirectEventId=c),x}static async _fromIdTokenResponse(e,n,i=!1){const r=new Xa;r.updateFromServerResponse(n);const s=new Fi({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Hf(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ue(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?LS(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new Xa;a.updateFromIdToken(i);const c=new Fi({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new fg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=new Map;function Vr(t){Yr(t instanceof Function,"Expected a class definition");let e=Sv.get(t);return e?(Yr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Sv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}zS.type="NONE";const wv=zS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(t,e,n){return`firebase:${t}:${e}:${n}`}class Ya{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Kh(this.userKey,r.apiKey,s),this.fullPersistenceKey=Kh("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ff(this.auth,{idToken:e}).catch(()=>{});return n?Fi._fromGetAccountInfoResponse(this.auth,n,e):null}return Fi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ya(Vr(wv),e,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||Vr(wv);const o=Kh(i,e.config.apiKey,e.name);let a=null;for(const h of n)try{const m=await h._get(o);if(m){let T;if(typeof m=="string"){const g=await Ff(e,{idToken:m}).catch(()=>{});if(!g)break;T=await Fi._fromGetAccountInfoResponse(e,g,m)}else T=Fi._fromJSON(e,m);h!==s&&(a=T),s=h;break}}catch{}const c=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Ya(s,e,i):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new Ya(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(VS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HS(e))return"Blackberry";if(qS(e))return"Webos";if(US(e))return"Safari";if((e.includes("chrome/")||jS(e))&&!e.includes("edge/"))return"Chrome";if(FS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function VS(t=An()){return/firefox\//i.test(t)}function US(t=An()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jS(t=An()){return/crios\//i.test(t)}function BS(t=An()){return/iemobile/i.test(t)}function FS(t=An()){return/android/i.test(t)}function HS(t=An()){return/blackberry/i.test(t)}function qS(t=An()){return/webos/i.test(t)}function Ky(t=An()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Wx(t=An()){var e;return Ky(t)&&!!((e=window.navigator)!=null&&e.standalone)}function e4(){return oN()&&document.documentMode===10}function GS(t=An()){return Ky(t)||FS(t)||qS(t)||HS(t)||/windows phone/i.test(t)||BS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(t,e=[]){let n;switch(t){case"Browser":n=Rv(An());break;case"Worker":n=`${Rv(An())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${kl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const c=e(s);o(c)}catch(c){a(c)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n4(t,e={}){return Ol(t,"GET","/v2/passwordPolicy",wd(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4=6;class r4{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??i4,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Iv(this),this.idTokenSubscription=new Iv(this),this.beforeStateQueue=new t4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vr(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await Ya.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ff(this,{idToken:e}),i=await Fi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(_i(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(i=c.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_i(this.app))return Promise.reject($s(this));const n=e?bi(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _i(this.app)?Promise.reject($s(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _i(this.app)?Promise.reject($s(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await n4(this),n=new r4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Jx(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vr(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await Ya.create(this,[Vr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,i,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$S(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(_i(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&zx(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Rd(t){return bi(t)}class Iv{constructor(e){this.auth=e,this.observer=null,this.addObserver=dN(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function o4(t){Xy=t}function a4(t){return Xy.loadJS(t)}function l4(){return Xy.gapiScript}function u4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(t,e){const n=Sd(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(qo(s,e??{}))return r;Xr(r,"already-initialized")}return n.initialize({options:e})}function h4(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Vr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function f4(t,e,n){const i=Rd(t);ue(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=ZS(e),{host:o,port:a}=d4(e),c=a===null?"":`:${a}`,h={url:`${s}//${o}${c}/`},m=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){ue(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ue(qo(h,i.config.emulator)&&qo(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,na(o)?(jy(`${s}//${o}${c}`),By("Auth",!0)):m4()}function ZS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function d4(t){const e=ZS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:Cv(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:Cv(o)}}}function Cv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function m4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return zr("not implemented")}_getIdTokenResponse(e){return zr("not implemented")}_linkToIdToken(e,n){return zr("not implemented")}_getReauthenticationResolver(e){return zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qa(t,e){return MS(t,"POST","/v1/accounts:signInWithIdp",wd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4="http://localhost";class $o extends KS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const o=new $o(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Qa(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Qa(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Qa(e,n)}buildRequest(){const e={requestUri:p4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=kc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc extends XS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws extends Dc{constructor(){super("facebook.com")}static credential(e){return $o._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ws.credential(e.oauthAccessToken)}catch{return null}}}ws.FACEBOOK_SIGN_IN_METHOD="facebook.com";ws.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends Dc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $o._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Rs.credential(n,i)}catch{return null}}}Rs.GOOGLE_SIGN_IN_METHOD="google.com";Rs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends Dc{constructor(){super("github.com")}static credential(e){return $o._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Is.credential(e.oauthAccessToken)}catch{return null}}}Is.GITHUB_SIGN_IN_METHOD="github.com";Is.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends Dc{constructor(){super("twitter.com")}static credential(e,n){return $o._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Cs.credential(n,i)}catch{return null}}}Cs.TWITTER_SIGN_IN_METHOD="twitter.com";Cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await Fi._fromIdTokenResponse(e,i,r),o=Nv(i);return new Zo({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Nv(i);return new Zo({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Nv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf extends vr{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,qf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new qf(e,n,i,r)}}function YS(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?qf._fromErrorAndOperation(t,s,e,i):s})}async function g4(t,e,n=!1){const i=await uc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Zo._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y4(t,e,n=!1){const{auth:i}=t;if(_i(i.app))return Promise.reject($s(i));const r="reauthenticate";try{const s=await uc(t,YS(i,r,e,t),n);ue(s.idToken,i,"internal-error");const o=Zy(s.idToken);ue(o,i,"internal-error");const{sub:a}=o;return ue(t.uid===a,i,"user-mismatch"),Zo._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Xr(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _4(t,e,n=!1){if(_i(t.app))return Promise.reject($s(t));const i="signIn",r=await YS(t,i,e),s=await Zo._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v4(t,e){return MS(t,"POST","/v1/accounts:signInWithCustomToken",wd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T4(t,e){if(_i(t.app))return Promise.reject($s(t));const n=Rd(t),i=await v4(n,{token:e,returnSecureToken:!0}),r=await Zo._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}function E4(t,e,n,i){return bi(t).onIdTokenChanged(e,n,i)}function A4(t,e,n){return bi(t).beforeAuthStateChanged(e,n)}function b4(t,e,n,i){return bi(t).onAuthStateChanged(e,n,i)}function S4(t){return bi(t).signOut()}const Gf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gf,"1"),this.storage.removeItem(Gf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=1e3,R4=10;class JS extends QS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);e4()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,R4):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},w4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}JS.type="LOCAL";const I4=JS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS extends QS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}WS.type="SESSION";const e1=WS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Id(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async h=>h(n.origin,s)),c=await C4(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Id.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const h=Yy("",20);r.port1.start();const m=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(T){const g=T;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(m),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(){return window}function x4(t){dr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(){return typeof dr().WorkerGlobalScope<"u"&&typeof dr().importScripts=="function"}async function k4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function O4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function D4(){return t1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="firebaseLocalStorageDb",M4=1,$f="firebaseLocalStorage",i1="fbase_key";class Mc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Cd(t,e){return t.transaction([$f],e?"readwrite":"readonly").objectStore($f)}function P4(){const t=indexedDB.deleteDatabase(n1);return new Mc(t).toPromise()}function dg(){const t=indexedDB.open(n1,M4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore($f,{keyPath:i1})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains($f)?e(i):(i.close(),await P4(),e(await dg()))})})}async function xv(t,e,n){const i=Cd(t,!0).put({[i1]:e,value:n});return new Mc(i).toPromise()}async function L4(t,e){const n=Cd(t,!1).get(e),i=await new Mc(n).toPromise();return i===void 0?null:i.value}function kv(t,e){const n=Cd(t,!0).delete(e);return new Mc(n).toPromise()}const z4=800,V4=3;class r1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>V4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return t1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Id._getInstance(D4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await k4(),!this.activeServiceWorker)return;this.sender=new N4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||O4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dg();return await xv(e,Gf,"1"),await kv(e,Gf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>xv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>L4(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>kv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Cd(r,!1).getAll();return new Mc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),z4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}r1.type="LOCAL";const U4=r1;new Oc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(t,e){return e?Vr(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy extends KS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Qa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Qa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function B4(t){return _4(t.auth,new Qy(t),t.bypassAuthState)}function F4(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),y4(n,new Qy(t),t.bypassAuthState)}async function H4(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),g4(n,new Qy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return B4;case"linkViaPopup":case"linkViaRedirect":return H4;case"reauthViaPopup":case"reauthViaRedirect":return F4;default:Xr(this.auth,"internal-error")}}resolve(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=new Oc(2e3,1e4);class Ua extends s1{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Ua.currentPopupAction&&Ua.currentPopupAction.cancel(),Ua.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){Yr(this.filter.length===1,"Popup operations only handle one event");const e=Yy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ua.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,q4.get())};e()}}Ua.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4="pendingRedirect",Xh=new Map;class $4 extends s1{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Xh.get(this.auth._key());if(!e){try{const i=await Z4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Xh.set(this.auth._key(),e)}return this.bypassAuthState||Xh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Z4(t,e){const n=Y4(e),i=X4(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function K4(t,e){Xh.set(t._key(),e)}function X4(t){return Vr(t._redirectPersistence)}function Y4(t){return Kh(G4,t.config.apiKey,t.name)}async function Q4(t,e,n=!1){if(_i(t.app))return Promise.reject($s(t));const i=Rd(t),r=j4(i,e),o=await new $4(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=10*60*1e3;class W4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ek(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!o1(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(fr(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=J4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ov(e))}saveEventToCache(e){this.cachedEventUids.add(Ov(e)),this.lastProcessedEventTime=Date.now()}}function Ov(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function o1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ek(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return o1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tk(t,e={}){return Ol(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ik=/^https?/;async function rk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await tk(t);for(const n of e)try{if(sk(n))return}catch{}Xr(t,"unauthorized-domain")}function sk(t){const e=hg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!ik.test(n))return!1;if(nk.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=new Oc(3e4,6e4);function Dv(){const t=dr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ak(t){return new Promise((e,n)=>{var r,s,o;function i(){Dv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Dv(),n(fr(t,"network-request-failed"))},timeout:ok.get()})}if((s=(r=dr().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=dr().gapi)!=null&&o.load)i();else{const a=u4("iframefcb");return dr()[a]=()=>{gapi.load?i():n(fr(t,"network-request-failed"))},a4(`${l4()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Yh=null,e})}let Yh=null;function lk(t){return Yh=Yh||ak(t),Yh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=new Oc(5e3,15e3),ck="__/auth/iframe",hk="emulator/auth/iframe",fk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mk(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?$y(e,hk):`https://${t.config.authDomain}/${ck}`,i={apiKey:e.apiKey,appName:t.name,v:kl},r=dk.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${kc(i).slice(1)}`}async function pk(t){const e=await lk(t),n=dr().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:mk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fk,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=fr(t,"network-request-failed"),a=dr().setTimeout(()=>{s(o)},uk.get());function c(){dr().clearTimeout(a),r(i)}i.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yk=500,_k=600,vk="_blank",Tk="http://localhost";class Mv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ek(t,e,n,i=yk,r=_k){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const c={...gk,width:i.toString(),height:r.toString(),top:s,left:o},h=An().toLowerCase();n&&(a=jS(h)?vk:n),VS(h)&&(e=e||Tk,c.scrollbars="yes");const m=Object.entries(c).reduce((g,[w,O])=>`${g}${w}=${O},`,"");if(Wx(h)&&a!=="_self")return Ak(e||"",a),new Mv(null);const T=window.open(e||"",a,m);ue(T,t,"popup-blocked");try{T.focus()}catch{}return new Mv(T)}function Ak(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk="__/auth/handler",Sk="emulator/auth/handler",wk=encodeURIComponent("fac");async function Pv(t,e,n,i,r,s){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:kl,eventId:r};if(e instanceof XS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",fN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,T]of Object.entries({}))o[m]=T}if(e instanceof Dc){const m=e.getScopes().filter(T=>T!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const m of Object.keys(a))a[m]===void 0&&delete a[m];const c=await t._getAppCheckToken(),h=c?`#${wk}=${encodeURIComponent(c)}`:"";return`${Rk(t)}?${kc(a).slice(1)}${h}`}function Rk({config:t}){return t.emulator?$y(t,Sk):`https://${t.authDomain}/${bk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="webStorageSupport";class Ik{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=e1,this._completeRedirectFn=Q4,this._overrideRedirectResult=K4}async _openPopup(e,n,i,r){var o;Yr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await Pv(e,n,i,hg(),r);return Ek(e,s,Yy())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await Pv(e,n,i,hg(),r);return x4(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Yr(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await pk(e),i=new W4(e);return n.register("authEvent",r=>(ue(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Um,{type:Um},r=>{var o;const s=(o=r==null?void 0:r[0])==null?void 0:o[Um];s!==void 0&&n(!!s),Xr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return GS()||US()||Ky()}}const Ck=Ik;var Lv="@firebase/auth",zv="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kk(t){Go(new Qs("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$S(t)},h=new s4(i,r,s,c);return h4(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Go(new Qs("auth-internal",e=>{const n=Rd(e.getProvider("auth").getImmediate());return(i=>new Nk(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),hr(Lv,zv,xk(t)),hr(Lv,zv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=5*60,Dk=ES("authIdTokenMaxAge")||Ok;let Vv=null;const Mk=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Dk)return;const r=n==null?void 0:n.token;Vv!==r&&(Vv=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Pk(t=Hy()){const e=Sd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=c4(t,{popupRedirectResolver:Ck,persistence:[U4,I4,e1]}),i=ES("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=Mk(s.toString());A4(n,o,()=>o(n.currentUser)),E4(n,a=>o(a))}}const r=_S("auth");return r&&f4(n,`http://${r}`),n}function Lk(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}o4({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=fr("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",Lk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kk("Browser");var Uv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jy;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,p){function y(){}y.prototype=p.prototype,S.F=p.prototype,S.prototype=new y,S.prototype.constructor=S,S.D=function(A,b,I){for(var _=Array(arguments.length-2),se=2;se<arguments.length;se++)_[se-2]=arguments[se];return p.prototype[b].apply(A,_)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,p,y){y||(y=0);const A=Array(16);if(typeof p=="string")for(var b=0;b<16;++b)A[b]=p.charCodeAt(y++)|p.charCodeAt(y++)<<8|p.charCodeAt(y++)<<16|p.charCodeAt(y++)<<24;else for(b=0;b<16;++b)A[b]=p[y++]|p[y++]<<8|p[y++]<<16|p[y++]<<24;p=S.g[0],y=S.g[1],b=S.g[2];let I=S.g[3],_;_=p+(I^y&(b^I))+A[0]+3614090360&4294967295,p=y+(_<<7&4294967295|_>>>25),_=I+(b^p&(y^b))+A[1]+3905402710&4294967295,I=p+(_<<12&4294967295|_>>>20),_=b+(y^I&(p^y))+A[2]+606105819&4294967295,b=I+(_<<17&4294967295|_>>>15),_=y+(p^b&(I^p))+A[3]+3250441966&4294967295,y=b+(_<<22&4294967295|_>>>10),_=p+(I^y&(b^I))+A[4]+4118548399&4294967295,p=y+(_<<7&4294967295|_>>>25),_=I+(b^p&(y^b))+A[5]+1200080426&4294967295,I=p+(_<<12&4294967295|_>>>20),_=b+(y^I&(p^y))+A[6]+2821735955&4294967295,b=I+(_<<17&4294967295|_>>>15),_=y+(p^b&(I^p))+A[7]+4249261313&4294967295,y=b+(_<<22&4294967295|_>>>10),_=p+(I^y&(b^I))+A[8]+1770035416&4294967295,p=y+(_<<7&4294967295|_>>>25),_=I+(b^p&(y^b))+A[9]+2336552879&4294967295,I=p+(_<<12&4294967295|_>>>20),_=b+(y^I&(p^y))+A[10]+4294925233&4294967295,b=I+(_<<17&4294967295|_>>>15),_=y+(p^b&(I^p))+A[11]+2304563134&4294967295,y=b+(_<<22&4294967295|_>>>10),_=p+(I^y&(b^I))+A[12]+1804603682&4294967295,p=y+(_<<7&4294967295|_>>>25),_=I+(b^p&(y^b))+A[13]+4254626195&4294967295,I=p+(_<<12&4294967295|_>>>20),_=b+(y^I&(p^y))+A[14]+2792965006&4294967295,b=I+(_<<17&4294967295|_>>>15),_=y+(p^b&(I^p))+A[15]+1236535329&4294967295,y=b+(_<<22&4294967295|_>>>10),_=p+(b^I&(y^b))+A[1]+4129170786&4294967295,p=y+(_<<5&4294967295|_>>>27),_=I+(y^b&(p^y))+A[6]+3225465664&4294967295,I=p+(_<<9&4294967295|_>>>23),_=b+(p^y&(I^p))+A[11]+643717713&4294967295,b=I+(_<<14&4294967295|_>>>18),_=y+(I^p&(b^I))+A[0]+3921069994&4294967295,y=b+(_<<20&4294967295|_>>>12),_=p+(b^I&(y^b))+A[5]+3593408605&4294967295,p=y+(_<<5&4294967295|_>>>27),_=I+(y^b&(p^y))+A[10]+38016083&4294967295,I=p+(_<<9&4294967295|_>>>23),_=b+(p^y&(I^p))+A[15]+3634488961&4294967295,b=I+(_<<14&4294967295|_>>>18),_=y+(I^p&(b^I))+A[4]+3889429448&4294967295,y=b+(_<<20&4294967295|_>>>12),_=p+(b^I&(y^b))+A[9]+568446438&4294967295,p=y+(_<<5&4294967295|_>>>27),_=I+(y^b&(p^y))+A[14]+3275163606&4294967295,I=p+(_<<9&4294967295|_>>>23),_=b+(p^y&(I^p))+A[3]+4107603335&4294967295,b=I+(_<<14&4294967295|_>>>18),_=y+(I^p&(b^I))+A[8]+1163531501&4294967295,y=b+(_<<20&4294967295|_>>>12),_=p+(b^I&(y^b))+A[13]+2850285829&4294967295,p=y+(_<<5&4294967295|_>>>27),_=I+(y^b&(p^y))+A[2]+4243563512&4294967295,I=p+(_<<9&4294967295|_>>>23),_=b+(p^y&(I^p))+A[7]+1735328473&4294967295,b=I+(_<<14&4294967295|_>>>18),_=y+(I^p&(b^I))+A[12]+2368359562&4294967295,y=b+(_<<20&4294967295|_>>>12),_=p+(y^b^I)+A[5]+4294588738&4294967295,p=y+(_<<4&4294967295|_>>>28),_=I+(p^y^b)+A[8]+2272392833&4294967295,I=p+(_<<11&4294967295|_>>>21),_=b+(I^p^y)+A[11]+1839030562&4294967295,b=I+(_<<16&4294967295|_>>>16),_=y+(b^I^p)+A[14]+4259657740&4294967295,y=b+(_<<23&4294967295|_>>>9),_=p+(y^b^I)+A[1]+2763975236&4294967295,p=y+(_<<4&4294967295|_>>>28),_=I+(p^y^b)+A[4]+1272893353&4294967295,I=p+(_<<11&4294967295|_>>>21),_=b+(I^p^y)+A[7]+4139469664&4294967295,b=I+(_<<16&4294967295|_>>>16),_=y+(b^I^p)+A[10]+3200236656&4294967295,y=b+(_<<23&4294967295|_>>>9),_=p+(y^b^I)+A[13]+681279174&4294967295,p=y+(_<<4&4294967295|_>>>28),_=I+(p^y^b)+A[0]+3936430074&4294967295,I=p+(_<<11&4294967295|_>>>21),_=b+(I^p^y)+A[3]+3572445317&4294967295,b=I+(_<<16&4294967295|_>>>16),_=y+(b^I^p)+A[6]+76029189&4294967295,y=b+(_<<23&4294967295|_>>>9),_=p+(y^b^I)+A[9]+3654602809&4294967295,p=y+(_<<4&4294967295|_>>>28),_=I+(p^y^b)+A[12]+3873151461&4294967295,I=p+(_<<11&4294967295|_>>>21),_=b+(I^p^y)+A[15]+530742520&4294967295,b=I+(_<<16&4294967295|_>>>16),_=y+(b^I^p)+A[2]+3299628645&4294967295,y=b+(_<<23&4294967295|_>>>9),_=p+(b^(y|~I))+A[0]+4096336452&4294967295,p=y+(_<<6&4294967295|_>>>26),_=I+(y^(p|~b))+A[7]+1126891415&4294967295,I=p+(_<<10&4294967295|_>>>22),_=b+(p^(I|~y))+A[14]+2878612391&4294967295,b=I+(_<<15&4294967295|_>>>17),_=y+(I^(b|~p))+A[5]+4237533241&4294967295,y=b+(_<<21&4294967295|_>>>11),_=p+(b^(y|~I))+A[12]+1700485571&4294967295,p=y+(_<<6&4294967295|_>>>26),_=I+(y^(p|~b))+A[3]+2399980690&4294967295,I=p+(_<<10&4294967295|_>>>22),_=b+(p^(I|~y))+A[10]+4293915773&4294967295,b=I+(_<<15&4294967295|_>>>17),_=y+(I^(b|~p))+A[1]+2240044497&4294967295,y=b+(_<<21&4294967295|_>>>11),_=p+(b^(y|~I))+A[8]+1873313359&4294967295,p=y+(_<<6&4294967295|_>>>26),_=I+(y^(p|~b))+A[15]+4264355552&4294967295,I=p+(_<<10&4294967295|_>>>22),_=b+(p^(I|~y))+A[6]+2734768916&4294967295,b=I+(_<<15&4294967295|_>>>17),_=y+(I^(b|~p))+A[13]+1309151649&4294967295,y=b+(_<<21&4294967295|_>>>11),_=p+(b^(y|~I))+A[4]+4149444226&4294967295,p=y+(_<<6&4294967295|_>>>26),_=I+(y^(p|~b))+A[11]+3174756917&4294967295,I=p+(_<<10&4294967295|_>>>22),_=b+(p^(I|~y))+A[2]+718787259&4294967295,b=I+(_<<15&4294967295|_>>>17),_=y+(I^(b|~p))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+p&4294967295,S.g[1]=S.g[1]+(b+(_<<21&4294967295|_>>>11))&4294967295,S.g[2]=S.g[2]+b&4294967295,S.g[3]=S.g[3]+I&4294967295}i.prototype.v=function(S,p){p===void 0&&(p=S.length);const y=p-this.blockSize,A=this.C;let b=this.h,I=0;for(;I<p;){if(b==0)for(;I<=y;)r(this,S,I),I+=this.blockSize;if(typeof S=="string"){for(;I<p;)if(A[b++]=S.charCodeAt(I++),b==this.blockSize){r(this,A),b=0;break}}else for(;I<p;)if(A[b++]=S[I++],b==this.blockSize){r(this,A),b=0;break}}this.h=b,this.o+=p},i.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var p=1;p<S.length-8;++p)S[p]=0;p=this.o*8;for(var y=S.length-8;y<S.length;++y)S[y]=p&255,p/=256;for(this.v(S),S=Array(16),p=0,y=0;y<4;++y)for(let A=0;A<32;A+=8)S[p++]=this.g[y]>>>A&255;return S};function s(S,p){var y=a;return Object.prototype.hasOwnProperty.call(y,S)?y[S]:y[S]=p(S)}function o(S,p){this.h=p;const y=[];let A=!0;for(let b=S.length-1;b>=0;b--){const I=S[b]|0;A&&I==p||(y[b]=I,A=!1)}this.g=y}var a={};function c(S){return-128<=S&&S<128?s(S,function(p){return new o([p|0],p<0?-1:0)}):new o([S|0],S<0?-1:0)}function h(S){if(isNaN(S)||!isFinite(S))return T;if(S<0)return L(h(-S));const p=[];let y=1;for(let A=0;S>=y;A++)p[A]=S/y|0,y*=4294967296;return new o(p,0)}function m(S,p){if(S.length==0)throw Error("number format error: empty string");if(p=p||10,p<2||36<p)throw Error("radix out of range: "+p);if(S.charAt(0)=="-")return L(m(S.substring(1),p));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const y=h(Math.pow(p,8));let A=T;for(let I=0;I<S.length;I+=8){var b=Math.min(8,S.length-I);const _=parseInt(S.substring(I,I+b),p);b<8?(b=h(Math.pow(p,b)),A=A.j(b).add(h(_))):(A=A.j(y),A=A.add(h(_)))}return A}var T=c(0),g=c(1),w=c(16777216);t=o.prototype,t.m=function(){if(M(this))return-L(this).m();let S=0,p=1;for(let y=0;y<this.g.length;y++){const A=this.i(y);S+=(A>=0?A:4294967296+A)*p,p*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(O(this))return"0";if(M(this))return"-"+L(this).toString(S);const p=h(Math.pow(S,6));var y=this;let A="";for(;;){const b=z(y,p).g;y=x(y,b.j(p));let I=((y.g.length>0?y.g[0]:y.h)>>>0).toString(S);if(y=b,O(y))return I+A;for(;I.length<6;)I="0"+I;A=I+A}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function O(S){if(S.h!=0)return!1;for(let p=0;p<S.g.length;p++)if(S.g[p]!=0)return!1;return!0}function M(S){return S.h==-1}t.l=function(S){return S=x(this,S),M(S)?-1:O(S)?0:1};function L(S){const p=S.g.length,y=[];for(let A=0;A<p;A++)y[A]=~S.g[A];return new o(y,~S.h).add(g)}t.abs=function(){return M(this)?L(this):this},t.add=function(S){const p=Math.max(this.g.length,S.g.length),y=[];let A=0;for(let b=0;b<=p;b++){let I=A+(this.i(b)&65535)+(S.i(b)&65535),_=(I>>>16)+(this.i(b)>>>16)+(S.i(b)>>>16);A=_>>>16,I&=65535,_&=65535,y[b]=_<<16|I}return new o(y,y[y.length-1]&-2147483648?-1:0)};function x(S,p){return S.add(L(p))}t.j=function(S){if(O(this)||O(S))return T;if(M(this))return M(S)?L(this).j(L(S)):L(L(this).j(S));if(M(S))return L(this.j(L(S)));if(this.l(w)<0&&S.l(w)<0)return h(this.m()*S.m());const p=this.g.length+S.g.length,y=[];for(var A=0;A<2*p;A++)y[A]=0;for(A=0;A<this.g.length;A++)for(let b=0;b<S.g.length;b++){const I=this.i(A)>>>16,_=this.i(A)&65535,se=S.i(b)>>>16,pe=S.i(b)&65535;y[2*A+2*b]+=_*pe,k(y,2*A+2*b),y[2*A+2*b+1]+=I*pe,k(y,2*A+2*b+1),y[2*A+2*b+1]+=_*se,k(y,2*A+2*b+1),y[2*A+2*b+2]+=I*se,k(y,2*A+2*b+2)}for(S=0;S<p;S++)y[S]=y[2*S+1]<<16|y[2*S];for(S=p;S<2*p;S++)y[S]=0;return new o(y,0)};function k(S,p){for(;(S[p]&65535)!=S[p];)S[p+1]+=S[p]>>>16,S[p]&=65535,p++}function D(S,p){this.g=S,this.h=p}function z(S,p){if(O(p))throw Error("division by zero");if(O(S))return new D(T,T);if(M(S))return p=z(L(S),p),new D(L(p.g),L(p.h));if(M(p))return p=z(S,L(p)),new D(L(p.g),p.h);if(S.g.length>30){if(M(S)||M(p))throw Error("slowDivide_ only works with positive integers.");for(var y=g,A=p;A.l(S)<=0;)y=F(y),A=F(A);var b=$(y,1),I=$(A,1);for(A=$(A,2),y=$(y,2);!O(A);){var _=I.add(A);_.l(S)<=0&&(b=b.add(y),I=_),A=$(A,1),y=$(y,1)}return p=x(S,b.j(p)),new D(b,p)}for(b=T;S.l(p)>=0;){for(y=Math.max(1,Math.floor(S.m()/p.m())),A=Math.ceil(Math.log(y)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),I=h(y),_=I.j(p);M(_)||_.l(S)>0;)y-=A,I=h(y),_=I.j(p);O(I)&&(I=g),b=b.add(I),S=x(S,_)}return new D(b,S)}t.B=function(S){return z(this,S).h},t.and=function(S){const p=Math.max(this.g.length,S.g.length),y=[];for(let A=0;A<p;A++)y[A]=this.i(A)&S.i(A);return new o(y,this.h&S.h)},t.or=function(S){const p=Math.max(this.g.length,S.g.length),y=[];for(let A=0;A<p;A++)y[A]=this.i(A)|S.i(A);return new o(y,this.h|S.h)},t.xor=function(S){const p=Math.max(this.g.length,S.g.length),y=[];for(let A=0;A<p;A++)y[A]=this.i(A)^S.i(A);return new o(y,this.h^S.h)};function F(S){const p=S.g.length+1,y=[];for(let A=0;A<p;A++)y[A]=S.i(A)<<1|S.i(A-1)>>>31;return new o(y,S.h)}function $(S,p){const y=p>>5;p%=32;const A=S.g.length-y,b=[];for(let I=0;I<A;I++)b[I]=p>0?S.i(I+y)>>>p|S.i(I+y+1)<<32-p:S.i(I+y);return new o(b,S.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,Jy=o}).apply(typeof Uv<"u"?Uv:typeof self<"u"?self:typeof window<"u"?window:{});var vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof vh=="object"&&vh];for(var d=0;d<u.length;++d){var E=u[d];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=n(this);function r(u,d){if(d)e:{var E=i;u=u.split(".");for(var N=0;N<u.length-1;N++){var U=u[N];if(!(U in E))break e;E=E[U]}u=u[u.length-1],N=E[u],d=d(N),d!=N&&d!=null&&e(E,u,{configurable:!0,writable:!0,value:d})}}r("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(u){return u||function(d){var E=[],N;for(N in d)Object.prototype.hasOwnProperty.call(d,N)&&E.push([N,d[N]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function c(u,d,E){return u.call.apply(u.bind,arguments)}function h(u,d,E){return h=c,h.apply(null,arguments)}function m(u,d){var E=Array.prototype.slice.call(arguments,1);return function(){var N=E.slice();return N.push.apply(N,arguments),u.apply(this,N)}}function T(u,d){function E(){}E.prototype=d.prototype,u.Z=d.prototype,u.prototype=new E,u.prototype.constructor=u,u.Ob=function(N,U,j){for(var Q=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)Q[ce-2]=arguments[ce];return d.prototype[U].apply(N,Q)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function w(u){const d=u.length;if(d>0){const E=Array(d);for(let N=0;N<d;N++)E[N]=u[N];return E}return[]}function O(u,d){for(let N=1;N<arguments.length;N++){const U=arguments[N];var E=typeof U;if(E=E!="object"?E:U?Array.isArray(U)?"array":E:"null",E=="array"||E=="object"&&typeof U.length=="number"){E=u.length||0;const j=U.length||0;u.length=E+j;for(let Q=0;Q<j;Q++)u[E+Q]=U[Q]}else u.push(U)}}class M{constructor(d,E){this.i=d,this.j=E,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function L(u){o.setTimeout(()=>{throw u},0)}function x(){var u=S;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class k{constructor(){this.h=this.g=null}add(d,E){const N=D.get();N.set(d,E),this.h?this.h.next=N:this.g=N,this.h=N}}var D=new M(()=>new z,u=>u.reset());class z{constructor(){this.next=this.g=this.h=null}set(d,E){this.h=d,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let F,$=!1,S=new k,p=()=>{const u=Promise.resolve(void 0);F=()=>{u.then(y)}};function y(){for(var u;u=x();){try{u.h.call(u.g)}catch(E){L(E)}var d=D;d.j(u),d.h<100&&(d.h++,u.next=d.g,d.g=u)}$=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var I=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const E=()=>{};o.addEventListener("test",E,d),o.removeEventListener("test",E,d)}catch{}return u}();function _(u){return/^[\s\xa0]*$/.test(u)}function se(u,d){b.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,d)}T(se,b),se.prototype.init=function(u,d){const E=this.type=u.type,N=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget,d||(E=="mouseover"?d=u.fromElement:E=="mouseout"&&(d=u.toElement)),this.relatedTarget=d,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&se.Z.h.call(this)},se.prototype.h=function(){se.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var pe="closure_listenable_"+(Math.random()*1e6|0),X=0;function ne(u,d,E,N,U){this.listener=u,this.proxy=null,this.src=d,this.type=E,this.capture=!!N,this.ha=U,this.key=++X,this.da=this.fa=!1}function ie(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function be(u,d,E){for(const N in u)d.call(E,u[N],N,u)}function He(u,d){for(const E in u)d.call(void 0,u[E],E,u)}function Ve(u){const d={};for(const E in u)d[E]=u[E];return d}const et="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(u,d){let E,N;for(let U=1;U<arguments.length;U++){N=arguments[U];for(E in N)u[E]=N[E];for(let j=0;j<et.length;j++)E=et[j],Object.prototype.hasOwnProperty.call(N,E)&&(u[E]=N[E])}}function Ht(u){this.src=u,this.g={},this.h=0}Ht.prototype.add=function(u,d,E,N,U){const j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);const Q=wi(u,d,N,U);return Q>-1?(d=u[Q],E||(d.fa=!1)):(d=new ne(d,this.src,j,!!N,U),d.fa=E,u.push(d)),d};function Te(u,d){const E=d.type;if(E in u.g){var N=u.g[E],U=Array.prototype.indexOf.call(N,d,void 0),j;(j=U>=0)&&Array.prototype.splice.call(N,U,1),j&&(ie(d),u.g[E].length==0&&(delete u.g[E],u.h--))}}function wi(u,d,E,N){for(let U=0;U<u.length;++U){const j=u[U];if(!j.da&&j.listener==d&&j.capture==!!E&&j.ha==N)return U}return-1}var si="closure_lm_"+(Math.random()*1e6|0),oi={};function uo(u,d,E,N,U){if(Array.isArray(d)){for(let j=0;j<d.length;j++)uo(u,d[j],E,N,U);return null}return E=Ii(E),u&&u[pe]?u.J(d,E,a(N)?!!N.capture:!1,U):$i(u,d,E,!1,N,U)}function $i(u,d,E,N,U,j){if(!d)throw Error("Invalid event type");const Q=a(U)?!!U.capture:!!U;let ce=Zi(u);if(ce||(u[si]=ce=new Ht(u)),E=ce.add(d,E,N,Q,j),E.proxy)return E;if(N=Tr(),E.proxy=N,N.src=u,N.listener=E,u.addEventListener)I||(U=Q),U===void 0&&(U=!1),u.addEventListener(d.toString(),N,U);else if(u.attachEvent)u.attachEvent(Ri(d.toString()),N);else if(u.addListener&&u.removeListener)u.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Tr(){function u(E){return d.call(u.src,u.listener,E)}const d=jn;return u}function Er(u,d,E,N,U){if(Array.isArray(d))for(var j=0;j<d.length;j++)Er(u,d[j],E,N,U);else N=a(N)?!!N.capture:!!N,E=Ii(E),u&&u[pe]?(u=u.i,j=String(d).toString(),j in u.g&&(d=u.g[j],E=wi(d,E,N,U),E>-1&&(ie(d[E]),Array.prototype.splice.call(d,E,1),d.length==0&&(delete u.g[j],u.h--)))):u&&(u=Zi(u))&&(d=u.g[d.toString()],u=-1,d&&(u=wi(d,E,N,U)),(E=u>-1?d[u]:null)&&bn(E))}function bn(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[pe])Te(d.i,u);else{var E=u.type,N=u.proxy;d.removeEventListener?d.removeEventListener(E,N,u.capture):d.detachEvent?d.detachEvent(Ri(E),N):d.addListener&&d.removeListener&&d.removeListener(N),(E=Zi(d))?(Te(E,u),E.h==0&&(E.src=null,d[si]=null)):ie(u)}}}function Ri(u){return u in oi?oi[u]:oi[u]="on"+u}function jn(u,d){if(u.da)u=!0;else{d=new se(d,this);const E=u.listener,N=u.ha||u.src;u.fa&&bn(u),u=E.call(N,d)}return u}function Zi(u){return u=u[si],u instanceof Ht?u:null}var Ar="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ii(u){return typeof u=="function"?u:(u[Ar]||(u[Ar]=function(d){return u.handleEvent(d)}),u[Ar])}function ot(){A.call(this),this.i=new Ht(this),this.M=this,this.G=null}T(ot,A),ot.prototype[pe]=!0,ot.prototype.removeEventListener=function(u,d,E,N){Er(this,u,d,E,N)};function at(u,d){var E,N=u.G;if(N)for(E=[];N;N=N.G)E.push(N);if(u=u.M,N=d.type||d,typeof d=="string")d=new b(d,u);else if(d instanceof b)d.target=d.target||u;else{var U=d;d=new b(N,u),de(d,U)}U=!0;let j,Q;if(E)for(Q=E.length-1;Q>=0;Q--)j=d.g=E[Q],U=Ki(j,N,!0,d)&&U;if(j=d.g=u,U=Ki(j,N,!0,d)&&U,U=Ki(j,N,!1,d)&&U,E)for(Q=0;Q<E.length;Q++)j=d.g=E[Q],U=Ki(j,N,!1,d)&&U}ot.prototype.N=function(){if(ot.Z.N.call(this),this.i){var u=this.i;for(const d in u.g){const E=u.g[d];for(let N=0;N<E.length;N++)ie(E[N]);delete u.g[d],u.h--}}this.G=null},ot.prototype.J=function(u,d,E,N){return this.i.add(String(u),d,!1,E,N)},ot.prototype.K=function(u,d,E,N){return this.i.add(String(u),d,!0,E,N)};function Ki(u,d,E,N){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();let U=!0;for(let j=0;j<d.length;++j){const Q=d[j];if(Q&&!Q.da&&Q.capture==E){const ce=Q.listener,Je=Q.ha||Q.src;Q.fa&&Te(u.i,Q),U=ce.call(Je,N)!==!1&&U}}return U&&!N.defaultPrevented}function ra(u,d){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=h(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(u,d||0)}function Wr(u){u.g=ra(()=>{u.g=null,u.i&&(u.i=!1,Wr(u))},u.l);const d=u.h;u.h=null,u.m.apply(null,d)}class br extends A{constructor(d,E){super(),this.m=d,this.l=E,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Wr(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sn(u){A.call(this),this.h=u,this.g={}}T(Sn,A);var Xe=[];function Ue(u){be(u.g,function(d,E){this.g.hasOwnProperty(E)&&bn(d)},u),u.g={}}Sn.prototype.N=function(){Sn.Z.N.call(this),Ue(this)},Sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ai=o.JSON.stringify,co=o.JSON.parse,ho=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function es(){}function Xi(){}var Bn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ci(){b.call(this,"d")}T(Ci,b);function qt(){b.call(this,"c")}T(qt,b);var hn={},ts=null;function Ni(){return ts=ts||new ot}hn.Ia="serverreachability";function fo(u){b.call(this,hn.Ia,u)}T(fo,b);function Fn(u){const d=Ni();at(d,new fo(d))}hn.STAT_EVENT="statevent";function Hn(u,d){b.call(this,hn.STAT_EVENT,u),this.stat=d}T(Hn,b);function _t(u){const d=Ni();at(d,new Hn(d,u))}hn.Ja="timingevent";function li(u,d){b.call(this,hn.Ja,u),this.size=d}T(li,b);function fn(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},d)}function Yi(){this.g=!0}Yi.prototype.ua=function(){this.g=!1};function Ye(u,d,E,N,U,j){u.info(function(){if(u.g)if(j){var Q="",ce=j.split("&");for(let l=0;l<ce.length;l++){var Je=ce[l].split("=");if(Je.length>1){const f=Je[0];Je=Je[1];const v=f.split("_");Q=v.length>=2&&v[1]=="type"?Q+(f+"="+Je+"&"):Q+(f+"=redacted&")}}}else Q=null;else Q=j;return"XMLHTTP REQ ("+N+") [attempt "+U+"]: "+d+`
`+E+`
`+Q})}function xi(u,d,E,N,U,j,Q){u.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+U+"]: "+d+`
`+E+`
`+j+" "+Q})}function wn(u,d,E,N){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+vt(u,E)+(N?" "+N:"")})}function mo(u,d){u.info(function(){return"TIMEOUT: "+d})}Yi.prototype.info=function(){};function vt(u,d){if(!u.g)return d;if(!d)return null;try{const j=JSON.parse(d);if(j){for(u=0;u<j.length;u++)if(Array.isArray(j[u])){var E=j[u];if(!(E.length<2)){var N=E[1];if(Array.isArray(N)&&!(N.length<1)){var U=N[0];if(U!="noop"&&U!="stop"&&U!="close")for(let Q=1;Q<N.length;Q++)N[Q]=""}}}}return ai(j)}catch{return d}}var Sr={NO_ERROR:0,TIMEOUT:8},Qi={},Ji;function rn(){}T(rn,es),rn.prototype.g=function(){return new XMLHttpRequest},Ji=new rn;function dn(u){return encodeURIComponent(String(u))}function ki(u){var d=1;u=u.split(":");const E=[];for(;d>0&&u.length;)E.push(u.shift()),d--;return u.length&&E.push(u.join(":")),E}function qn(u,d,E,N){this.j=u,this.i=d,this.l=E,this.S=N||1,this.V=new Sn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ns}function ns(){this.i=null,this.g="",this.h=!1}var Wi={},sn={};function er(u,d,E){u.M=1,u.A=go($n(d)),u.u=E,u.R=!0,tr(u,null)}function tr(u,d){u.F=Date.now(),ee(u),u.B=$n(u.A);var E=u.B,N=u.S;Array.isArray(N)||(N=[String(N)]),qc(E.i,"t",N),u.C=0,E=u.j.L,u.h=new ns,u.g=pa(u.j,E?d:null,!u.u),u.P>0&&(u.O=new br(h(u.Y,u,u.g),u.P)),d=u.V,E=u.g,N=u.ba;var U="readystatechange";Array.isArray(U)||(U&&(Xe[0]=U.toString()),U=Xe);for(let j=0;j<U.length;j++){const Q=uo(E,U[j],N||d.handleEvent,!1,d.h||d);if(!Q)break;d.g[Q.key]=Q}d=u.J?Ve(u.J):{},u.u?(u.v||(u.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,d)):(u.v="GET",u.g.ea(u.B,u.v,null,d)),Fn(),Ye(u.i,u.v,u.B,u.l,u.S,u.u)}qn.prototype.ba=function(u){u=u.target;const d=this.O;d&&Oe(u)==3?d.j():this.Y(u)},qn.prototype.Y=function(u){try{if(u==this.g)e:{const ce=Oe(this.g),Je=this.g.ya(),l=this.g.ca();if(!(ce<3)&&(ce!=3||this.g&&(this.h.h||this.g.la()||Qc(this.g)))){this.K||ce!=4||Je==7||(Je==8||l<=0?Fn(3):Fn(2)),K(this);var d=this.g.ca();this.X=d;var E=Gn(this);if(this.o=d==200,xi(this.i,this.v,this.B,this.l,this.S,ce,d),this.o){if(this.U&&!this.L){t:{if(this.g){var N,U=this.g;if((N=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(N)){var j=N;break t}}j=null}if(u=j)wn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tt(this,u);else{this.o=!1,this.m=3,_t(12),Se(this),W(this);break e}}if(this.R){u=!0;let f;for(;!this.K&&this.C<E.length;)if(f=sa(this,E),f==sn){ce==4&&(this.m=4,_t(14),u=!1),wn(this.i,this.l,null,"[Incomplete Response]");break}else if(f==Wi){this.m=4,_t(15),wn(this.i,this.l,E,"[Invalid Chunk]"),u=!1;break}else wn(this.i,this.l,f,null),tt(this,f);if(is(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ce!=4||E.length!=0||this.h.h||(this.m=1,_t(16),u=!1),this.o=this.o&&u,!u)wn(this.i,this.l,E,"[Invalid Chunked Response]"),Se(this),W(this);else if(E.length>0&&!this.W){this.W=!0;var Q=this.j;Q.g==this&&Q.aa&&!Q.P&&(Q.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),fa(Q),Q.P=!0,_t(11))}}else wn(this.i,this.l,E,null),tt(this,E);ce==4&&Se(this),this.o&&!this.K&&(ce==4?Zl(this.j,this):(this.o=!1,ee(this)))}else qd(this.g),d==400&&E.indexOf("Unknown SID")>0?(this.m=3,_t(12)):(this.m=0,_t(13)),Se(this),W(this)}}}catch{}finally{}};function Gn(u){if(!is(u))return u.g.la();const d=Qc(u.g);if(d==="")return"";let E="";const N=d.length,U=Oe(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Se(u),W(u),"";u.h.i=new o.TextDecoder}for(let j=0;j<N;j++)u.h.h=!0,E+=u.h.i.decode(d[j],{stream:!(U&&j==N-1)});return d.length=0,u.h.g+=E,u.C=0,u.h.g}function is(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function sa(u,d){var E=u.C,N=d.indexOf(`
`,E);return N==-1?sn:(E=Number(d.substring(E,N)),isNaN(E)?Wi:(N+=1,N+E>d.length?sn:(d=d.slice(N,N+E),u.C=N+E,d)))}qn.prototype.cancel=function(){this.K=!0,Se(this)};function ee(u){u.T=Date.now()+u.H,P(u,u.H)}function P(u,d){if(u.D!=null)throw Error("WatchDog timer not null");u.D=fn(h(u.aa,u),d)}function K(u){u.D&&(o.clearTimeout(u.D),u.D=null)}qn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(mo(this.i,this.B),this.M!=2&&(Fn(),_t(17)),Se(this),this.m=2,W(this)):P(this,this.T-u)};function W(u){u.j.I==0||u.K||Zl(u.j,u)}function Se(u){K(u);var d=u.O;d&&typeof d.dispose=="function"&&d.dispose(),u.O=null,Ue(u.V),u.g&&(d=u.g,u.g=null,d.abort(),d.dispose())}function tt(u,d){try{var E=u.j;if(E.I!=0&&(E.g==u||Oi(E.h,u))){if(!u.L&&Oi(E.h,u)&&E.I==3){try{var N=E.Ba.g.parse(d)}catch{N=null}if(Array.isArray(N)&&N.length==3){var U=N;if(U[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<u.F)da(E),wr(E);else break e;fs(E),_t(18)}}else E.xa=U[1],0<E.xa-E.K&&U[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=fn(h(E.Va,E),6e3));Gt(E.h)<=1&&E.ta&&(E.ta=void 0)}else rr(E,11)}else if((u.L||E.g==u)&&da(E),!_(d))for(U=E.Ba.g.parse(d),d=0;d<U.length;d++){let l=U[d];const f=l[0];if(!(f<=E.K))if(E.K=f,l=l[1],E.I==2)if(l[0]=="c"){E.M=l[1],E.ba=l[2];const v=l[3];v!=null&&(E.ka=v,E.j.info("VER="+E.ka));const C=l[4];C!=null&&(E.za=C,E.j.info("SVER="+E.za));const V=l[5];V!=null&&typeof V=="number"&&V>0&&(N=1.5*V,E.O=N,E.j.info("backChannelRequestTimeoutMs_="+N)),N=E;const B=u.g;if(B){const Y=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y){var j=N.h;j.g||Y.indexOf("spdy")==-1&&Y.indexOf("quic")==-1&&Y.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(ct(j,j.h),j.h=null))}if(N.G){const De=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;De&&(N.wa=De,qe(N.J,N.G,De))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-u.F,E.j.info("Handshake RTT: "+E.T+"ms")),N=E;var Q=u;if(N.na=ma(N,N.L?N.ba:null,N.W),Q.L){rs(N.h,Q);var ce=Q,Je=N.O;Je&&(ce.H=Je),ce.D&&(K(ce),ee(ce)),N.g=Q}else ha(N);E.i.length>0&&In(E)}else l[0]!="stop"&&l[0]!="close"||rr(E,7);else E.I==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?rr(E,7):ca(E):l[0]!="noop"&&E.l&&E.l.qa(l),E.A=0)}}Fn(4)}catch{}}var nt=class{constructor(u,d){this.g=u,this.map=d}};function Tt(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zt(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Gt(u){return u.h?1:u.g?u.g.size:0}function Oi(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function ct(u,d){u.g?u.g.add(d):u.h=d}function rs(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}Tt.prototype.cancel=function(){if(this.i=ss(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ss(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let d=u.i;for(const E of u.g.values())d=d.concat(E.G);return d}return w(u.i)}var Vl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ul(u,d){if(u){u=u.split("&");for(let E=0;E<u.length;E++){const N=u[E].indexOf("=");let U,j=null;N>=0?(U=u[E].substring(0,N),j=u[E].substring(N+1)):U=u[E],d(U,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function ui(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;u instanceof ui?(this.l=u.l,os(this,u.j),this.o=u.o,this.g=u.g,po(this,u.u),this.h=u.h,jl(this,Gc(u.i)),this.m=u.m):u&&(d=String(u).match(Vl))?(this.l=!1,os(this,d[1]||"",!0),this.o=yo(d[2]||""),this.g=yo(d[3]||"",!0),po(this,d[4]),this.h=yo(d[5]||"",!0),jl(this,d[6]||"",!0),this.m=yo(d[7]||"")):(this.l=!1,this.i=new Mi(null,this.l))}ui.prototype.toString=function(){const u=[];var d=this.j;d&&u.push(Zn(d,_o,!0),":");var E=this.g;return(E||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Zn(d,_o,!0),"@"),u.push(dn(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&u.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&u.push("/"),u.push(Zn(E,E.charAt(0)=="/"?Bc:oa,!0))),(E=this.i.toString())&&u.push("?",E),(E=this.m)&&u.push("#",Zn(E,aa)),u.join("")},ui.prototype.resolve=function(u){const d=$n(this);let E=!!u.j;E?os(d,u.j):E=!!u.o,E?d.o=u.o:E=!!u.g,E?d.g=u.g:E=u.u!=null;var N=u.h;if(E)po(d,u.u);else if(E=!!u.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var U=d.h.lastIndexOf("/");U!=-1&&(N=d.h.slice(0,U+1)+N)}if(U=N,U==".."||U==".")N="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){N=U.lastIndexOf("/",0)==0,U=U.split("/");const j=[];for(let Q=0;Q<U.length;){const ce=U[Q++];ce=="."?N&&Q==U.length&&j.push(""):ce==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),N&&Q==U.length&&j.push("")):(j.push(ce),N=!0)}N=j.join("/")}else N=U}return E?d.h=N:E=u.i.toString()!=="",E?jl(d,Gc(u.i)):E=!!u.m,E&&(d.m=u.m),d};function $n(u){return new ui(u)}function os(u,d,E){u.j=E?yo(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function po(u,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);u.u=d}else u.u=null}function jl(u,d,E){d instanceof Mi?(u.i=d,vo(u.i,u.l)):(E||(d=Zn(d,Ze)),u.i=new Mi(d,u.l))}function qe(u,d,E){u.i.set(d,E)}function go(u){return qe(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function yo(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Zn(u,d,E){return typeof u=="string"?(u=encodeURI(u).replace(d,Di),E&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Di(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var _o=/[#\/\?@]/g,oa=/[#\?:]/g,Bc=/[#\?]/g,Ze=/[#\?@]/g,aa=/#/g;function Mi(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function Kn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ul(u.i,function(d,E){u.add(decodeURIComponent(d.replace(/\+/g," ")),E)}))}t=Mi.prototype,t.add=function(u,d){Kn(this),this.i=null,u=as(this,u);let E=this.g.get(u);return E||this.g.set(u,E=[]),E.push(d),this.h+=1,this};function Fc(u,d){Kn(u),d=as(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function Bl(u,d){return Kn(u),d=as(u,d),u.g.has(d)}t.forEach=function(u,d){Kn(this),this.g.forEach(function(E,N){E.forEach(function(U){u.call(d,U,N,this)},this)},this)};function Hc(u,d){Kn(u);let E=[];if(typeof d=="string")Bl(u,d)&&(E=E.concat(u.g.get(as(u,d))));else for(u=Array.from(u.g.values()),d=0;d<u.length;d++)E=E.concat(u[d]);return E}t.set=function(u,d){return Kn(this),this.i=null,u=as(this,u),Bl(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},t.get=function(u,d){return u?(u=Hc(this,u),u.length>0?String(u[0]):d):d};function qc(u,d,E){Fc(u,d),E.length>0&&(u.i=null,u.g.set(as(u,d),w(E)),u.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],d=Array.from(this.g.keys());for(let N=0;N<d.length;N++){var E=d[N];const U=dn(E);E=Hc(this,E);for(let j=0;j<E.length;j++){let Q=U;E[j]!==""&&(Q+="="+dn(E[j])),u.push(Q)}}return this.i=u.join("&")};function Gc(u){const d=new Mi;return d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),d}function as(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function vo(u,d){d&&!u.j&&(Kn(u),u.i=null,u.g.forEach(function(E,N){const U=N.toLowerCase();N!=U&&(Fc(this,N),qc(this,U,E))},u)),u.j=d}function nr(u,d){const E=new Yi;if(o.Image){const N=new Image;N.onload=m(Pi,E,"TestLoadImage: loaded",!0,d,N),N.onerror=m(Pi,E,"TestLoadImage: error",!1,d,N),N.onabort=m(Pi,E,"TestLoadImage: abort",!1,d,N),N.ontimeout=m(Pi,E,"TestLoadImage: timeout",!1,d,N),o.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=u}else d(!1)}function $c(u,d){const E=new Yi,N=new AbortController,U=setTimeout(()=>{N.abort(),Pi(E,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:N.signal}).then(j=>{clearTimeout(U),j.ok?Pi(E,"TestPingServer: ok",!0,d):Pi(E,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(U),Pi(E,"TestPingServer: error",!1,d)})}function Pi(u,d,E,N,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),N(E)}catch{}}function Zc(){this.g=new ho}function ir(u){this.i=u.Sb||null,this.h=u.ab||!1}T(ir,es),ir.prototype.g=function(){return new la(this.i,this.h)};function la(u,d){ot.call(this),this.H=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(la,ot),t=la.prototype,t.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=d,this.readyState=1,Rn(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(d.body=u),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,To(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Rn(this)),this.g&&(this.readyState=3,Rn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Kc(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Kc(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?To(this):Rn(this),this.readyState==3&&Kc(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,To(this))},t.Na=function(u){this.g&&(this.response=u,To(this))},t.ga=function(){this.g&&To(this)};function To(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Rn(u)}t.setRequestHeader=function(u,d){this.A.append(u,d)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],d=this.h.entries();for(var E=d.next();!E.done;)E=E.value,u.push(E[0]+": "+E[1]),E=d.next();return u.join(`\r
`)};function Rn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(la.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Xc(u){let d="";return be(u,function(E,N){d+=N,d+=":",d+=E,d+=`\r
`}),d}function Fl(u,d,E){e:{for(N in E){var N=!1;break e}N=!0}N||(E=Xc(E),typeof u=="string"?E!=null&&dn(E):qe(u,d,E))}function Qe(u){ot.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(Qe,ot);var ua=/^https?$/i,Yc=["POST","PUT"];t=Qe.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,d,E,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ji.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(j){ls(this,j);return}if(u=E||"",E=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var U in N)E.set(U,N[U]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const j of N.keys())E.set(j,N.get(j));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(E.keys()).find(j=>j.toLowerCase()=="content-type"),U=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(Yc,d,void 0)>=0)||N||U||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,Q]of E)this.g.setRequestHeader(j,Q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(j){ls(this,j)}};function ls(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.o=5,us(u),cs(u)}function us(u){u.A||(u.A=!0,at(u,"complete"),at(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,at(this,"complete"),at(this,"abort"),cs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cs(this,!0)),Qe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Hl(this):this.Xa())},t.Xa=function(){Hl(this)};function Hl(u){if(u.h&&typeof s<"u"){if(u.v&&Oe(u)==4)setTimeout(u.Ca.bind(u),0);else if(at(u,"readystatechange"),Oe(u)==4){u.h=!1;try{const j=u.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var E;if(!(E=d)){var N;if(N=j===0){let Q=String(u.D).match(Vl)[1]||null;!Q&&o.self&&o.self.location&&(Q=o.self.location.protocol.slice(0,-1)),N=!ua.test(Q?Q.toLowerCase():"")}E=N}if(E)at(u,"complete"),at(u,"success");else{u.o=6;try{var U=Oe(u)>2?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.ca()+"]",us(u)}}finally{cs(u)}}}}function cs(u,d){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const E=u.g;u.g=null,d||at(u,"ready");try{E.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Oe(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Oe(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),co(d)}};function Qc(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function qd(u){const d={};u=(u.g&&Oe(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<u.length;N++){if(_(u[N]))continue;var E=ki(u[N]);const U=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const j=d[U]||[];d[U]=j,j.push(E)}He(d,function(N){return N.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function hs(u,d,E){return E&&E.internalChannelParams&&E.internalChannelParams[u]||d}function ql(u){this.za=0,this.i=[],this.j=new Yi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=hs("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=hs("baseRetryDelayMs",5e3,u),this.Za=hs("retryDelaySeedMs",1e4,u),this.Ta=hs("forwardChannelMaxRetries",2,u),this.va=hs("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Tt(u&&u.concurrentRequestLimit),this.Ba=new Zc,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ql.prototype,t.ka=8,t.I=1,t.connect=function(u,d,E,N){_t(0),this.W=u,this.H=d||{},E&&N!==void 0&&(this.H.OSID=E,this.H.OAID=N),this.F=this.X,this.J=ma(this,null,this.W),In(this)};function ca(u){if(Gl(u),u.I==3){var d=u.V++,E=$n(u.J);if(qe(E,"SID",u.M),qe(E,"RID",d),qe(E,"TYPE","terminate"),Li(u,E),d=new qn(u,u.j,d),d.M=2,d.A=go($n(E)),E=!1,o.navigator&&o.navigator.sendBeacon)try{E=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!E&&o.Image&&(new Image().src=d.A,E=!0),E||(d.g=pa(d.j,null),d.g.ea(d.A)),d.F=Date.now(),ee(d)}Kl(u)}function wr(u){u.g&&(fa(u),u.g.cancel(),u.g=null)}function Gl(u){wr(u),u.v&&(o.clearTimeout(u.v),u.v=null),da(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function In(u){if(!zt(u.h)&&!u.m){u.m=!0;var d=u.Ea;F||p(),$||(F(),$=!0),S.add(d,u),u.D=0}}function Jc(u,d){return Gt(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=d.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=fn(h(u.Ea,u,d),ds(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const U=new qn(this,this.j,u);let j=this.o;if(this.U&&(j?(j=Ve(j),de(j,this.U)):j=this.U),this.u!==null||this.R||(U.J=j,j=null),this.S)e:{for(var d=0,E=0;E<this.i.length;E++){t:{var N=this.i[E];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(d+=N,d>4096){d=E;break e}if(d===4096||E===this.i.length-1){d=E+1;break e}}d=1e3}else d=1e3;d=$l(this,U,d),E=$n(this.J),qe(E,"RID",u),qe(E,"CVER",22),this.G&&qe(E,"X-HTTP-Session-Id",this.G),Li(this,E),j&&(this.R?d="headers="+dn(Xc(j))+"&"+d:this.u&&Fl(E,this.u,j)),ct(this.h,U),this.Ra&&qe(E,"TYPE","init"),this.S?(qe(E,"$req",d),qe(E,"SID","null"),U.U=!0,er(U,E,null)):er(U,E,d),this.I=2}}else this.I==3&&(u?Wc(this,u):this.i.length==0||zt(this.h)||Wc(this))};function Wc(u,d){var E;d?E=d.l:E=u.V++;const N=$n(u.J);qe(N,"SID",u.M),qe(N,"RID",E),qe(N,"AID",u.K),Li(u,N),u.u&&u.o&&Fl(N,u.u,u.o),E=new qn(u,u.j,E,u.D+1),u.u===null&&(E.J=u.o),d&&(u.i=d.G.concat(u.i)),d=$l(u,E,1e3),E.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ct(u.h,E),er(E,N,d)}function Li(u,d){u.H&&be(u.H,function(E,N){qe(d,N,E)}),u.l&&be({},function(E,N){qe(d,N,E)})}function $l(u,d,E){E=Math.min(u.i.length,E);const N=u.l?h(u.l.Ka,u.l,u):null;e:{var U=u.i;let ce=-1;for(;;){const Je=["count="+E];ce==-1?E>0?(ce=U[0].g,Je.push("ofs="+ce)):ce=0:Je.push("ofs="+ce);let l=!0;for(let f=0;f<E;f++){var j=U[f].g;const v=U[f].map;if(j-=ce,j<0)ce=Math.max(0,U[f].g-100),l=!1;else try{j="req"+j+"_"||"";try{var Q=v instanceof Map?v:Object.entries(v);for(const[C,V]of Q){let B=V;a(V)&&(B=ai(V)),Je.push(j+C+"="+encodeURIComponent(B))}}catch(C){throw Je.push(j+"type="+encodeURIComponent("_badmap")),C}}catch{N&&N(v)}}if(l){Q=Je.join("&");break e}}Q=void 0}return u=u.i.splice(0,E),d.G=u,Q}function ha(u){if(!u.g&&!u.v){u.Y=1;var d=u.Da;F||p(),$||(F(),$=!0),S.add(d,u),u.A=0}}function fs(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=fn(h(u.Da,u),ds(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Eo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=fn(h(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_t(10),wr(this),Eo(this))};function fa(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function Eo(u){u.g=new qn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var d=$n(u.na);qe(d,"RID","rpc"),qe(d,"SID",u.M),qe(d,"AID",u.K),qe(d,"CI",u.F?"0":"1"),!u.F&&u.ia&&qe(d,"TO",u.ia),qe(d,"TYPE","xmlhttp"),Li(u,d),u.u&&u.o&&Fl(d,u.u,u.o),u.O&&(u.g.H=u.O);var E=u.g;u=u.ba,E.M=1,E.A=go($n(d)),E.u=null,E.R=!0,tr(E,u)}t.Va=function(){this.C!=null&&(this.C=null,wr(this),fs(this),_t(19))};function da(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function Zl(u,d){var E=null;if(u.g==d){da(u),fa(u),u.g=null;var N=2}else if(Oi(u.h,d))E=d.G,rs(u.h,d),N=1;else return;if(u.I!=0){if(d.o)if(N==1){E=d.u?d.u.length:0,d=Date.now()-d.F;var U=u.D;N=Ni(),at(N,new li(N,E)),In(u)}else ha(u);else if(U=d.m,U==3||U==0&&d.X>0||!(N==1&&Jc(u,d)||N==2&&fs(u)))switch(E&&E.length>0&&(d=u.h,d.i=d.i.concat(E)),U){case 1:rr(u,5);break;case 4:rr(u,10);break;case 3:rr(u,6);break;default:rr(u,2)}}}function ds(u,d){let E=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(E*=2),E*d}function rr(u,d){if(u.j.info("Error code "+d),d==2){var E=h(u.bb,u),N=u.Ua;const U=!N;N=new ui(N||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||os(N,"https"),go(N),U?nr(N.toString(),E):$c(N.toString(),E)}else _t(2);u.I=0,u.l&&u.l.pa(d),Kl(u),Gl(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function Kl(u){if(u.I=0,u.ja=[],u.l){const d=ss(u.h);(d.length!=0||u.i.length!=0)&&(O(u.ja,d),O(u.ja,u.i),u.h.i.length=0,w(u.i),u.i.length=0),u.l.oa()}}function ma(u,d,E){var N=E instanceof ui?$n(E):new ui(E);if(N.g!="")d&&(N.g=d+"."+N.g),po(N,N.u);else{var U=o.location;N=U.protocol,d=d?d+"."+U.hostname:U.hostname,U=+U.port;const j=new ui(null);N&&os(j,N),d&&(j.g=d),U&&po(j,U),E&&(j.h=E),N=j}return E=u.G,d=u.wa,E&&d&&qe(N,E,d),qe(N,"VER",u.ka),Li(u,N),N}function pa(u,d,E){if(d&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Aa&&!u.ma?new Qe(new ir({ab:E})):new Qe(u.ma),d.Fa(u.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xl(){}t=Xl.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function $t(u,d){ot.call(this),this.g=new ql(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(u?u["X-WebChannel-Client-Profile"]=d.sa:u={"X-WebChannel-Client-Profile":d.sa}),this.g.U=u,(u=d&&d.Qb)&&!_(u)&&(this.g.u=u),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.G=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new Cn(this)}T($t,ot),$t.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){ca(this.g)},$t.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var E={};E.__data__=u,u=E}else this.v&&(E={},E.__data__=ai(u),u=E);d.i.push(new nt(d.Ya++,u)),d.I==3&&In(d)},$t.prototype.N=function(){this.g.l=null,delete this.j,ca(this.g),delete this.g,$t.Z.N.call(this)};function Yl(u){Ci.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(const E in d){u=E;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}T(Yl,Ci);function Ql(){qt.call(this),this.status=1}T(Ql,qt);function Cn(u){this.g=u}T(Cn,Xl),Cn.prototype.ra=function(){at(this.g,"a")},Cn.prototype.qa=function(u){at(this.g,new Yl(u))},Cn.prototype.pa=function(u){at(this.g,new Ql)},Cn.prototype.oa=function(){at(this.g,"b")},$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,Sr.NO_ERROR=0,Sr.TIMEOUT=8,Sr.HTTP_ERROR=6,Qi.COMPLETE="complete",Xi.EventType=Bn,Bn.OPEN="a",Bn.CLOSE="b",Bn.ERROR="c",Bn.MESSAGE="d",ot.prototype.listen=ot.prototype.J,Qe.prototype.listenOnce=Qe.prototype.K,Qe.prototype.getLastError=Qe.prototype.Ha,Qe.prototype.getLastErrorCode=Qe.prototype.ya,Qe.prototype.getStatus=Qe.prototype.ca,Qe.prototype.getResponseJson=Qe.prototype.La,Qe.prototype.getResponseText=Qe.prototype.la,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Fa}).apply(typeof vh<"u"?vh:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _n=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pc="12.8.0";function zk(t){Pc=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=new Fy("@firebase/firestore");function Hi(t,...e){if(pl.logLevel<=ze.DEBUG){const n=e.map(Wy);pl.debug(`Firestore (${Pc}): ${t}`,...n)}}function a1(t,...e){if(pl.logLevel<=ze.ERROR){const n=e.map(Wy);pl.error(`Firestore (${Pc}): ${t}`,...n)}}function Vk(t,...e){if(pl.logLevel<=ze.WARN){const n=e.map(Wy);pl.warn(`Firestore (${Pc}): ${t}`,...n)}}function Wy(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,l1(t,i,n)}function l1(t,e,n){let i=`FIRESTORE (${Pc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw a1(i),new Error(i)}function ju(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||l1(e,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};let Ce=class extends vr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bu=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let u1=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Uk=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_n.UNAUTHENTICATED))}shutdown(){}};class jk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}let Bk=class{constructor(e){this.t=e,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ju(this.o===void 0,42304);let i=this.i;const r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let s=new Bu;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Bu,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{Hi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(Hi("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Bu)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(Hi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ju(typeof i.accessToken=="string",31837,{l:i}),new u1(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ju(e===null||typeof e=="string",2055,{h:e}),new _n(e)}},Fk=class{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}},Hk=class{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new Fk(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(_n.FIRST_PARTY))}shutdown(){}invalidateToken(){}},jv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},qk=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_i(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ju(this.o===void 0,3512);const i=s=>{s.error!=null&&Hi("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,Hi("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{Hi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):Hi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new jv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ju(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new jv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $k=class{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=Gk(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%62))}return i}};function Js(t,e){return t<e?-1:t>e?1:0}function Zk(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),s=e.charAt(i);if(r!==s)return jm(r)===jm(s)?Js(r,s):jm(r)?1:-1}return Js(t.length,e.length)}const Kk=55296,Xk=57343;function jm(t){const e=t.charCodeAt(0);return e>=Kk&&e<=Xk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="__name__";let c1=class gs{constructor(e,n,i){n===void 0?n=0:n>e.length&&cc(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&cc(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return gs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gs?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=gs.compareSegments(e.get(r),n.get(r));if(s!==0)return s}return Js(e.length,n.length)}static compareSegments(e,n){const i=gs.isNumericId(e),r=gs.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?gs.extractNumericId(e).compare(gs.extractNumericId(n)):Zk(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jy.fromString(e.substring(4,e.length-2))}},No=class Qh extends c1{construct(e,n,i){return new Qh(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ce(Ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Qh(n)}static emptyPath(){return new Qh([])}};const Yk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;let Qk=class Aa extends c1{construct(e,n,i){return new Aa(e,n,i)}static isValidIdentifier(e){return Yk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Aa.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Bv}static keyField(){return new Aa([Bv])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new Ce(Ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new Ce(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ce(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new Ce(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Aa(n)}static emptyPath(){return new Aa([])}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h1=class _u{constructor(e){this.path=e}static fromPath(e){return new _u(No.fromString(e))}static fromName(e){return new _u(No.fromString(e).popFirst(5))}static empty(){return new _u(No.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&No.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return No.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _u(new No(e.slice()))}};function Jk(t,e,n,i){if(e===!0&&i===!0)throw new Ce(Ie.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Wk(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function eO(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":cc(12329,{type:typeof t})}function tO(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ce(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=eO(t);throw new Ce(Ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Lc(t,e){if(!Wk(t))throw new Ce(Ie.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const o=t[i];if(r&&typeof o!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new Ce(Ie.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=-62135596800,Hv=1e6;let Bm=class xo{static now(){return xo.fromMillis(Date.now())}static fromDate(e){return xo.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Hv);return new xo(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ce(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ce(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Fv)throw new Ce(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Hv}_compareTo(e){return this.seconds===e.seconds?Js(this.nanoseconds,e.nanoseconds):Js(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xo._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Lc(e,xo._jsonSchema))return new xo(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Fv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Bm._jsonSchemaVersion="firestore/timestamp/1.0",Bm._jsonSchema={type:xt("string",Bm._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};function nO(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iO=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zf=class mg{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new iO("Invalid base64 string: "+s):s}}(e);return new mg(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new mg(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Js(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Zf.EMPTY_BYTE_STRING=new Zf("");const pg="(default)";let rO=class gg{constructor(e,n){this.projectId=e,this.database=n||pg}static empty(){return new gg("","")}get isDefaultDatabase(){return this.database===pg}isEqual(e){return e instanceof gg&&e.projectId===this.projectId&&e.database===this.database}};function sO(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ce(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rO(t.options.projectId,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oO=class{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function aO(t){return new oO(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qv,we;(we=qv||(qv={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Jy([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO=1048576;function Fm(){return typeof document<"u"?document:null}let cO=class{constructor(e,n,i=1e3,r=1.5,s=6e4){this.Ci=e,this.timerId=n,this.R_=i,this.A_=r,this.V_=s,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&Hi("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hO=class f1{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Bu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new f1(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ce(Ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var Gv,$v;($v=Gv||(Gv={})).Ma="default",$v.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO="ComponentProvider",Zv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="firestore.googleapis.com",Kv=!0;let Xv=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ce(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=d1,this.ssl=Kv}else this.host=e.host,this.ssl=e.ssl??Kv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uO)throw new Ce(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Jk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fO(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ce(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ce(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ce(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},m1=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ce(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ce(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Uk;switch(i.type){case"firstParty":return new Hk(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ce(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Zv.get(n);i&&(Hi(dO,"Removing Datastore"),Zv.delete(n),i.terminate())}(this),Promise.resolve()}};function mO(t,e,n,i={}){var h;t=tO(t,m1);const r=na(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;r&&(jy(`https://${a}`),By("Firestore",!0)),s.host!==d1&&s.host!==a&&Vk("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:a,ssl:r,emulatorOptions:i};if(!qo(c,o)&&(t._setSettings(c),i.mockUserToken)){let m,T;if(typeof i.mockUserToken=="string")m=i.mockUserToken,T=_n.MOCK_USER;else{m=WC(i.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const g=i.mockUserToken.sub||i.mockUserToken.user_id;if(!g)throw new Ce(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new _n(g)}t._authCredentials=new jk(new u1(m,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pO=class p1{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new p1(this.firestore,e,this._query)}},Fu=class vu{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gO(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vu(this.firestore,e,this._key)}toJSON(){return{type:vu._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Lc(n,vu._jsonSchema))return new vu(e,i||null,new h1(No.fromString(n.referencePath)))}};Fu._jsonSchemaVersion="firestore/documentReference/1.0",Fu._jsonSchema={type:xt("string",Fu._jsonSchemaVersion),referencePath:xt("string")};let gO=class g1 extends pO{constructor(e,n,i){super(e,n,aO(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fu(this.firestore,null,new h1(e))}withConverter(e){return new g1(this.firestore,e,this._path)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="AsyncQueue";let Qv=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new cO(this,"async_queue_retry"),this._c=()=>{const i=Fm();i&&Hi(Yv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Fm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Fm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Bu;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!nO(e))throw e;Hi(Yv,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,a1("INTERNAL UNHANDLED ERROR: ",Jv(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=hO.createAndSchedule(this,e,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&cc(47125,{Pc:Jv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}};function Jv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}let yO=class extends m1{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new Qv,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Qv(e),this._firestoreClient=void 0,await e}}};function _O(t,e){const n=typeof t=="object"?t:Hy(),i=typeof t=="string"?t:pg,r=Sd(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=vS("firestore");s&&mO(r,...s)}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hm=class ba{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ba(Zf.fromBase64String(e))}catch(n){throw new Ce(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ba(Zf.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ba._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Lc(e,ba._jsonSchema))return ba.fromBase64String(e.bytes)}};Hm._jsonSchemaVersion="firestore/bytes/1.0",Hm._jsonSchema={type:xt("string",Hm._jsonSchemaVersion),bytes:xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y1=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ce(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qk(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qm=class Jh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ce(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ce(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Js(this._lat,e._lat)||Js(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Jh._jsonSchemaVersion}}static fromJSON(e){if(Lc(e,Jh._jsonSchema))return new Jh(e.latitude,e.longitude)}};qm._jsonSchemaVersion="firestore/geoPoint/1.0",qm._jsonSchema={type:xt("string",qm._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gm=class Wh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Wh._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Lc(e,Wh._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Wh(e.vectorValues);throw new Ce(Ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Gm._jsonSchemaVersion="firestore/vectorValue/1.0",Gm._jsonSchema={type:xt("string",Gm._jsonSchemaVersion),vectorValues:xt("object")};function _1(t,e,n){if((e=bi(e))instanceof y1)return e._internalPath;if(typeof e=="string")return TO(t,e);throw yg("Field path arguments must be of type string or ",t)}const vO=new RegExp("[~\\*/\\[\\]]");function TO(t,e,n){if(e.search(vO)>=0)throw yg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new y1(...e.split("."))._internalPath}catch{throw yg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function yg(t,e,n,i,r){let s=`Function ${e}() called with invalid data`;s+=". ";let o="";return new Ce(Ie.INVALID_ARGUMENT,s+t+o)}const Wv="@firebase/firestore",eT="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v1=class{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Fu(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new EO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(_1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},EO=class extends v1{data(){return super.data()}},Th=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ef=class T1 extends v1{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new tf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(_1("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(Ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=T1._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ef._jsonSchemaVersion="firestore/documentSnapshot/1.0",ef._jsonSchema={type:xt("string",ef._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};let tf=class extends ef{data(e={}){return super.data(e)}},$m=class E1{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Th(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new tf(this._firestore,this._userDataWriter,i.key,i,new Th(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ce(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const c=new tf(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Th(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const c=new tf(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Th(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,m=-1;return a.type!==0&&(h=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),m=o.indexOf(a.doc.key)),{type:AO(a.type),doc:c,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(Ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=E1._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$k.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function AO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return cc(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$m._jsonSchemaVersion="firestore/querySnapshot/1.0",$m._jsonSchema={type:xt("string",$m._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};(function(e,n=!0){zk(kl),Go(new Qs("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new yO(new Bk(i.getProvider("auth-internal")),new qk(o,i.getProvider("app-check-internal")),sO(o,r),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),hr(Wv,eT,e),hr(Wv,eT,"esm2020")})();const A1={apiKey:"AIzaSyAW6S712bLLkP-iCmB4URv44sst9wLBXQQ",authDomain:"magic-internet-math-96630.firebaseapp.com",projectId:"magic-internet-math-96630",storageBucket:"magic-internet-math-96630.firebasestorage.app",messagingSenderId:"863101072402",appId:"1:863101072402:web:072f6cb1724919360f94cb"},bO=typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1");let Eh=null,Zm=null,Km=null,Ah=null;function e_(){if(!Eh){const t=ix();t.length>0?Eh=t[0]:Eh=AS(A1)}return Eh}function Xm(){return Zm||(Zm=Pk(e_())),Zm}function SO(){return Km||(Km=_O(e_())),Km}function Bi(){if(!Ah&&(Ah=Dx(e_()),bO&&typeof window<"u"&&new URLSearchParams(window.location.search).get("emulator")==="true"))try{CS(Ah,"localhost",5001)}catch{}return Ah}function un(){const t=A1.apiKey;if(!t||t.length<10)return!1;const e=["YOUR_API_KEY","your-api-key","YOUR-API-KEY","PLACEHOLDER","placeholder","API_KEY","api-key","xxx"],n=t.toLowerCase();return!e.some(i=>n.includes(i.toLowerCase()))}const wO=5e3,RO=2e3,b1=3e4,S1=30*1e3,w1=2e3,IO=["wss://relay.damus.io","wss://relay.nostr.band","wss://nos.lol","wss://relay.primal.net","wss://relay.nostr.bg","wss://nostr-pub.wellorder.net","wss://nostr.mom"],CO=["none","learning","familiar","mastered"];function tT(t){return CO.indexOf(t)}function NO(t,e){return tT(t)>=tT(e)?t:e}function _g(t,e){return t?e?new Date(t)<new Date(e)?t:e:t:e}function xO(t,e){const n=new Set,i=[];for(const r of[...t,...e]){const s=`${r.timestamp}-${r.difficulty}-${r.score}`;n.has(s)||(n.add(s),i.push(r))}return i.sort((r,s)=>new Date(r.timestamp).getTime()-new Date(s.timestamp).getTime())}function kO(t,e){return t?e?{sectionId:t.sectionId,visitedAt:_g(t.visitedAt,e.visitedAt),completedAt:_g(t.completedAt,e.completedAt),timeSpentSeconds:Math.max(t.timeSpentSeconds,e.timeSpentSeconds),quizAttempts:xO(t.quizAttempts,e.quizAttempts),masteryLevel:NO(t.masteryLevel,e.masteryLevel),visualizationsInteracted:[...new Set([...t.visualizationsInteracted,...e.visualizationsInteracted])]}:t:e}function OO(t,e){const n=new Set([...Object.keys(t),...Object.keys(e)]),i={};for(const r of n){const s=kO(t[r],e[r]);s&&(i[r]=s)}return i}function DO(t,e){return{totalXP:Math.max(t.totalXP,e.totalXP),level:Math.max(t.level,e.level),sectionsCompleted:[...new Set([...t.sectionsCompleted,...e.sectionsCompleted])],partsCompleted:[...new Set([...t.partsCompleted,...e.partsCompleted])],quizzesTaken:Math.max(t.quizzesTaken,e.quizzesTaken),perfectQuizzes:Math.max(t.perfectQuizzes,e.perfectQuizzes),visualizationsUsed:Math.max(t.visualizationsUsed,e.visualizationsUsed),totalTimeSpentMinutes:Math.max(t.totalTimeSpentMinutes,e.totalTimeSpentMinutes),joinedAt:_g(t.joinedAt,e.joinedAt)||t.joinedAt}}function MO(t,e){const n=new Map;for(const i of[...e,...t]){const r=n.get(i.id);r?(i.unlockedAt&&!r.unlockedAt||!i.unlockedAt&&!r.unlockedAt&&i.progress>r.progress)&&n.set(i.id,i):n.set(i.id,i)}return Array.from(n.values())}function PO(t,e){return{...t.longestStreak>=e.longestStreak?t:e,longestStreak:Math.max(t.longestStreak,e.longestStreak),freezesRemaining:Math.max(t.freezesRemaining,e.freezesRemaining)}}function LO(t,e){return t.date>e.date?t:e.date>t.date?e:{date:t.date,xpEarned:Math.max(t.xpEarned,e.xpEarned),xpGoal:t.xpGoal,completed:t.completed||e.completed}}function zO(t,e){return{version:Math.max(t.version,e.version),user:DO(t.user,e.user),sections:OO(t.sections,e.sections),achievements:MO(t.achievements,e.achievements),streak:PO(t.streak,e.streak),dailyGoals:LO(t.dailyGoals,e.dailyGoals),lastUpdated:new Date().toISOString()}}const xr=oo("ProgressSync");class VO{constructor(){this.syncInterval=null,this.debounceTimeout=null,this.lastSyncTime=0,this.lastSyncedAt=null,this.isAuthenticated=!1,this.pendingState=null,this._status="idle",this.statusListeners=new Set,this.handleVisibilityChange=()=>{document.visibilityState==="visible"&&this.isAuthenticated&&this.pendingState&&this.syncNow(this.pendingState)}}get status(){return this._status}onStatusChange(e){return this.statusListeners.add(e),()=>this.statusListeners.delete(e)}setStatus(e){this._status=e;for(const n of this.statusListeners)n(e)}setAuthenticated(e){this.isAuthenticated=e,e||(this.lastSyncedAt=null)}getLastSyncedAt(){return this.lastSyncedAt}setLastSyncedAt(e){this.lastSyncedAt=e}async fetchServerProgress(){if(!this.isAuthenticated)return{found:!1,progress:null,lastSyncedAt:null};if(!un())return xr.warn("Firebase not configured, cannot fetch progress"),{found:!1,progress:null,lastSyncedAt:null};try{const e=Bi(),i=await hi(e,"getProgress")({});return i.data.found&&i.data.progress&&(this.lastSyncedAt=i.data.lastSyncedAt,xr.info("Fetched progress from server")),i.data}catch(e){return xr.error("Failed to fetch progress from server:",e),{found:!1,progress:null,lastSyncedAt:null}}}async migrateLocalProgress(e){if(!this.isAuthenticated)return{success:!1,error:"Not authenticated"};xr.info("Starting migration of local progress to server");const n=await this.fetchServerProgress();let i;n.found&&n.progress?(xr.info("Server has existing progress, merging with local"),i=zO(e,n.progress)):i=e;const r=await this.syncNow(i);return r.success?(xr.info("Migration complete"),{success:!0,state:r.state||i,merged:n.found}):r}startPeriodicSync(){this.syncInterval||(this.syncInterval=setInterval(()=>{this.isAuthenticated&&this.pendingState&&this.syncNow(this.pendingState)},S1),typeof document<"u"&&document.addEventListener("visibilitychange",this.handleVisibilityChange))}stopPeriodicSync(){this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null),typeof document<"u"&&document.removeEventListener("visibilitychange",this.handleVisibilityChange)}requestSync(e){this.isAuthenticated&&(this.pendingState=e,this.debounceTimeout&&clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout(()=>{this.syncNow(e)},w1))}async syncNow(e){if(!this.isAuthenticated)return{success:!1,error:"Not authenticated"};if(!un())return{success:!1,error:"Firebase not configured"};const n=Date.now();if(n-this.lastSyncTime<b1)return{success:!1,error:"Rate limited"};this.setStatus("syncing");try{const i=Bi(),s=await hi(i,"syncProgress")({progress:e,lastSyncedAt:this.lastSyncedAt});return this.lastSyncTime=n,this.lastSyncedAt=s.data.lastSyncedAt,this.pendingState=null,s.data.merged&&s.data.serverProgress?(xr.info("Server merged states due to conflict"),Vy(s.data.serverProgress),this.setStatus("success"),{success:!0,state:s.data.serverProgress,merged:!0}):(this.setStatus("success"),{success:!0,state:e,merged:!1})}catch(i){return xr.error("Sync failed:",i),this.setStatus("error"),{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}async syncWithRetry(e,n=3){for(let i=0;i<n;i++){const r=await this.syncNow(e);if(r.success||r.error==="Not authenticated"||r.error==="Firebase not configured")return r;if(i<n-1){const s=1e3*Math.pow(2,i);xr.debug(`Sync retry ${i+1}/${n} in ${s}ms`),await new Promise(o=>setTimeout(o,s)),this.lastSyncTime=0}}return{success:!1,error:"Sync failed after multiple retries"}}}let Ym=null;function nT(){return Ym||(Ym=new VO),Ym}const bo=oo("NostrUtils"),vg="qpzry9x8gf2tvdw0s3jn54khce6mua7l",UO=[996825010,642813549,513874426,1027748829,705979059];function R1(t){let e=1;for(const n of t){const i=e>>25;e=(e&33554431)<<5^n;for(let r=0;r<5;r++)i>>r&1&&(e^=UO[r])}return e}function I1(t){const e=[];for(const n of t)e.push(n.charCodeAt(0)>>5);e.push(0);for(const n of t)e.push(n.charCodeAt(0)&31);return e}function jO(t,e){return R1([...I1(t),...e])===1}function BO(t,e){const n=[...I1(t),...e,0,0,0,0,0,0],i=R1(n)^1,r=[];for(let s=0;s<6;s++)r.push(i>>5*(5-s)&31);return r}function C1(t,e,n,i){let r=0,s=0;const o=[],a=(1<<n)-1;for(const c of t){if(c<0||c>>e)return null;for(r=r<<e|c,s+=e;s>=n;)s-=n,o.push(r>>s&a)}if(i)s>0&&o.push(r<<n-s&a);else if(s>=e||r<<n-s&a)return null;return o}function FO(t,e){const n=C1(e,8,5,!0);if(!n)throw new Error("Failed to convert data to 5-bit groups");const i=BO(t,n);let r=t+"1";for(const s of n)r+=vg[s];for(const s of i)r+=vg[s];return r}function HO(t){const e=t.toLowerCase(),n=t.toUpperCase();if(t!==e&&t!==n)return null;const i=e,r=i.lastIndexOf("1");if(r<1||r+7>i.length||i.length>90)return null;const s=i.slice(0,r),o=i.slice(r+1),a=[];for(const m of o){const T=vg.indexOf(m);if(T===-1)return null;a.push(T)}if(!jO(s,a))return null;const c=a.slice(0,-6),h=C1(new Uint8Array(c),5,8,!1);return h?{hrp:s,data:new Uint8Array(h)}:null}function qO(t){if(t.length%2!==0)throw new Error("Hex string must have even length");const e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)e[n/2]=parseInt(t.slice(n,n+2),16);return e}function GO(t){return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}function $O(t){if(t.length!==64)throw new Error("Pubkey must be 32 bytes (64 hex characters)");const e=qO(t);return FO("npub",e)}function ZO(t){const e=HO(t);if(!e||e.hrp!=="npub")throw new Error("Invalid npub");return GO(e.data)}function Kf(){return typeof window<"u"&&typeof window.nostr<"u"}function KO(t=3e3){return new Promise(e=>{if(Kf()){e(!0);return}const n=Date.now(),i=setInterval(()=>{Kf()?(clearInterval(i),e(!0)):Date.now()-n>t&&(clearInterval(i),e(!1))},100)})}function XO(t,e){return new Promise(n=>{let i=!1,r=null,s=null;const o=()=>{if(!i&&(i=!0,s&&(clearTimeout(s),s=null),r&&r.readyState!==WebSocket.CLOSED&&r.readyState!==WebSocket.CLOSING))try{r.close()}catch(c){bo.debug(`Error closing WebSocket for ${t}:`,c)}};s=setTimeout(()=>{bo.debug(`WebSocket timeout for relay: ${t}`),o(),n(null)},wO);try{r=new WebSocket(t)}catch(c){bo.debug(`Failed to create WebSocket for relay ${t}:`,c),o(),n(null);return}const a=Math.random().toString(36).substring(2,15);r.onopen=()=>{if(!(i||!r))try{const c=JSON.stringify(["REQ",a,{kinds:[0],authors:[e],limit:1}]);r.send(c)}catch(c){bo.debug(`Failed to send subscription to ${t}:`,c),o(),n(null)}},r.onmessage=c=>{if(!i)try{const h=JSON.parse(c.data);if(h[0]==="EVENT"&&h[1]===a){const m=JSON.parse(h[2].content);o(),n({name:m.name||m.display_name,display_name:m.display_name,nip05:m.nip05,picture:m.picture,about:m.about})}else h[0]==="EOSE"&&(o(),n(null))}catch(h){bo.debug(`Failed to parse WebSocket message from ${t}:`,h)}},r.onerror=c=>{bo.debug(`WebSocket error for relay ${t}:`,c),o(),n(null)},r.onclose=c=>{i||(bo.debug(`WebSocket closed for ${t}, code: ${c.code}, reason: ${c.reason}`),o(),n(null))}})}const YO=22242;function H(t,e,n){function i(a,c){if(a._zod||Object.defineProperty(a,"_zod",{value:{def:c,constr:o,traits:new Set},enumerable:!1}),a._zod.traits.has(t))return;a._zod.traits.add(t),e(a,c);const h=o.prototype,m=Object.keys(h);for(let T=0;T<m.length;T++){const g=m[T];g in a||(a[g]=h[g].bind(a))}}const r=(n==null?void 0:n.Parent)??Object;class s extends r{}Object.defineProperty(s,"name",{value:t});function o(a){var c;const h=n!=null&&n.Parent?new s:this;i(h,a),(c=h._zod).deferred??(c.deferred=[]);for(const m of h._zod.deferred)m();return h}return Object.defineProperty(o,"init",{value:i}),Object.defineProperty(o,Symbol.hasInstance,{value:a=>{var c,h;return n!=null&&n.Parent&&a instanceof n.Parent?!0:(h=(c=a==null?void 0:a._zod)==null?void 0:c.traits)==null?void 0:h.has(t)}}),Object.defineProperty(o,"name",{value:t}),o}class Ja extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class N1 extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const x1={};function Ws(t){return x1}function k1(t){const e=Object.values(t).filter(i=>typeof i=="number");return Object.entries(t).filter(([i,r])=>e.indexOf(+i)===-1).map(([i,r])=>r)}function Tg(t,e){return typeof e=="bigint"?e.toString():e}function t_(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function n_(t){return t==null}function i_(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function QO(t,e){const n=(t.toString().split(".")[1]||"").length,i=e.toString();let r=(i.split(".")[1]||"").length;if(r===0&&/\d?e-\d?/.test(i)){const c=i.match(/\d?e-(\d?)/);c!=null&&c[1]&&(r=Number.parseInt(c[1]))}const s=n>r?n:r,o=Number.parseInt(t.toFixed(s).replace(".","")),a=Number.parseInt(e.toFixed(s).replace(".",""));return o%a/10**s}const iT=Symbol("evaluating");function Fe(t,e,n){let i;Object.defineProperty(t,e,{get(){if(i!==iT)return i===void 0&&(i=iT,i=n()),i},set(r){Object.defineProperty(t,e,{value:r})},configurable:!0})}function ia(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function ao(...t){const e={};for(const n of t){const i=Object.getOwnPropertyDescriptors(n);Object.assign(e,i)}return Object.defineProperties({},e)}function rT(t){return JSON.stringify(t)}function JO(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const O1="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Xf(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const WO=t_(()=>{var t;if(typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Cloudflare")))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function gl(t){if(Xf(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(Xf(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function D1(t){return gl(t)?{...t}:Array.isArray(t)?[...t]:t}const eD=new Set(["string","number","symbol"]);function Nd(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function lo(t,e,n){const i=new t._zod.constr(e??t._zod.def);return(!e||n!=null&&n.parent)&&(i._zod.parent=t),i}function re(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if((e==null?void 0:e.message)!==void 0){if((e==null?void 0:e.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function tD(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const nD={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function iD(t,e){const n=t._zod.def,i=n.checks;if(i&&i.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const s=ao(t._zod.def,{get shape(){const o={};for(const a in e){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&(o[a]=n.shape[a])}return ia(this,"shape",o),o},checks:[]});return lo(t,s)}function rD(t,e){const n=t._zod.def,i=n.checks;if(i&&i.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const s=ao(t._zod.def,{get shape(){const o={...t._zod.def.shape};for(const a in e){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&delete o[a]}return ia(this,"shape",o),o},checks:[]});return lo(t,s)}function sD(t,e){if(!gl(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0){const s=t._zod.def.shape;for(const o in e)if(Object.getOwnPropertyDescriptor(s,o)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const r=ao(t._zod.def,{get shape(){const s={...t._zod.def.shape,...e};return ia(this,"shape",s),s}});return lo(t,r)}function oD(t,e){if(!gl(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n=ao(t._zod.def,{get shape(){const i={...t._zod.def.shape,...e};return ia(this,"shape",i),i}});return lo(t,n)}function aD(t,e){const n=ao(t._zod.def,{get shape(){const i={...t._zod.def.shape,...e._zod.def.shape};return ia(this,"shape",i),i},get catchall(){return e._zod.def.catchall},checks:[]});return lo(t,n)}function lD(t,e,n){const r=e._zod.def.checks;if(r&&r.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const o=ao(e._zod.def,{get shape(){const a=e._zod.def.shape,c={...a};if(n)for(const h in n){if(!(h in a))throw new Error(`Unrecognized key: "${h}"`);n[h]&&(c[h]=t?new t({type:"optional",innerType:a[h]}):a[h])}else for(const h in a)c[h]=t?new t({type:"optional",innerType:a[h]}):a[h];return ia(this,"shape",c),c},checks:[]});return lo(e,o)}function uD(t,e,n){const i=ao(e._zod.def,{get shape(){const r=e._zod.def.shape,s={...r};if(n)for(const o in n){if(!(o in s))throw new Error(`Unrecognized key: "${o}"`);n[o]&&(s[o]=new t({type:"nonoptional",innerType:r[o]}))}else for(const o in r)s[o]=new t({type:"nonoptional",innerType:r[o]});return ia(this,"shape",s),s}});return lo(e,i)}function ja(t,e=0){var n;if(t.aborted===!0)return!0;for(let i=e;i<t.issues.length;i++)if(((n=t.issues[i])==null?void 0:n.continue)!==!0)return!0;return!1}function Ba(t,e){return e.map(n=>{var i;return(i=n).path??(i.path=[]),n.path.unshift(t),n})}function bh(t){return typeof t=="string"?t:t==null?void 0:t.message}function eo(t,e,n){var r,s,o,a,c,h;const i={...t,path:t.path??[]};if(!t.message){const m=bh((o=(s=(r=t.inst)==null?void 0:r._zod.def)==null?void 0:s.error)==null?void 0:o.call(s,t))??bh((a=e==null?void 0:e.error)==null?void 0:a.call(e,t))??bh((c=n.customError)==null?void 0:c.call(n,t))??bh((h=n.localeError)==null?void 0:h.call(n,t))??"Invalid input";i.message=m}return delete i.inst,delete i.continue,e!=null&&e.reportInput||delete i.input,i}function r_(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function hc(...t){const[e,n,i]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:i}:{...e}}const M1=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,Tg,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},P1=H("$ZodError",M1),L1=H("$ZodError",M1,{Parent:Error});function cD(t,e=n=>n.message){const n={},i=[];for(const r of t.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):i.push(e(r));return{formErrors:i,fieldErrors:n}}function hD(t,e=n=>n.message){const n={_errors:[]},i=r=>{for(const s of r.issues)if(s.code==="invalid_union"&&s.errors.length)s.errors.map(o=>i({issues:o}));else if(s.code==="invalid_key")i({issues:s.issues});else if(s.code==="invalid_element")i({issues:s.issues});else if(s.path.length===0)n._errors.push(e(s));else{let o=n,a=0;for(;a<s.path.length;){const c=s.path[a];a===s.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(e(s))):o[c]=o[c]||{_errors:[]},o=o[c],a++}}};return i(t),n}const s_=t=>(e,n,i,r)=>{const s=i?Object.assign(i,{async:!1}):{async:!1},o=e._zod.run({value:n,issues:[]},s);if(o instanceof Promise)throw new Ja;if(o.issues.length){const a=new((r==null?void 0:r.Err)??t)(o.issues.map(c=>eo(c,s,Ws())));throw O1(a,r==null?void 0:r.callee),a}return o.value},o_=t=>async(e,n,i,r)=>{const s=i?Object.assign(i,{async:!0}):{async:!0};let o=e._zod.run({value:n,issues:[]},s);if(o instanceof Promise&&(o=await o),o.issues.length){const a=new((r==null?void 0:r.Err)??t)(o.issues.map(c=>eo(c,s,Ws())));throw O1(a,r==null?void 0:r.callee),a}return o.value},xd=t=>(e,n,i)=>{const r=i?{...i,async:!1}:{async:!1},s=e._zod.run({value:n,issues:[]},r);if(s instanceof Promise)throw new Ja;return s.issues.length?{success:!1,error:new(t??P1)(s.issues.map(o=>eo(o,r,Ws())))}:{success:!0,data:s.value}},fD=xd(L1),kd=t=>async(e,n,i)=>{const r=i?Object.assign(i,{async:!0}):{async:!0};let s=e._zod.run({value:n,issues:[]},r);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new t(s.issues.map(o=>eo(o,r,Ws())))}:{success:!0,data:s.value}},dD=kd(L1),mD=t=>(e,n,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return s_(t)(e,n,r)},pD=t=>(e,n,i)=>s_(t)(e,n,i),gD=t=>async(e,n,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return o_(t)(e,n,r)},yD=t=>async(e,n,i)=>o_(t)(e,n,i),_D=t=>(e,n,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return xd(t)(e,n,r)},vD=t=>(e,n,i)=>xd(t)(e,n,i),TD=t=>async(e,n,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return kd(t)(e,n,r)},ED=t=>async(e,n,i)=>kd(t)(e,n,i),AD=/^[cC][^\s-]{8,}$/,bD=/^[0-9a-z]+$/,SD=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,wD=/^[0-9a-vA-V]{20}$/,RD=/^[A-Za-z0-9]{27}$/,ID=/^[a-zA-Z0-9_-]{21}$/,CD=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,ND=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,sT=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,xD=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,kD="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function OD(){return new RegExp(kD,"u")}const DD=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,MD=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,PD=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,LD=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,zD=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,z1=/^[A-Za-z0-9_-]*$/,VD=/^\+[1-9]\d{6,14}$/,V1="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",UD=new RegExp(`^${V1}$`);function U1(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function jD(t){return new RegExp(`^${U1(t)}$`)}function BD(t){const e=U1({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${e}(?:${n.join("|")})`;return new RegExp(`^${V1}T(?:${i})$`)}const FD=t=>{const e=t?`[\\s\\S]{${(t==null?void 0:t.minimum)??0},${(t==null?void 0:t.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},HD=/^-?\d+$/,j1=/^-?\d+(?:\.\d+)?$/,qD=/^(?:true|false)$/i,GD=/^[^A-Z]*$/,$D=/^[^a-z]*$/,Un=H("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),B1={number:"number",bigint:"bigint",object:"date"},F1=H("$ZodCheckLessThan",(t,e)=>{Un.init(t,e);const n=B1[typeof e.value];t._zod.onattach.push(i=>{const r=i._zod.bag,s=(e.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<s&&(e.inclusive?r.maximum=e.value:r.exclusiveMaximum=e.value)}),t._zod.check=i=>{(e.inclusive?i.value<=e.value:i.value<e.value)||i.issues.push({origin:n,code:"too_big",maximum:typeof e.value=="object"?e.value.getTime():e.value,input:i.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),H1=H("$ZodCheckGreaterThan",(t,e)=>{Un.init(t,e);const n=B1[typeof e.value];t._zod.onattach.push(i=>{const r=i._zod.bag,s=(e.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>s&&(e.inclusive?r.minimum=e.value:r.exclusiveMinimum=e.value)}),t._zod.check=i=>{(e.inclusive?i.value>=e.value:i.value>e.value)||i.issues.push({origin:n,code:"too_small",minimum:typeof e.value=="object"?e.value.getTime():e.value,input:i.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),ZD=H("$ZodCheckMultipleOf",(t,e)=>{Un.init(t,e),t._zod.onattach.push(n=>{var i;(i=n._zod.bag).multipleOf??(i.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):QO(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),KD=H("$ZodCheckNumberFormat",(t,e)=>{var o;Un.init(t,e),e.format=e.format||"float64";const n=(o=e.format)==null?void 0:o.includes("int"),i=n?"int":"number",[r,s]=nD[e.format];t._zod.onattach.push(a=>{const c=a._zod.bag;c.format=e.format,c.minimum=r,c.maximum=s,n&&(c.pattern=HD)}),t._zod.check=a=>{const c=a.value;if(n){if(!Number.isInteger(c)){a.issues.push({expected:i,format:e.format,code:"invalid_type",continue:!1,input:c,inst:t});return}if(!Number.isSafeInteger(c)){c>0?a.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:i,inclusive:!0,continue:!e.abort}):a.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:i,inclusive:!0,continue:!e.abort});return}}c<r&&a.issues.push({origin:"number",input:c,code:"too_small",minimum:r,inclusive:!0,inst:t,continue:!e.abort}),c>s&&a.issues.push({origin:"number",input:c,code:"too_big",maximum:s,inclusive:!0,inst:t,continue:!e.abort})}}),XD=H("$ZodCheckMaxLength",(t,e)=>{var n;Un.init(t,e),(n=t._zod.def).when??(n.when=i=>{const r=i.value;return!n_(r)&&r.length!==void 0}),t._zod.onattach.push(i=>{const r=i._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<r&&(i._zod.bag.maximum=e.maximum)}),t._zod.check=i=>{const r=i.value;if(r.length<=e.maximum)return;const o=r_(r);i.issues.push({origin:o,code:"too_big",maximum:e.maximum,inclusive:!0,input:r,inst:t,continue:!e.abort})}}),YD=H("$ZodCheckMinLength",(t,e)=>{var n;Un.init(t,e),(n=t._zod.def).when??(n.when=i=>{const r=i.value;return!n_(r)&&r.length!==void 0}),t._zod.onattach.push(i=>{const r=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>r&&(i._zod.bag.minimum=e.minimum)}),t._zod.check=i=>{const r=i.value;if(r.length>=e.minimum)return;const o=r_(r);i.issues.push({origin:o,code:"too_small",minimum:e.minimum,inclusive:!0,input:r,inst:t,continue:!e.abort})}}),QD=H("$ZodCheckLengthEquals",(t,e)=>{var n;Un.init(t,e),(n=t._zod.def).when??(n.when=i=>{const r=i.value;return!n_(r)&&r.length!==void 0}),t._zod.onattach.push(i=>{const r=i._zod.bag;r.minimum=e.length,r.maximum=e.length,r.length=e.length}),t._zod.check=i=>{const r=i.value,s=r.length;if(s===e.length)return;const o=r_(r),a=s>e.length;i.issues.push({origin:o,...a?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:i.value,inst:t,continue:!e.abort})}}),Od=H("$ZodCheckStringFormat",(t,e)=>{var n,i;Un.init(t,e),t._zod.onattach.push(r=>{const s=r._zod.bag;s.format=e.format,e.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:e.format,input:r.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(i=t._zod).check??(i.check=()=>{})}),JD=H("$ZodCheckRegex",(t,e)=>{Od.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),WD=H("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=GD),Od.init(t,e)}),eM=H("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=$D),Od.init(t,e)}),tM=H("$ZodCheckIncludes",(t,e)=>{Un.init(t,e);const n=Nd(e.includes),i=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=i,t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(i)}),t._zod.check=r=>{r.value.includes(e.includes,e.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:r.value,inst:t,continue:!e.abort})}}),nM=H("$ZodCheckStartsWith",(t,e)=>{Un.init(t,e);const n=new RegExp(`^${Nd(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),t._zod.check=i=>{i.value.startsWith(e.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:i.value,inst:t,continue:!e.abort})}}),iM=H("$ZodCheckEndsWith",(t,e)=>{Un.init(t,e);const n=new RegExp(`.*${Nd(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),t._zod.check=i=>{i.value.endsWith(e.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:i.value,inst:t,continue:!e.abort})}}),rM=H("$ZodCheckOverwrite",(t,e)=>{Un.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class sM{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const i=e.split(`
`).filter(o=>o),r=Math.min(...i.map(o=>o.length-o.trimStart().length)),s=i.map(o=>o.slice(r)).map(o=>" ".repeat(this.indent*2)+o);for(const o of s)this.content.push(o)}compile(){const e=Function,n=this==null?void 0:this.args,r=[...((this==null?void 0:this.content)??[""]).map(s=>`  ${s}`)];return new e(...n,r.join(`
`))}}const oM={major:4,minor:3,patch:5},gt=H("$ZodType",(t,e)=>{var r;var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=oM;const i=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&i.unshift(t);for(const s of i)for(const o of s._zod.onattach)o(t);if(i.length===0)(n=t._zod).deferred??(n.deferred=[]),(r=t._zod.deferred)==null||r.push(()=>{t._zod.run=t._zod.parse});else{const s=(a,c,h)=>{let m=ja(a),T;for(const g of c){if(g._zod.def.when){if(!g._zod.def.when(a))continue}else if(m)continue;const w=a.issues.length,O=g._zod.check(a);if(O instanceof Promise&&(h==null?void 0:h.async)===!1)throw new Ja;if(T||O instanceof Promise)T=(T??Promise.resolve()).then(async()=>{await O,a.issues.length!==w&&(m||(m=ja(a,w)))});else{if(a.issues.length===w)continue;m||(m=ja(a,w))}}return T?T.then(()=>a):a},o=(a,c,h)=>{if(ja(a))return a.aborted=!0,a;const m=s(c,i,h);if(m instanceof Promise){if(h.async===!1)throw new Ja;return m.then(T=>t._zod.parse(T,h))}return t._zod.parse(m,h)};t._zod.run=(a,c)=>{if(c.skipChecks)return t._zod.parse(a,c);if(c.direction==="backward"){const m=t._zod.parse({value:a.value,issues:[]},{...c,skipChecks:!0});return m instanceof Promise?m.then(T=>o(T,a,c)):o(m,a,c)}const h=t._zod.parse(a,c);if(h instanceof Promise){if(c.async===!1)throw new Ja;return h.then(m=>s(m,i,c))}return s(h,i,c)}}Fe(t,"~standard",()=>({validate:s=>{var o;try{const a=fD(t,s);return a.success?{value:a.data}:{issues:(o=a.error)==null?void 0:o.issues}}catch{return dD(t,s).then(c=>{var h;return c.success?{value:c.data}:{issues:(h=c.error)==null?void 0:h.issues}})}},vendor:"zod",version:1}))}),a_=H("$ZodString",(t,e)=>{var n;gt.init(t,e),t._zod.pattern=[...((n=t==null?void 0:t._zod.bag)==null?void 0:n.patterns)??[]].pop()??FD(t._zod.bag),t._zod.parse=(i,r)=>{if(e.coerce)try{i.value=String(i.value)}catch{}return typeof i.value=="string"||i.issues.push({expected:"string",code:"invalid_type",input:i.value,inst:t}),i}}),ut=H("$ZodStringFormat",(t,e)=>{Od.init(t,e),a_.init(t,e)}),aM=H("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=ND),ut.init(t,e)}),lM=H("$ZodUUID",(t,e)=>{if(e.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(i===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=sT(i))}else e.pattern??(e.pattern=sT());ut.init(t,e)}),uM=H("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=xD),ut.init(t,e)}),cM=H("$ZodURL",(t,e)=>{ut.init(t,e),t._zod.check=n=>{try{const i=n.value.trim(),r=new URL(i);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(r.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=r.href:n.value=i;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),hM=H("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=OD()),ut.init(t,e)}),fM=H("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=ID),ut.init(t,e)}),dM=H("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=AD),ut.init(t,e)}),mM=H("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=bD),ut.init(t,e)}),pM=H("$ZodULID",(t,e)=>{e.pattern??(e.pattern=SD),ut.init(t,e)}),gM=H("$ZodXID",(t,e)=>{e.pattern??(e.pattern=wD),ut.init(t,e)}),yM=H("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=RD),ut.init(t,e)}),_M=H("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=BD(e)),ut.init(t,e)}),vM=H("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=UD),ut.init(t,e)}),TM=H("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=jD(e)),ut.init(t,e)}),EM=H("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=CD),ut.init(t,e)}),AM=H("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=DD),ut.init(t,e),t._zod.bag.format="ipv4"}),bM=H("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=MD),ut.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),SM=H("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=PD),ut.init(t,e)}),wM=H("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=LD),ut.init(t,e),t._zod.check=n=>{const i=n.value.split("/");try{if(i.length!==2)throw new Error;const[r,s]=i;if(!s)throw new Error;const o=Number(s);if(`${o}`!==s)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function q1(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const RM=H("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=zD),ut.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{q1(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function IM(t){if(!z1.test(t))return!1;const e=t.replace(/[-_]/g,i=>i==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return q1(n)}const CM=H("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=z1),ut.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{IM(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),NM=H("$ZodE164",(t,e)=>{e.pattern??(e.pattern=VD),ut.init(t,e)});function xM(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[i]=n;if(!i)return!1;const r=JSON.parse(atob(i));return!("typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&(!("alg"in r)||r.alg!==e))}catch{return!1}}const kM=H("$ZodJWT",(t,e)=>{ut.init(t,e),t._zod.check=n=>{xM(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),G1=H("$ZodNumber",(t,e)=>{gt.init(t,e),t._zod.pattern=t._zod.bag.pattern??j1,t._zod.parse=(n,i)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const r=n.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return n;const s=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:r,inst:t,...s?{received:s}:{}}),n}}),OM=H("$ZodNumberFormat",(t,e)=>{KD.init(t,e),G1.init(t,e)}),DM=H("$ZodBoolean",(t,e)=>{gt.init(t,e),t._zod.pattern=qD,t._zod.parse=(n,i)=>{if(e.coerce)try{n.value=!!n.value}catch{}const r=n.value;return typeof r=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:t}),n}}),MM=H("$ZodUnknown",(t,e)=>{gt.init(t,e),t._zod.parse=n=>n}),PM=H("$ZodNever",(t,e)=>{gt.init(t,e),t._zod.parse=(n,i)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function oT(t,e,n){t.issues.length&&e.issues.push(...Ba(n,t.issues)),e.value[n]=t.value}const LM=H("$ZodArray",(t,e)=>{gt.init(t,e),t._zod.parse=(n,i)=>{const r=n.value;if(!Array.isArray(r))return n.issues.push({expected:"array",code:"invalid_type",input:r,inst:t}),n;n.value=Array(r.length);const s=[];for(let o=0;o<r.length;o++){const a=r[o],c=e.element._zod.run({value:a,issues:[]},i);c instanceof Promise?s.push(c.then(h=>oT(h,n,o))):oT(c,n,o)}return s.length?Promise.all(s).then(()=>n):n}});function Yf(t,e,n,i,r){if(t.issues.length){if(r&&!(n in i))return;e.issues.push(...Ba(n,t.issues))}t.value===void 0?n in i&&(e.value[n]=void 0):e.value[n]=t.value}function $1(t){var i,r,s,o;const e=Object.keys(t.shape);for(const a of e)if(!((o=(s=(r=(i=t.shape)==null?void 0:i[a])==null?void 0:r._zod)==null?void 0:s.traits)!=null&&o.has("$ZodType")))throw new Error(`Invalid element at key "${a}": expected a Zod schema`);const n=tD(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function Z1(t,e,n,i,r,s){const o=[],a=r.keySet,c=r.catchall._zod,h=c.def.type,m=c.optout==="optional";for(const T in e){if(a.has(T))continue;if(h==="never"){o.push(T);continue}const g=c.run({value:e[T],issues:[]},i);g instanceof Promise?t.push(g.then(w=>Yf(w,n,T,e,m))):Yf(g,n,T,e,m)}return o.length&&n.issues.push({code:"unrecognized_keys",keys:o,input:e,inst:s}),t.length?Promise.all(t).then(()=>n):n}const zM=H("$ZodObject",(t,e)=>{gt.init(t,e);const n=Object.getOwnPropertyDescriptor(e,"shape");if(!(n!=null&&n.get)){const a=e.shape;Object.defineProperty(e,"shape",{get:()=>{const c={...a};return Object.defineProperty(e,"shape",{value:c}),c}})}const i=t_(()=>$1(e));Fe(t._zod,"propValues",()=>{const a=e.shape,c={};for(const h in a){const m=a[h]._zod;if(m.values){c[h]??(c[h]=new Set);for(const T of m.values)c[h].add(T)}}return c});const r=Xf,s=e.catchall;let o;t._zod.parse=(a,c)=>{o??(o=i.value);const h=a.value;if(!r(h))return a.issues.push({expected:"object",code:"invalid_type",input:h,inst:t}),a;a.value={};const m=[],T=o.shape;for(const g of o.keys){const w=T[g],O=w._zod.optout==="optional",M=w._zod.run({value:h[g],issues:[]},c);M instanceof Promise?m.push(M.then(L=>Yf(L,a,g,h,O))):Yf(M,a,g,h,O)}return s?Z1(m,h,a,c,i.value,t):m.length?Promise.all(m).then(()=>a):a}}),VM=H("$ZodObjectJIT",(t,e)=>{zM.init(t,e);const n=t._zod.parse,i=t_(()=>$1(e)),r=g=>{var D;const w=new sM(["shape","payload","ctx"]),O=i.value,M=z=>{const F=rT(z);return`shape[${F}]._zod.run({ value: input[${F}], issues: [] }, ctx)`};w.write("const input = payload.value;");const L=Object.create(null);let x=0;for(const z of O.keys)L[z]=`key_${x++}`;w.write("const newResult = {};");for(const z of O.keys){const F=L[z],$=rT(z),S=g[z],p=((D=S==null?void 0:S._zod)==null?void 0:D.optout)==="optional";w.write(`const ${F} = ${M(z)};`),p?w.write(`
        if (${F}.issues.length) {
          if (${$} in input) {
            payload.issues = payload.issues.concat(${F}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${$}, ...iss.path] : [${$}]
            })));
          }
        }
        
        if (${F}.value === undefined) {
          if (${$} in input) {
            newResult[${$}] = undefined;
          }
        } else {
          newResult[${$}] = ${F}.value;
        }
        
      `):w.write(`
        if (${F}.issues.length) {
          payload.issues = payload.issues.concat(${F}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${$}, ...iss.path] : [${$}]
          })));
        }
        
        if (${F}.value === undefined) {
          if (${$} in input) {
            newResult[${$}] = undefined;
          }
        } else {
          newResult[${$}] = ${F}.value;
        }
        
      `)}w.write("payload.value = newResult;"),w.write("return payload;");const k=w.compile();return(z,F)=>k(g,z,F)};let s;const o=Xf,a=!x1.jitless,h=a&&WO.value,m=e.catchall;let T;t._zod.parse=(g,w)=>{T??(T=i.value);const O=g.value;return o(O)?a&&h&&(w==null?void 0:w.async)===!1&&w.jitless!==!0?(s||(s=r(e.shape)),g=s(g,w),m?Z1([],O,g,w,T,t):g):n(g,w):(g.issues.push({expected:"object",code:"invalid_type",input:O,inst:t}),g)}});function aT(t,e,n,i){for(const s of t)if(s.issues.length===0)return e.value=s.value,e;const r=t.filter(s=>!ja(s));return r.length===1?(e.value=r[0].value,r[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(s=>s.issues.map(o=>eo(o,i,Ws())))}),e)}const UM=H("$ZodUnion",(t,e)=>{gt.init(t,e),Fe(t._zod,"optin",()=>e.options.some(r=>r._zod.optin==="optional")?"optional":void 0),Fe(t._zod,"optout",()=>e.options.some(r=>r._zod.optout==="optional")?"optional":void 0),Fe(t._zod,"values",()=>{if(e.options.every(r=>r._zod.values))return new Set(e.options.flatMap(r=>Array.from(r._zod.values)))}),Fe(t._zod,"pattern",()=>{if(e.options.every(r=>r._zod.pattern)){const r=e.options.map(s=>s._zod.pattern);return new RegExp(`^(${r.map(s=>i_(s.source)).join("|")})$`)}});const n=e.options.length===1,i=e.options[0]._zod.run;t._zod.parse=(r,s)=>{if(n)return i(r,s);let o=!1;const a=[];for(const c of e.options){const h=c._zod.run({value:r.value,issues:[]},s);if(h instanceof Promise)a.push(h),o=!0;else{if(h.issues.length===0)return h;a.push(h)}}return o?Promise.all(a).then(c=>aT(c,r,t,s)):aT(a,r,t,s)}}),jM=H("$ZodIntersection",(t,e)=>{gt.init(t,e),t._zod.parse=(n,i)=>{const r=n.value,s=e.left._zod.run({value:r,issues:[]},i),o=e.right._zod.run({value:r,issues:[]},i);return s instanceof Promise||o instanceof Promise?Promise.all([s,o]).then(([c,h])=>lT(n,c,h)):lT(n,s,o)}});function Eg(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(gl(t)&&gl(e)){const n=Object.keys(e),i=Object.keys(t).filter(s=>n.indexOf(s)!==-1),r={...t,...e};for(const s of i){const o=Eg(t[s],e[s]);if(!o.valid)return{valid:!1,mergeErrorPath:[s,...o.mergeErrorPath]};r[s]=o.data}return{valid:!0,data:r}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let i=0;i<t.length;i++){const r=t[i],s=e[i],o=Eg(r,s);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function lT(t,e,n){const i=new Map;let r;for(const a of e.issues)if(a.code==="unrecognized_keys"){r??(r=a);for(const c of a.keys)i.has(c)||i.set(c,{}),i.get(c).l=!0}else t.issues.push(a);for(const a of n.issues)if(a.code==="unrecognized_keys")for(const c of a.keys)i.has(c)||i.set(c,{}),i.get(c).r=!0;else t.issues.push(a);const s=[...i].filter(([,a])=>a.l&&a.r).map(([a])=>a);if(s.length&&r&&t.issues.push({...r,keys:s}),ja(t))return t;const o=Eg(e.value,n.value);if(!o.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(o.mergeErrorPath)}`);return t.value=o.data,t}const BM=H("$ZodRecord",(t,e)=>{gt.init(t,e),t._zod.parse=(n,i)=>{const r=n.value;if(!gl(r))return n.issues.push({expected:"record",code:"invalid_type",input:r,inst:t}),n;const s=[],o=e.keyType._zod.values;if(o){n.value={};const a=new Set;for(const h of o)if(typeof h=="string"||typeof h=="number"||typeof h=="symbol"){a.add(typeof h=="number"?h.toString():h);const m=e.valueType._zod.run({value:r[h],issues:[]},i);m instanceof Promise?s.push(m.then(T=>{T.issues.length&&n.issues.push(...Ba(h,T.issues)),n.value[h]=T.value})):(m.issues.length&&n.issues.push(...Ba(h,m.issues)),n.value[h]=m.value)}let c;for(const h in r)a.has(h)||(c=c??[],c.push(h));c&&c.length>0&&n.issues.push({code:"unrecognized_keys",input:r,inst:t,keys:c})}else{n.value={};for(const a of Reflect.ownKeys(r)){if(a==="__proto__")continue;let c=e.keyType._zod.run({value:a,issues:[]},i);if(c instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof a=="string"&&j1.test(a)&&c.issues.length&&c.issues.some(T=>T.code==="invalid_type"&&T.expected==="number")){const T=e.keyType._zod.run({value:Number(a),issues:[]},i);if(T instanceof Promise)throw new Error("Async schemas not supported in object keys currently");T.issues.length===0&&(c=T)}if(c.issues.length){e.mode==="loose"?n.value[a]=r[a]:n.issues.push({code:"invalid_key",origin:"record",issues:c.issues.map(T=>eo(T,i,Ws())),input:a,path:[a],inst:t});continue}const m=e.valueType._zod.run({value:r[a],issues:[]},i);m instanceof Promise?s.push(m.then(T=>{T.issues.length&&n.issues.push(...Ba(a,T.issues)),n.value[c.value]=T.value})):(m.issues.length&&n.issues.push(...Ba(a,m.issues)),n.value[c.value]=m.value)}}return s.length?Promise.all(s).then(()=>n):n}}),FM=H("$ZodEnum",(t,e)=>{gt.init(t,e);const n=k1(e.entries),i=new Set(n);t._zod.values=i,t._zod.pattern=new RegExp(`^(${n.filter(r=>eD.has(typeof r)).map(r=>typeof r=="string"?Nd(r):r.toString()).join("|")})$`),t._zod.parse=(r,s)=>{const o=r.value;return i.has(o)||r.issues.push({code:"invalid_value",values:n,input:o,inst:t}),r}}),HM=H("$ZodTransform",(t,e)=>{gt.init(t,e),t._zod.parse=(n,i)=>{if(i.direction==="backward")throw new N1(t.constructor.name);const r=e.transform(n.value,n);if(i.async)return(r instanceof Promise?r:Promise.resolve(r)).then(o=>(n.value=o,n));if(r instanceof Promise)throw new Ja;return n.value=r,n}});function uT(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const K1=H("$ZodOptional",(t,e)=>{gt.init(t,e),t._zod.optin="optional",t._zod.optout="optional",Fe(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),Fe(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${i_(n.source)})?$`):void 0}),t._zod.parse=(n,i)=>{if(e.innerType._zod.optin==="optional"){const r=e.innerType._zod.run(n,i);return r instanceof Promise?r.then(s=>uT(s,n.value)):uT(r,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,i)}}),qM=H("$ZodExactOptional",(t,e)=>{K1.init(t,e),Fe(t._zod,"values",()=>e.innerType._zod.values),Fe(t._zod,"pattern",()=>e.innerType._zod.pattern),t._zod.parse=(n,i)=>e.innerType._zod.run(n,i)}),GM=H("$ZodNullable",(t,e)=>{gt.init(t,e),Fe(t._zod,"optin",()=>e.innerType._zod.optin),Fe(t._zod,"optout",()=>e.innerType._zod.optout),Fe(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${i_(n.source)}|null)$`):void 0}),Fe(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,i)=>n.value===null?n:e.innerType._zod.run(n,i)}),$M=H("$ZodDefault",(t,e)=>{gt.init(t,e),t._zod.optin="optional",Fe(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,i)=>{if(i.direction==="backward")return e.innerType._zod.run(n,i);if(n.value===void 0)return n.value=e.defaultValue,n;const r=e.innerType._zod.run(n,i);return r instanceof Promise?r.then(s=>cT(s,e)):cT(r,e)}});function cT(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const ZM=H("$ZodPrefault",(t,e)=>{gt.init(t,e),t._zod.optin="optional",Fe(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,i)=>(i.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,i))}),KM=H("$ZodNonOptional",(t,e)=>{gt.init(t,e),Fe(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(i=>i!==void 0)):void 0}),t._zod.parse=(n,i)=>{const r=e.innerType._zod.run(n,i);return r instanceof Promise?r.then(s=>hT(s,t)):hT(r,t)}});function hT(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const XM=H("$ZodCatch",(t,e)=>{gt.init(t,e),Fe(t._zod,"optin",()=>e.innerType._zod.optin),Fe(t._zod,"optout",()=>e.innerType._zod.optout),Fe(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,i)=>{if(i.direction==="backward")return e.innerType._zod.run(n,i);const r=e.innerType._zod.run(n,i);return r instanceof Promise?r.then(s=>(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(o=>eo(o,i,Ws()))},input:n.value}),n.issues=[]),n)):(n.value=r.value,r.issues.length&&(n.value=e.catchValue({...n,error:{issues:r.issues.map(s=>eo(s,i,Ws()))},input:n.value}),n.issues=[]),n)}}),YM=H("$ZodPipe",(t,e)=>{gt.init(t,e),Fe(t._zod,"values",()=>e.in._zod.values),Fe(t._zod,"optin",()=>e.in._zod.optin),Fe(t._zod,"optout",()=>e.out._zod.optout),Fe(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,i)=>{if(i.direction==="backward"){const s=e.out._zod.run(n,i);return s instanceof Promise?s.then(o=>Sh(o,e.in,i)):Sh(s,e.in,i)}const r=e.in._zod.run(n,i);return r instanceof Promise?r.then(s=>Sh(s,e.out,i)):Sh(r,e.out,i)}});function Sh(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const QM=H("$ZodReadonly",(t,e)=>{gt.init(t,e),Fe(t._zod,"propValues",()=>e.innerType._zod.propValues),Fe(t._zod,"values",()=>e.innerType._zod.values),Fe(t._zod,"optin",()=>{var n,i;return(i=(n=e.innerType)==null?void 0:n._zod)==null?void 0:i.optin}),Fe(t._zod,"optout",()=>{var n,i;return(i=(n=e.innerType)==null?void 0:n._zod)==null?void 0:i.optout}),t._zod.parse=(n,i)=>{if(i.direction==="backward")return e.innerType._zod.run(n,i);const r=e.innerType._zod.run(n,i);return r instanceof Promise?r.then(fT):fT(r)}});function fT(t){return t.value=Object.freeze(t.value),t}const JM=H("$ZodCustom",(t,e)=>{Un.init(t,e),gt.init(t,e),t._zod.parse=(n,i)=>n,t._zod.check=n=>{const i=n.value,r=e.fn(i);if(r instanceof Promise)return r.then(s=>dT(s,n,i,t));dT(r,n,i,t)}});function dT(t,e,n,i){if(!t){const r={code:"custom",input:n,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(r.params=i._zod.def.params),e.issues.push(hc(r))}}var mT;class WM{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const i=n[0];return this._map.set(e,i),i&&typeof i=="object"&&"id"in i&&this._idmap.set(i.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const i={...this.get(n)??{}};delete i.id;const r={...i,...this._map.get(e)};return Object.keys(r).length?r:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function e9(){return new WM}(mT=globalThis).__zod_globalRegistry??(mT.__zod_globalRegistry=e9());const Tu=globalThis.__zod_globalRegistry;function t9(t,e){return new t({type:"string",...re(e)})}function n9(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...re(e)})}function pT(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...re(e)})}function i9(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...re(e)})}function r9(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...re(e)})}function s9(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...re(e)})}function o9(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...re(e)})}function a9(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...re(e)})}function l9(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...re(e)})}function u9(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...re(e)})}function c9(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...re(e)})}function h9(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...re(e)})}function f9(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...re(e)})}function d9(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...re(e)})}function m9(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...re(e)})}function p9(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...re(e)})}function g9(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...re(e)})}function y9(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...re(e)})}function _9(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...re(e)})}function v9(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...re(e)})}function T9(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...re(e)})}function E9(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...re(e)})}function A9(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...re(e)})}function b9(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...re(e)})}function S9(t,e){return new t({type:"string",format:"date",check:"string_format",...re(e)})}function w9(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...re(e)})}function R9(t,e){return new t({type:"string",format:"duration",check:"string_format",...re(e)})}function I9(t,e){return new t({type:"number",checks:[],...re(e)})}function C9(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...re(e)})}function N9(t,e){return new t({type:"boolean",...re(e)})}function x9(t){return new t({type:"unknown"})}function k9(t,e){return new t({type:"never",...re(e)})}function gT(t,e){return new F1({check:"less_than",...re(e),value:t,inclusive:!1})}function Qm(t,e){return new F1({check:"less_than",...re(e),value:t,inclusive:!0})}function yT(t,e){return new H1({check:"greater_than",...re(e),value:t,inclusive:!1})}function Jm(t,e){return new H1({check:"greater_than",...re(e),value:t,inclusive:!0})}function _T(t,e){return new ZD({check:"multiple_of",...re(e),value:t})}function X1(t,e){return new XD({check:"max_length",...re(e),maximum:t})}function Qf(t,e){return new YD({check:"min_length",...re(e),minimum:t})}function Y1(t,e){return new QD({check:"length_equals",...re(e),length:t})}function O9(t,e){return new JD({check:"string_format",format:"regex",...re(e),pattern:t})}function D9(t){return new WD({check:"string_format",format:"lowercase",...re(t)})}function M9(t){return new eM({check:"string_format",format:"uppercase",...re(t)})}function P9(t,e){return new tM({check:"string_format",format:"includes",...re(e),includes:t})}function L9(t,e){return new nM({check:"string_format",format:"starts_with",...re(e),prefix:t})}function z9(t,e){return new iM({check:"string_format",format:"ends_with",...re(e),suffix:t})}function Dl(t){return new rM({check:"overwrite",tx:t})}function V9(t){return Dl(e=>e.normalize(t))}function U9(){return Dl(t=>t.trim())}function j9(){return Dl(t=>t.toLowerCase())}function B9(){return Dl(t=>t.toUpperCase())}function F9(){return Dl(t=>JO(t))}function H9(t,e,n){return new t({type:"array",element:e,...re(n)})}function q9(t,e,n){return new t({type:"custom",check:"custom",fn:e,...re(n)})}function G9(t){const e=$9(n=>(n.addIssue=i=>{if(typeof i=="string")n.issues.push(hc(i,n.value,e._zod.def));else{const r=i;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=e),r.continue??(r.continue=!e._zod.def.abort),n.issues.push(hc(r))}},t(n.value,n)));return e}function $9(t,e){const n=new Un({check:"custom",...re(e)});return n._zod.check=t,n}function Q1(t){let e=(t==null?void 0:t.target)??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:(t==null?void 0:t.metadata)??Tu,target:e,unrepresentable:(t==null?void 0:t.unrepresentable)??"throw",override:(t==null?void 0:t.override)??(()=>{}),io:(t==null?void 0:t.io)??"output",counter:0,seen:new Map,cycles:(t==null?void 0:t.cycles)??"ref",reused:(t==null?void 0:t.reused)??"inline",external:(t==null?void 0:t.external)??void 0}}function kt(t,e,n={path:[],schemaPath:[]}){var m,T;var i;const r=t._zod.def,s=e.seen.get(t);if(s)return s.count++,n.schemaPath.includes(t)&&(s.cycle=n.path),s.schema;const o={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,o);const a=(T=(m=t._zod).toJSONSchema)==null?void 0:T.call(m);if(a)o.schema=a;else{const g={...n,schemaPath:[...n.schemaPath,t],path:n.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,o.schema,g);else{const O=o.schema,M=e.processors[r.type];if(!M)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${r.type}`);M(t,e,O,g)}const w=t._zod.parent;w&&(o.ref||(o.ref=w),kt(w,e,g),e.seen.get(w).isParent=!0)}const c=e.metadataRegistry.get(t);return c&&Object.assign(o.schema,c),e.io==="input"&&pn(t)&&(delete o.schema.examples,delete o.schema.default),e.io==="input"&&o.schema._prefault&&((i=o.schema).default??(i.default=o.schema._prefault)),delete o.schema._prefault,e.seen.get(t).schema}function J1(t,e){var o,a,c,h;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=new Map;for(const m of t.seen.entries()){const T=(o=t.metadataRegistry.get(m[0]))==null?void 0:o.id;if(T){const g=i.get(T);if(g&&g!==m[0])throw new Error(`Duplicate schema id "${T}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);i.set(T,m[0])}}const r=m=>{var M;const T=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const L=(M=t.external.registry.get(m[0]))==null?void 0:M.id,x=t.external.uri??(D=>D);if(L)return{ref:x(L)};const k=m[1].defId??m[1].schema.id??`schema${t.counter++}`;return m[1].defId=k,{defId:k,ref:`${x("__shared")}#/${T}/${k}`}}if(m[1]===n)return{ref:"#"};const w=`#/${T}/`,O=m[1].schema.id??`__schema${t.counter++}`;return{defId:O,ref:w+O}},s=m=>{if(m[1].schema.$ref)return;const T=m[1],{ref:g,defId:w}=r(m);T.def={...T.schema},w&&(T.defId=w);const O=T.schema;for(const M in O)delete O[M];O.$ref=g};if(t.cycles==="throw")for(const m of t.seen.entries()){const T=m[1];if(T.cycle)throw new Error(`Cycle detected: #/${(a=T.cycle)==null?void 0:a.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const m of t.seen.entries()){const T=m[1];if(e===m[0]){s(m);continue}if(t.external){const w=(c=t.external.registry.get(m[0]))==null?void 0:c.id;if(e!==m[0]&&w){s(m);continue}}if((h=t.metadataRegistry.get(m[0]))==null?void 0:h.id){s(m);continue}if(T.cycle){s(m);continue}if(T.count>1&&t.reused==="ref"){s(m);continue}}}function W1(t,e){var o,a,c;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=h=>{const m=t.seen.get(h);if(m.ref===null)return;const T=m.def??m.schema,g={...T},w=m.ref;if(m.ref=null,w){i(w);const M=t.seen.get(w),L=M.schema;if(L.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(T.allOf=T.allOf??[],T.allOf.push(L)):Object.assign(T,L),Object.assign(T,g),h._zod.parent===w)for(const k in T)k==="$ref"||k==="allOf"||k in g||delete T[k];if(L.$ref)for(const k in T)k==="$ref"||k==="allOf"||k in M.def&&JSON.stringify(T[k])===JSON.stringify(M.def[k])&&delete T[k]}const O=h._zod.parent;if(O&&O!==w){i(O);const M=t.seen.get(O);if(M!=null&&M.schema.$ref&&(T.$ref=M.schema.$ref,M.def))for(const L in T)L==="$ref"||L==="allOf"||L in M.def&&JSON.stringify(T[L])===JSON.stringify(M.def[L])&&delete T[L]}t.override({zodSchema:h,jsonSchema:T,path:m.path??[]})};for(const h of[...t.seen.entries()].reverse())i(h[0]);const r={};if(t.target==="draft-2020-12"?r.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?r.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?r.$schema="http://json-schema.org/draft-04/schema#":t.target,(o=t.external)!=null&&o.uri){const h=(a=t.external.registry.get(e))==null?void 0:a.id;if(!h)throw new Error("Schema is missing an `id` property");r.$id=t.external.uri(h)}Object.assign(r,n.def??n.schema);const s=((c=t.external)==null?void 0:c.defs)??{};for(const h of t.seen.entries()){const m=h[1];m.def&&m.defId&&(s[m.defId]=m.def)}t.external||Object.keys(s).length>0&&(t.target==="draft-2020-12"?r.$defs=s:r.definitions=s);try{const h=JSON.parse(JSON.stringify(r));return Object.defineProperty(h,"~standard",{value:{...e["~standard"],jsonSchema:{input:Jf(e,"input",t.processors),output:Jf(e,"output",t.processors)}},enumerable:!1,writable:!1}),h}catch{throw new Error("Error converting schema to JSON.")}}function pn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const i=t._zod.def;if(i.type==="transform")return!0;if(i.type==="array")return pn(i.element,n);if(i.type==="set")return pn(i.valueType,n);if(i.type==="lazy")return pn(i.getter(),n);if(i.type==="promise"||i.type==="optional"||i.type==="nonoptional"||i.type==="nullable"||i.type==="readonly"||i.type==="default"||i.type==="prefault")return pn(i.innerType,n);if(i.type==="intersection")return pn(i.left,n)||pn(i.right,n);if(i.type==="record"||i.type==="map")return pn(i.keyType,n)||pn(i.valueType,n);if(i.type==="pipe")return pn(i.in,n)||pn(i.out,n);if(i.type==="object"){for(const r in i.shape)if(pn(i.shape[r],n))return!0;return!1}if(i.type==="union"){for(const r of i.options)if(pn(r,n))return!0;return!1}if(i.type==="tuple"){for(const r of i.items)if(pn(r,n))return!0;return!!(i.rest&&pn(i.rest,n))}return!1}const Z9=(t,e={})=>n=>{const i=Q1({...n,processors:e});return kt(t,i),J1(i,t),W1(i,t)},Jf=(t,e,n={})=>i=>{const{libraryOptions:r,target:s}=i??{},o=Q1({...r??{},target:s,io:e,processors:n});return kt(t,o),J1(o,t),W1(o,t)},K9={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},X9=(t,e,n,i)=>{const r=n;r.type="string";const{minimum:s,maximum:o,format:a,patterns:c,contentEncoding:h}=t._zod.bag;if(typeof s=="number"&&(r.minLength=s),typeof o=="number"&&(r.maxLength=o),a&&(r.format=K9[a]??a,r.format===""&&delete r.format,a==="time"&&delete r.format),h&&(r.contentEncoding=h),c&&c.size>0){const m=[...c];m.length===1?r.pattern=m[0].source:m.length>1&&(r.allOf=[...m.map(T=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:T.source}))])}},Y9=(t,e,n,i)=>{const r=n,{minimum:s,maximum:o,format:a,multipleOf:c,exclusiveMaximum:h,exclusiveMinimum:m}=t._zod.bag;typeof a=="string"&&a.includes("int")?r.type="integer":r.type="number",typeof m=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(r.minimum=m,r.exclusiveMinimum=!0):r.exclusiveMinimum=m),typeof s=="number"&&(r.minimum=s,typeof m=="number"&&e.target!=="draft-04"&&(m>=s?delete r.minimum:delete r.exclusiveMinimum)),typeof h=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(r.maximum=h,r.exclusiveMaximum=!0):r.exclusiveMaximum=h),typeof o=="number"&&(r.maximum=o,typeof h=="number"&&e.target!=="draft-04"&&(h<=o?delete r.maximum:delete r.exclusiveMaximum)),typeof c=="number"&&(r.multipleOf=c)},Q9=(t,e,n,i)=>{n.type="boolean"},J9=(t,e,n,i)=>{n.not={}},W9=(t,e,n,i)=>{},e6=(t,e,n,i)=>{const r=t._zod.def,s=k1(r.entries);s.every(o=>typeof o=="number")&&(n.type="number"),s.every(o=>typeof o=="string")&&(n.type="string"),n.enum=s},t6=(t,e,n,i)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},n6=(t,e,n,i)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},i6=(t,e,n,i)=>{const r=n,s=t._zod.def,{minimum:o,maximum:a}=t._zod.bag;typeof o=="number"&&(r.minItems=o),typeof a=="number"&&(r.maxItems=a),r.type="array",r.items=kt(s.element,e,{...i,path:[...i.path,"items"]})},r6=(t,e,n,i)=>{var h;const r=n,s=t._zod.def;r.type="object",r.properties={};const o=s.shape;for(const m in o)r.properties[m]=kt(o[m],e,{...i,path:[...i.path,"properties",m]});const a=new Set(Object.keys(o)),c=new Set([...a].filter(m=>{const T=s.shape[m]._zod;return e.io==="input"?T.optin===void 0:T.optout===void 0}));c.size>0&&(r.required=Array.from(c)),((h=s.catchall)==null?void 0:h._zod.def.type)==="never"?r.additionalProperties=!1:s.catchall?s.catchall&&(r.additionalProperties=kt(s.catchall,e,{...i,path:[...i.path,"additionalProperties"]})):e.io==="output"&&(r.additionalProperties=!1)},s6=(t,e,n,i)=>{const r=t._zod.def,s=r.inclusive===!1,o=r.options.map((a,c)=>kt(a,e,{...i,path:[...i.path,s?"oneOf":"anyOf",c]}));s?n.oneOf=o:n.anyOf=o},o6=(t,e,n,i)=>{const r=t._zod.def,s=kt(r.left,e,{...i,path:[...i.path,"allOf",0]}),o=kt(r.right,e,{...i,path:[...i.path,"allOf",1]}),a=h=>"allOf"in h&&Object.keys(h).length===1,c=[...a(s)?s.allOf:[s],...a(o)?o.allOf:[o]];n.allOf=c},a6=(t,e,n,i)=>{const r=n,s=t._zod.def;r.type="object";const o=s.keyType,a=o._zod.bag,c=a==null?void 0:a.patterns;if(s.mode==="loose"&&c&&c.size>0){const m=kt(s.valueType,e,{...i,path:[...i.path,"patternProperties","*"]});r.patternProperties={};for(const T of c)r.patternProperties[T.source]=m}else(e.target==="draft-07"||e.target==="draft-2020-12")&&(r.propertyNames=kt(s.keyType,e,{...i,path:[...i.path,"propertyNames"]})),r.additionalProperties=kt(s.valueType,e,{...i,path:[...i.path,"additionalProperties"]});const h=o._zod.values;if(h){const m=[...h].filter(T=>typeof T=="string"||typeof T=="number");m.length>0&&(r.required=m)}},l6=(t,e,n,i)=>{const r=t._zod.def,s=kt(r.innerType,e,i),o=e.seen.get(t);e.target==="openapi-3.0"?(o.ref=r.innerType,n.nullable=!0):n.anyOf=[s,{type:"null"}]},u6=(t,e,n,i)=>{const r=t._zod.def;kt(r.innerType,e,i);const s=e.seen.get(t);s.ref=r.innerType},c6=(t,e,n,i)=>{const r=t._zod.def;kt(r.innerType,e,i);const s=e.seen.get(t);s.ref=r.innerType,n.default=JSON.parse(JSON.stringify(r.defaultValue))},h6=(t,e,n,i)=>{const r=t._zod.def;kt(r.innerType,e,i);const s=e.seen.get(t);s.ref=r.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(r.defaultValue)))},f6=(t,e,n,i)=>{const r=t._zod.def;kt(r.innerType,e,i);const s=e.seen.get(t);s.ref=r.innerType;let o;try{o=r.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=o},d6=(t,e,n,i)=>{const r=t._zod.def,s=e.io==="input"?r.in._zod.def.type==="transform"?r.out:r.in:r.out;kt(s,e,i);const o=e.seen.get(t);o.ref=s},m6=(t,e,n,i)=>{const r=t._zod.def;kt(r.innerType,e,i);const s=e.seen.get(t);s.ref=r.innerType,n.readOnly=!0},ew=(t,e,n,i)=>{const r=t._zod.def;kt(r.innerType,e,i);const s=e.seen.get(t);s.ref=r.innerType},p6=H("ZodISODateTime",(t,e)=>{_M.init(t,e),ht.init(t,e)});function g6(t){return b9(p6,t)}const y6=H("ZodISODate",(t,e)=>{vM.init(t,e),ht.init(t,e)});function _6(t){return S9(y6,t)}const v6=H("ZodISOTime",(t,e)=>{TM.init(t,e),ht.init(t,e)});function T6(t){return w9(v6,t)}const E6=H("ZodISODuration",(t,e)=>{EM.init(t,e),ht.init(t,e)});function A6(t){return R9(E6,t)}const b6=(t,e)=>{P1.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>hD(t,n)},flatten:{value:n=>cD(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,Tg,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,Tg,2)}},isEmpty:{get(){return t.issues.length===0}}})},Si=H("ZodError",b6,{Parent:Error}),S6=s_(Si),w6=o_(Si),R6=xd(Si),I6=kd(Si),C6=mD(Si),N6=pD(Si),x6=gD(Si),k6=yD(Si),O6=_D(Si),D6=vD(Si),M6=TD(Si),P6=ED(Si),yt=H("ZodType",(t,e)=>(gt.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:Jf(t,"input"),output:Jf(t,"output")}}),t.toJSONSchema=Z9(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(ao(e,{checks:[...e.checks??[],...n.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]}),{parent:!0}),t.with=t.check,t.clone=(n,i)=>lo(t,n,i),t.brand=()=>t,t.register=(n,i)=>(n.add(t,i),t),t.parse=(n,i)=>S6(t,n,i,{callee:t.parse}),t.safeParse=(n,i)=>R6(t,n,i),t.parseAsync=async(n,i)=>w6(t,n,i,{callee:t.parseAsync}),t.safeParseAsync=async(n,i)=>I6(t,n,i),t.spa=t.safeParseAsync,t.encode=(n,i)=>C6(t,n,i),t.decode=(n,i)=>N6(t,n,i),t.encodeAsync=async(n,i)=>x6(t,n,i),t.decodeAsync=async(n,i)=>k6(t,n,i),t.safeEncode=(n,i)=>O6(t,n,i),t.safeDecode=(n,i)=>D6(t,n,i),t.safeEncodeAsync=async(n,i)=>M6(t,n,i),t.safeDecodeAsync=async(n,i)=>P6(t,n,i),t.refine=(n,i)=>t.check(CP(n,i)),t.superRefine=n=>t.check(NP(n)),t.overwrite=n=>t.check(Dl(n)),t.optional=()=>ET(t),t.exactOptional=()=>pP(t),t.nullable=()=>AT(t),t.nullish=()=>ET(AT(t)),t.nonoptional=n=>EP(t,n),t.array=()=>yl(t),t.or=n=>iw([t,n]),t.and=n=>cP(t,n),t.transform=n=>bT(t,dP(n)),t.default=n=>_P(t,n),t.prefault=n=>TP(t,n),t.catch=n=>bP(t,n),t.pipe=n=>bT(t,n),t.readonly=()=>RP(t),t.describe=n=>{const i=t.clone();return Tu.add(i,{description:n}),i},Object.defineProperty(t,"description",{get(){var n;return(n=Tu.get(t))==null?void 0:n.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return Tu.get(t);const i=t.clone();return Tu.add(i,n[0]),i},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t.apply=n=>n(t),t)),tw=H("_ZodString",(t,e)=>{a_.init(t,e),yt.init(t,e),t._zod.processJSONSchema=(i,r,s)=>X9(t,i,r);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...i)=>t.check(O9(...i)),t.includes=(...i)=>t.check(P9(...i)),t.startsWith=(...i)=>t.check(L9(...i)),t.endsWith=(...i)=>t.check(z9(...i)),t.min=(...i)=>t.check(Qf(...i)),t.max=(...i)=>t.check(X1(...i)),t.length=(...i)=>t.check(Y1(...i)),t.nonempty=(...i)=>t.check(Qf(1,...i)),t.lowercase=i=>t.check(D9(i)),t.uppercase=i=>t.check(M9(i)),t.trim=()=>t.check(U9()),t.normalize=(...i)=>t.check(V9(...i)),t.toLowerCase=()=>t.check(j9()),t.toUpperCase=()=>t.check(B9()),t.slugify=()=>t.check(F9())}),L6=H("ZodString",(t,e)=>{a_.init(t,e),tw.init(t,e),t.email=n=>t.check(n9(z6,n)),t.url=n=>t.check(a9(V6,n)),t.jwt=n=>t.check(A9(W6,n)),t.emoji=n=>t.check(l9(U6,n)),t.guid=n=>t.check(pT(vT,n)),t.uuid=n=>t.check(i9(wh,n)),t.uuidv4=n=>t.check(r9(wh,n)),t.uuidv6=n=>t.check(s9(wh,n)),t.uuidv7=n=>t.check(o9(wh,n)),t.nanoid=n=>t.check(u9(j6,n)),t.guid=n=>t.check(pT(vT,n)),t.cuid=n=>t.check(c9(B6,n)),t.cuid2=n=>t.check(h9(F6,n)),t.ulid=n=>t.check(f9(H6,n)),t.base64=n=>t.check(v9(Y6,n)),t.base64url=n=>t.check(T9(Q6,n)),t.xid=n=>t.check(d9(q6,n)),t.ksuid=n=>t.check(m9(G6,n)),t.ipv4=n=>t.check(p9($6,n)),t.ipv6=n=>t.check(g9(Z6,n)),t.cidrv4=n=>t.check(y9(K6,n)),t.cidrv6=n=>t.check(_9(X6,n)),t.e164=n=>t.check(E9(J6,n)),t.datetime=n=>t.check(g6(n)),t.date=n=>t.check(_6(n)),t.time=n=>t.check(T6(n)),t.duration=n=>t.check(A6(n))});function Dt(t){return t9(L6,t)}const ht=H("ZodStringFormat",(t,e)=>{ut.init(t,e),tw.init(t,e)}),z6=H("ZodEmail",(t,e)=>{uM.init(t,e),ht.init(t,e)}),vT=H("ZodGUID",(t,e)=>{aM.init(t,e),ht.init(t,e)}),wh=H("ZodUUID",(t,e)=>{lM.init(t,e),ht.init(t,e)}),V6=H("ZodURL",(t,e)=>{cM.init(t,e),ht.init(t,e)}),U6=H("ZodEmoji",(t,e)=>{hM.init(t,e),ht.init(t,e)}),j6=H("ZodNanoID",(t,e)=>{fM.init(t,e),ht.init(t,e)}),B6=H("ZodCUID",(t,e)=>{dM.init(t,e),ht.init(t,e)}),F6=H("ZodCUID2",(t,e)=>{mM.init(t,e),ht.init(t,e)}),H6=H("ZodULID",(t,e)=>{pM.init(t,e),ht.init(t,e)}),q6=H("ZodXID",(t,e)=>{gM.init(t,e),ht.init(t,e)}),G6=H("ZodKSUID",(t,e)=>{yM.init(t,e),ht.init(t,e)}),$6=H("ZodIPv4",(t,e)=>{AM.init(t,e),ht.init(t,e)}),Z6=H("ZodIPv6",(t,e)=>{bM.init(t,e),ht.init(t,e)}),K6=H("ZodCIDRv4",(t,e)=>{SM.init(t,e),ht.init(t,e)}),X6=H("ZodCIDRv6",(t,e)=>{wM.init(t,e),ht.init(t,e)}),Y6=H("ZodBase64",(t,e)=>{RM.init(t,e),ht.init(t,e)}),Q6=H("ZodBase64URL",(t,e)=>{CM.init(t,e),ht.init(t,e)}),J6=H("ZodE164",(t,e)=>{NM.init(t,e),ht.init(t,e)}),W6=H("ZodJWT",(t,e)=>{kM.init(t,e),ht.init(t,e)}),nw=H("ZodNumber",(t,e)=>{G1.init(t,e),yt.init(t,e),t._zod.processJSONSchema=(i,r,s)=>Y9(t,i,r),t.gt=(i,r)=>t.check(yT(i,r)),t.gte=(i,r)=>t.check(Jm(i,r)),t.min=(i,r)=>t.check(Jm(i,r)),t.lt=(i,r)=>t.check(gT(i,r)),t.lte=(i,r)=>t.check(Qm(i,r)),t.max=(i,r)=>t.check(Qm(i,r)),t.int=i=>t.check(TT(i)),t.safe=i=>t.check(TT(i)),t.positive=i=>t.check(yT(0,i)),t.nonnegative=i=>t.check(Jm(0,i)),t.negative=i=>t.check(gT(0,i)),t.nonpositive=i=>t.check(Qm(0,i)),t.multipleOf=(i,r)=>t.check(_T(i,r)),t.step=(i,r)=>t.check(_T(i,r)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function Yt(t){return I9(nw,t)}const eP=H("ZodNumberFormat",(t,e)=>{OM.init(t,e),nw.init(t,e)});function TT(t){return C9(eP,t)}const tP=H("ZodBoolean",(t,e)=>{DM.init(t,e),yt.init(t,e),t._zod.processJSONSchema=(n,i,r)=>Q9(t,n,i)});function nP(t){return N9(tP,t)}const iP=H("ZodUnknown",(t,e)=>{MM.init(t,e),yt.init(t,e),t._zod.processJSONSchema=(n,i,r)=>W9()});function Ag(){return x9(iP)}const rP=H("ZodNever",(t,e)=>{PM.init(t,e),yt.init(t,e),t._zod.processJSONSchema=(n,i,r)=>J9(t,n,i)});function sP(t){return k9(rP,t)}const oP=H("ZodArray",(t,e)=>{LM.init(t,e),yt.init(t,e),t._zod.processJSONSchema=(n,i,r)=>i6(t,n,i,r),t.element=e.element,t.min=(n,i)=>t.check(Qf(n,i)),t.nonempty=n=>t.check(Qf(1,n)),t.max=(n,i)=>t.check(X1(n,i)),t.length=(n,i)=>t.check(Y1(n,i)),t.unwrap=()=>t.element});function yl(t,e){return H9(oP,t,e)}const aP=H("ZodObject",(t,e)=>{VM.init(t,e),yt.init(t,e),t._zod.processJSONSchema=(n,i,r)=>r6(t,n,i,r),Fe(t,"shape",()=>e.shape),t.keyof=()=>Sg(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Ag()}),t.loose=()=>t.clone({...t._zod.def,catchall:Ag()}),t.strict=()=>t.clone({...t._zod.def,catchall:sP()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>sD(t,n),t.safeExtend=n=>oD(t,n),t.merge=n=>aD(t,n),t.pick=n=>iD(t,n),t.omit=n=>rD(t,n),t.partial=(...n)=>lD(sw,t,n[0]),t.required=(...n)=>uD(ow,t,n[0])});function qi(t,e){const n={type:"object",shape:t??{},...re(e)};return new aP(n)}const lP=H("ZodUnion",(t,e)=>{UM.init(t,e),yt.init(t,e),t._zod.processJSONSchema=(n,i,r)=>s6(t,n,i,r),t.options=e.options});function iw(t,e){return new lP({type:"union",options:t,...re(e)})}const uP=H("ZodIntersection",(t,e)=>{jM.init(t,e),yt.init(t,e),t._zod.processJSONSchema=(n,i,r)=>o6(t,n,i,r)});function cP(t,e){return new uP({type:"intersection",left:t,right:e})}const hP=H("ZodRecord",(t,e)=>{BM.init(t,e),yt.init(t,e),t._zod.processJSONSchema=(n,i,r)=>a6(t,n,i,r),t.keyType=e.keyType,t.valueType=e.valueType});function rw(t,e,n){return new hP({type:"record",keyType:t,valueType:e,...re(n)})}const bg=H("ZodEnum",(t,e)=>{FM.init(t,e),yt.init(t,e),t._zod.processJSONSchema=(i,r,s)=>e6(t,i,r),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(i,r)=>{const s={};for(const o of i)if(n.has(o))s[o]=e.entries[o];else throw new Error(`Key ${o} not found in enum`);return new bg({...e,checks:[],...re(r),entries:s})},t.exclude=(i,r)=>{const s={...e.entries};for(const o of i)if(n.has(o))delete s[o];else throw new Error(`Key ${o} not found in enum`);return new bg({...e,checks:[],...re(r),entries:s})}});function Sg(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(i=>[i,i])):t;return new bg({type:"enum",entries:n,...re(e)})}const fP=H("ZodTransform",(t,e)=>{HM.init(t,e),yt.init(t,e),t._zod.processJSONSchema=(n,i,r)=>n6(t,n),t._zod.parse=(n,i)=>{if(i.direction==="backward")throw new N1(t.constructor.name);n.addIssue=s=>{if(typeof s=="string")n.issues.push(hc(s,n.value,e));else{const o=s;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),n.issues.push(hc(o))}};const r=e.transform(n.value,n);return r instanceof Promise?r.then(s=>(n.value=s,n)):(n.value=r,n)}});function dP(t){return new fP({type:"transform",transform:t})}const sw=H("ZodOptional",(t,e)=>{K1.init(t,e),yt.init(t,e),t._zod.processJSONSchema=(n,i,r)=>ew(t,n,i,r),t.unwrap=()=>t._zod.def.innerType});function ET(t){return new sw({type:"optional",innerType:t})}const mP=H("ZodExactOptional",(t,e)=>{qM.init(t,e),yt.init(t,e),t._zod.processJSONSchema=(n,i,r)=>ew(t,n,i,r),t.unwrap=()=>t._zod.def.innerType});function pP(t){return new mP({type:"optional",innerType:t})}const gP=H("ZodNullable",(t,e)=>{GM.init(t,e),yt.init(t,e),t._zod.processJSONSchema=(n,i,r)=>l6(t,n,i,r),t.unwrap=()=>t._zod.def.innerType});function AT(t){return new gP({type:"nullable",innerType:t})}const yP=H("ZodDefault",(t,e)=>{$M.init(t,e),yt.init(t,e),t._zod.processJSONSchema=(n,i,r)=>c6(t,n,i,r),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function _P(t,e){return new yP({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():D1(e)}})}const vP=H("ZodPrefault",(t,e)=>{ZM.init(t,e),yt.init(t,e),t._zod.processJSONSchema=(n,i,r)=>h6(t,n,i,r),t.unwrap=()=>t._zod.def.innerType});function TP(t,e){return new vP({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():D1(e)}})}const ow=H("ZodNonOptional",(t,e)=>{KM.init(t,e),yt.init(t,e),t._zod.processJSONSchema=(n,i,r)=>u6(t,n,i,r),t.unwrap=()=>t._zod.def.innerType});function EP(t,e){return new ow({type:"nonoptional",innerType:t,...re(e)})}const AP=H("ZodCatch",(t,e)=>{XM.init(t,e),yt.init(t,e),t._zod.processJSONSchema=(n,i,r)=>f6(t,n,i,r),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function bP(t,e){return new AP({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const SP=H("ZodPipe",(t,e)=>{YM.init(t,e),yt.init(t,e),t._zod.processJSONSchema=(n,i,r)=>d6(t,n,i,r),t.in=e.in,t.out=e.out});function bT(t,e){return new SP({type:"pipe",in:t,out:e})}const wP=H("ZodReadonly",(t,e)=>{QM.init(t,e),yt.init(t,e),t._zod.processJSONSchema=(n,i,r)=>m6(t,n,i,r),t.unwrap=()=>t._zod.def.innerType});function RP(t){return new wP({type:"readonly",innerType:t})}const IP=H("ZodCustom",(t,e)=>{JM.init(t,e),yt.init(t,e),t._zod.processJSONSchema=(n,i,r)=>t6(t,n)});function CP(t,e={}){return q9(IP,t,e)}function NP(t){return G9(t)}oo("Validation");const ST=Dt().min(1).max(100);Dt().regex(/^[a-fA-F0-9]{64}$/);const l_=Dt().regex(/^npub1[1-9ac-hjk-np-z46-9]+$/),aw=Dt().min(1).max(50).regex(/^[a-zA-Z0-9\s\-'.]+$/);Dt().regex(/^[a-zA-Z0-9.\-_]+(@[a-zA-Z0-9.\-_]+\.[a-zA-Z]{2,})?$/);qi({challenge:Dt().min(10).max(200),expiresAt:Yt().int().positive()});qi({kind:Yt().int(),created_at:Yt().int().nonnegative(),tags:yl(yl(Dt())),content:Dt()});const xP=qi({npub:l_,displayName:aw.nullable()}),lw=qi({visitedAt:Dt().nullable().optional(),completedAt:Dt().nullable().optional(),quizAttempts:yl(qi({xpEarned:Yt().int().min(0).optional(),score:Yt().min(0).max(100).optional(),timestamp:Dt().optional(),difficulty:Sg(["easy","medium","hard"]).optional(),correctAnswers:Yt().int().min(0).optional(),totalQuestions:Yt().int().min(1).optional()})).optional(),visualizationsInteracted:yl(Dt().max(100)).optional(),masteryLevel:iw([Yt().int().min(0).max(3),Sg(["none","learning","familiar","mastered"])]).nullable().optional(),sectionId:Dt().optional(),timeSpentSeconds:Yt().int().min(0).optional()});qi({user:qi({totalXP:Yt().int().min(0),level:Yt().int().min(1).max(10),sectionsCompleted:yl(ST)}),sections:rw(ST,lw),dailyGoals:qi({lastResetDate:Dt().nullable(),currentStreak:Yt().int().min(0),xpEarned:Yt().int().min(0),xpGoal:Yt().int().min(0)}),lastUpdated:Yt().int().nonnegative()});qi({success:nP(),totalXP:Yt().int().min(0)});qi({npub:l_,displayName:aw.nullable(),xp:Yt().int().min(0),lastSync:Dt()});qi({timestamp:Dt(),action:Dt(),targetNpub:l_.nullable(),performedBy:Dt(),details:rw(Dt(),Ag()).nullable()});function kP(t){const e=lw.safeParse(t);return e.success?{valid:!0,data:e.data}:{valid:!1,error:"Invalid section data format"}}function OP(t){const e=xP.safeParse(t);return e.success?{valid:!0,data:e.data}:{valid:!1,error:"Invalid auth state format"}}const Wf=oo("SyncManager"),DP="magic-internet-math-progress";function wT(){try{const t=localStorage.getItem(DP);if(!t)return null;const e=JSON.parse(t);if(!(e!=null&&e.user)||!(e!=null&&e.sections))return null;const n=e.user.totalXP||0,i={ba:0,crypto:0,aa:0,linalg:0,advlinalg:0,islr:0,ra:0,calc1:0,calc_lib_art:0,calc_easy:0,wm:0,four_pillars:0,mom:0,euclid:0,thales:0,gauss:0,human_action:0,atlas_shrugged:0,template:0,"mod-race":0,"base-race":0,man_econ_state:0,koblitz:0,coding:0,west_graphs:0,"numbers-geometry":0,"ross-prob":0,"intro-discrete":0,road_to_serfdom:0,"only-the-strong-survive":0,orange_btc:0,math_history:0,rudin:0,df:0,"euler-intro":0,"tao-analysis-1":0,bfi:0,frost:0};for(const[r,s]of Object.entries(e.sections)){const[o]=r.split(":");if(!wC(o))continue;const a=o,c=kP(s);if(!c.valid||!c.data){Wf.warn(`Invalid section data for ${r}, skipping`);continue}const h=c.data;if(h.quizAttempts)for(const m of h.quizAttempts)m.xpEarned&&(i[a]+=m.xpEarned);h.visitedAt&&(i[a]+=Pt.SECTION_VISIT),h.completedAt&&(i[a]+=Pt.SECTION_COMPLETE),h.visualizationsInteracted&&(i[a]+=h.visualizationsInteracted.length*Pt.VISUALIZATION_USE)}return{scores:[{courseId:"ba",xp:i.ba},{courseId:"crypto",xp:i.crypto},{courseId:"aa",xp:i.aa},{courseId:"linalg",xp:i.linalg},{courseId:"advlinalg",xp:i.advlinalg},{courseId:"islr",xp:i.islr},{courseId:"ra",xp:i.ra},{courseId:"calc1",xp:i.calc1},{courseId:"calc_lib_art",xp:i.calc_lib_art},{courseId:"calc_easy",xp:i.calc_easy},{courseId:"wm",xp:i.wm},{courseId:"four_pillars",xp:i.four_pillars},{courseId:"mom",xp:i.mom},{courseId:"euclid",xp:i.euclid},{courseId:"thales",xp:i.thales},{courseId:"gauss",xp:i.gauss},{courseId:"human_action",xp:i.human_action},{courseId:"atlas_shrugged",xp:i.atlas_shrugged}],totalXP:n}}catch(t){return Wf.error("Error extracting scores from storage:",t),null}}class MP{constructor(){this.syncInterval=null,this.debounceTimeout=null,this.lastSyncTime=0,this.isAuthenticated=!1,this.displayName=null,this.handleVisibilityChange=()=>{document.visibilityState==="visible"&&this.isAuthenticated&&this.syncNow()}}setAuthenticated(e){this.isAuthenticated=e,e&&this.syncNow()}setDisplayName(e){this.displayName=e}startPeriodicSync(){this.syncInterval||(this.syncInterval=setInterval(()=>{this.isAuthenticated&&this.syncNow()},S1),typeof document<"u"&&document.addEventListener("visibilitychange",this.handleVisibilityChange))}stopPeriodicSync(){this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null),typeof document<"u"&&document.removeEventListener("visibilitychange",this.handleVisibilityChange)}requestSync(){this.isAuthenticated&&(this.debounceTimeout&&clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout(()=>{this.syncNow()},w1))}async syncNow(){if(!this.isAuthenticated)return{success:!1,error:"Not authenticated"};if(!un())return{success:!1,error:"Firebase not configured"};const e=Date.now();if(e-this.lastSyncTime<b1)return{success:!1,error:"Rate limited"};try{const n=wT();if(!n)return{success:!1,error:"No scores to sync"};const i=Bi(),r=hi(i,"syncScores"),s={scores:n.scores,totalXP:n.totalXP};this.displayName!==void 0&&(s.displayName=this.displayName);const o=await r(s);return this.lastSyncTime=e,{success:o.data.success,totalXP:o.data.totalXP}}catch(n){return Wf.error("Sync failed:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async syncWithRetry(e=3){for(let n=0;n<e;n++){const i=await this.syncNow();if(i.success||i.error==="Not authenticated"||i.error==="No scores to sync"||i.error==="Firebase not configured")return i;if(n<e-1){const r=1e3*Math.pow(2,n);Wf.debug(`Sync retry ${n+1}/${e} in ${r}ms`),await new Promise(s=>setTimeout(s,r)),this.lastSyncTime=0}}return{success:!1,error:"Sync failed after multiple retries"}}getLocalScores(){const e=wT();return e?e.scores.reduce((n,i)=>(n[i.courseId]=i.xp,n),{ba:0,crypto:0,aa:0,linalg:0,advlinalg:0,islr:0,ra:0,calc1:0,calc_lib_art:0,calc_easy:0,wm:0,four_pillars:0,mom:0,euclid:0,thales:0,gauss:0,human_action:0,atlas_shrugged:0,template:0}):null}}let Wm=null;function cu(){return Wm||(Wm=new MP),Wm}const Vt=oo("NostrAuth"),uw=G.createContext(null),hu="magic-internet-math-nostr-auth";function PP({children:t}){const[e,n]=G.useState(!1),[i,r]=G.useState(null),[s,o]=G.useState(null),[a,c]=G.useState(null),[h,m]=G.useState(!1),[T,g]=G.useState(null),[w,O]=G.useState(!1),[M,L]=G.useState(!1),[x,k]=G.useState(null);G.useEffect(()=>{(async()=>{const A=await KO(RO);O(A),L(!0)})()},[]);const D=G.useCallback(async y=>{for(const A of IO)try{const b=await XO(A,y);if(b){b.nip05&&c(b.nip05);const I=b.display_name||b.name;if(I){o(I);const _=cu();_.setDisplayName(I),_.requestSync()}return}}catch(b){Vt.warn(`Failed to fetch profile from ${A}:`,b)}},[]);G.useEffect(()=>{if(!un())return;const y=Xm(),A=b4(y,async b=>{if(k(b),b){r(b.uid);try{const _=await b.getIdTokenResult(!0);Vt.debug("Token claims:",_.claims),m(_.claims.isAdmin===!0)}catch(_){Vt.error("Error getting token:",_),m(!1)}try{const _=localStorage.getItem(hu);if(_){const se=JSON.parse(_),pe=OP(se);if(!pe.valid||!pe.data){Vt.warn("Invalid auth state in localStorage:",pe.error),localStorage.removeItem(hu);return}pe.data.npub===b.uid&&o(pe.data.displayName)}}catch(_){Vt.debug("Storage read error:",_)}const I=cu();I.setAuthenticated(!0),I.startPeriodicSync();try{const _=ZO(b.uid);D(_)}catch(_){Vt.debug("Npub conversion error:",_)}}else{r(null),c(null),m(!1),o(null);const I=cu();I.setAuthenticated(!1),I.stopPeriodicSync()}});return()=>A()},[D]);const z=G.useCallback(async()=>{if(Vt.debug("connect() called"),Vt.debug("isFirebaseConfigured:",un()),Vt.debug("hasNostrExtension:",Kf()),!un()){Vt.info("Firebase not configured, cannot connect");return}if(!Kf()){g("No Nostr extension found. Please install nos2x, Alby, or another NIP-07 extension."),Vt.warn("No extension found, returning");return}n(!0),g(null),Vt.info("Starting Nostr connection...");try{const y=window.nostr,A=Bi(),b=await y.getPublicKey(),I=$O(b),se=await hi(A,"createChallenge")({pubkeyHex:b}),{challenge:pe}=se.data,X={kind:YO,created_at:Math.floor(Date.now()/1e3),tags:[["challenge",pe]],content:pe},ne=await y.signEvent(X),be=await hi(A,"verifyNostrAndCreateToken")({signedEvent:ne,challenge:pe}),He=Xm();await T4(He,be.data.token);try{const et={npub:I,displayName:null};localStorage.setItem(hu,JSON.stringify(et))}catch(et){Vt.warn("Failed to store auth state:",et)}cu().syncNow().catch(et=>{Vt.warn("Initial sync failed:",et)})}catch(y){Vt.error("Nostr connect error:",y),g(y instanceof Error?y.message:"Failed to connect. Please try again.")}finally{n(!1)}},[w]),F=G.useCallback(async()=>{try{if(un()){const y=Xm();await S4(y)}try{localStorage.removeItem(hu)}catch(y){Vt.warn("Failed to clear auth state from storage:",y)}r(null),o(null),m(!1)}catch(y){Vt.error("Disconnect error:",y),g(y instanceof Error?y.message:"Failed to disconnect")}},[]),$=G.useCallback(y=>{if(o(y),i)try{localStorage.setItem(hu,JSON.stringify({npub:i,displayName:y}))}catch(b){Vt.warn("Failed to update display name in storage:",b)}const A=cu();A.setDisplayName(y),A.requestSync()},[i]),S=G.useCallback(()=>{g(null)},[]),p=G.useMemo(()=>({isAuthenticated:!!x&&!!i,isConnecting:e,npub:i,displayName:s,nip05:a,isAdmin:h,error:T,hasExtension:w,extensionChecked:M,connect:z,disconnect:F,setDisplayName:$,clearError:S}),[x,i,e,s,a,h,T,w,M,z,F,$,S]);return R.jsx(uw.Provider,{value:p,children:t})}const LP={isAuthenticated:!1,isConnecting:!1,npub:null,displayName:null,nip05:null,isAdmin:!1,error:null,hasExtension:!1,extensionChecked:!0,connect:async()=>{},disconnect:async()=>{},setDisplayName:()=>{},clearError:()=>{}};function cw(){const t=G.useContext(uw);return t||LP}const ps=oo("GamificationProgress"),zP=500,VP=()=>{var t,e;return!!((e=(t=window.webkit)==null?void 0:t.messageHandlers)!=null&&e.progressHandler)},va=(t,e)=>{VP()&&window.webkit.messageHandlers.progressHandler.postMessage({type:t,...e})},hw=G.createContext(null);function UP({children:t,courseId:e,curriculum:n}){const[i,r]=G.useReducer(HC,dS()),[s,o]=G.useState(!0),[a,c]=G.useState([]),[h,m]=G.useState("idle"),T=G.useRef(null),g=G.useRef(!1),w=G.useRef(!1),{isAuthenticated:O,npub:M}=cw(),L=G.useCallback(A=>`${e}:${A}`,[e]),x=G.useCallback((A,b)=>{if(!n)return null;const I=n.find(ne=>ne.sections.some(ie=>ie.id===A));if(!I)return null;const _=`${e}:part${I.id}`;if(b.user.partsCompleted.includes(_))return null;const se=I.sections.map(ne=>L(ne.id)),pe=L(A);return se.every(ne=>b.user.sectionsCompleted.includes(ne)||ne===pe)?_:null},[n,e,L]);G.useEffect(()=>{const A=zf();A&&r({type:"LOAD_STATE",payload:A}),O||queueMicrotask(()=>o(!1))},[]),G.useEffect(()=>{const A=nT(),b=A.onStatusChange(m),I=w.current;return w.current=O,O&&!I?(ps.info("User authenticated, fetching progress from server"),A.setAuthenticated(!0),(async()=>{o(!0);try{const se=NC(),pe=zf();if(se&&pe){ps.info("Migrating local progress to server");const X=await A.migrateLocalProgress(pe);X.success&&X.state?(r({type:"MERGE_WITH_SERVER",payload:X.state}),CC(),ps.info("Migration complete")):ps.warn("Migration failed, using local state")}else{const X=await A.fetchServerProgress();X.found&&X.progress?(ps.info("Loaded progress from server"),r({type:"LOAD_FROM_SERVER",payload:X.progress}),A.setLastSyncedAt(X.lastSyncedAt)):ps.info("No server progress found, using local state")}}catch(se){ps.error("Failed to sync with server:",se)}finally{queueMicrotask(()=>o(!1)),g.current=!0}})(),A.startPeriodicSync()):!O&&I?(ps.info("User logged out"),A.setAuthenticated(!1),A.stopPeriodicSync(),g.current=!1):O||queueMicrotask(()=>o(!1)),()=>{b()}},[O,M]),G.useEffect(()=>{s||(Vy(i),O&&g.current&&nT().requestSync(i))},[i,s,O]),G.useEffect(()=>{s||r({type:"UPDATE_STREAK"})},[s]),G.useEffect(()=>{if(!s)return T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{const A=DC(i);A.length>0&&c(b=>[...b,...A])},zP),()=>{T.current&&clearTimeout(T.current)}},[i,s]);const k=G.useCallback(A=>{r({type:"VISIT_SECTION",payload:{sectionId:L(A)}})},[L]),D=G.useCallback(A=>{const b=x(A,i);r({type:"COMPLETE_SECTION",payload:{sectionId:L(A)}}),b&&(r({type:"COMPLETE_PART",payload:{partId:b}}),va("partCompleted",{partId:b,courseId:e})),va("sectionCompleted",{sectionId:L(A),courseId:e})},[L,e,x,i]),z=G.useCallback((A,b,I,_,se)=>{const pe=L(A),X=I>=80?x(A,i):null;r({type:"RECORD_QUIZ",payload:{sectionId:pe,difficulty:b,score:I,correctAnswers:_,totalQuestions:se}}),X&&(r({type:"COMPLETE_PART",payload:{partId:X}}),va("partCompleted",{partId:X,courseId:e})),va("quizCompleted",{sectionId:pe,courseId:e,score:I,correctAnswers:_,totalQuestions:se}),I>=80&&va("sectionCompleted",{sectionId:pe,courseId:e})},[L,e,x,i]),F=G.useCallback((A,b)=>{r({type:"USE_VISUALIZATION",payload:{sectionId:L(A),name:b}})},[L]),$=G.useCallback(A=>{c(b=>b.filter(I=>I.id!==A))},[]),S=G.useCallback(()=>{r({type:"RESET_PROGRESS"})},[]),p=G.useCallback(A=>{r({type:"RECORD_RACE_GAME",payload:A}),va("raceGameCompleted",{courseId:e,score:A.score,tier:A.tier,correctAnswers:A.correctAnswers,totalQuestions:A.totalQuestions,isMultiplayer:A.isMultiplayer})},[e]),y=G.useMemo(()=>({state:i,isLoading:s,notifications:a,syncStatus:h,visitSection:k,completeSection:D,recordQuiz:z,useVisualization:F,dismissNotification:$,resetProgress:S,recordRaceGame:p,dispatch:r}),[i,s,a,h,k,D,z,F,$,S,p,r]);return R.jsx(hw.Provider,{value:y,children:t})}function fw(){const t=G.useContext(hw);if(!t)throw new Error("useGamification must be used within a GamificationProvider");return t}function jP({children:t}){return R.jsx(UP,{courseId:nC,children:t})}const BP={progress:"",mastery:"",dedication:"",exploration:""};function FP({notification:t,onDismiss:e}){return G.useEffect(()=>{const n=setTimeout(e,5e3);return()=>clearTimeout(n)},[e]),R.jsx(ge.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.9},className:"pointer-events-auto",children:R.jsxs("div",{className:"flex items-center gap-4 px-4 py-3 rounded-xl bg-dark-800 border border-primary-500/30 shadow-xl shadow-primary-500/10",children:[R.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-500/20 to-primary-600/10 flex items-center justify-center text-2xl",children:BP[t.category]||""}),R.jsxs("div",{className:"flex-1",children:[R.jsx("div",{className:"text-xs text-primary-400 font-medium uppercase tracking-wider mb-0.5",children:"Achievement Unlocked!"}),R.jsx("div",{className:"text-dark-100 font-semibold",children:t.title}),R.jsx("div",{className:"text-sm text-dark-400",children:t.description})]}),R.jsxs("div",{className:"text-right",children:[R.jsxs("div",{className:"text-lg font-bold text-primary-400",children:["+",t.xpReward]}),R.jsx("div",{className:"text-xs text-dark-500",children:"XP"})]}),R.jsx("button",{onClick:e,className:"p-1 text-dark-500 hover:text-dark-300 transition-colors",children:R.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}function HP(){const{notifications:t,dismissNotification:e}=fw();return R.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-3 pointer-events-none",children:R.jsx(Bg,{mode:"popLayout",children:t.map(n=>R.jsx(FP,{notification:n,onDismiss:()=>e(n.id)},n.id))})})}function qP({isOpen:t,onClose:e}){const[n,i]=G.useState([]),[r,s]=G.useState(""),[o,a]=G.useState(null),c=G.useCallback(()=>{if(r.trim()==="")return;const g=parseFloat(r);if(isNaN(g)){a("Invalid number");return}i(w=>[...w,g]),s(""),a(null)},[r]),h=G.useCallback(()=>{i([]),s(""),a(null)},[]),m=G.useCallback(g=>{if(a(null),g==="clear"){h();return}if(g==="drop"){i(w=>w.slice(0,-1));return}if(g==="swap"){if(n.length<2){a("Need 2 numbers to swap");return}i(w=>{const O=[...w],M=O.pop(),L=O.pop();return[...O,M,L]});return}if(g==="dup"){if(n.length<1){a("Need 1 number to duplicate");return}i(w=>[...w,w[w.length-1]]);return}if(g==="floor"){if(n.length<1){a("Need 1 number");return}i(w=>{const O=[...w],M=O.pop();return[...O,Math.floor(M)]});return}if(n.length<2){a("Need 2 numbers");return}i(w=>{const O=[...w],M=O.pop(),L=O.pop();let x;switch(g){case"+":x=L+M;break;case"-":x=L-M;break;case"*":x=L*M;break;case"/":if(M===0)return a("Division by zero"),w;x=L/M;break;case"^":x=Math.pow(L,M);break;case"div":if(M===0)return a("Division by zero"),w;x=Math.floor(L/M);break;default:return w}return[...O,x]})},[n,h]),T=G.useCallback(g=>{g.key==="Enter"&&(g.preventDefault(),r.trim()&&c())},[r,c]);return R.jsx(Bg,{children:t&&R.jsxs(ge.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:100},className:"fixed right-4 top-20 w-64 bg-dark-800 border border-dark-600 rounded-xl shadow-2xl z-50",children:[R.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-dark-600",children:[R.jsx("h3",{className:"text-sm font-bold text-white",children:"RPN Calculator"}),R.jsx("button",{onClick:e,className:"text-dark-400 hover:text-white transition-colors",children:R.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),R.jsxs("div",{className:"p-3 border-b border-dark-600",children:[R.jsx("div",{className:"text-xs text-dark-400 mb-1",children:"Stack (bottom  top)"}),R.jsx("div",{className:"bg-dark-900 rounded-lg p-2 min-h-[60px] max-h-[100px] overflow-y-auto font-mono text-sm",children:n.length===0?R.jsx("span",{className:"text-dark-500",children:"empty"}):R.jsx("div",{className:"flex flex-wrap gap-1",children:n.map((g,w)=>R.jsx("span",{className:`px-2 py-0.5 rounded ${w===n.length-1?"bg-cyan-500/20 text-cyan-400":"bg-dark-700 text-dark-300"}`,children:Number.isInteger(g)?g:g.toFixed(4)},w))})})]}),o&&R.jsx("div",{className:"px-3 py-2 text-xs text-red-400 bg-red-500/10",children:o}),R.jsxs("div",{className:"p-3 border-b border-dark-600",children:[R.jsxs("div",{className:"flex gap-2 mb-2",children:[R.jsx("input",{type:"text",inputMode:"numeric",value:r,onChange:g=>s(g.target.value),onKeyDown:T,placeholder:"Enter number",className:"flex-1 px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white text-sm font-mono focus:border-cyan-500 focus:outline-none"}),R.jsx("button",{onClick:c,disabled:!r.trim(),className:"px-3 py-2 bg-cyan-600 hover:bg-cyan-500 disabled:bg-dark-600 text-white text-sm font-bold rounded-lg transition-colors",children:"Push"})]}),R.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[[7,8,9,4,5,6,1,2,3].map(g=>R.jsx("button",{onClick:()=>s(w=>w+g.toString()),className:"py-2.5 bg-dark-700 hover:bg-dark-600 text-white font-bold rounded-lg transition-colors",children:g},g)),R.jsx("button",{onClick:()=>s(g=>g.slice(0,-1)),className:"py-2.5 bg-dark-700 hover:bg-dark-600 text-dark-400 font-bold rounded-lg transition-colors",children:""}),R.jsx("button",{onClick:()=>s(g=>g+"0"),className:"py-2.5 bg-dark-700 hover:bg-dark-600 text-white font-bold rounded-lg transition-colors",children:"0"}),R.jsx("button",{onClick:()=>s(""),className:"py-2.5 bg-dark-700 hover:bg-dark-600 text-dark-400 text-sm rounded-lg transition-colors",children:"CLR"})]})]}),R.jsxs("div",{className:"p-3 space-y-2",children:[R.jsx("div",{className:"grid grid-cols-4 gap-1",children:["+","-","*","/"].map(g=>R.jsx("button",{onClick:()=>m(g),className:"py-2 bg-dark-700 hover:bg-dark-600 text-white font-bold rounded-lg transition-colors",children:g},g))}),R.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[R.jsx("button",{onClick:()=>m("floor"),className:"py-2 bg-dark-700 hover:bg-dark-600 text-white font-bold rounded-lg transition-colors",children:"floor"}),R.jsx("button",{onClick:()=>m("div"),className:"py-2 bg-dark-700 hover:bg-dark-600 text-white font-bold rounded-lg transition-colors",children:"div"}),R.jsx("button",{onClick:()=>m("^"),className:"py-2 bg-dark-700 hover:bg-dark-600 text-white font-bold rounded-lg transition-colors",children:"^"})]}),R.jsxs("div",{className:"grid grid-cols-4 gap-1",children:[R.jsx("button",{onClick:()=>m("dup"),className:"py-1.5 bg-dark-700 hover:bg-dark-600 text-dark-300 text-xs rounded-lg transition-colors",children:"dup"}),R.jsx("button",{onClick:()=>m("swap"),className:"py-1.5 bg-dark-700 hover:bg-dark-600 text-dark-300 text-xs rounded-lg transition-colors",children:"swap"}),R.jsx("button",{onClick:()=>m("drop"),className:"py-1.5 bg-dark-700 hover:bg-dark-600 text-dark-300 text-xs rounded-lg transition-colors",children:"drop"}),R.jsx("button",{onClick:h,className:"py-1.5 bg-red-600/50 hover:bg-red-600 text-white text-xs rounded-lg transition-colors",children:"clear"})]})]}),R.jsx("div",{className:"p-3 border-t border-dark-600",children:R.jsxs("div",{className:"text-xs text-dark-500",children:[R.jsx("span",{className:"text-dark-400",children:"Example:"})," 47 Enter 7 Enter div  6"]})})]})})}function GP({onClick:t}){return R.jsx("button",{onClick:t,className:"fixed right-4 bottom-4 w-12 h-12 bg-dark-700 hover:bg-dark-600 border border-dark-500 rounded-full shadow-lg flex items-center justify-center text-dark-300 hover:text-white transition-colors z-40",title:"RPN Calculator",children:R.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})})}const $P=[2,3,5,7,11,13,17,19,23];function ZP(){return`${Date.now()}-${Math.random().toString(36).slice(2,9)}`}function dw(t,e){return Math.floor(Math.random()*(e-t+1))+t}function KP(t,e){const n=$P.filter(i=>i>=t&&i<=e);return n.length>0&&Math.random()<.6?n[Math.floor(Math.random()*n.length)]:dw(t,e)}function XP(t,e,n){const i=Math.max(e,t+1),r=n;let s,o=0;do s=dw(i,r),o++;while(o<10&&s%t===0&&Math.random()<.9);return s}function Dd(t){const e=dl.find(n=>n.tier===t);if(!e)throw new Error(`Invalid tier: ${t}`);return e}function YP(t){const e=Dd(t),n=KP(e.modulusRange[0],e.modulusRange[1]),i=XP(n,e.dividendRange[0],e.dividendRange[1]),r=i%n;return{id:ZP(),dividend:i,modulus:n,correctAnswer:r,displayText:`What is ${i} mod ${n}?`,tier:t,generatedAt:Date.now()}}function RT(t,e){const n=[],i=new Set;for(let r=0;r<e;r++){let s,o=0;do s=YP(t),o++;while(o<5&&i.has(`${s.dividend}-${s.modulus}`));i.add(`${s.dividend}-${s.modulus}`),n.push(s)}return n}function QP(t,e){return e===t.correctAnswer}const ep=1e3,Rh=3e3,IT=1e4;function JP(t){return t>=10?1.5:t>=7?1.3:t>=5?1.2:t>=3?1.1:1}function WP(t,e){if(e<=ep)return t;if(e<=Rh){const n=1-(e-ep)/(Rh-ep);return Math.floor(t*(.5+.5*n))}if(e<=IT){const n=1-(e-Rh)/(IT-Rh);return Math.floor(t*.5*n)}return 0}function mw(t,e,n){const r=Dd(t).basePoints,s=WP(r,e),o=n+1,a=JP(o),c=e<2e3,h=Math.floor((r+s)*a);return{basePoints:r,speedBonus:s,streakMultiplier:a,totalPoints:h,newStreak:o,isFastAnswer:c}}function pw(t){const n=Dd(t).basePoints,i=-Math.floor(n*.5);return{basePoints:i,speedBonus:0,streakMultiplier:1,totalPoints:i,newStreak:0,isFastAnswer:!1}}function e3(t){let e=0;e+=yn.GAME_PARTICIPATION;const n=yn.TIER_MULTIPLIER[t.tier],i=Math.floor(t.score/yn.POINTS_PER_XP_UNIT*Pt.QUIZ_MEDIUM*n);return e+=Math.max(0,i),t.correctAnswers===t.totalQuestions&&t.totalQuestions>=10&&(e+=yn.PERFECT_GAME_BONUS),t.fastAnswers>=10&&(e+=yn.SPEED_DEMON_BONUS),t.maxStreak>=10&&(e+=yn.STREAK_MASTER_BONUS),e}function t3(t,e){let n=0,i=0,r=0,s=0,o=0,a=0,c=0;for(const g of e)if(c+=g.responseTimeMs,g.isCorrect){const w=mw(t,g.responseTimeMs,s);n+=w.totalPoints,i++,s=w.newStreak,o=Math.max(o,s),w.isFastAnswer&&a++}else{const w=pw(t);n+=w.totalPoints,r++,s=0}const h=e.length>0?Math.round(c/e.length):0,m={tier:t,score:n,correctAnswers:i,totalQuestions:e.length,maxStreak:o,fastAnswers:a,timestamp:new Date().toISOString()},T=e3(m);return{totalPoints:n,correctAnswers:i,incorrectAnswers:r,maxStreak:o,fastAnswers:a,avgResponseTime:h,xpEarned:T}}function CT(t){return t>=0?`+${t}`:`${t}`}function gw(t){return t<1e3?`${t}ms`:`${(t/1e3).toFixed(1)}s`}const NT=()=>({phase:"lobby",tier:1,roundCount:10,currentRound:0,currentProblem:null,problems:[],roundResults:[],score:0,streak:0});function n3(){const[t,e]=G.useState(NT),n=G.useCallback((m,T)=>{const g=RT(m,T);e({phase:"countdown",tier:m,roundCount:T,currentRound:0,currentProblem:null,problems:g,roundResults:[],score:0,streak:0})},[]),i=G.useCallback(()=>{e(m=>({...m,phase:"playing",currentRound:1,currentProblem:m.problems[0]||null}))},[]),r=G.useCallback((m,T)=>{e(g=>{if(!g.currentProblem||g.phase!=="playing")return g;const w=QP(g.currentProblem,m);let O,M;if(w){const $=mw(g.tier,T,g.streak);O=$.totalPoints,M=$.newStreak}else O=pw(g.tier).totalPoints,M=0;const L={problem:g.currentProblem,userAnswer:m,isCorrect:w,responseTimeMs:T,points:O},x=[...g.roundResults,L],k=g.score+O;if(g.currentRound>=g.roundCount)return{...g,phase:"results",score:k,streak:M,roundResults:x,lastRoundResult:{isCorrect:w,points:O,correctAnswer:g.currentProblem.correctAnswer}};const z=g.currentRound+1,F=g.problems[z-1]||null;return{...g,currentRound:z,currentProblem:F,score:k,streak:M,roundResults:x,lastRoundResult:{isCorrect:w,points:O,correctAnswer:g.currentProblem.correctAnswer}}})},[]),s=G.useCallback(()=>{e(m=>{const T=RT(m.tier,m.roundCount);return{phase:"countdown",tier:m.tier,roundCount:m.roundCount,currentRound:0,currentProblem:null,problems:T,roundResults:[],score:0,streak:0}})},[]),o=G.useCallback(()=>{e(NT())},[]),a=G.useCallback(()=>{if(t.phase!=="results")return null;const m=t.roundResults.filter(L=>L.isCorrect).length,T=t.roundResults.filter(L=>L.isCorrect&&L.responseTimeMs<2e3).length;let g=0,w=0;for(const L of t.roundResults)L.isCorrect?(w++,g=Math.max(g,w)):w=0;const O=t.roundResults.reduce((L,x)=>L+x.responseTimeMs,0),M=t.roundResults.length>0?Math.round(O/t.roundResults.length):0;return{tier:t.tier,score:t.score,correctAnswers:m,totalQuestions:t.roundResults.length,maxStreak:g,fastAnswers:T,avgResponseTime:M,timestamp:new Date().toISOString(),isMultiplayer:!1}},[t]),c=G.useCallback(()=>{if(t.phase!=="results")return null;const m=t.roundResults.map(T=>({isCorrect:T.isCorrect,responseTimeMs:T.responseTimeMs}));return t3(t.tier,m)},[t]),h=G.useMemo(()=>({startGame:n,completeCountdown:i,submitAnswer:r,playAgain:s,returnToLobby:o,getGameResult:a,getFinalScore:c}),[n,i,r,s,o,a,c]);return[t,h]}var xT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zo,yw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,p){function y(){}y.prototype=p.prototype,S.D=p.prototype,S.prototype=new y,S.prototype.constructor=S,S.C=function(A,b,I){for(var _=Array(arguments.length-2),se=2;se<arguments.length;se++)_[se-2]=arguments[se];return p.prototype[b].apply(A,_)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,p,y){y||(y=0);var A=Array(16);if(typeof p=="string")for(var b=0;16>b;++b)A[b]=p.charCodeAt(y++)|p.charCodeAt(y++)<<8|p.charCodeAt(y++)<<16|p.charCodeAt(y++)<<24;else for(b=0;16>b;++b)A[b]=p[y++]|p[y++]<<8|p[y++]<<16|p[y++]<<24;p=S.g[0],y=S.g[1],b=S.g[2];var I=S.g[3],_=p+(I^y&(b^I))+A[0]+3614090360&4294967295;p=y+(_<<7&4294967295|_>>>25),_=I+(b^p&(y^b))+A[1]+3905402710&4294967295,I=p+(_<<12&4294967295|_>>>20),_=b+(y^I&(p^y))+A[2]+606105819&4294967295,b=I+(_<<17&4294967295|_>>>15),_=y+(p^b&(I^p))+A[3]+3250441966&4294967295,y=b+(_<<22&4294967295|_>>>10),_=p+(I^y&(b^I))+A[4]+4118548399&4294967295,p=y+(_<<7&4294967295|_>>>25),_=I+(b^p&(y^b))+A[5]+1200080426&4294967295,I=p+(_<<12&4294967295|_>>>20),_=b+(y^I&(p^y))+A[6]+2821735955&4294967295,b=I+(_<<17&4294967295|_>>>15),_=y+(p^b&(I^p))+A[7]+4249261313&4294967295,y=b+(_<<22&4294967295|_>>>10),_=p+(I^y&(b^I))+A[8]+1770035416&4294967295,p=y+(_<<7&4294967295|_>>>25),_=I+(b^p&(y^b))+A[9]+2336552879&4294967295,I=p+(_<<12&4294967295|_>>>20),_=b+(y^I&(p^y))+A[10]+4294925233&4294967295,b=I+(_<<17&4294967295|_>>>15),_=y+(p^b&(I^p))+A[11]+2304563134&4294967295,y=b+(_<<22&4294967295|_>>>10),_=p+(I^y&(b^I))+A[12]+1804603682&4294967295,p=y+(_<<7&4294967295|_>>>25),_=I+(b^p&(y^b))+A[13]+4254626195&4294967295,I=p+(_<<12&4294967295|_>>>20),_=b+(y^I&(p^y))+A[14]+2792965006&4294967295,b=I+(_<<17&4294967295|_>>>15),_=y+(p^b&(I^p))+A[15]+1236535329&4294967295,y=b+(_<<22&4294967295|_>>>10),_=p+(b^I&(y^b))+A[1]+4129170786&4294967295,p=y+(_<<5&4294967295|_>>>27),_=I+(y^b&(p^y))+A[6]+3225465664&4294967295,I=p+(_<<9&4294967295|_>>>23),_=b+(p^y&(I^p))+A[11]+643717713&4294967295,b=I+(_<<14&4294967295|_>>>18),_=y+(I^p&(b^I))+A[0]+3921069994&4294967295,y=b+(_<<20&4294967295|_>>>12),_=p+(b^I&(y^b))+A[5]+3593408605&4294967295,p=y+(_<<5&4294967295|_>>>27),_=I+(y^b&(p^y))+A[10]+38016083&4294967295,I=p+(_<<9&4294967295|_>>>23),_=b+(p^y&(I^p))+A[15]+3634488961&4294967295,b=I+(_<<14&4294967295|_>>>18),_=y+(I^p&(b^I))+A[4]+3889429448&4294967295,y=b+(_<<20&4294967295|_>>>12),_=p+(b^I&(y^b))+A[9]+568446438&4294967295,p=y+(_<<5&4294967295|_>>>27),_=I+(y^b&(p^y))+A[14]+3275163606&4294967295,I=p+(_<<9&4294967295|_>>>23),_=b+(p^y&(I^p))+A[3]+4107603335&4294967295,b=I+(_<<14&4294967295|_>>>18),_=y+(I^p&(b^I))+A[8]+1163531501&4294967295,y=b+(_<<20&4294967295|_>>>12),_=p+(b^I&(y^b))+A[13]+2850285829&4294967295,p=y+(_<<5&4294967295|_>>>27),_=I+(y^b&(p^y))+A[2]+4243563512&4294967295,I=p+(_<<9&4294967295|_>>>23),_=b+(p^y&(I^p))+A[7]+1735328473&4294967295,b=I+(_<<14&4294967295|_>>>18),_=y+(I^p&(b^I))+A[12]+2368359562&4294967295,y=b+(_<<20&4294967295|_>>>12),_=p+(y^b^I)+A[5]+4294588738&4294967295,p=y+(_<<4&4294967295|_>>>28),_=I+(p^y^b)+A[8]+2272392833&4294967295,I=p+(_<<11&4294967295|_>>>21),_=b+(I^p^y)+A[11]+1839030562&4294967295,b=I+(_<<16&4294967295|_>>>16),_=y+(b^I^p)+A[14]+4259657740&4294967295,y=b+(_<<23&4294967295|_>>>9),_=p+(y^b^I)+A[1]+2763975236&4294967295,p=y+(_<<4&4294967295|_>>>28),_=I+(p^y^b)+A[4]+1272893353&4294967295,I=p+(_<<11&4294967295|_>>>21),_=b+(I^p^y)+A[7]+4139469664&4294967295,b=I+(_<<16&4294967295|_>>>16),_=y+(b^I^p)+A[10]+3200236656&4294967295,y=b+(_<<23&4294967295|_>>>9),_=p+(y^b^I)+A[13]+681279174&4294967295,p=y+(_<<4&4294967295|_>>>28),_=I+(p^y^b)+A[0]+3936430074&4294967295,I=p+(_<<11&4294967295|_>>>21),_=b+(I^p^y)+A[3]+3572445317&4294967295,b=I+(_<<16&4294967295|_>>>16),_=y+(b^I^p)+A[6]+76029189&4294967295,y=b+(_<<23&4294967295|_>>>9),_=p+(y^b^I)+A[9]+3654602809&4294967295,p=y+(_<<4&4294967295|_>>>28),_=I+(p^y^b)+A[12]+3873151461&4294967295,I=p+(_<<11&4294967295|_>>>21),_=b+(I^p^y)+A[15]+530742520&4294967295,b=I+(_<<16&4294967295|_>>>16),_=y+(b^I^p)+A[2]+3299628645&4294967295,y=b+(_<<23&4294967295|_>>>9),_=p+(b^(y|~I))+A[0]+4096336452&4294967295,p=y+(_<<6&4294967295|_>>>26),_=I+(y^(p|~b))+A[7]+1126891415&4294967295,I=p+(_<<10&4294967295|_>>>22),_=b+(p^(I|~y))+A[14]+2878612391&4294967295,b=I+(_<<15&4294967295|_>>>17),_=y+(I^(b|~p))+A[5]+4237533241&4294967295,y=b+(_<<21&4294967295|_>>>11),_=p+(b^(y|~I))+A[12]+1700485571&4294967295,p=y+(_<<6&4294967295|_>>>26),_=I+(y^(p|~b))+A[3]+2399980690&4294967295,I=p+(_<<10&4294967295|_>>>22),_=b+(p^(I|~y))+A[10]+4293915773&4294967295,b=I+(_<<15&4294967295|_>>>17),_=y+(I^(b|~p))+A[1]+2240044497&4294967295,y=b+(_<<21&4294967295|_>>>11),_=p+(b^(y|~I))+A[8]+1873313359&4294967295,p=y+(_<<6&4294967295|_>>>26),_=I+(y^(p|~b))+A[15]+4264355552&4294967295,I=p+(_<<10&4294967295|_>>>22),_=b+(p^(I|~y))+A[6]+2734768916&4294967295,b=I+(_<<15&4294967295|_>>>17),_=y+(I^(b|~p))+A[13]+1309151649&4294967295,y=b+(_<<21&4294967295|_>>>11),_=p+(b^(y|~I))+A[4]+4149444226&4294967295,p=y+(_<<6&4294967295|_>>>26),_=I+(y^(p|~b))+A[11]+3174756917&4294967295,I=p+(_<<10&4294967295|_>>>22),_=b+(p^(I|~y))+A[2]+718787259&4294967295,b=I+(_<<15&4294967295|_>>>17),_=y+(I^(b|~p))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+p&4294967295,S.g[1]=S.g[1]+(b+(_<<21&4294967295|_>>>11))&4294967295,S.g[2]=S.g[2]+b&4294967295,S.g[3]=S.g[3]+I&4294967295}i.prototype.u=function(S,p){p===void 0&&(p=S.length);for(var y=p-this.blockSize,A=this.B,b=this.h,I=0;I<p;){if(b==0)for(;I<=y;)r(this,S,I),I+=this.blockSize;if(typeof S=="string"){for(;I<p;)if(A[b++]=S.charCodeAt(I++),b==this.blockSize){r(this,A),b=0;break}}else for(;I<p;)if(A[b++]=S[I++],b==this.blockSize){r(this,A),b=0;break}}this.h=b,this.o+=p},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var p=1;p<S.length-8;++p)S[p]=0;var y=8*this.o;for(p=S.length-8;p<S.length;++p)S[p]=y&255,y/=256;for(this.u(S),S=Array(16),p=y=0;4>p;++p)for(var A=0;32>A;A+=8)S[y++]=this.g[p]>>>A&255;return S};function s(S,p){var y=a;return Object.prototype.hasOwnProperty.call(y,S)?y[S]:y[S]=p(S)}function o(S,p){this.h=p;for(var y=[],A=!0,b=S.length-1;0<=b;b--){var I=S[b]|0;A&&I==p||(y[b]=I,A=!1)}this.g=y}var a={};function c(S){return-128<=S&&128>S?s(S,function(p){return new o([p|0],0>p?-1:0)}):new o([S|0],0>S?-1:0)}function h(S){if(isNaN(S)||!isFinite(S))return T;if(0>S)return L(h(-S));for(var p=[],y=1,A=0;S>=y;A++)p[A]=S/y|0,y*=4294967296;return new o(p,0)}function m(S,p){if(S.length==0)throw Error("number format error: empty string");if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if(S.charAt(0)=="-")return L(m(S.substring(1),p));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=h(Math.pow(p,8)),A=T,b=0;b<S.length;b+=8){var I=Math.min(8,S.length-b),_=parseInt(S.substring(b,b+I),p);8>I?(I=h(Math.pow(p,I)),A=A.j(I).add(h(_))):(A=A.j(y),A=A.add(h(_)))}return A}var T=c(0),g=c(1),w=c(16777216);t=o.prototype,t.m=function(){if(M(this))return-L(this).m();for(var S=0,p=1,y=0;y<this.g.length;y++){var A=this.i(y);S+=(0<=A?A:4294967296+A)*p,p*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(O(this))return"0";if(M(this))return"-"+L(this).toString(S);for(var p=h(Math.pow(S,6)),y=this,A="";;){var b=z(y,p).g;y=x(y,b.j(p));var I=((0<y.g.length?y.g[0]:y.h)>>>0).toString(S);if(y=b,O(y))return I+A;for(;6>I.length;)I="0"+I;A=I+A}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function O(S){if(S.h!=0)return!1;for(var p=0;p<S.g.length;p++)if(S.g[p]!=0)return!1;return!0}function M(S){return S.h==-1}t.l=function(S){return S=x(this,S),M(S)?-1:O(S)?0:1};function L(S){for(var p=S.g.length,y=[],A=0;A<p;A++)y[A]=~S.g[A];return new o(y,~S.h).add(g)}t.abs=function(){return M(this)?L(this):this},t.add=function(S){for(var p=Math.max(this.g.length,S.g.length),y=[],A=0,b=0;b<=p;b++){var I=A+(this.i(b)&65535)+(S.i(b)&65535),_=(I>>>16)+(this.i(b)>>>16)+(S.i(b)>>>16);A=_>>>16,I&=65535,_&=65535,y[b]=_<<16|I}return new o(y,y[y.length-1]&-2147483648?-1:0)};function x(S,p){return S.add(L(p))}t.j=function(S){if(O(this)||O(S))return T;if(M(this))return M(S)?L(this).j(L(S)):L(L(this).j(S));if(M(S))return L(this.j(L(S)));if(0>this.l(w)&&0>S.l(w))return h(this.m()*S.m());for(var p=this.g.length+S.g.length,y=[],A=0;A<2*p;A++)y[A]=0;for(A=0;A<this.g.length;A++)for(var b=0;b<S.g.length;b++){var I=this.i(A)>>>16,_=this.i(A)&65535,se=S.i(b)>>>16,pe=S.i(b)&65535;y[2*A+2*b]+=_*pe,k(y,2*A+2*b),y[2*A+2*b+1]+=I*pe,k(y,2*A+2*b+1),y[2*A+2*b+1]+=_*se,k(y,2*A+2*b+1),y[2*A+2*b+2]+=I*se,k(y,2*A+2*b+2)}for(A=0;A<p;A++)y[A]=y[2*A+1]<<16|y[2*A];for(A=p;A<2*p;A++)y[A]=0;return new o(y,0)};function k(S,p){for(;(S[p]&65535)!=S[p];)S[p+1]+=S[p]>>>16,S[p]&=65535,p++}function D(S,p){this.g=S,this.h=p}function z(S,p){if(O(p))throw Error("division by zero");if(O(S))return new D(T,T);if(M(S))return p=z(L(S),p),new D(L(p.g),L(p.h));if(M(p))return p=z(S,L(p)),new D(L(p.g),p.h);if(30<S.g.length){if(M(S)||M(p))throw Error("slowDivide_ only works with positive integers.");for(var y=g,A=p;0>=A.l(S);)y=F(y),A=F(A);var b=$(y,1),I=$(A,1);for(A=$(A,2),y=$(y,2);!O(A);){var _=I.add(A);0>=_.l(S)&&(b=b.add(y),I=_),A=$(A,1),y=$(y,1)}return p=x(S,b.j(p)),new D(b,p)}for(b=T;0<=S.l(p);){for(y=Math.max(1,Math.floor(S.m()/p.m())),A=Math.ceil(Math.log(y)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),I=h(y),_=I.j(p);M(_)||0<_.l(S);)y-=A,I=h(y),_=I.j(p);O(I)&&(I=g),b=b.add(I),S=x(S,_)}return new D(b,S)}t.A=function(S){return z(this,S).h},t.and=function(S){for(var p=Math.max(this.g.length,S.g.length),y=[],A=0;A<p;A++)y[A]=this.i(A)&S.i(A);return new o(y,this.h&S.h)},t.or=function(S){for(var p=Math.max(this.g.length,S.g.length),y=[],A=0;A<p;A++)y[A]=this.i(A)|S.i(A);return new o(y,this.h|S.h)},t.xor=function(S){for(var p=Math.max(this.g.length,S.g.length),y=[],A=0;A<p;A++)y[A]=this.i(A)^S.i(A);return new o(y,this.h^S.h)};function F(S){for(var p=S.g.length+1,y=[],A=0;A<p;A++)y[A]=S.i(A)<<1|S.i(A-1)>>>31;return new o(y,S.h)}function $(S,p){var y=p>>5;p%=32;for(var A=S.g.length-y,b=[],I=0;I<A;I++)b[I]=0<p?S.i(I+y)>>>p|S.i(I+y+1)<<32-p:S.i(I+y);return new o(b,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,yw=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,zo=o}).apply(typeof xT<"u"?xT:typeof self<"u"?self:typeof window<"u"?window:{});var Ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _w,Eu,vw,nf,wg,Tw,Ew,Aw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,v){return l==Array.prototype||l==Object.prototype||(l[f]=v.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ih=="object"&&Ih];for(var f=0;f<l.length;++f){var v=l[f];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=n(this);function r(l,f){if(f)e:{var v=i;l=l.split(".");for(var C=0;C<l.length-1;C++){var V=l[C];if(!(V in v))break e;v=v[V]}l=l[l.length-1],C=v[l],f=f(C),f!=C&&f!=null&&e(v,l,{configurable:!0,writable:!0,value:f})}}function s(l,f){l instanceof String&&(l+="");var v=0,C=!1,V={next:function(){if(!C&&v<l.length){var B=v++;return{value:f(B,l[B]),done:!1}}return C=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}r("Array.prototype.values",function(l){return l||function(){return s(this,function(f,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function h(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function m(l,f,v){return l.call.apply(l.bind,arguments)}function T(l,f,v){if(!l)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,C),l.apply(f,V)}}return function(){return l.apply(f,arguments)}}function g(l,f,v){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:T,g.apply(null,arguments)}function w(l,f){var v=Array.prototype.slice.call(arguments,1);return function(){var C=v.slice();return C.push.apply(C,arguments),l.apply(this,C)}}function O(l,f){function v(){}v.prototype=f.prototype,l.aa=f.prototype,l.prototype=new v,l.prototype.constructor=l,l.Qb=function(C,V,B){for(var Y=Array(arguments.length-2),De=2;De<arguments.length;De++)Y[De-2]=arguments[De];return f.prototype[V].apply(C,Y)}}function M(l){const f=l.length;if(0<f){const v=Array(f);for(let C=0;C<f;C++)v[C]=l[C];return v}return[]}function L(l,f){for(let v=1;v<arguments.length;v++){const C=arguments[v];if(c(C)){const V=l.length||0,B=C.length||0;l.length=V+B;for(let Y=0;Y<B;Y++)l[V+Y]=C[Y]}else l.push(C)}}class x{constructor(f,v){this.i=f,this.j=v,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function k(l){return/^[\s\xa0]*$/.test(l)}function D(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function z(l){return z[" "](l),l}z[" "]=function(){};var F=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function $(l,f,v){for(const C in l)f.call(v,l[C],C,l)}function S(l,f){for(const v in l)f.call(void 0,l[v],v,l)}function p(l){const f={};for(const v in l)f[v]=l[v];return f}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(l,f){let v,C;for(let V=1;V<arguments.length;V++){C=arguments[V];for(v in C)l[v]=C[v];for(let B=0;B<y.length;B++)v=y[B],Object.prototype.hasOwnProperty.call(C,v)&&(l[v]=C[v])}}function b(l){var f=1;l=l.split(":");const v=[];for(;0<f&&l.length;)v.push(l.shift()),f--;return l.length&&v.push(l.join(":")),v}function I(l){a.setTimeout(()=>{throw l},0)}function _(){var l=be;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class se{constructor(){this.h=this.g=null}add(f,v){const C=pe.get();C.set(f,v),this.h?this.h.next=C:this.g=C,this.h=C}}var pe=new x(()=>new X,l=>l.reset());class X{constructor(){this.next=this.g=this.h=null}set(f,v){this.h=f,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,ie=!1,be=new se,He=()=>{const l=a.Promise.resolve(void 0);ne=()=>{l.then(Ve)}};var Ve=()=>{for(var l;l=_();){try{l.h.call(l.g)}catch(v){I(v)}var f=pe;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}ie=!1};function et(){this.s=this.s,this.C=this.C}et.prototype.s=!1,et.prototype.ma=function(){this.s||(this.s=!0,this.N())},et.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var Ht=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const v=()=>{};a.addEventListener("test",v,f),a.removeEventListener("test",v,f)}catch{}return l}();function Te(l,f){if(de.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var v=this.type=l.type,C=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(F){e:{try{z(f.nodeName);var V=!0;break e}catch{}V=!1}V||(f=null)}}else v=="mouseover"?f=l.fromElement:v=="mouseout"&&(f=l.toElement);this.relatedTarget=f,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:wi[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Te.aa.h.call(this)}}O(Te,de);var wi={2:"touch",3:"pen",4:"mouse"};Te.prototype.h=function(){Te.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var si="closure_listenable_"+(1e6*Math.random()|0),oi=0;function uo(l,f,v,C,V){this.listener=l,this.proxy=null,this.src=f,this.type=v,this.capture=!!C,this.ha=V,this.key=++oi,this.da=this.fa=!1}function $i(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Tr(l){this.src=l,this.g={},this.h=0}Tr.prototype.add=function(l,f,v,C,V){var B=l.toString();l=this.g[B],l||(l=this.g[B]=[],this.h++);var Y=bn(l,f,C,V);return-1<Y?(f=l[Y],v||(f.fa=!1)):(f=new uo(f,this.src,B,!!C,V),f.fa=v,l.push(f)),f};function Er(l,f){var v=f.type;if(v in l.g){var C=l.g[v],V=Array.prototype.indexOf.call(C,f,void 0),B;(B=0<=V)&&Array.prototype.splice.call(C,V,1),B&&($i(f),l.g[v].length==0&&(delete l.g[v],l.h--))}}function bn(l,f,v,C){for(var V=0;V<l.length;++V){var B=l[V];if(!B.da&&B.listener==f&&B.capture==!!v&&B.ha==C)return V}return-1}var Ri="closure_lm_"+(1e6*Math.random()|0),jn={};function Zi(l,f,v,C,V){if(Array.isArray(f)){for(var B=0;B<f.length;B++)Zi(l,f[B],v,C,V);return null}return v=Sn(v),l&&l[si]?l.K(f,v,h(C)?!!C.capture:!1,V):Ar(l,f,v,!1,C,V)}function Ar(l,f,v,C,V,B){if(!f)throw Error("Invalid event type");var Y=h(V)?!!V.capture:!!V,De=Wr(l);if(De||(l[Ri]=De=new Tr(l)),v=De.add(f,v,C,Y,B),v.proxy)return v;if(C=Ii(),v.proxy=C,C.src=l,C.listener=v,l.addEventListener)Ht||(V=Y),V===void 0&&(V=!1),l.addEventListener(f.toString(),C,V);else if(l.attachEvent)l.attachEvent(Ki(f.toString()),C);else if(l.addListener&&l.removeListener)l.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ii(){function l(v){return f.call(l.src,l.listener,v)}const f=ra;return l}function ot(l,f,v,C,V){if(Array.isArray(f))for(var B=0;B<f.length;B++)ot(l,f[B],v,C,V);else C=h(C)?!!C.capture:!!C,v=Sn(v),l&&l[si]?(l=l.i,f=String(f).toString(),f in l.g&&(B=l.g[f],v=bn(B,v,C,V),-1<v&&($i(B[v]),Array.prototype.splice.call(B,v,1),B.length==0&&(delete l.g[f],l.h--)))):l&&(l=Wr(l))&&(f=l.g[f.toString()],l=-1,f&&(l=bn(f,v,C,V)),(v=-1<l?f[l]:null)&&at(v))}function at(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[si])Er(f.i,l);else{var v=l.type,C=l.proxy;f.removeEventListener?f.removeEventListener(v,C,l.capture):f.detachEvent?f.detachEvent(Ki(v),C):f.addListener&&f.removeListener&&f.removeListener(C),(v=Wr(f))?(Er(v,l),v.h==0&&(v.src=null,f[Ri]=null)):$i(l)}}}function Ki(l){return l in jn?jn[l]:jn[l]="on"+l}function ra(l,f){if(l.da)l=!0;else{f=new Te(f,this);var v=l.listener,C=l.ha||l.src;l.fa&&at(l),l=v.call(C,f)}return l}function Wr(l){return l=l[Ri],l instanceof Tr?l:null}var br="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sn(l){return typeof l=="function"?l:(l[br]||(l[br]=function(f){return l.handleEvent(f)}),l[br])}function Xe(){et.call(this),this.i=new Tr(this),this.M=this,this.F=null}O(Xe,et),Xe.prototype[si]=!0,Xe.prototype.removeEventListener=function(l,f,v,C){ot(this,l,f,v,C)};function Ue(l,f){var v,C=l.F;if(C)for(v=[];C;C=C.F)v.push(C);if(l=l.M,C=f.type||f,typeof f=="string")f=new de(f,l);else if(f instanceof de)f.target=f.target||l;else{var V=f;f=new de(C,l),A(f,V)}if(V=!0,v)for(var B=v.length-1;0<=B;B--){var Y=f.g=v[B];V=ai(Y,C,!0,f)&&V}if(Y=f.g=l,V=ai(Y,C,!0,f)&&V,V=ai(Y,C,!1,f)&&V,v)for(B=0;B<v.length;B++)Y=f.g=v[B],V=ai(Y,C,!1,f)&&V}Xe.prototype.N=function(){if(Xe.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var v=l.g[f],C=0;C<v.length;C++)$i(v[C]);delete l.g[f],l.h--}}this.F=null},Xe.prototype.K=function(l,f,v,C){return this.i.add(String(l),f,!1,v,C)},Xe.prototype.L=function(l,f,v,C){return this.i.add(String(l),f,!0,v,C)};function ai(l,f,v,C){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var V=!0,B=0;B<f.length;++B){var Y=f[B];if(Y&&!Y.da&&Y.capture==v){var De=Y.listener,Zt=Y.ha||Y.src;Y.fa&&Er(l.i,Y),V=De.call(Zt,C)!==!1&&V}}return V&&!C.defaultPrevented}function co(l,f,v){if(typeof l=="function")v&&(l=g(l,v));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function ho(l){l.g=co(()=>{l.g=null,l.i&&(l.i=!1,ho(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class es extends et{constructor(f,v){super(),this.m=f,this.l=v,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:ho(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xi(l){et.call(this),this.h=l,this.g={}}O(Xi,et);var Bn=[];function Ci(l){$(l.g,function(f,v){this.g.hasOwnProperty(v)&&at(f)},l),l.g={}}Xi.prototype.N=function(){Xi.aa.N.call(this),Ci(this)},Xi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qt=a.JSON.stringify,hn=a.JSON.parse,ts=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Ni(){}Ni.prototype.h=null;function fo(l){return l.h||(l.h=l.i())}function Fn(){}var Hn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _t(){de.call(this,"d")}O(_t,de);function li(){de.call(this,"c")}O(li,de);var fn={},Yi=null;function Ye(){return Yi=Yi||new Xe}fn.La="serverreachability";function xi(l){de.call(this,fn.La,l)}O(xi,de);function wn(l){const f=Ye();Ue(f,new xi(f))}fn.STAT_EVENT="statevent";function mo(l,f){de.call(this,fn.STAT_EVENT,l),this.stat=f}O(mo,de);function vt(l){const f=Ye();Ue(f,new mo(f,l))}fn.Ma="timingevent";function Sr(l,f){de.call(this,fn.Ma,l),this.size=f}O(Sr,de);function Qi(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function Ji(){this.g=!0}Ji.prototype.xa=function(){this.g=!1};function rn(l,f,v,C,V,B){l.info(function(){if(l.g)if(B)for(var Y="",De=B.split("&"),Zt=0;Zt<De.length;Zt++){var ke=De[Zt].split("=");if(1<ke.length){var on=ke[0];ke=ke[1];var an=on.split("_");Y=2<=an.length&&an[1]=="type"?Y+(on+"="+ke+"&"):Y+(on+"=redacted&")}}else Y=null;else Y=B;return"XMLHTTP REQ ("+C+") [attempt "+V+"]: "+f+`
`+v+`
`+Y})}function dn(l,f,v,C,V,B,Y){l.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+V+"]: "+f+`
`+v+`
`+B+" "+Y})}function ki(l,f,v,C){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+ns(l,v)+(C?" "+C:"")})}function qn(l,f){l.info(function(){return"TIMEOUT: "+f})}Ji.prototype.info=function(){};function ns(l,f){if(!l.g)return f;if(!f)return null;try{var v=JSON.parse(f);if(v){for(l=0;l<v.length;l++)if(Array.isArray(v[l])){var C=v[l];if(!(2>C.length)){var V=C[1];if(Array.isArray(V)&&!(1>V.length)){var B=V[0];if(B!="noop"&&B!="stop"&&B!="close")for(var Y=1;Y<V.length;Y++)V[Y]=""}}}}return qt(v)}catch{return f}}var Wi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},er;function tr(){}O(tr,Ni),tr.prototype.g=function(){return new XMLHttpRequest},tr.prototype.i=function(){return{}},er=new tr;function Gn(l,f,v,C){this.j=l,this.i=f,this.l=v,this.R=C||1,this.U=new Xi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new is}function is(){this.i=null,this.g="",this.h=!1}var sa={},ee={};function P(l,f,v){l.L=1,l.v=aa(Di(f)),l.m=v,l.P=!0,K(l,null)}function K(l,f){l.F=Date.now(),tt(l),l.A=Di(l.v);var v=l.A,C=l.R;Array.isArray(C)||(C=[String(C)]),Zc(v.i,"t",C),l.C=0,v=l.j.J,l.h=new is,l.g=E(l.j,v?f:null,!l.m),0<l.O&&(l.M=new es(g(l.Y,l,l.g),l.O)),f=l.U,v=l.g,C=l.ca;var V="readystatechange";Array.isArray(V)||(V&&(Bn[0]=V.toString()),V=Bn);for(var B=0;B<V.length;B++){var Y=Zi(v,V[B],C||f.handleEvent,!1,f.h||f);if(!Y)break;f.g[Y.key]=Y}f=l.H?p(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),wn(),rn(l.i,l.u,l.A,l.l,l.R,l.m)}Gn.prototype.ca=function(l){l=l.target;const f=this.M;f&&In(l)==3?f.j():this.Y(l)},Gn.prototype.Y=function(l){try{if(l==this.g)e:{const an=In(this.g);var f=this.g.Ba();const ga=this.g.Z();if(!(3>an)&&(an!=3||this.g&&(this.h.h||this.g.oa()||Jc(this.g)))){this.J||an!=4||f==7||(f==8||0>=ga?wn(3):wn(2)),Tt(this);var v=this.g.Z();this.X=v;t:if(W(this)){var C=Jc(this.g);l="";var V=C.length,B=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gt(this),zt(this);var Y="";break t}this.h.i=new a.TextDecoder}for(f=0;f<V;f++)this.h.h=!0,l+=this.h.i.decode(C[f],{stream:!(B&&f==V-1)});C.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=v==200,dn(this.i,this.u,this.A,this.l,this.R,an,v),this.o){if(this.T&&!this.K){t:{if(this.g){var De,Zt=this.g;if((De=Zt.g?Zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(De)){var ke=De;break t}}ke=null}if(v=ke)ki(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Oi(this,v);else{this.o=!1,this.s=3,vt(12),Gt(this),zt(this);break e}}if(this.P){v=!0;let zi;for(;!this.J&&this.C<Y.length;)if(zi=Se(this,Y),zi==ee){an==4&&(this.s=4,vt(14),v=!1),ki(this.i,this.l,null,"[Incomplete Response]");break}else if(zi==sa){this.s=4,vt(15),ki(this.i,this.l,Y,"[Invalid Chunk]"),v=!1;break}else ki(this.i,this.l,zi,null),Oi(this,zi);if(W(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),an!=4||Y.length!=0||this.h.h||(this.s=1,vt(16),v=!1),this.o=this.o&&v,!v)ki(this.i,this.l,Y,"[Invalid Chunked Response]"),Gt(this),zt(this);else if(0<Y.length&&!this.W){this.W=!0;var on=this.j;on.g==this&&on.ba&&!on.M&&(on.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),pa(on),on.M=!0,vt(11))}}else ki(this.i,this.l,Y,null),Oi(this,Y);an==4&&Gt(this),this.o&&!this.J&&(an==4?Yl(this.j,this):(this.o=!1,tt(this)))}else Wc(this.g),v==400&&0<Y.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),Gt(this),zt(this)}}}catch{}finally{}};function W(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Se(l,f){var v=l.C,C=f.indexOf(`
`,v);return C==-1?ee:(v=Number(f.substring(v,C)),isNaN(v)?sa:(C+=1,C+v>f.length?ee:(f=f.slice(C,C+v),l.C=C+v,f)))}Gn.prototype.cancel=function(){this.J=!0,Gt(this)};function tt(l){l.S=Date.now()+l.I,nt(l,l.I)}function nt(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Qi(g(l.ba,l),f)}function Tt(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Gn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(qn(this.i,this.A),this.L!=2&&(wn(),vt(17)),Gt(this),this.s=2,zt(this)):nt(this,this.S-l)};function zt(l){l.j.G==0||l.J||Yl(l.j,l)}function Gt(l){Tt(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Ci(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Oi(l,f){try{var v=l.j;if(v.G!=0&&(v.g==l||Ul(v.h,l))){if(!l.K&&Ul(v.h,l)&&v.G==3){try{var C=v.Da.g.parse(f)}catch{C=null}if(Array.isArray(C)&&C.length==3){var V=C;if(V[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<l.F)$t(v),fs(v);else break e;ma(v),vt(18)}}else v.za=V[1],0<v.za-v.T&&37500>V[2]&&v.F&&v.v==0&&!v.C&&(v.C=Qi(g(v.Za,v),6e3));if(1>=Vl(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Cn(v,11)}else if((l.K||v.g==l)&&$t(v),!k(f))for(V=v.Da.g.parse(f),f=0;f<V.length;f++){let ke=V[f];if(v.T=ke[0],ke=ke[1],v.G==2)if(ke[0]=="c"){v.K=ke[1],v.ia=ke[2];const on=ke[3];on!=null&&(v.la=on,v.j.info("VER="+v.la));const an=ke[4];an!=null&&(v.Aa=an,v.j.info("SVER="+v.Aa));const ga=ke[5];ga!=null&&typeof ga=="number"&&0<ga&&(C=1.5*ga,v.L=C,v.j.info("backChannelRequestTimeoutMs_="+C)),C=v;const zi=l.g;if(zi){const eh=zi.g?zi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eh){var B=C.h;B.g||eh.indexOf("spdy")==-1&&eh.indexOf("quic")==-1&&eh.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(ui(B,B.h),B.h=null))}if(C.D){const Gd=zi.g?zi.g.getResponseHeader("X-HTTP-Session-Id"):null;Gd&&(C.ya=Gd,Ze(C.I,C.D,Gd))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-l.F,v.j.info("Handshake RTT: "+v.R+"ms")),C=v;var Y=l;if(C.qa=d(C,C.J?C.ia:null,C.W),Y.K){$n(C.h,Y);var De=Y,Zt=C.L;Zt&&(De.I=Zt),De.B&&(Tt(De),tt(De)),C.g=Y}else Kl(C);0<v.i.length&&Eo(v)}else ke[0]!="stop"&&ke[0]!="close"||Cn(v,7);else v.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?Cn(v,7):ha(v):ke[0]!="noop"&&v.l&&v.l.ta(ke),v.v=0)}}wn(4)}catch{}}var ct=class{constructor(l,f){this.g=l,this.map=f}};function rs(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ss(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Vl(l){return l.h?1:l.g?l.g.size:0}function Ul(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function ui(l,f){l.g?l.g.add(f):l.h=f}function $n(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}rs.prototype.cancel=function(){if(this.i=os(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function os(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const v of l.g.values())f=f.concat(v.D);return f}return M(l.i)}function po(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var f=[],v=l.length,C=0;C<v;C++)f.push(l[C]);return f}f=[],v=0;for(C in l)f[v++]=l[C];return f}function jl(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var f=[];l=l.length;for(var v=0;v<l;v++)f.push(v);return f}f=[],v=0;for(const C in l)f[v++]=C;return f}}}function qe(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var v=jl(l),C=po(l),V=C.length,B=0;B<V;B++)f.call(void 0,C[B],v&&v[B],l)}var go=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yo(l,f){if(l){l=l.split("&");for(var v=0;v<l.length;v++){var C=l[v].indexOf("="),V=null;if(0<=C){var B=l[v].substring(0,C);V=l[v].substring(C+1)}else B=l[v];f(B,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Zn(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Zn){this.h=l.h,_o(this,l.j),this.o=l.o,this.g=l.g,oa(this,l.s),this.l=l.l;var f=l.i,v=new vo;v.i=f.i,f.g&&(v.g=new Map(f.g),v.h=f.h),Bc(this,v),this.m=l.m}else l&&(f=String(l).match(go))?(this.h=!1,_o(this,f[1]||"",!0),this.o=Mi(f[2]||""),this.g=Mi(f[3]||"",!0),oa(this,f[4]),this.l=Mi(f[5]||"",!0),Bc(this,f[6]||"",!0),this.m=Mi(f[7]||"")):(this.h=!1,this.i=new vo(null,this.h))}Zn.prototype.toString=function(){var l=[],f=this.j;f&&l.push(Kn(f,Bl,!0),":");var v=this.g;return(v||f=="file")&&(l.push("//"),(f=this.o)&&l.push(Kn(f,Bl,!0),"@"),l.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&l.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&l.push("/"),l.push(Kn(v,v.charAt(0)=="/"?qc:Hc,!0))),(v=this.i.toString())&&l.push("?",v),(v=this.m)&&l.push("#",Kn(v,as)),l.join("")};function Di(l){return new Zn(l)}function _o(l,f,v){l.j=v?Mi(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function oa(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Bc(l,f,v){f instanceof vo?(l.i=f,la(l.i,l.h)):(v||(f=Kn(f,Gc)),l.i=new vo(f,l.h))}function Ze(l,f,v){l.i.set(f,v)}function aa(l){return Ze(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Mi(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Kn(l,f,v){return typeof l=="string"?(l=encodeURI(l).replace(f,Fc),v&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Fc(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Bl=/[#\/\?@]/g,Hc=/[#\?:]/g,qc=/[#\?]/g,Gc=/[#\?@]/g,as=/#/g;function vo(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function nr(l){l.g||(l.g=new Map,l.h=0,l.i&&yo(l.i,function(f,v){l.add(decodeURIComponent(f.replace(/\+/g," ")),v)}))}t=vo.prototype,t.add=function(l,f){nr(this),this.i=null,l=ir(this,l);var v=this.g.get(l);return v||this.g.set(l,v=[]),v.push(f),this.h+=1,this};function $c(l,f){nr(l),f=ir(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Pi(l,f){return nr(l),f=ir(l,f),l.g.has(f)}t.forEach=function(l,f){nr(this),this.g.forEach(function(v,C){v.forEach(function(V){l.call(f,V,C,this)},this)},this)},t.na=function(){nr(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),v=[];for(let C=0;C<f.length;C++){const V=l[C];for(let B=0;B<V.length;B++)v.push(f[C])}return v},t.V=function(l){nr(this);let f=[];if(typeof l=="string")Pi(this,l)&&(f=f.concat(this.g.get(ir(this,l))));else{l=Array.from(this.g.values());for(let v=0;v<l.length;v++)f=f.concat(l[v])}return f},t.set=function(l,f){return nr(this),this.i=null,l=ir(this,l),Pi(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Zc(l,f,v){$c(l,f),0<v.length&&(l.i=null,l.g.set(ir(l,f),M(v)),l.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var v=0;v<f.length;v++){var C=f[v];const B=encodeURIComponent(String(C)),Y=this.V(C);for(C=0;C<Y.length;C++){var V=B;Y[C]!==""&&(V+="="+encodeURIComponent(String(Y[C]))),l.push(V)}}return this.i=l.join("&")};function ir(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function la(l,f){f&&!l.j&&(nr(l),l.i=null,l.g.forEach(function(v,C){var V=C.toLowerCase();C!=V&&($c(this,C),Zc(this,V,v))},l)),l.j=f}function Kc(l,f){const v=new Ji;if(a.Image){const C=new Image;C.onload=w(Rn,v,"TestLoadImage: loaded",!0,f,C),C.onerror=w(Rn,v,"TestLoadImage: error",!1,f,C),C.onabort=w(Rn,v,"TestLoadImage: abort",!1,f,C),C.ontimeout=w(Rn,v,"TestLoadImage: timeout",!1,f,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=l}else f(!1)}function To(l,f){const v=new Ji,C=new AbortController,V=setTimeout(()=>{C.abort(),Rn(v,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:C.signal}).then(B=>{clearTimeout(V),B.ok?Rn(v,"TestPingServer: ok",!0,f):Rn(v,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(V),Rn(v,"TestPingServer: error",!1,f)})}function Rn(l,f,v,C,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),C(v)}catch{}}function Xc(){this.g=new ts}function Fl(l,f,v){const C=v||"";try{qe(l,function(V,B){let Y=V;h(V)&&(Y=qt(V)),f.push(C+B+"="+encodeURIComponent(Y))})}catch(V){throw f.push(C+"type="+encodeURIComponent("_badmap")),V}}function Qe(l){this.l=l.Ub||null,this.j=l.eb||!1}O(Qe,Ni),Qe.prototype.g=function(){return new ua(this.l,this.j)},Qe.prototype.i=function(l){return function(){return l}}({});function ua(l,f){Xe.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(ua,Xe),t=ua.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,us(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ls(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,us(this)),this.g&&(this.readyState=3,us(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yc(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yc(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?ls(this):us(this),this.readyState==3&&Yc(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,ls(this))},t.Qa=function(l){this.g&&(this.response=l,ls(this))},t.ga=function(){this.g&&ls(this)};function ls(l){l.readyState=4,l.l=null,l.j=null,l.v=null,us(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var v=f.next();!v.done;)v=v.value,l.push(v[0]+": "+v[1]),v=f.next();return l.join(`\r
`)};function us(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ua.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Hl(l){let f="";return $(l,function(v,C){f+=C,f+=":",f+=v,f+=`\r
`}),f}function cs(l,f,v){e:{for(C in v){var C=!1;break e}C=!0}C||(v=Hl(v),typeof l=="string"?v!=null&&encodeURIComponent(String(v)):Ze(l,f,v))}function Oe(l){Xe.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(Oe,Xe);var Qc=/^https?$/i,qd=["POST","PUT"];t=Oe.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,v,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():er.g(),this.v=this.o?fo(this.o):fo(er),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(B){hs(this,B);return}if(l=v||"",v=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var V in C)v.set(V,C[V]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const B of C.keys())v.set(B,C.get(B));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(v.keys()).find(B=>B.toLowerCase()=="content-type"),V=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qd,f,void 0))||C||V||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,Y]of v)this.g.setRequestHeader(B,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gl(this),this.u=!0,this.g.send(l),this.u=!1}catch(B){hs(this,B)}};function hs(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,ql(l),wr(l)}function ql(l){l.A||(l.A=!0,Ue(l,"complete"),Ue(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Ue(this,"complete"),Ue(this,"abort"),wr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wr(this,!0)),Oe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ca(this):this.bb())},t.bb=function(){ca(this)};function ca(l){if(l.h&&typeof o<"u"&&(!l.v[1]||In(l)!=4||l.Z()!=2)){if(l.u&&In(l)==4)co(l.Ea,0,l);else if(Ue(l,"readystatechange"),In(l)==4){l.h=!1;try{const Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var v;if(!(v=f)){var C;if(C=Y===0){var V=String(l.D).match(go)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),C=!Qc.test(V?V.toLowerCase():"")}v=C}if(v)Ue(l,"complete"),Ue(l,"success");else{l.m=6;try{var B=2<In(l)?l.g.statusText:""}catch{B=""}l.l=B+" ["+l.Z()+"]",ql(l)}}finally{wr(l)}}}}function wr(l,f){if(l.g){Gl(l);const v=l.g,C=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||Ue(l,"ready");try{v.onreadystatechange=C}catch{}}}function Gl(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function In(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),hn(f)}};function Jc(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Wc(l){const f={};l=(l.g&&2<=In(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<l.length;C++){if(k(l[C]))continue;var v=b(l[C]);const V=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const B=f[V]||[];f[V]=B,B.push(v)}S(f,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Li(l,f,v){return v&&v.internalChannelParams&&v.internalChannelParams[l]||f}function $l(l){this.Aa=0,this.i=[],this.j=new Ji,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Li("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Li("baseRetryDelayMs",5e3,l),this.cb=Li("retryDelaySeedMs",1e4,l),this.Wa=Li("forwardChannelMaxRetries",2,l),this.wa=Li("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new rs(l&&l.concurrentRequestLimit),this.Da=new Xc,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=$l.prototype,t.la=8,t.G=1,t.connect=function(l,f,v,C){vt(0),this.W=l,this.H=f||{},v&&C!==void 0&&(this.H.OSID=v,this.H.OAID=C),this.F=this.X,this.I=d(this,null,this.W),Eo(this)};function ha(l){if(fa(l),l.G==3){var f=l.U++,v=Di(l.I);if(Ze(v,"SID",l.K),Ze(v,"RID",f),Ze(v,"TYPE","terminate"),ds(l,v),f=new Gn(l,l.j,f),f.L=2,f.v=aa(Di(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=f.v,v=!0),v||(f.g=E(f.j,null),f.g.ea(f.v)),f.F=Date.now(),tt(f)}u(l)}function fs(l){l.g&&(pa(l),l.g.cancel(),l.g=null)}function fa(l){fs(l),l.u&&(a.clearTimeout(l.u),l.u=null),$t(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Eo(l){if(!ss(l.h)&&!l.s){l.s=!0;var f=l.Ga;ne||He(),ie||(ne(),ie=!0),be.add(f,l),l.B=0}}function da(l,f){return Vl(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Qi(g(l.Ga,l,f),Ql(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const V=new Gn(this,this.j,l);let B=this.o;if(this.S&&(B?(B=p(B),A(B,this.S)):B=this.S),this.m!==null||this.O||(V.H=B,B=null),this.P)e:{for(var f=0,v=0;v<this.i.length;v++){t:{var C=this.i[v];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(f+=C,4096<f){f=v;break e}if(f===4096||v===this.i.length-1){f=v+1;break e}}f=1e3}else f=1e3;f=rr(this,V,f),v=Di(this.I),Ze(v,"RID",l),Ze(v,"CVER",22),this.D&&Ze(v,"X-HTTP-Session-Id",this.D),ds(this,v),B&&(this.O?f="headers="+encodeURIComponent(String(Hl(B)))+"&"+f:this.m&&cs(v,this.m,B)),ui(this.h,V),this.Ua&&Ze(v,"TYPE","init"),this.P?(Ze(v,"$req",f),Ze(v,"SID","null"),V.T=!0,P(V,v,null)):P(V,v,f),this.G=2}}else this.G==3&&(l?Zl(this,l):this.i.length==0||ss(this.h)||Zl(this))};function Zl(l,f){var v;f?v=f.l:v=l.U++;const C=Di(l.I);Ze(C,"SID",l.K),Ze(C,"RID",v),Ze(C,"AID",l.T),ds(l,C),l.m&&l.o&&cs(C,l.m,l.o),v=new Gn(l,l.j,v,l.B+1),l.m===null&&(v.H=l.o),f&&(l.i=f.D.concat(l.i)),f=rr(l,v,1e3),v.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),ui(l.h,v),P(v,C,f)}function ds(l,f){l.H&&$(l.H,function(v,C){Ze(f,C,v)}),l.l&&qe({},function(v,C){Ze(f,C,v)})}function rr(l,f,v){v=Math.min(l.i.length,v);var C=l.l?g(l.l.Na,l.l,l):null;e:{var V=l.i;let B=-1;for(;;){const Y=["count="+v];B==-1?0<v?(B=V[0].g,Y.push("ofs="+B)):B=0:Y.push("ofs="+B);let De=!0;for(let Zt=0;Zt<v;Zt++){let ke=V[Zt].g;const on=V[Zt].map;if(ke-=B,0>ke)B=Math.max(0,V[Zt].g-100),De=!1;else try{Fl(on,Y,"req"+ke+"_")}catch{C&&C(on)}}if(De){C=Y.join("&");break e}}}return l=l.i.splice(0,v),f.D=l,C}function Kl(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;ne||He(),ie||(ne(),ie=!0),be.add(f,l),l.v=0}}function ma(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Qi(g(l.Fa,l),Ql(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Xl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Qi(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),fs(this),Xl(this))};function pa(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Xl(l){l.g=new Gn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Di(l.qa);Ze(f,"RID","rpc"),Ze(f,"SID",l.K),Ze(f,"AID",l.T),Ze(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ze(f,"TO",l.ja),Ze(f,"TYPE","xmlhttp"),ds(l,f),l.m&&l.o&&cs(f,l.m,l.o),l.L&&(l.g.I=l.L);var v=l.g;l=l.ia,v.L=1,v.v=aa(Di(f)),v.m=null,v.P=!0,K(v,l)}t.Za=function(){this.C!=null&&(this.C=null,fs(this),ma(this),vt(19))};function $t(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Yl(l,f){var v=null;if(l.g==f){$t(l),pa(l),l.g=null;var C=2}else if(Ul(l.h,f))v=f.D,$n(l.h,f),C=1;else return;if(l.G!=0){if(f.o)if(C==1){v=f.m?f.m.length:0,f=Date.now()-f.F;var V=l.B;C=Ye(),Ue(C,new Sr(C,v)),Eo(l)}else Kl(l);else if(V=f.s,V==3||V==0&&0<f.X||!(C==1&&da(l,f)||C==2&&ma(l)))switch(v&&0<v.length&&(f=l.h,f.i=f.i.concat(v)),V){case 1:Cn(l,5);break;case 4:Cn(l,10);break;case 3:Cn(l,6);break;default:Cn(l,2)}}}function Ql(l,f){let v=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(v*=2),v*f}function Cn(l,f){if(l.j.info("Error code "+f),f==2){var v=g(l.fb,l),C=l.Xa;const V=!C;C=new Zn(C||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||_o(C,"https"),aa(C),V?Kc(C.toString(),v):To(C.toString(),v)}else vt(2);l.G=0,l.l&&l.l.sa(f),u(l),fa(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function u(l){if(l.G=0,l.ka=[],l.l){const f=os(l.h);(f.length!=0||l.i.length!=0)&&(L(l.ka,f),L(l.ka,l.i),l.h.i.length=0,M(l.i),l.i.length=0),l.l.ra()}}function d(l,f,v){var C=v instanceof Zn?Di(v):new Zn(v);if(C.g!="")f&&(C.g=f+"."+C.g),oa(C,C.s);else{var V=a.location;C=V.protocol,f=f?f+"."+V.hostname:V.hostname,V=+V.port;var B=new Zn(null);C&&_o(B,C),f&&(B.g=f),V&&oa(B,V),v&&(B.l=v),C=B}return v=l.D,f=l.ya,v&&f&&Ze(C,v,f),Ze(C,"VER",l.la),ds(l,C),C}function E(l,f,v){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new Oe(new Qe({eb:v})):new Oe(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function N(){}t=N.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function U(){}U.prototype.g=function(l,f){return new j(l,f)};function j(l,f){Xe.call(this),this.g=new $l(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!k(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!k(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Je(this)}O(j,Xe),j.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},j.prototype.close=function(){ha(this.g)},j.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var v={};v.__data__=l,l=v}else this.u&&(v={},v.__data__=qt(l),l=v);f.i.push(new ct(f.Ya++,l)),f.G==3&&Eo(f)},j.prototype.N=function(){this.g.l=null,delete this.j,ha(this.g),delete this.g,j.aa.N.call(this)};function Q(l){_t.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const v in f){l=v;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}O(Q,_t);function ce(){li.call(this),this.status=1}O(ce,li);function Je(l){this.g=l}O(Je,N),Je.prototype.ua=function(){Ue(this.g,"a")},Je.prototype.ta=function(l){Ue(this.g,new Q(l))},Je.prototype.sa=function(l){Ue(this.g,new ce)},Je.prototype.ra=function(){Ue(this.g,"b")},U.prototype.createWebChannel=U.prototype.g,j.prototype.send=j.prototype.o,j.prototype.open=j.prototype.m,j.prototype.close=j.prototype.close,Aw=function(){return new U},Ew=function(){return Ye()},Tw=fn,wg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wi.NO_ERROR=0,Wi.TIMEOUT=8,Wi.HTTP_ERROR=6,nf=Wi,sn.COMPLETE="complete",vw=sn,Fn.EventType=Hn,Hn.OPEN="a",Hn.CLOSE="b",Hn.ERROR="c",Hn.MESSAGE="d",Xe.prototype.listen=Xe.prototype.K,Eu=Fn,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,_w=Oe}).apply(typeof Ih<"u"?Ih:typeof self<"u"?self:typeof window<"u"?window:{});const kT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dn.UNAUTHENTICATED=new Dn(null),Dn.GOOGLE_CREDENTIALS=new Dn("google-credentials-uid"),Dn.FIRST_PARTY=new Dn("first-party-uid"),Dn.MOCK_USER=new Dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ml="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=new T2("@firebase/firestore");function fu(){return Ko.logLevel}function te(t,...e){if(Ko.logLevel<=vs.DEBUG){const n=e.map(u_);Ko.debug(`Firestore (${Ml}): ${t}`,...n)}}function Qr(t,...e){if(Ko.logLevel<=vs.ERROR){const n=e.map(u_);Ko.error(`Firestore (${Ml}): ${t}`,...n)}}function fc(t,...e){if(Ko.logLevel<=vs.WARN){const n=e.map(u_);Ko.warn(`Firestore (${Ml}): ${t}`,...n)}}function u_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t="Unexpected state"){const e=`FIRESTORE (${Ml}) INTERNAL ASSERTION FAILED: `+t;throw Qr(e),new Error(e)}function pt(t,e){t||me()}function Ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends b2{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class r3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dn.UNAUTHENTICATED))}shutdown(){}}class s3{constructor(e){this.t=e,this.currentUser=Dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pt(this.o===void 0);let i=this.i;const r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let s=new Wa;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Wa,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Wa)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(pt(typeof i.accessToken=="string"),new i3(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string"),new Dn(e)}}class o3{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Dn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class a3{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new o3(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class l3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class u3{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){pt(this.o===void 0);const i=s=>{s.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pt(typeof n.token=="string"),this.R=n.token,new l3(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=c3(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function Me(t,e){return t<e?-1:t>e?1:0}function _l(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ae(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ae(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ae(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ln.fromMillis(Date.now())}static fromDate(e){return Ln.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Ln(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.timestamp=e}static fromTimestamp(e){return new he(e)}static min(){return new he(new Ln(0,0))}static max(){return new he(new Ln(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n,i){n===void 0?n=0:n>e.length&&me(),i===void 0?i=e.length-n:i>e.length-n&&me(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return dc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof dc?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class mt extends dc{construct(e,n,i){return new mt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ae(J.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new mt(n)}static emptyPath(){return new mt([])}}const h3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vn extends dc{construct(e,n,i){return new vn(e,n,i)}static isValidIdentifier(e){return h3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new vn(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new ae(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new ae(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ae(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new ae(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vn(n)}static emptyPath(){return new vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(mt.fromString(e))}static fromName(e){return new oe(mt.fromString(e).popFirst(5))}static empty(){return new oe(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return mt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new mt(e.slice()))}}function f3(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=he.fromTimestamp(i===1e9?new Ln(n+1,0):new Ln(n,i));return new to(r,oe.empty(),e)}function d3(t){return new to(t.readTime,t.key,-1)}class to{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new to(he.min(),oe.empty(),-1)}static max(){return new to(he.max(),oe.empty(),-1)}}function m3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:Me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class g3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c_(t){if(t.code!==J.FAILED_PRECONDITION||t.message!==p3)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,i)=>{n(e)})}static reject(e){return new Z((n,i)=>{i(e)})}static waitFor(e){return new Z((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},c=>i(c))}),o=!0,s===r&&n()})}static or(e){let n=Z.resolve(!1);for(const i of e)n=n.next(r=>r?Z.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new Z((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const h=c;n(e[h]).next(m=>{o[h]=m,++a,a===s&&i(o)},m=>r(m))}})}static doWhile(e,n){return new Z((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function y3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}h_.oe=-1;function Md(t){return t==null}function Rg(t){return t===0&&1/t==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Pd(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n){this.comparator=e,this.root=n||Xt.EMPTY}insert(e,n){return new St(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ch(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ch(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ch(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ch(this.root,e,this.comparator,!0)}}class Ch{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??Xt.RED,this.left=r??Xt.EMPTY,this.right=s??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new Xt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Xt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw me();const e=this.left.check();if(e!==this.right.check())throw me();return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw me()}get value(){throw me()}get color(){throw me()}get left(){throw me()}get right(){throw me()}copy(e,n,i,r,s){return this}insert(e,n,i){return new Xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new DT(this.data.getIterator())}getIteratorFrom(e){return new DT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof tn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new tn(this.comparator);return n.data=e,n}}class DT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this.fields=e,e.sort(vn.comparator)}static empty(){return new Ms([])}unionWith(e){let n=new tn(vn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Ms(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _l(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Sw("Invalid base64 string: "+s):s}}(e);return new nn(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new nn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const v3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function no(t){if(pt(!!t),typeof t=="string"){let e=0;const n=v3.exec(t);if(pt(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Et(t.seconds),nanos:Et(t.nanos)}}function Et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xo(t){return typeof t=="string"?nn.fromBase64String(t):nn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function d_(t){const e=t.mapValue.fields.__previous_value__;return f_(e)?d_(e):e}function mc(t){const e=no(t.mapValue.fields.__local_write_time__.timestampValue);return new Ln(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e,n,i,r,s,o,a,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=h}}class pc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new pc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof pc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh={mapValue:{}};function Yo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?f_(t)?4:A3(t)?9007199254740991:E3(t)?10:11:me()}function pr(t,e){if(t===e)return!0;const n=Yo(t);if(n!==Yo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mc(t).isEqual(mc(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=no(r.timestampValue),a=no(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Xo(r.bytesValue).isEqual(Xo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Et(r.geoPointValue.latitude)===Et(s.geoPointValue.latitude)&&Et(r.geoPointValue.longitude)===Et(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Et(r.integerValue)===Et(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Et(r.doubleValue),a=Et(s.doubleValue);return o===a?Rg(o)===Rg(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return _l(t.arrayValue.values||[],e.arrayValue.values||[],pr);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(OT(o)!==OT(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!pr(o[c],a[c])))return!1;return!0}(t,e);default:return me()}}function gc(t,e){return(t.values||[]).find(n=>pr(n,e))!==void 0}function vl(t,e){if(t===e)return 0;const n=Yo(t),i=Yo(e);if(n!==i)return Me(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Et(s.integerValue||s.doubleValue),c=Et(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return MT(t.timestampValue,e.timestampValue);case 4:return MT(mc(t),mc(e));case 5:return Me(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Xo(s),c=Xo(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let h=0;h<a.length&&h<c.length;h++){const m=Me(a[h],c[h]);if(m!==0)return m}return Me(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Me(Et(s.latitude),Et(o.latitude));return a!==0?a:Me(Et(s.longitude),Et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return PT(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,h,m;const T=s.fields||{},g=o.fields||{},w=(a=T.value)===null||a===void 0?void 0:a.arrayValue,O=(c=g.value)===null||c===void 0?void 0:c.arrayValue,M=Me(((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0,((m=O==null?void 0:O.values)===null||m===void 0?void 0:m.length)||0);return M!==0?M:PT(w,O)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Nh.mapValue&&o===Nh.mapValue)return 0;if(s===Nh.mapValue)return 1;if(o===Nh.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),h=o.fields||{},m=Object.keys(h);c.sort(),m.sort();for(let T=0;T<c.length&&T<m.length;++T){const g=Me(c[T],m[T]);if(g!==0)return g;const w=vl(a[c[T]],h[m[T]]);if(w!==0)return w}return Me(c.length,m.length)}(t.mapValue,e.mapValue);default:throw me()}}function MT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Me(t,e);const n=no(t),i=no(e),r=Me(n.seconds,i.seconds);return r!==0?r:Me(n.nanos,i.nanos)}function PT(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=vl(n[r],i[r]);if(s)return s}return Me(n.length,i.length)}function Tl(t){return Ig(t)}function Ig(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=no(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Ig(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${Ig(n.fields[o])}`;return r+"}"}(t.mapValue):me()}function Cg(t){return!!t&&"integerValue"in t}function m_(t){return!!t&&"arrayValue"in t}function LT(t){return!!t&&"nullValue"in t}function zT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function tp(t){return!!t&&"mapValue"in t}function E3(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Hu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Pd(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Hu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function A3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.value=e}static empty(){return new or({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!tp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hu(n)}setAll(e){let n=vn.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=Hu(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());tp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];tp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Pd(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new or(Hu(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new cn(e,0,he.min(),he.min(),he.min(),or.empty(),0)}static newFoundDocument(e,n,i,r){return new cn(e,1,n,he.min(),i,r,0)}static newNoDocument(e,n){return new cn(e,2,n,he.min(),he.min(),or.empty(),0)}static newUnknownDocument(e,n){return new cn(e,3,n,he.min(),he.min(),or.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=or.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=or.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,n){this.position=e,this.inclusive=n}}function VT(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=oe.comparator(oe.fromName(o.referenceValue),n.key):i=vl(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function UT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n="asc"){this.field=e,this.dir=n}}function b3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{}class Mt extends ww{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new w3(e,n,i):n==="array-contains"?new C3(e,i):n==="in"?new N3(e,i):n==="not-in"?new x3(e,i):n==="array-contains-any"?new k3(e,i):new Mt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new R3(e,i):new I3(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(vl(n,this.value)):n!==null&&Yo(this.value)===Yo(n)&&this.matchesComparison(vl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gr extends ww{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new gr(e,n)}matches(e){return Rw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Rw(t){return t.op==="and"}function Iw(t){return S3(t)&&Rw(t)}function S3(t){for(const e of t.filters)if(e instanceof gr)return!1;return!0}function Ng(t){if(t instanceof Mt)return t.field.canonicalString()+t.op.toString()+Tl(t.value);if(Iw(t))return t.filters.map(e=>Ng(e)).join(",");{const e=t.filters.map(n=>Ng(n)).join(",");return`${t.op}(${e})`}}function Cw(t,e){return t instanceof Mt?function(i,r){return r instanceof Mt&&i.op===r.op&&i.field.isEqual(r.field)&&pr(i.value,r.value)}(t,e):t instanceof gr?function(i,r){return r instanceof gr&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&Cw(o,r.filters[a]),!0):!1}(t,e):void me()}function Nw(t){return t instanceof Mt?function(n){return`${n.field.canonicalString()} ${n.op} ${Tl(n.value)}`}(t):t instanceof gr?function(n){return n.op.toString()+" {"+n.getFilters().map(Nw).join(" ,")+"}"}(t):"Filter"}class w3 extends Mt{constructor(e,n,i){super(e,n,i),this.key=oe.fromName(i.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class R3 extends Mt{constructor(e,n){super(e,"in",n),this.keys=xw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class I3 extends Mt{constructor(e,n){super(e,"not-in",n),this.keys=xw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function xw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>oe.fromName(i.referenceValue))}class C3 extends Mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return m_(n)&&gc(n.arrayValue,this.value)}}class N3 extends Mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&gc(this.value.arrayValue,n)}}class x3 extends Mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!gc(this.value.arrayValue,n)}}class k3 extends Mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!m_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>gc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function jT(t,e=null,n=[],i=[],r=null,s=null,o=null){return new O3(t,e,n,i,r,s,o)}function p_(t){const e=Ne(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Ng(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Md(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Tl(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Tl(i)).join(",")),e.ue=n}return e.ue}function g_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!b3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Cw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!UT(t.startAt,e.startAt)&&UT(t.endAt,e.endAt)}function xg(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function D3(t,e,n,i,r,s,o,a){return new Ld(t,e,n,i,r,s,o,a)}function y_(t){return new Ld(t)}function BT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function M3(t){return t.collectionGroup!==null}function qu(t){const e=Ne(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new tn(vn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(a=a.add(h.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new td(s,i))}),n.has(vn.keyField().canonicalString())||e.ce.push(new td(vn.keyField(),i))}return e.ce}function mr(t){const e=Ne(t);return e.le||(e.le=P3(e,qu(t))),e.le}function P3(t,e){if(t.limitType==="F")return jT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new td(r.field,s)});const n=t.endAt?new ed(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ed(t.startAt.position,t.startAt.inclusive):null;return jT(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function kg(t,e,n){return new Ld(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zd(t,e){return g_(mr(t),mr(e))&&t.limitType===e.limitType}function kw(t){return`${p_(mr(t))}|lt:${t.limitType}`}function Sa(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>Nw(r)).join(", ")}]`),Md(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Tl(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Tl(r)).join(",")),`Target(${i})`}(mr(t))}; limitType=${t.limitType})`}function Vd(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):oe.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of qu(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,c){const h=VT(o,a,c);return o.inclusive?h<=0:h<0}(i.startAt,qu(i),r)||i.endAt&&!function(o,a,c){const h=VT(o,a,c);return o.inclusive?h>=0:h>0}(i.endAt,qu(i),r))}(t,e)}function L3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ow(t){return(e,n)=>{let i=!1;for(const r of qu(t)){const s=z3(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function z3(t,e,n){const i=t.field.isKeyField()?oe.comparator(e.key,n.key):function(s,o,a){const c=o.data.field(s),h=a.data.field(s);return c!==null&&h!==null?vl(c,h):me()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return me()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Pd(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return _3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3=new St(oe.comparator);function io(){return V3}const Dw=new St(oe.comparator);function Au(...t){let e=Dw;for(const n of t)e=e.insert(n.key,n);return e}function U3(t){let e=Dw;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ko(){return Gu()}function Mw(){return Gu()}function Gu(){return new Pl(t=>t.toString(),(t,e)=>t.isEqual(e))}const j3=new tn(oe.comparator);function xe(...t){let e=j3;for(const n of t)e=e.add(n);return e}const B3=new tn(Me);function F3(){return B3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rg(e)?"-0":e}}function q3(t){return{integerValue:""+t}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(){this._=void 0}}function G3(t,e,n){return t instanceof Og?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&f_(s)&&(s=d_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof nd?Pw(t,e):t instanceof id?Lw(t,e):function(r,s){const o=Z3(r,s),a=FT(o)+FT(r.Pe);return Cg(o)&&Cg(r.Pe)?q3(a):H3(r.serializer,a)}(t,e)}function $3(t,e,n){return t instanceof nd?Pw(t,e):t instanceof id?Lw(t,e):n}function Z3(t,e){return t instanceof Dg?function(i){return Cg(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Og extends Ud{}class nd extends Ud{constructor(e){super(),this.elements=e}}function Pw(t,e){const n=zw(e);for(const i of t.elements)n.some(r=>pr(r,i))||n.push(i);return{arrayValue:{values:n}}}class id extends Ud{constructor(e){super(),this.elements=e}}function Lw(t,e){let n=zw(e);for(const i of t.elements)n=n.filter(r=>!pr(r,i));return{arrayValue:{values:n}}}class Dg extends Ud{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function FT(t){return Et(t.integerValue||t.doubleValue)}function zw(t){return m_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function K3(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof nd&&r instanceof nd||i instanceof id&&r instanceof id?_l(i.elements,r.elements,pr):i instanceof Dg&&r instanceof Dg?pr(i.Pe,r.Pe):i instanceof Og&&r instanceof Og}(t.transform,e.transform)}class Vo{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vo}static exists(e){return new Vo(void 0,e)}static updateTime(e){return new Vo(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class __{}function Vw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Y3(t.key,Vo.none()):new v_(t.key,t.data,Vo.none());{const n=t.data,i=or.empty();let r=new tn(vn.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new jd(t.key,i,new Ms(r.toArray()),Vo.none())}}function X3(t,e,n){t instanceof v_?function(r,s,o){const a=r.value.clone(),c=qT(r.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof jd?function(r,s,o){if(!rf(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=qT(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(Uw(r)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function $u(t,e,n,i){return t instanceof v_?function(s,o,a,c){if(!rf(s.precondition,o))return a;const h=s.value.clone(),m=GT(s.fieldTransforms,c,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,i):t instanceof jd?function(s,o,a,c){if(!rf(s.precondition,o))return a;const h=GT(s.fieldTransforms,c,o),m=o.data;return m.setAll(Uw(s)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(T=>T.field))}(t,e,n,i):function(s,o,a){return rf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function HT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&_l(i,r,(s,o)=>K3(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class v_ extends __{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class jd extends __{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Uw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function qT(t,e,n){const i=new Map;pt(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,$3(o,a,n[r]))}return i}function GT(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,G3(s,o,e))}return i}class Y3 extends __{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&X3(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=$u(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=$u(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Mw();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const c=Vw(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(he.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),xe())}isEqual(e){return this.batchId===e.batchId&&_l(this.mutations,e.mutations,(n,i)=>HT(n,i))&&_l(this.baseMutations,e.baseMutations,(n,i)=>HT(n,i))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,Re;function jw(t){if(t===void 0)return Qr("GRPC error has no .code"),J.UNKNOWN;switch(t){case wt.OK:return J.OK;case wt.CANCELLED:return J.CANCELLED;case wt.UNKNOWN:return J.UNKNOWN;case wt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case wt.INTERNAL:return J.INTERNAL;case wt.UNAVAILABLE:return J.UNAVAILABLE;case wt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case wt.NOT_FOUND:return J.NOT_FOUND;case wt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case wt.ABORTED:return J.ABORTED;case wt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case wt.DATA_LOSS:return J.DATA_LOSS;default:return me()}}(Re=wt||(wt={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t5=new zo([4294967295,4294967295],0);function $T(t){const e=e5().encode(t),n=new yw;return n.update(e),new Uint8Array(n.digest())}function ZT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new zo([n,i],0),new zo([r,s],0)]}class T_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new bu(`Invalid padding: ${n}`);if(i<0)throw new bu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new bu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new bu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=zo.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(zo.fromNumber(i)));return r.compare(t5)===1&&(r=new zo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=$T(e),[i,r]=ZT(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new T_(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=$T(e),[i,r]=ZT(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class bu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Vc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Bd(he.min(),r,new St(Me),io(),xe())}}class Vc{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Vc(i,n,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class Bw{constructor(e,n){this.targetId=e,this.me=n}}class Fw{constructor(e,n,i=nn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class KT{constructor(){this.fe=0,this.ge=YT(),this.pe=nn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=xe(),n=xe(),i=xe();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:me()}}),new Vc(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=YT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class n5{constructor(e){this.Le=e,this.Be=new Map,this.ke=io(),this.qe=XT(),this.Qe=new St(Me)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:me()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const s=r.target;if(xg(s))if(i===0){const o=new oe(s.path);this.Ue(n,o,cn.newNoDocument(o,he.min()))}else pt(i===1);else{const o=this.Ye(n);if(o!==i){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=Xo(i).toUint8Array()}catch(c){if(c instanceof Sw)return fc("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new T_(o,r,s)}catch(c){return fc(c instanceof bu?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&xg(a.target)){const c=new oe(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,cn.newNoDocument(c,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let i=xe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new Bd(e,n,this.Qe,this.ke,i);return this.ke=io(),this.qe=XT(),this.Qe=new St(Me),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new KT,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new tn(Me),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new KT),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function XT(){return new St(oe.comparator)}function YT(){return new St(oe.comparator)}const i5={asc:"ASCENDING",desc:"DESCENDING"},r5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},s5={and:"AND",or:"OR"};class o5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Mg(t,e){return t.useProto3Json||Md(e)?e:{value:e}}function a5(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function l5(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function el(t){return pt(!!t),he.fromTimestamp(function(n){const i=no(n);return new Ln(i.seconds,i.nanos)}(t))}function u5(t,e){return Pg(t,e).canonicalString()}function Pg(t,e){const n=function(r){return new mt(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Hw(t){const e=mt.fromString(t);return pt(Kw(e)),e}function np(t,e){const n=Hw(e);if(n.get(1)!==t.databaseId.projectId)throw new ae(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ae(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(Gw(n))}function qw(t,e){return u5(t.databaseId,e)}function c5(t){const e=Hw(t);return e.length===4?mt.emptyPath():Gw(e)}function QT(t){return new mt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Gw(t){return pt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function h5(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:me()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(h,m){return h.useProto3Json?(pt(m===void 0||typeof m=="string"),nn.fromBase64String(m||"")):(pt(m===void 0||m instanceof Buffer||m instanceof Uint8Array),nn.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(h){const m=h.code===void 0?J.UNKNOWN:jw(h.code);return new ae(m,h.message||"")}(o);n=new Fw(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=np(t,i.document.name),s=el(i.document.updateTime),o=i.document.createTime?el(i.document.createTime):he.min(),a=new or({mapValue:{fields:i.document.fields}}),c=cn.newFoundDocument(r,s,o,a),h=i.targetIds||[],m=i.removedTargetIds||[];n=new sf(h,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=np(t,i.document),s=i.readTime?el(i.readTime):he.min(),o=cn.newNoDocument(r,s),a=i.removedTargetIds||[];n=new sf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=np(t,i.document),s=i.removedTargetIds||[];n=new sf([],s,r,null)}else{if(!("filter"in e))return me();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new W3(r,s),a=i.targetId;n=new Bw(a,o)}}return n}function f5(t,e){return{documents:[qw(t,e.path)]}}function d5(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=qw(t,r);const s=function(h){if(h.length!==0)return Zw(gr.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(m=>function(g){return{field:wa(g.field),direction:g5(g.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Mg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:r}}function m5(t){let e=c5(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){pt(i===1);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let s=[];n.where&&(s=function(T){const g=$w(T);return g instanceof gr&&Iw(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(T){return T.map(g=>function(O){return new td(Ra(O.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(T){let g;return g=typeof T=="object"?T.value:T,Md(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(T){const g=!!T.before,w=T.values||[];return new ed(w,g)}(n.startAt));let h=null;return n.endAt&&(h=function(T){const g=!T.before,w=T.values||[];return new ed(w,g)}(n.endAt)),D3(e,r,o,s,a,"F",c,h)}function p5(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $w(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Ra(n.unaryFilter.field);return Mt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ra(n.unaryFilter.field);return Mt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ra(n.unaryFilter.field);return Mt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ra(n.unaryFilter.field);return Mt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return me()}}(t):t.fieldFilter!==void 0?function(n){return Mt.create(Ra(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return me()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return gr.create(n.compositeFilter.filters.map(i=>$w(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return me()}}(n.compositeFilter.op))}(t):me()}function g5(t){return i5[t]}function y5(t){return r5[t]}function _5(t){return s5[t]}function wa(t){return{fieldPath:t.canonicalString()}}function Ra(t){return vn.fromServerFormat(t.fieldPath)}function Zw(t){return t instanceof Mt?function(n){if(n.op==="=="){if(zT(n.value))return{unaryFilter:{field:wa(n.field),op:"IS_NAN"}};if(LT(n.value))return{unaryFilter:{field:wa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(zT(n.value))return{unaryFilter:{field:wa(n.field),op:"IS_NOT_NAN"}};if(LT(n.value))return{unaryFilter:{field:wa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wa(n.field),op:y5(n.op),value:n.value}}}(t):t instanceof gr?function(n){const i=n.getFilters().map(r=>Zw(r));return i.length===1?i[0]:{compositeFilter:{op:_5(n.op),filters:i}}}(t):me()}function Kw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,n,i,r,s=he.min(),o=he.min(),a=nn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e){this.ct=e}}function T5(t){const e=m5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?kg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(){this.un=new A5}addToCollectionParentIndex(e,n){return this.un.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(to.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(to.min())}updateCollectionGroup(e,n,i){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class A5{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new tn(mt.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new tn(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new El(0)}static kn(){return new El(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(){this.changes=new Pl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Z.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&$u(i.mutation,r,Ms.empty(),Ln.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,xe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=xe()){const r=ko();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=Au();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=ko();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,xe()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=io();const o=Gu(),a=function(){return Gu()}();return n.forEach((c,h)=>{const m=i.get(h.key);r.has(h.key)&&(m===void 0||m.mutation instanceof jd)?s=s.insert(h.key,h):m!==void 0?(o.set(h.key,m.mutation.getFieldMask()),$u(m.mutation,h,m.mutation.getFieldMask(),Ln.now())):o.set(h.key,Ms.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((h,m)=>o.set(h,m)),n.forEach((h,m)=>{var T;return a.set(h,new S5(m,(T=o.get(h))!==null&&T!==void 0?T:null))}),a))}recalculateAndSaveOverlays(e,n){const i=Gu();let r=new St((o,a)=>o-a),s=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let m=i.get(c)||Ms.empty();m=a.applyToLocalView(h,m),i.set(c,m);const T=(r.get(a.batchId)||xe()).add(c);r=r.insert(a.batchId,T)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),h=c.key,m=c.value,T=Mw();m.forEach(g=>{if(!s.has(g)){const w=Vw(n.get(g),i.get(g));w!==null&&T.set(g,w),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,T))}return Z.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return oe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):M3(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):Z.resolve(ko());let a=-1,c=s;return o.next(h=>Z.forEach(h,(m,T)=>(a<T.largestBatchId&&(a=T.largestBatchId),s.get(m)?Z.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{c=c.insert(m,g)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,c,h,xe())).next(m=>({batchId:a,changes:U3(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(i=>{let r=Au();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=Au();return this.indexManager.getCollectionParents(e,s).next(a=>Z.forEach(a,c=>{const h=function(T,g){return new Ld(g,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next(m=>{m.forEach((T,g)=>{o=o.insert(T,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((c,h)=>{const m=h.getKey();o.get(m)===null&&(o=o.insert(m,cn.newInvalidDocument(m)))});let a=Au();return o.forEach((c,h)=>{const m=s.get(c);m!==void 0&&$u(m.mutation,h,Ms.empty(),Ln.now()),Vd(n,h)&&(a=a.insert(c,h))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:el(r.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:T5(r.bundledQuery),readTime:el(r.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(){this.overlays=new St(oe.comparator),this.Ir=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ko();return Z.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),Z.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),Z.resolve()}getOverlaysForCollection(e,n,i){const r=ko(),s=n.length+1,o=new oe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return Z.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new St((h,m)=>h-m);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let m=s.get(h.largestBatchId);m===null&&(m=ko(),s=s.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const a=ko(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,m)=>a.set(h,m)),!(a.size()>=r)););return Z.resolve(a)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new J3(n,i));let s=this.Ir.get(n);s===void 0&&(s=xe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(){this.Tr=new tn(Ut.Er),this.dr=new tn(Ut.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new Ut(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new Ut(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new oe(new mt([])),i=new Ut(n,e),r=new Ut(n,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new oe(new mt([])),i=new Ut(n,e),r=new Ut(n,e+1);let s=xe();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ut(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ut{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return oe.comparator(e.key,n.key)||Me(e.wr,n.wr)}static Ar(e,n){return Me(e.wr,n.wr)||oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new tn(Ut.Er)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Q3(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new Ut(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Z.resolve(o)}lookupMutationBatch(e,n){return Z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),s=r<0?0:r;return Z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ut(n,0),r=new Ut(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),Z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new tn(Me);return n.forEach(r=>{const s=new Ut(r,0),o=new Ut(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),Z.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;oe.isDocumentKey(s)||(s=s.child(""));const o=new Ut(new oe(s),0);let a=new tn(Me);return this.br.forEachWhile(c=>{const h=c.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(a=a.add(c.wr)),!0)},o),Z.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){pt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return Z.forEach(n.mutations,r=>{const s=new Ut(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new Ut(n,0),r=this.br.firstAfterOrEqual(i);return Z.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(e){this.Mr=e,this.docs=function(){return new St(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Z.resolve(i?i.document.mutableCopy():cn.newInvalidDocument(n))}getEntries(e,n){let i=io();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():cn.newInvalidDocument(r))}),Z.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=io();const o=n.path,a=new oe(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:h,value:{document:m}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||m3(d3(m),i)<=0||(r.has(m.key)||Vd(n,m))&&(s=s.insert(m.key,m.mutableCopy()))}return Z.resolve(s)}getAllFromCollectionGroup(e,n,i,r){me()}Or(e,n){return Z.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new k5(this)}getSize(e){return Z.resolve(this.size)}}class k5 extends b5{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),Z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e){this.persistence=e,this.Nr=new Pl(n=>p_(n),g_),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.Lr=0,this.Br=new E_,this.targetCount=0,this.kr=El.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),Z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new El(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Kn(n),Z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Z.waitFor(s).next(()=>r)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return Z.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),Z.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),Z.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return Z.resolve(i)}containsKey(e,n){return Z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e,n){this.qr={},this.overlays={},this.Qr=new h_(0),this.Kr=!1,this.Kr=!0,this.$r=new C5,this.referenceDelegate=e(this),this.Ur=new O5(this),this.indexManager=new E5,this.remoteDocumentCache=function(r){return new x5(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new v5(n),this.Gr=new R5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new I5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new N5(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){te("MemoryPersistence","Starting transaction:",e);const r=new M5(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,n){return Z.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class M5 extends g3{constructor(e){super(),this.currentSequenceNumber=e}}class A_{constructor(e){this.persistence=e,this.Jr=new E_,this.Yr=null}static Zr(e){return new A_(e)}get Xr(){if(this.Yr)return this.Yr;throw me()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),Z.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.Xr,i=>{const r=oe.fromPath(i);return this.ei(e,r).next(s=>{s||n.removeEntry(r,he.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Z.or([()=>Z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=xe(),r=xe();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new b_(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return w2()?8:y3(R2())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new P5;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(fu()<=vs.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Sa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Z.resolve()):(fu()<=vs.DEBUG&&te("QueryEngine","Query:",Sa(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(fu()<=vs.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Sa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mr(n))):Z.resolve())}Yi(e,n){if(BT(n))return Z.resolve(null);let i=mr(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=kg(n,null,"F"),i=mr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=xe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{const h=this.ts(n,a);return this.ns(n,h,o,c.readTime)?this.Yi(e,kg(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,i,r){return BT(n)||r.isEqual(he.min())?Z.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(n,s);return this.ns(n,o,i,r)?Z.resolve(null):(fu()<=vs.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Sa(n)),this.rs(e,o,n,f3(r,-1)).next(a=>a))})}ts(e,n){let i=new tn(Ow(e));return n.forEach((r,s)=>{Vd(e,s)&&(i=i.add(s))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,n,i){return fu()<=vs.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Sa(n)),this.Ji.getDocumentsMatchingQuery(e,n,to.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new St(Me),this._s=new Pl(s=>p_(s),g_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new w5(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function V5(t,e,n,i){return new z5(t,e,n,i)}async function Xw(t,e){const n=Ne(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let c=xe();for(const h of r){o.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}for(const h of s){a.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(i,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:a}))})})}function Yw(t){const e=Ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function U5(t,e){const n=Ne(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const a=[];e.targetChanges.forEach((m,T)=>{const g=r.get(T);if(!g)return;a.push(n.Ur.removeMatchingKeys(s,m.removedDocuments,T).next(()=>n.Ur.addMatchingKeys(s,m.addedDocuments,T)));let w=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(T)!==null?w=w.withResumeToken(nn.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):m.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(m.resumeToken,i)),r=r.insert(T,w),function(M,L,x){return M.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,w,m)&&a.push(n.Ur.updateTargetData(s,w))});let c=io(),h=xe();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,m))}),a.push(j5(s,o,e.documentUpdates).next(m=>{c=m.Ps,h=m.Is})),!i.isEqual(he.min())){const m=n.Ur.getLastRemoteSnapshotVersion(s).next(T=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(m)}return Z.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,h)).next(()=>c)}).then(s=>(n.os=r,s))}function j5(t,e,n){let i=xe(),r=xe();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=io();return n.forEach((a,c)=>{const h=s.get(a);c.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(he.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):te("LocalStore","Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",c.version)}),{Ps:o,Is:r}})}function B5(t,e){const n=Ne(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(s=>s?(r=s,Z.resolve(r)):n.Ur.allocateTargetId(i).next(o=>(r=new Ps(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Lg(t,e,n){const i=Ne(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!zc(o))throw o;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function JT(t,e,n){const i=Ne(t);let r=he.min(),s=xe();return i.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,m){const T=Ne(c),g=T._s.get(m);return g!==void 0?Z.resolve(T.os.get(g)):T.Ur.getTargetData(h,m)}(i,o,mr(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?r:he.min(),n?s:xe())).next(a=>(F5(i,L3(e),a),{documents:a,Ts:s})))}function F5(t,e,n){let i=t.us.get(e)||he.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.us.set(e,i)}class WT{constructor(){this.activeTargetIds=F3()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class H5{constructor(){this.so=new WT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new WT,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xh=null;function ip(){return xh===null?xh=function(){return 268435456+Math.round(2147483648*Math.random())}():xh++,"0x"+xh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class Z5 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(n,i,r,s,o){const a=ip(),c=this.xo(n,i.toUriEncodedString());te("RestConnection",`Sending RPC '${n}' ${a}:`,c,r);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(n,c,h,r).then(m=>(te("RestConnection",`Received RPC '${n}' ${a}: `,m),m),m=>{throw fc("RestConnection",`RPC '${n}' ${a} failed with error: `,m,"url: ",c,"request:",r),m})}Lo(n,i,r,s,o,a){return this.Mo(n,i,r,s,o)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ml}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}xo(n,i){const r=G5[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const s=ip();return new Promise((o,a)=>{const c=new _w;c.setWithCredentials(!0),c.listenOnce(vw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case nf.NO_ERROR:const m=c.getResponseJson();te(ln,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(m)),o(m);break;case nf.TIMEOUT:te(ln,`RPC '${e}' ${s} timed out`),a(new ae(J.DEADLINE_EXCEEDED,"Request time out"));break;case nf.HTTP_ERROR:const T=c.getStatus();if(te(ln,`RPC '${e}' ${s} failed with status:`,T,"response text:",c.getResponseText()),T>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const O=function(L){const x=L.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(x)>=0?x:J.UNKNOWN}(w.status);a(new ae(O,w.message))}else a(new ae(J.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new ae(J.UNAVAILABLE,"Connection failed."));break;default:me()}}finally{te(ln,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(r);te(ln,`RPC '${e}' ${s} sending request:`,r),c.send(n,"POST",h,i,15)})}Bo(e,n,i){const r=ip(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Aw(),a=Ew(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;const m=s.join("");te(ln,`Creating RPC '${e}' stream ${r}: ${m}`,c);const T=o.createWebChannel(m,c);let g=!1,w=!1;const O=new $5({Io:L=>{w?te(ln,`Not sending because RPC '${e}' stream ${r} is closed:`,L):(g||(te(ln,`Opening RPC '${e}' stream ${r} transport.`),T.open(),g=!0),te(ln,`RPC '${e}' stream ${r} sending:`,L),T.send(L))},To:()=>T.close()}),M=(L,x,k)=>{L.listen(x,D=>{try{k(D)}catch(z){setTimeout(()=>{throw z},0)}})};return M(T,Eu.EventType.OPEN,()=>{w||(te(ln,`RPC '${e}' stream ${r} transport opened.`),O.yo())}),M(T,Eu.EventType.CLOSE,()=>{w||(w=!0,te(ln,`RPC '${e}' stream ${r} transport closed`),O.So())}),M(T,Eu.EventType.ERROR,L=>{w||(w=!0,fc(ln,`RPC '${e}' stream ${r} transport errored:`,L),O.So(new ae(J.UNAVAILABLE,"The operation could not be completed")))}),M(T,Eu.EventType.MESSAGE,L=>{var x;if(!w){const k=L.data[0];pt(!!k);const D=k,z=D.error||((x=D[0])===null||x===void 0?void 0:x.error);if(z){te(ln,`RPC '${e}' stream ${r} received error:`,z);const F=z.status;let $=function(y){const A=wt[y];if(A!==void 0)return jw(A)}(F),S=z.message;$===void 0&&($=J.INTERNAL,S="Unknown error status: "+F+" with message "+z.message),w=!0,O.So(new ae($,S)),T.close()}else te(ln,`RPC '${e}' stream ${r} received:`,k),O.bo(k)}}),M(a,Tw.STAT_EVENT,L=>{L.stat===wg.PROXY?te(ln,`RPC '${e}' stream ${r} detected buffering proxy`):L.stat===wg.NOPROXY&&te(ln,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{O.wo()},0),O}}function rp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(t){return new o5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&te("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e,n,i,r,s,o,a,c){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Jw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(Qr(n.toString()),Qr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new ae(J.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class X5 extends K5{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=h5(this.serializer,e),i=function(s){if(!("targetChange"in s))return he.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?el(o.readTime):he.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=QT(this.serializer),n.addTarget=function(s,o){let a;const c=o.target;if(a=xg(c)?{documents:f5(s,c)}:{query:d5(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=l5(s,o.resumeToken);const h=Mg(s,o.expectedCount);h!==null&&(a.expectedCount=h)}else if(o.snapshotVersion.compareTo(he.min())>0){a.readTime=a5(s,o.snapshotVersion.toTimestamp());const h=Mg(s,o.expectedCount);h!==null&&(a.expectedCount=h)}return a}(this.serializer,e);const i=p5(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=QT(this.serializer),n.removeTarget=e,this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5 extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new ae(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Pg(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ae(J.UNKNOWN,s.toString())})}Lo(e,n,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Pg(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ae(J.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Q5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Qr(n),this.D_=!1):te("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{jc(this)&&(te("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=Ne(c);h.L_.add(4),await Uc(h),h.q_.set("Unknown"),h.L_.delete(4),await Fd(h)}(this))})}),this.q_=new Q5(i,r)}}async function Fd(t){if(jc(t))for(const e of t.B_)await e(!0)}async function Uc(t){for(const e of t.B_)await e(!1)}function Ww(t,e){const n=Ne(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),I_(n)?R_(n):Ll(n).r_()&&w_(n,e))}function S_(t,e){const n=Ne(t),i=Ll(n);n.N_.delete(e),i.r_()&&e2(n,e),n.N_.size===0&&(i.r_()?i.o_():jc(n)&&n.q_.set("Unknown"))}function w_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ll(t).A_(e)}function e2(t,e){t.Q_.xe(e),Ll(t).R_(e)}function R_(t){t.Q_=new n5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ll(t).start(),t.q_.v_()}function I_(t){return jc(t)&&!Ll(t).n_()&&t.N_.size>0}function jc(t){return Ne(t).L_.size===0}function t2(t){t.Q_=void 0}async function W5(t){t.q_.set("Online")}async function eL(t){t.N_.forEach((e,n)=>{w_(t,e)})}async function tL(t,e){t2(t),I_(t)?(t.q_.M_(e),R_(t)):t.q_.set("Unknown")}async function nL(t,e,n){if(t.q_.set("Online"),e instanceof Fw&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))}(t,e)}catch(i){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await tE(t,i)}else if(e instanceof sf?t.Q_.Ke(e):e instanceof Bw?t.Q_.He(e):t.Q_.We(e),!n.isEqual(he.min()))try{const i=await Yw(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const m=s.N_.get(h);m&&s.N_.set(h,m.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,h)=>{const m=s.N_.get(c);if(!m)return;s.N_.set(c,m.withResumeToken(nn.EMPTY_BYTE_STRING,m.snapshotVersion)),e2(s,c);const T=new Ps(m.target,c,h,m.sequenceNumber);w_(s,T)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){te("RemoteStore","Failed to raise snapshot:",i),await tE(t,i)}}async function tE(t,e,n){if(!zc(e))throw e;t.L_.add(1),await Uc(t),t.q_.set("Offline"),n||(n=()=>Yw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Fd(t)})}async function nE(t,e){const n=Ne(t);n.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const i=jc(n);n.L_.add(3),await Uc(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Fd(n)}async function iL(t,e){const n=Ne(t);e?(n.L_.delete(2),await Fd(n)):e||(n.L_.add(2),await Uc(n),n.q_.set("Unknown"))}function Ll(t){return t.K_||(t.K_=function(n,i,r){const s=Ne(n);return s.w_(),new X5(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:W5.bind(null,t),Ro:eL.bind(null,t),mo:tL.bind(null,t),d_:nL.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),I_(t)?R_(t):t.q_.set("Unknown")):(await t.K_.stop(),t2(t))})),t.K_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Wa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new C_(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function n2(t,e){if(Qr("AsyncQueue",`${e}: ${t}`),zc(t))return new ae(J.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.comparator=e?(n,i)=>e(n,i)||oe.comparator(n.key,i.key):(n,i)=>oe.comparator(n.key,i.key),this.keyedMap=Au(),this.sortedSet=new St(this.comparator)}static emptySet(e){return new tl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof tl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new tl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(){this.W_=new St(oe.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):me():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Al{constructor(e,n,i,r,s,o,a,c,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Al(e,n,tl.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class sL{constructor(){this.queries=rE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=Ne(n),s=r.queries;r.queries=rE(),s.forEach((o,a)=>{for(const c of a.j_)c.onError(i)})})(this,new ae(J.ABORTED,"Firestore shutting down"))}}function rE(){return new Pl(t=>kw(t),zd)}async function oL(t,e){const n=Ne(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new rL,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=n2(o,`Initialization of query '${Sa(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&N_(n)}async function aL(t,e){const n=Ne(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function lL(t,e){const n=Ne(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&N_(n)}function uL(t,e,n){const i=Ne(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function N_(t){t.Y_.forEach(e=>{e.next()})}var zg,sE;(sE=zg||(zg={})).ea="default",sE.Cache="cache";class cL{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Al(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Al.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==zg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.key=e}}class r2{constructor(e){this.key=e}}class hL{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=xe(),this.mutatedKeys=xe(),this.Aa=Ow(e),this.Ra=new tl(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new iE,r=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,T)=>{const g=r.get(m),w=Vd(this.query,T)?T:null,O=!!g&&this.mutatedKeys.has(g.key),M=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let L=!1;g&&w?g.data.isEqual(w.data)?O!==M&&(i.track({type:3,doc:w}),L=!0):this.ga(g,w)||(i.track({type:2,doc:w}),L=!0,(c&&this.Aa(w,c)>0||h&&this.Aa(w,h)<0)&&(a=!0)):!g&&w?(i.track({type:0,doc:w}),L=!0):g&&!w&&(i.track({type:1,doc:g}),L=!0,(c||h)&&(a=!0)),L&&(w?(o=o.add(w),s=M?s.add(m):s.delete(m)):(o=o.delete(m),s=s.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),s=s.delete(m.key),i.track({type:1,doc:m})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((m,T)=>function(w,O){const M=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me()}};return M(w)-M(O)}(m.type,T.type)||this.Aa(m.doc,T.doc)),this.pa(i),r=r!=null&&r;const a=n&&!r?this.ya():[],c=this.da.size===0&&this.current&&!r?1:0,h=c!==this.Ea;return this.Ea=c,o.length!==0||h?{snapshot:new Al(this.query,e.Ra,s,o,e.mutatedKeys,c===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new iE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=xe(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new r2(i))}),this.da.forEach(i=>{e.has(i)||n.push(new i2(i))}),n}ba(e){this.Ta=e.Ts,this.da=xe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Al.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class fL{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class dL{constructor(e){this.key=e,this.va=!1}}class mL{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Pl(a=>kw(a),zd),this.Ma=new Map,this.xa=new Set,this.Oa=new St(oe.comparator),this.Na=new Map,this.La=new E_,this.Ba={},this.ka=new Map,this.qa=El.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function pL(t,e,n=!0){const i=u2(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await s2(i,e,n,!0),r}async function gL(t,e){const n=u2(t);await s2(n,e,!0,!1)}async function s2(t,e,n,i){const r=await B5(t.localStore,mr(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await yL(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&Ww(t.remoteStore,r),a}async function yL(t,e,n,i,r){t.Ka=(T,g,w)=>async function(M,L,x,k){let D=L.view.ma(x);D.ns&&(D=await JT(M.localStore,L.query,!1).then(({documents:S})=>L.view.ma(S,D)));const z=k&&k.targetChanges.get(L.targetId),F=k&&k.targetMismatches.get(L.targetId)!=null,$=L.view.applyChanges(D,M.isPrimaryClient,z,F);return aE(M,L.targetId,$.wa),$.snapshot}(t,T,g,w);const s=await JT(t.localStore,e,!0),o=new hL(e,s.Ts),a=o.ma(s.documents),c=Vc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),h=o.applyChanges(a,t.isPrimaryClient,c);aE(t,n,h.wa);const m=new fL(e,n,o);return t.Fa.set(e,m),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function _L(t,e,n){const i=Ne(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!zd(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Lg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&S_(i.remoteStore,r.targetId),Vg(i,r.targetId)}).catch(c_)):(Vg(i,r.targetId),await Lg(i.localStore,r.targetId,!0))}async function vL(t,e){const n=Ne(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),S_(n.remoteStore,i.targetId))}async function o2(t,e){const n=Ne(t);try{const i=await U5(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Na.get(s);o&&(pt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?pt(o.va):r.removedDocuments.size>0&&(pt(o.va),o.va=!1))}),await l2(n,i,e)}catch(i){await c_(i)}}function oE(t,e,n){const i=Ne(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const c=Ne(o);c.onlineState=a;let h=!1;c.queries.forEach((m,T)=>{for(const g of T.j_)g.Z_(a)&&(h=!0)}),h&&N_(c)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function TL(t,e,n){const i=Ne(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new St(oe.comparator);o=o.insert(s,cn.newNoDocument(s,he.min()));const a=xe().add(s),c=new Bd(he.min(),new Map,new St(Me),o,a);await o2(i,c),i.Oa=i.Oa.remove(s),i.Na.delete(e),x_(i)}else await Lg(i.localStore,e,!1).then(()=>Vg(i,e,n)).catch(c_)}function Vg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||a2(t,i)})}function a2(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(S_(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),x_(t))}function aE(t,e,n){for(const i of n)i instanceof i2?(t.La.addReference(i.key,e),EL(t,i)):i instanceof r2?(te("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||a2(t,i.key)):me()}function EL(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(te("SyncEngine","New document in limbo: "+n),t.xa.add(i),x_(t))}function x_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new oe(mt.fromString(e)),i=t.qa.next();t.Na.set(i,new dL(n)),t.Oa=t.Oa.insert(n,i),Ww(t.remoteStore,new Ps(mr(y_(n.path)),i,"TargetPurposeLimboResolution",h_.oe))}}async function l2(t,e,n){const i=Ne(t),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,c)=>{o.push(i.Ka(c,e,n).then(h=>{var m;if((h||n)&&i.isPrimaryClient){const T=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))===null||m===void 0?void 0:m.current;i.sharedClientState.updateQueryState(c.targetId,T?"current":"not-current")}if(h){r.push(h);const T=b_.Wi(c.targetId,h);s.push(T)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(c,h){const m=Ne(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>Z.forEach(h,g=>Z.forEach(g.$i,w=>m.persistence.referenceDelegate.addReference(T,g.targetId,w)).next(()=>Z.forEach(g.Ui,w=>m.persistence.referenceDelegate.removeReference(T,g.targetId,w)))))}catch(T){if(!zc(T))throw T;te("LocalStore","Failed to update sequence numbers: "+T)}for(const T of h){const g=T.targetId;if(!T.fromCache){const w=m.os.get(g),O=w.snapshotVersion,M=w.withLastLimboFreeSnapshotVersion(O);m.os=m.os.insert(g,M)}}}(i.localStore,s))}async function AL(t,e){const n=Ne(t);if(!n.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const i=await Xw(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new ae(J.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await l2(n,i.hs)}}function bL(t,e){const n=Ne(t),i=n.Na.get(e);if(i&&i.va)return xe().add(i.key);{let r=xe();const s=n.Ma.get(e);if(!s)return r;for(const o of s){const a=n.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function u2(t){const e=Ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=o2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TL.bind(null,e),e.Ca.d_=lL.bind(null,e.eventManager),e.Ca.$a=uL.bind(null,e.eventManager),e}class rd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qw(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return V5(this.persistence,new L5,e.initialUser,this.serializer)}Ga(e){return new D5(A_.Zr,this.serializer)}Wa(e){return new H5}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rd.provider={build:()=>new rd};class Ug{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>oE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=AL.bind(null,this.syncEngine),await iL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sL}()}createDatastore(e){const n=Qw(e.databaseInfo.databaseId),i=function(s){return new Z5(s)}(e.databaseInfo);return function(s,o,a,c){return new Y5(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new J5(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>oE(this.syncEngine,n,0),function(){return eE.D()?new eE:new q5}())}createSyncEngine(e,n){return function(r,s,o,a,c,h,m){const T=new mL(r,s,o,a,c,h);return m&&(T.Qa=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=Ne(r);te("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Uc(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ug.provider={build:()=>new Ug};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Qr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Dn.UNAUTHENTICATED,this.clientId=bw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{te("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(te("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=n2(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function sp(t,e){t.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await Xw(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function lE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await RL(t);te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>nE(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>nE(e.remoteStore,r)),t._onlineComponents=e}async function RL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{await sp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===J.FAILED_PRECONDITION||r.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;fc("Error using user provided cache. Falling back to memory cache: "+n),await sp(t,new rd)}}else te("FirestoreClient","Using default OfflineComponentProvider"),await sp(t,new rd);return t._offlineComponents}async function IL(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),await lE(t,t._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),await lE(t,new Ug))),t._onlineComponents}async function uE(t){const e=await IL(t),n=e.eventManager;return n.onListen=pL.bind(null,e.syncEngine),n.onUnlisten=_L.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vL.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(t,e,n){if(!n)throw new ae(J.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function NL(t,e,n,i){if(e===!0&&i===!0)throw new ae(J.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function hE(t){if(!oe.isDocumentKey(t))throw new ae(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xL(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me()}function op(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ae(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xL(t);throw new ae(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ae(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=c2((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ae(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ae(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ae(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class h2{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fE(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new r3;switch(i.type){case"firstParty":return new a3(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ae(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=cE.get(n);i&&(te("ComponentProvider","Removing Datastore"),cE.delete(n),i.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Hd(this.firestore,e,this._query)}}class Fr{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fr(this.firestore,e,this._key)}}class yc extends Hd{constructor(e,n,i){super(e,n,y_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fr(this.firestore,null,new oe(e))}withConverter(e){return new yc(this.firestore,e,this._path)}}function kL(t,e,...n){if(t=gE(t),arguments.length===1&&(e=bw.newId()),CL("doc","path",e),t instanceof h2){const i=mt.fromString(e,...n);return hE(i),new Fr(t,null,new oe(i))}{if(!(t instanceof Fr||t instanceof yc))throw new ae(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(mt.fromString(e,...n));return hE(i),new Fr(t.firestore,t instanceof yc?t.converter:null,new oe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Jw(this,"async_queue_retry"),this.Vu=()=>{const i=rp();i&&te("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=rp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=rp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Wa;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!zc(e))throw e;te("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Qr("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=C_.createAndSchedule(this,e,n,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&me()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function mE(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class jg extends h2{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new dE,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dE(e),this._firestoreClient=void 0,await e}}}function OL(t){if(t._terminated)throw new ae(J.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||DL(t),t._firestoreClient}function DL(t){var e,n,i;const r=t._freezeSettings(),s=function(a,c,h,m){return new T3(a,c,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,c2(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new wL(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sd(nn.fromBase64String(e))}catch(n){throw new ae(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new sd(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ae(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ae(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ae(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}const LL=new RegExp("[~\\*/\\[\\]]");function zL(t,e,n){if(e.search(LL)>=0)throw pE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new f2(...e.split("."))._internalPath}catch{throw pE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function pE(t,e,n,i,r){let s=`Function ${e}() called with invalid data`;s+=". ";let o="";return new ae(J.INVALID_ARGUMENT,s+t+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Fr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(m2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class VL extends d2{data(){return super.data()}}function m2(t,e){return typeof e=="string"?zL(t,e):e instanceof f2?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ae(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jL{convertValue(e,n="none"){switch(Yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw me()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Pd(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Et(o.doubleValue));return new PL(s)}convertGeoPoint(e){return new ML(Et(e.latitude),Et(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=d_(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(mc(e));default:return null}}convertTimestamp(e){const n=no(e);return new Ln(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=mt.fromString(e);pt(Kw(i));const r=new pc(i.get(1),i.get(3)),s=new oe(i.popFirst(5));return r.isEqual(n)||Qr(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class p2 extends d2{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new of(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(m2("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class of extends p2{data(e={}){return super.data(e)}}class BL{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Su(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new of(this._firestore,this._userDataWriter,i.key,i,new Su(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ae(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const c=new of(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Su(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const c=new of(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Su(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,m=-1;return a.type!==0&&(h=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),m=o.indexOf(a.doc.key)),{type:FL(a.type),doc:c,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function FL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me()}}class g2 extends jL{constructor(e){super(),this.firestore=e}convertBytes(e){return new sd(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Fr(this.firestore,null,n)}}function HL(t,...e){var n,i,r;t=gE(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||mE(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(mE(e[o])){const T=e[o];e[o]=(n=T.next)===null||n===void 0?void 0:n.bind(T),e[o+1]=(i=T.error)===null||i===void 0?void 0:i.bind(T),e[o+2]=(r=T.complete)===null||r===void 0?void 0:r.bind(T)}let c,h,m;if(t instanceof Fr)h=op(t.firestore,jg),m=y_(t._key.path),c={next:T=>{e[o]&&e[o](qL(h,t,T))},error:e[o+1],complete:e[o+2]};else{const T=op(t,Hd);h=op(T.firestore,jg),m=T._query;const g=new g2(h);c={next:w=>{e[o]&&e[o](new BL(h,g,T,w))},error:e[o+1],complete:e[o+2]},UL(t._query)}return function(g,w,O,M){const L=new SL(M),x=new cL(w,L,O);return g.asyncQueue.enqueueAndForget(async()=>oL(await uE(g),x)),()=>{L.Za(),g.asyncQueue.enqueueAndForget(async()=>aL(await uE(g),x))}}(OL(h),m,a,c)}function qL(t,e,n){const i=n.docs.get(e._key),r=new g2(t);return new p2(t,r,e._key,i,new Su(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Ml=r})(S2),E2(new A2("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new jg(new s3(i.getProvider("auth-internal")),new u3(i.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ae(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pc(h.options.projectId,m)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),k_(kT,"4.7.3",e),k_(kT,"4.7.3","esm2017")})();function GL(t){const[e,n]=G.useState({status:"idle",roomId:null,room:null,error:null,lastAnswerResult:null,finalRankings:null}),i=G.useRef(null);G.useEffect(()=>()=>{i.current&&i.current()},[]);const r=G.useCallback(w=>{var L;if(console.log("[useGameRoom] subscribeToRoom called with roomId:",w),console.log("[useGameRoom] isFirebaseConfigured:",un()),!un()){n(x=>({...x,status:"error",error:"Firebase not configured"}));return}let O;try{O=SO(),console.log("[useGameRoom] getFirebaseFirestore returned:",O),console.log("[useGameRoom] db type:",typeof O),console.log("[useGameRoom] db constructor:",(L=O==null?void 0:O.constructor)==null?void 0:L.name)}catch(x){console.error("[useGameRoom] Failed to get Firestore:",x),n(k=>({...k,status:"error",error:"Failed to initialize Firestore"}));return}if(!O){console.error("[useGameRoom] db is falsy"),n(x=>({...x,status:"error",error:"Firestore not available"}));return}console.log("[useGameRoom] About to call doc() with db and roomId");const M=kL(O,"gameRooms",w);console.log("[useGameRoom] doc() succeeded, roomRef:",M),i.current=HL(M,x=>{if(!x.exists()){n(D=>({...D,status:"error",error:"Room no longer exists"}));return}const k=x.data();n(D=>({...D,room:k,status:"connected"}))},x=>{console.error("Room listener error:",x),n(k=>({...k,status:"error",error:x.message}))})},[]),s=G.useCallback(async(w,O=10)=>{if(!t){n(M=>({...M,status:"error",error:"Not authenticated"}));return}if(!un()){n(M=>({...M,status:"error",error:"Firebase not configured"}));return}n(M=>({...M,status:"creating",error:null}));try{const M=Bi(),x=await hi(M,"createRoom")({tier:w,totalRounds:O}),{roomId:k}=x.data;n(D=>({...D,roomId:k,lastAnswerResult:null,finalRankings:null})),r(k)}catch(M){console.error("Failed to create room:",M),n(L=>({...L,status:"error",error:M instanceof Error?M.message:"Failed to create room"}))}},[t,r]),o=G.useCallback(async w=>{if(!t){n(O=>({...O,status:"error",error:"Not authenticated"}));return}if(!un()){n(O=>({...O,status:"error",error:"Firebase not configured"}));return}n(O=>({...O,status:"joining",error:null}));try{const O=Bi(),L=await hi(O,"joinRoom")({roomCode:w.toUpperCase()}),{roomId:x}=L.data;n(k=>({...k,roomId:x,lastAnswerResult:null,finalRankings:null})),r(x)}catch(O){console.error("Failed to join room:",O),n(M=>({...M,status:"error",error:O instanceof Error?O.message:"Failed to join room"}))}},[t,r]),a=G.useCallback(async w=>{if(!(!e.roomId||!un()))try{const O=Bi();await hi(O,"setReady")({roomId:e.roomId,isReady:w})}catch(O){throw console.error("Failed to set ready:",O),O}},[e.roomId]),c=G.useCallback(async()=>{if(!(!e.roomId||!un()))try{const w=Bi();await hi(w,"startRound")({roomId:e.roomId})}catch(w){throw console.error("Failed to start round:",w),w}},[e.roomId]),h=G.useCallback(async w=>{if(!e.roomId||!un())throw new Error("Not connected to a room");try{const O=Bi(),x=(await hi(O,"submitAnswer")({roomId:e.roomId,answer:w})).data;return n(k=>({...k,lastAnswerResult:x})),x}catch(O){throw console.error("Failed to submit answer:",O),O}},[e.roomId]),m=G.useCallback(async()=>{if(!e.roomId||!un())throw new Error("Not connected to a room");try{const w=Bi(),M=await hi(w,"advanceRound")({roomId:e.roomId});return M.data.isComplete&&M.data.finalRankings&&n(L=>({...L,finalRankings:M.data.finalRankings})),M.data}catch(w){throw console.error("Failed to advance round:",w),w}},[e.roomId]),T=G.useCallback(async()=>{if(!(!e.roomId||!un()))try{const w=Bi();await hi(w,"leaveRoom")({roomId:e.roomId}),i.current&&(i.current(),i.current=null),n({status:"idle",roomId:null,room:null,error:null,lastAnswerResult:null,finalRankings:null})}catch(w){console.error("Failed to leave room:",w)}},[e.roomId]),g=G.useCallback(()=>{i.current&&(i.current(),i.current=null),n({status:"idle",roomId:null,room:null,error:null,lastAnswerResult:null,finalRankings:null})},[]);return[e,{createRoom:s,joinRoom:o,setReady:a,startRound:c,submitAnswer:h,advanceRound:m,leaveRoom:T,disconnect:g}]}function $L({racingStats:t,onStartGame:e}){const[n,i]=G.useState(1),[r,s]=G.useState(10),o=()=>{e(n,r)};return R.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[R.jsxs(ge.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[R.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Modular Arithmetic Racing"}),R.jsx("p",{className:"text-dark-300",children:"Race against the clock to compute remainders!"})]}),t&&R.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-dark-800 rounded-lg p-4 mb-6",children:[R.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"Your Stats"}),R.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[R.jsxs("div",{children:[R.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:t.highScore.toLocaleString()}),R.jsx("div",{className:"text-sm text-dark-400",children:"High Score"})]}),R.jsxs("div",{children:[R.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:t.gamesPlayed}),R.jsx("div",{className:"text-sm text-dark-400",children:"Games"})]}),R.jsxs("div",{children:[R.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:t.longestStreak}),R.jsx("div",{className:"text-sm text-dark-400",children:"Best Streak"})]})]})]}),R.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-6",children:[R.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"Select Difficulty"}),R.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:dl.map(a=>{const c=n===a.tier;return R.jsxs("button",{onClick:()=>i(a.tier),className:`
                  relative p-4 rounded-lg border-2 transition-all
                  ${c?"border-cyan-500 bg-cyan-500/10":"border-dark-600 bg-dark-800 hover:border-dark-500"}
                `,children:[R.jsx("div",{className:`text-lg font-bold ${c?"text-cyan-400":"text-white"}`,children:a.name}),R.jsxs("div",{className:"text-sm text-dark-400 mt-1",children:[a.basePoints," pts base"]})]},a.tier)})})]}),R.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"mb-8",children:[R.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"Rounds"}),R.jsx("div",{className:"flex gap-3",children:[5,10,15,20].map(a=>R.jsx("button",{onClick:()=>s(a),className:`
                flex-1 py-3 rounded-lg border-2 transition-all font-medium
                ${r===a?"border-cyan-500 bg-cyan-500/10 text-cyan-400":"border-dark-600 bg-dark-800 text-white hover:border-dark-500"}
              `,children:a},a))})]}),R.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-dark-800 rounded-lg p-4 mb-6",children:(()=>{const a=dl.find(c=>c.tier===n);return R.jsxs(R.Fragment,{children:[R.jsxs("h3",{className:"font-semibold text-white mb-2",children:[a.name," Mode"]}),R.jsxs("ul",{className:"text-sm text-dark-300 space-y-1",children:[R.jsxs("li",{children:["Modulus: ",a.modulusRange[0]," - ",a.modulusRange[1]]}),R.jsxs("li",{children:["Numbers: ",a.dividendRange[0]," - ",a.dividendRange[1]]}),R.jsxs("li",{children:["Base points: ",a.basePoints," per correct answer"]}),R.jsx("li",{children:"Speed bonus: Answer faster for more points!"})]})]})})()}),R.jsx(ge.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:o,className:"w-full py-4 bg-cyan-600 hover:bg-cyan-500 text-white font-bold text-xl rounded-lg transition-colors",children:"Start Game"})]})}let ap=null;function zl(){return ap||(ap=new AudioContext),ap}function ZL(){try{const t=zl(),e=t.currentTime;[523.25,659.25,783.99].forEach((i,r)=>{const s=t.createOscillator(),o=t.createGain();s.type="sine",s.frequency.value=i,o.gain.setValueAtTime(0,e+r*.08),o.gain.linearRampToValueAtTime(.3,e+r*.08+.02),o.gain.exponentialRampToValueAtTime(.01,e+r*.08+.15),s.connect(o),o.connect(t.destination),s.start(e+r*.08),s.stop(e+r*.08+.2)})}catch{}}function KL(){try{const t=zl(),e=t.currentTime,n=t.createOscillator(),i=t.createOscillator(),r=t.createGain();n.type="square",n.frequency.setValueAtTime(200,e),n.frequency.linearRampToValueAtTime(150,e+.15),i.type="square",i.frequency.setValueAtTime(205,e),i.frequency.linearRampToValueAtTime(155,e+.15),r.gain.setValueAtTime(.15,e),r.gain.linearRampToValueAtTime(.1,e+.1),r.gain.exponentialRampToValueAtTime(.01,e+.2),n.connect(r),i.connect(r),r.connect(t.destination),n.start(e),n.stop(e+.25),i.start(e),i.stop(e+.25)}catch{}}function XL(){try{const t=zl(),e=t.currentTime,n=t.createOscillator(),i=t.createGain();n.type="sine",n.frequency.value=880,i.gain.setValueAtTime(.2,e),i.gain.exponentialRampToValueAtTime(.01,e+.05),n.connect(i),i.connect(t.destination),n.start(e),n.stop(e+.06)}catch{}}function YL(){try{const t=zl(),e=t.currentTime,n=t.createOscillator(),i=t.createGain();n.type="sine",n.frequency.value=440,i.gain.setValueAtTime(.15,e),i.gain.exponentialRampToValueAtTime(.01,e+.08),n.connect(i),i.connect(t.destination),n.start(e),n.stop(e+.1)}catch{}}function QL(){try{const t=zl(),e=t.currentTime;[261.63,329.63,392,523.25].forEach((i,r)=>{const s=t.createOscillator(),o=t.createGain();s.type="triangle",s.frequency.value=i,o.gain.setValueAtTime(0,e+r*.1),o.gain.linearRampToValueAtTime(.25,e+r*.1+.03),o.gain.exponentialRampToValueAtTime(.01,e+r*.1+.3),s.connect(o),o.connect(t.destination),s.start(e+r*.1),s.stop(e+r*.1+.35)})}catch{}}function JL(){try{const t=zl(),e=t.currentTime;[[523.25,659.25,783.99],[587.33,739.99,880],[659.25,830.61,987.77]].forEach((i,r)=>{i.forEach(s=>{const o=t.createOscillator(),a=t.createGain();o.type="triangle",o.frequency.value=s;const c=e+r*.2;a.gain.setValueAtTime(0,c),a.gain.linearRampToValueAtTime(.15,c+.02),a.gain.setValueAtTime(.15,c+.15),a.gain.exponentialRampToValueAtTime(.01,c+.4),o.connect(a),a.connect(t.destination),o.start(c),o.stop(c+.45)})})}catch{}}function WL({onComplete:t}){const[e,n]=G.useState(3);return G.useEffect(()=>{e>0?YL():QL()},[e]),G.useEffect(()=>{if(e===0){t();return}const i=setTimeout(()=>{n(e-1)},1e3);return()=>clearTimeout(i)},[e,t]),R.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-dark-950/90 z-50",children:R.jsx(Bg,{mode:"wait",children:e>0?R.jsx(ge.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.5,opacity:0},transition:{duration:.3},className:"text-9xl font-bold text-cyan-400",children:e},e):R.jsx(ge.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.5,opacity:0},transition:{duration:.3},className:"text-7xl font-bold text-green-400",children:"GO!"},"go")})})}function ez({problem:t,tier:e,roundNumber:n,totalRounds:i,score:r,streak:s,onAnswer:o,lastResult:a}){const[c,h]=G.useState(""),[m,T]=G.useState(0),[g,w]=G.useState(0),O=G.useRef(null);G.useEffect(()=>{var x;h(""),T(Date.now()),w(0),(x=O.current)==null||x.focus()},[t.id]),G.useEffect(()=>{const x=setInterval(()=>{w(Date.now()-m)},100);return()=>clearInterval(x)},[m]),G.useEffect(()=>{a&&(a.isCorrect?ZL():KL())},[a]);const M=G.useCallback(()=>{const x=Date.now()-m,k=parseInt(c,10);!isNaN(k)&&k>=0&&(XL(),o(k,x))},[c,m,o]),L=x=>{x.key==="Enter"&&c.trim()!==""&&M()};return R.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[R.jsxs("div",{className:"flex justify-between items-center mb-8",children:[R.jsxs("div",{className:"text-lg",children:[R.jsx("span",{className:"text-dark-400",children:"Round "}),R.jsx("span",{className:"text-white font-bold",children:n}),R.jsxs("span",{className:"text-dark-400",children:[" / ",i]})]}),R.jsxs("div",{className:"flex items-center gap-6",children:[R.jsxs("div",{className:"text-right",children:[R.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:r.toLocaleString()}),R.jsx("div",{className:"text-xs text-dark-400",children:"Score"})]}),s>0&&R.jsxs("div",{className:"text-right",children:[R.jsx("div",{className:"text-2xl font-bold text-orange-400",children:s}),R.jsx("div",{className:"text-xs text-dark-400",children:"Streak"})]})]})]}),a&&R.jsx(ge.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`
            text-center mb-4 py-2 rounded-lg
            ${a.isCorrect?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}
          `,children:a.isCorrect?R.jsxs("span",{children:[CT(a.points)," points!"]}):R.jsxs("span",{children:["Wrong! Answer was ",a.correctAnswer," (",CT(a.points),")"]})}),R.jsx("div",{className:"text-center mb-4 text-dark-400",children:R.jsx("span",{className:"text-lg",children:gw(g)})}),R.jsxs(ge.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center mb-8",children:[R.jsxs("div",{className:"text-5xl sm:text-6xl font-bold text-white mb-4",children:[t.dividend," mod ",t.modulus]}),R.jsx("div",{className:"text-xl text-dark-400",children:"What is the remainder?"})]},t.id),R.jsxs("div",{className:"flex gap-4 mb-6",children:[R.jsx("input",{ref:O,type:"number",inputMode:"numeric",pattern:"[0-9]*",value:c,onChange:x=>h(x.target.value),onKeyDown:L,placeholder:"?",autoFocus:!0,className:`
            flex-1 text-center text-4xl font-bold py-4
            bg-dark-800 border-2 border-dark-600 rounded-lg
            text-white placeholder-dark-500
            focus:border-cyan-500 focus:outline-none
            [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none
          `}),R.jsx("button",{onClick:M,disabled:c.trim()==="",className:`
            px-8 py-4 bg-cyan-600 hover:bg-cyan-500 disabled:bg-dark-600 disabled:cursor-not-allowed
            text-white font-bold text-xl rounded-lg
            transition-colors
          `,children:"Submit"})]}),R.jsx("div",{className:"grid grid-cols-5 gap-2 sm:hidden",children:[0,1,2,3,4,5,6,7,8,9].map(x=>R.jsx("button",{onClick:()=>h(c+x.toString()),className:`
              py-4 bg-dark-700 hover:bg-dark-600
              text-white font-bold text-2xl rounded-lg
              transition-colors
            `,children:x},x))})]})}function tz({tier:t,totalScore:e,correctAnswers:n,incorrectAnswers:i,maxStreak:r,fastAnswers:s,avgResponseTime:o,xpEarned:a,isNewHighScore:c,previousHighScore:h,onPlayAgain:m,onChangeTier:T,onExit:g}){const w=Dd(t),O=n+i,M=O>0?Math.round(n/O*100):0;return G.useEffect(()=>{JL()},[]),R.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[R.jsxs(ge.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[R.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Race Complete!"}),R.jsxs("p",{className:"text-dark-300",children:[w.name," Mode"]})]}),R.jsxs(ge.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},className:"text-center mb-8",children:[R.jsx("div",{className:"text-6xl font-bold text-cyan-400 mb-2",children:e.toLocaleString()}),R.jsx("div",{className:"text-xl text-dark-400",children:"Final Score"}),c&&R.jsxs(ge.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"mt-4",children:[R.jsx("span",{className:"inline-block px-4 py-2 bg-yellow-500/20 text-yellow-400 rounded-full font-bold",children:"New High Score!"}),h!==void 0&&h>0&&R.jsxs("div",{className:"text-sm text-dark-400 mt-2",children:["Previous best: ",h.toLocaleString()]})]})]}),R.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-8",children:[R.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 text-center",children:[R.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[n,"/",O]}),R.jsx("div",{className:"text-sm text-dark-400",children:"Correct"})]}),R.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 text-center",children:[R.jsxs("div",{className:"text-2xl font-bold text-white",children:[M,"%"]}),R.jsx("div",{className:"text-sm text-dark-400",children:"Accuracy"})]}),R.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 text-center",children:[R.jsx("div",{className:"text-2xl font-bold text-orange-400",children:r}),R.jsx("div",{className:"text-sm text-dark-400",children:"Best Streak"})]}),R.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 text-center",children:[R.jsx("div",{className:"text-2xl font-bold text-white",children:gw(o)}),R.jsx("div",{className:"text-sm text-dark-400",children:"Avg Time"})]})]}),R.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-dark-800 rounded-lg p-4 mb-8",children:[R.jsxs("div",{className:"flex justify-between items-center",children:[R.jsx("span",{className:"text-lg font-semibold text-white",children:"XP Earned"}),R.jsxs("span",{className:"text-2xl font-bold text-cyan-400",children:["+",a]})]}),s>=10&&R.jsx("div",{className:"text-sm text-green-400 mt-2",children:"Speed Demon bonus applied!"}),r>=10&&R.jsx("div",{className:"text-sm text-orange-400 mt-1",children:"Streak Master bonus applied!"}),n===O&&O>=10&&R.jsx("div",{className:"text-sm text-yellow-400 mt-1",children:"Perfect Game bonus applied!"})]}),R.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"flex flex-wrap gap-2 justify-center mb-8",children:[M>=90&&R.jsx("span",{className:"px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm font-medium",children:"Sharp Mind"}),o<2e3&&R.jsx("span",{className:"px-3 py-1 bg-cyan-500/20 text-cyan-400 rounded-full text-sm font-medium",children:"Lightning Fast"}),r>=5&&R.jsx("span",{className:"px-3 py-1 bg-orange-500/20 text-orange-400 rounded-full text-sm font-medium",children:"On Fire"}),s>=5&&R.jsx("span",{className:"px-3 py-1 bg-purple-500/20 text-purple-400 rounded-full text-sm font-medium",children:"Quick Thinker"})]}),R.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"flex flex-col sm:flex-row gap-3",children:[R.jsx("button",{onClick:m,className:`
            flex-1 py-3 bg-cyan-600 hover:bg-cyan-500
            text-white font-bold rounded-lg transition-colors
          `,children:"Play Again"}),R.jsx("button",{onClick:T,className:`
            flex-1 py-3 bg-dark-700 hover:bg-dark-600
            text-white font-medium rounded-lg transition-colors
          `,children:"Change Tier"}),R.jsx("button",{onClick:g,className:`
            flex-1 py-3 bg-dark-800 hover:bg-dark-700 border border-dark-600
            text-dark-300 font-medium rounded-lg transition-colors
          `,children:"Exit"})]})]})}function nz({userNpub:t,userLevel:e,room:n,isCreating:i,isJoining:r,error:s,onCreateRoom:o,onJoinRoom:a,onSetReady:c,onLeaveRoom:h,onBack:m}){const[T,g]=G.useState("menu"),[w,O]=G.useState(1),[M,L]=G.useState(10),[x,k]=G.useState("");return n?R.jsx(iz,{room:n,userNpub:t,onSetReady:c,onLeaveRoom:h}):T==="menu"?R.jsxs("div",{className:"max-w-md mx-auto p-6",children:[R.jsxs(ge.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[R.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Multiplayer"}),R.jsx("p",{className:"text-dark-300",children:"Race against other players in real-time!"})]}),s&&R.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-red-500/20 border border-red-500/50 rounded-lg p-4 mb-6 text-red-300",children:s}),R.jsxs("div",{className:"space-y-4",children:[R.jsx(ge.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},onClick:()=>g("create"),className:"w-full py-4 bg-cyan-600 hover:bg-cyan-500 text-white font-bold text-lg rounded-lg transition-colors",children:"Create Room"}),R.jsx(ge.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},onClick:()=>g("join"),className:"w-full py-4 bg-dark-700 hover:bg-dark-600 text-white font-bold text-lg rounded-lg transition-colors border border-dark-500",children:"Join Room"}),R.jsx(ge.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},onClick:m,className:"w-full py-3 text-dark-300 hover:text-white transition-colors",children:"Back to Menu"})]})]}):T==="create"?R.jsxs("div",{className:"max-w-md mx-auto p-6",children:[R.jsx(ge.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-6",children:R.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Create Room"})}),s&&R.jsx("div",{className:"bg-red-500/20 border border-red-500/50 rounded-lg p-4 mb-6 text-red-300",children:s}),R.jsxs("div",{className:"mb-6",children:[R.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"Difficulty"}),R.jsx("div",{className:"grid grid-cols-2 gap-2",children:dl.map(D=>{const z=w===D.tier;return R.jsxs("button",{onClick:()=>O(D.tier),className:`
                    p-3 rounded-lg border-2 transition-all text-left
                    ${z?"border-cyan-500 bg-cyan-500/10":"border-dark-600 bg-dark-800 hover:border-dark-500"}
                  `,children:[R.jsx("div",{className:`font-bold ${z?"text-cyan-400":"text-white"}`,children:D.name}),R.jsxs("div",{className:"text-xs text-dark-400",children:[D.basePoints," pts"]})]},D.tier)})})]}),R.jsxs("div",{className:"mb-6",children:[R.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"Rounds"}),R.jsx("div",{className:"flex gap-2",children:[5,10,15,20].map(D=>R.jsx("button",{onClick:()=>L(D),className:`
                  flex-1 py-2 rounded-lg border-2 transition-all font-medium
                  ${M===D?"border-cyan-500 bg-cyan-500/10 text-cyan-400":"border-dark-600 bg-dark-800 text-white hover:border-dark-500"}
                `,children:D},D))})]}),R.jsxs("div",{className:"space-y-3",children:[R.jsx("button",{onClick:()=>o(w,M),disabled:i,className:"w-full py-4 bg-cyan-600 hover:bg-cyan-500 disabled:bg-dark-600 text-white font-bold text-lg rounded-lg transition-colors",children:i?"Creating...":"Create Room"}),R.jsx("button",{onClick:()=>g("menu"),className:"w-full py-3 text-dark-300 hover:text-white transition-colors",children:"Cancel"})]})]}):R.jsxs("div",{className:"max-w-md mx-auto p-6",children:[R.jsxs(ge.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-6",children:[R.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Join Room"}),R.jsx("p",{className:"text-dark-300",children:"Enter the 6-character room code"})]}),s&&R.jsx("div",{className:"bg-red-500/20 border border-red-500/50 rounded-lg p-4 mb-6 text-red-300",children:s}),R.jsx("div",{className:"mb-6",children:R.jsx("input",{type:"text",value:x,onChange:D=>k(D.target.value.toUpperCase().slice(0,6)),placeholder:"ABC123",className:"w-full text-center text-3xl font-mono tracking-widest py-4 bg-dark-800 border-2 border-dark-600 rounded-lg text-white focus:border-cyan-500 focus:outline-none",maxLength:6})}),R.jsxs("div",{className:"space-y-3",children:[R.jsx("button",{onClick:()=>a(x),disabled:r||x.length!==6,className:"w-full py-4 bg-cyan-600 hover:bg-cyan-500 disabled:bg-dark-600 text-white font-bold text-lg rounded-lg transition-colors",children:r?"Joining...":"Join Room"}),R.jsx("button",{onClick:()=>g("menu"),className:"w-full py-3 text-dark-300 hover:text-white transition-colors",children:"Cancel"})]})]})}function iz({room:t,userNpub:e,onSetReady:n,onLeaveRoom:i}){const r=Object.values(t.players),s=t.players[e],o=r.length>=2&&r.every(c=>c.isReady),a=dl.find(c=>c.tier===t.tier);return R.jsxs("div",{className:"max-w-md mx-auto p-6",children:[R.jsxs(ge.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-6",children:[R.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Waiting Room"}),R.jsxs("div",{className:"flex justify-center gap-2",children:[R.jsx("span",{className:"bg-dark-700 px-3 py-1 rounded-full text-sm text-dark-300",children:a.name}),R.jsxs("span",{className:"bg-dark-700 px-3 py-1 rounded-full text-sm text-dark-300",children:[t.totalRounds," rounds"]})]})]}),R.jsxs(ge.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},className:"bg-dark-800 rounded-lg p-4 mb-6 text-center",children:[R.jsx("div",{className:"text-sm text-dark-400 mb-1",children:"Room Code"}),R.jsx("div",{className:"text-4xl font-mono font-bold text-cyan-400 tracking-widest",children:t.roomCode}),R.jsx("div",{className:"text-xs text-dark-500 mt-2",children:"Share this code with friends to join"})]}),R.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-6",children:[R.jsxs("h2",{className:"text-lg font-semibold text-white mb-3",children:["Players (",r.length,"/8)"]}),R.jsx("div",{className:"space-y-2",children:r.map((c,h)=>R.jsx(rz,{player:c,isHost:c.npub===t.hostNpub,isYou:c.npub===e,index:h},c.npub))}),r.length<2&&R.jsx("div",{className:"mt-4 text-center text-dark-400 text-sm",children:"Waiting for at least one more player..."})]}),R.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"space-y-3",children:[R.jsx("button",{onClick:()=>n(!(s!=null&&s.isReady)),className:`
            w-full py-4 font-bold text-lg rounded-lg transition-colors
            ${s!=null&&s.isReady?"bg-green-600 hover:bg-green-500 text-white":"bg-dark-700 hover:bg-dark-600 text-white border border-dark-500"}
          `,children:s!=null&&s.isReady?"Ready!":"Click when Ready"}),o&&R.jsx("div",{className:"text-center text-green-400 animate-pulse",children:"All players ready! Starting game..."}),R.jsx("button",{onClick:i,className:"w-full py-3 text-dark-300 hover:text-white transition-colors",children:"Leave Room"})]})]})}function rz({player:t,isHost:e,isYou:n,index:i}){return R.jsxs(ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i*.05},className:`
        flex items-center justify-between p-3 rounded-lg
        ${n?"bg-cyan-500/10 border border-cyan-500/30":"bg-dark-800"}
      `,children:[R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx("div",{className:"w-8 h-8 rounded-full bg-dark-600 flex items-center justify-center text-lg",children:e?"":""}),R.jsxs("div",{children:[R.jsxs("div",{className:"font-medium text-white",children:[t.displayName||t.npub.slice(0,8)+"...",n&&R.jsx("span",{className:"text-cyan-400 ml-2",children:"(You)"})]}),e&&R.jsx("div",{className:"text-xs text-dark-400",children:"Host"})]})]}),R.jsx("div",{className:`
          w-3 h-3 rounded-full transition-colors
          ${t.isReady?"bg-green-500":"bg-dark-600"}
        `,title:t.isReady?"Ready":"Not ready"})]})}function sz({room:t,userNpub:e,lastAnswerResult:n,finalRankings:i,isHost:r,onStartRound:s,onSubmitAnswer:o,onAdvanceRound:a,onLeaveRoom:c}){return t.status==="countdown"?R.jsx(oz,{isHost:r,onStart:s}):t.status==="completed"||i?R.jsx(uz,{room:t,userNpub:e,finalRankings:i||[],onLeave:c}):R.jsx(az,{room:t,userNpub:e,lastAnswerResult:n,isHost:r,onSubmitAnswer:o,onAdvanceRound:a})}function oz({isHost:t,onStart:e}){const[n,i]=G.useState(3);return G.useEffect(()=>{if(n>0){const r=setTimeout(()=>i(n-1),1e3);return()=>clearTimeout(r)}else t&&e()},[n,t,e]),R.jsx("div",{className:"fixed inset-0 bg-dark-900 flex items-center justify-center",children:R.jsx(ge.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.5,opacity:0},className:"text-center",children:n>0?R.jsx("div",{className:"text-9xl font-bold text-cyan-400",children:n}):R.jsx("div",{className:"text-6xl font-bold text-green-400",children:"GO!"})},n)})}function az({room:t,userNpub:e,lastAnswerResult:n,isHost:i,onSubmitAnswer:r,onAdvanceRound:s}){var z;const[o,a]=G.useState(""),[c,h]=G.useState(!1),[m,T]=G.useState(!1),[g,w]=G.useState(0),O=G.useRef(null),M=dl.find(F=>F.tier===t.tier),L=Object.values(t.players).sort((F,$)=>$.score-F.score);G.useEffect(()=>{var F;a(""),h(!1),T(!1),w(0),(F=O.current)==null||F.focus()},[t.currentRound]),G.useEffect(()=>{if(!t.roundStartedAt||c)return;const F=t.roundStartedAt.toMillis(),$=setInterval(()=>{w(Date.now()-F)},100);return()=>clearInterval($)},[t.roundStartedAt,c]);const x=G.useCallback(async()=>{if(c||m||!o)return;const F=parseInt(o,10);if(!(isNaN(F)||F<0)){T(!0);try{await r(F),h(!0),i&&setTimeout(s,2e3)}catch{h(!0)}T(!1)}},[o,c,m,r,i,s]),k=G.useCallback(F=>{F.key==="Enter"&&x()},[x]),D=F=>F<1e3?`${F}ms`:`${(F/1e3).toFixed(1)}s`;return R.jsxs("div",{className:"min-h-screen bg-dark-900 p-4",children:[R.jsxs("div",{className:"max-w-4xl mx-auto mb-6",children:[R.jsxs("div",{className:"flex justify-between items-center text-dark-400",children:[R.jsxs("span",{children:["Round ",t.currentRound,"/",t.totalRounds]}),R.jsx("span",{children:M.name})]}),R.jsx("div",{className:"mt-2 text-center text-dark-400",children:D(g)})]}),R.jsxs("div",{className:"max-w-4xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6",children:[R.jsxs("div",{className:"lg:col-span-2",children:[R.jsx(ge.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-dark-800 rounded-xl p-8 mb-6 text-center",children:t.currentProblem?R.jsxs("div",{className:"text-4xl font-bold text-white",children:[t.currentProblem.displayText," = ?"]}):R.jsx("div",{className:"text-2xl text-dark-400",children:"Waiting for problem..."})},t.currentRound),c?R.jsx(lz,{result:n}):R.jsxs("div",{className:"flex gap-4",children:[R.jsx("input",{ref:O,type:"number",inputMode:"numeric",value:o,onChange:F=>a(F.target.value),onKeyDown:k,placeholder:"Your answer",className:"flex-1 text-center text-3xl font-bold py-4 bg-dark-800 border-2 border-dark-600 rounded-lg text-white focus:border-cyan-500 focus:outline-none",autoFocus:!0,disabled:c}),R.jsx("button",{onClick:x,disabled:!o||m,className:"px-8 py-4 bg-cyan-600 hover:bg-cyan-500 disabled:bg-dark-600 text-white font-bold text-xl rounded-lg transition-colors",children:m?"...":"Submit"})]})]}),R.jsxs("div",{className:"bg-dark-800 rounded-xl p-4",children:[R.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Scoreboard"}),R.jsx("div",{className:"space-y-2",children:L.map((F,$)=>R.jsxs("div",{className:`
                  flex items-center justify-between p-2 rounded-lg
                  ${F.npub===e?"bg-cyan-500/20":"bg-dark-700"}
                `,children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsxs("span",{className:"w-6 text-center text-dark-400",children:[$+1,"."]}),R.jsx("span",{className:`font-medium ${F.npub===e?"text-cyan-400":"text-white"}`,children:F.displayName||F.npub.slice(0,8)}),F.streak>=3&&R.jsxs("span",{className:"text-orange-400 text-sm",children:["",F.streak]})]}),R.jsx("span",{className:"font-bold text-white",children:F.score.toLocaleString()})]},F.npub))}),t.roundWinner&&R.jsx("div",{className:"mt-4 p-2 bg-green-500/20 rounded-lg text-center text-green-400 text-sm",children:t.roundWinner===e?"You were first! ":`${((z=t.players[t.roundWinner])==null?void 0:z.displayName)||"Someone"} answered first!`})]})]})]})}function lz({result:t}){return t?R.jsxs(ge.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:`
        text-center py-6 rounded-lg
        ${t.isCorrect?"bg-green-500/20":"bg-red-500/20"}
      `,children:[R.jsx("div",{className:`text-3xl font-bold ${t.isCorrect?"text-green-400":"text-red-400"}`,children:t.isCorrect?" Correct!":" Wrong"}),R.jsxs("div",{className:`text-2xl font-bold mt-2 ${t.points>=0?"text-green-400":"text-red-400"}`,children:[t.points>=0?"+":"",t.points," pts"]}),t.isFirst&&R.jsx("div",{className:"mt-2 text-yellow-400",children:" First to answer! +25% bonus"}),!t.isCorrect&&R.jsxs("div",{className:"mt-2 text-dark-400",children:["Answer: ",t.correctAnswer]})]}):R.jsx("div",{className:"text-center py-4 text-dark-400",children:"Waiting for result..."})}function uz({room:t,userNpub:e,finalRankings:n,onLeave:i}){const r=n.findIndex(o=>o.npub===e)+1,s=n.find(o=>o.npub===e);return R.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center p-4",children:R.jsxs(ge.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"max-w-md w-full bg-dark-800 rounded-xl p-6",children:[R.jsxs("div",{className:"text-center mb-6",children:[R.jsx("div",{className:"text-6xl mb-4",children:r===1?"":r===2?"":r===3?"":""}),R.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:r===1?"Victory!":`${r}${cz(r)} Place`}),s&&R.jsxs("div",{className:"text-4xl font-bold text-cyan-400",children:[s.score.toLocaleString()," pts"]})]}),R.jsxs("div",{className:"mb-6",children:[R.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"Final Standings"}),R.jsx("div",{className:"space-y-2",children:n.map((o,a)=>R.jsxs(ge.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:a*.1},className:`
                  flex items-center justify-between p-3 rounded-lg
                  ${o.npub===e?"bg-cyan-500/20 border border-cyan-500/30":"bg-dark-700"}
                `,children:[R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx("span",{className:"w-8 text-center text-2xl",children:a===0?"":a===1?"":a===2?"":`${a+1}.`}),R.jsxs("div",{children:[R.jsx("div",{className:`font-medium ${o.npub===e?"text-cyan-400":"text-white"}`,children:o.displayName||o.npub.slice(0,8)}),R.jsxs("div",{className:"text-xs text-dark-400",children:[o.correctAnswers,"/",t.totalRounds," correct"]})]})]}),R.jsx("span",{className:"font-bold text-white text-lg",children:o.score.toLocaleString()})]},o.npub))})]}),R.jsx("button",{onClick:i,className:"w-full py-4 bg-cyan-600 hover:bg-cyan-500 text-white font-bold text-lg rounded-lg transition-colors",children:"Back to Lobby"})]})})}function cz(t){const e=["th","st","nd","rd"],n=t%100;return e[(n-20)%10]||e[n]||e[0]}function hz(){var I;const{state:t,recordRaceGame:e,syncStatus:n}=fw(),{npub:i,connect:r,disconnect:s,isConnecting:o,error:a,hasExtension:c,extensionChecked:h}=cw(),[m,T]=G.useState("menu"),g=!!i,[w,O]=n3(),[M,L]=GL(i),x=t.user.level,k=t.user.totalXP,D=t.racingStats,z=Lf[x-1]||0,F=Lf[x]||z+1e3,$=k-z,S=F-z,p=Math.min(100,Math.round($/S*100)),y=G.useCallback(()=>{const _=O.getGameResult();_&&e(_)},[O,e]);G.useEffect(()=>{w.phase==="results"&&y()},[w.phase,y]);const A=w.phase==="results"&&w.score>((D==null?void 0:D.highScore)??0),b=G.useCallback(()=>{T("menu"),O.returnToLobby(),L.disconnect()},[O,L]);if(m==="menu")return R.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center p-4",children:R.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md w-full",children:[R.jsxs("div",{className:"text-center mb-8",children:[R.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Modular Arithmetic Racing"}),R.jsx("p",{className:"text-dark-300",children:"Race to compute remainders!"})]}),R.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 mb-6",children:[R.jsxs("div",{className:"mb-4",children:[R.jsxs("div",{className:"flex justify-between items-center mb-1",children:[R.jsxs("span",{className:"text-purple-400 font-bold",children:["Level ",x]}),R.jsxs("span",{className:"text-dark-400 text-sm",children:[$," / ",S," XP"]})]}),R.jsx("div",{className:"h-2 bg-dark-700 rounded-full overflow-hidden",children:R.jsx("div",{className:"h-full bg-purple-500 transition-all duration-300",style:{width:`${p}%`}})})]}),R.jsxs("div",{className:"grid grid-cols-4 gap-3 text-center",children:[R.jsxs("div",{children:[R.jsx("div",{className:"text-2xl font-bold text-purple-400",children:k.toLocaleString()}),R.jsx("div",{className:"text-sm text-dark-400",children:"XP"})]}),R.jsxs("div",{children:[R.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:(D==null?void 0:D.highScore.toLocaleString())??0}),R.jsx("div",{className:"text-sm text-dark-400",children:"High Score"})]}),R.jsxs("div",{children:[R.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:(D==null?void 0:D.gamesPlayed)??0}),R.jsx("div",{className:"text-sm text-dark-400",children:"Games"})]}),R.jsxs("div",{children:[R.jsx("div",{className:"text-2xl font-bold text-orange-400",children:(D==null?void 0:D.longestStreak)??0}),R.jsx("div",{className:"text-sm text-dark-400",children:"Best Streak"})]})]})]}),R.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"mb-6",children:g?R.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-3",children:[R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),R.jsx("span",{className:"text-green-400 text-sm font-medium",children:"Progress synced to cloud"})]}),R.jsx("button",{onClick:s,className:"text-dark-400 hover:text-white text-sm transition-colors",children:"Sign out"})]}),R.jsxs("div",{className:"text-xs text-dark-500 mt-1",children:[i==null?void 0:i.slice(0,16),"..."]})]}):R.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:[R.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[R.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),R.jsx("span",{className:"text-yellow-400 text-sm font-medium",children:"Progress not saved!"})]}),h&&!c?R.jsxs(R.Fragment,{children:[R.jsx("p",{className:"text-dark-400 text-xs mb-3",children:"Install a Nostr extension to save your scores."}),R.jsx("a",{href:"https://getalby.com/",target:"_blank",rel:"noopener noreferrer",className:"block w-full py-2 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-lg transition-colors text-sm text-center",children:"Get Alby Extension"}),R.jsx("p",{className:"text-dark-500 text-xs mt-2 text-center",children:"Or use nos2x, Flamingo, or any NIP-07 extension"})]}):R.jsxs(R.Fragment,{children:[R.jsx("p",{className:"text-dark-400 text-xs mb-3",children:"Sign in with Nostr to save your scores permanently."}),a&&R.jsx("p",{className:"text-red-400 text-xs mb-2",children:a}),R.jsx("button",{onClick:r,disabled:o||!h,className:"w-full py-2 bg-purple-600 hover:bg-purple-500 disabled:bg-dark-600 text-white font-bold rounded-lg transition-colors text-sm",children:h?o?"Connecting...":"Sign in with Nostr":"Checking..."})]})]})}),R.jsxs("div",{className:"space-y-4",children:[R.jsx(ge.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},onClick:()=>T("single"),className:"w-full py-4 bg-cyan-600 hover:bg-cyan-500 text-white font-bold text-xl rounded-lg transition-colors",children:"Single Player"}),R.jsxs(ge.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},onClick:()=>T("multi"),disabled:!i,className:"w-full py-4 bg-dark-700 hover:bg-dark-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold text-xl rounded-lg transition-colors border border-dark-500",children:["Multiplayer",!i&&R.jsx("span",{className:"block text-sm font-normal text-dark-400 mt-1",children:"Sign in to play online"})]})]})]})});if(m==="single")return R.jsxs("div",{className:"min-h-screen bg-dark-950",children:[w.phase==="lobby"&&R.jsxs(R.Fragment,{children:[R.jsx("button",{onClick:b,className:"absolute top-4 left-4 text-dark-400 hover:text-white transition-colors",children:" Back"}),R.jsx($L,{userLevel:x,racingStats:D,onStartGame:O.startGame})]}),w.phase==="countdown"&&R.jsx(WL,{onComplete:O.completeCountdown}),w.phase==="playing"&&w.currentProblem&&R.jsx(ez,{problem:w.currentProblem,tier:w.tier,roundNumber:w.currentRound,totalRounds:w.roundCount,score:w.score,streak:w.streak,onAnswer:O.submitAnswer,lastResult:w.lastRoundResult}),w.phase==="results"&&R.jsx(tz,{tier:w.tier,totalScore:w.score,correctAnswers:w.roundResults.filter(_=>_.isCorrect).length,incorrectAnswers:w.roundResults.filter(_=>!_.isCorrect).length,maxStreak:(()=>{let _=0,se=0;for(const pe of w.roundResults)pe.isCorrect?(se++,_=Math.max(_,se)):se=0;return _})(),fastAnswers:w.roundResults.filter(_=>_.isCorrect&&_.responseTimeMs<2e3).length,avgResponseTime:w.roundResults.length>0?Math.round(w.roundResults.reduce((_,se)=>_+se.responseTimeMs,0)/w.roundResults.length):0,xpEarned:((I=O.getFinalScore())==null?void 0:I.xpEarned)??0,isNewHighScore:A,previousHighScore:D==null?void 0:D.highScore,onPlayAgain:O.playAgain,onChangeTier:O.returnToLobby,onExit:b})]});if(m==="multi"&&i){const _=M.room,se=(_==null?void 0:_.hostNpub)===i;return!_||_.status==="waiting"?R.jsxs("div",{className:"min-h-screen bg-dark-950",children:[R.jsx("button",{onClick:b,className:"absolute top-4 left-4 text-dark-400 hover:text-white transition-colors z-10",children:" Back"}),R.jsx(nz,{userNpub:i,userLevel:x,room:_,isCreating:M.status==="creating",isJoining:M.status==="joining",error:M.error,onCreateRoom:L.createRoom,onJoinRoom:L.joinRoom,onSetReady:L.setReady,onLeaveRoom:L.leaveRoom,onBack:b})]}):R.jsx(sz,{room:_,userNpub:i,lastAnswerResult:M.lastAnswerResult,finalRankings:M.finalRankings,isHost:se,onStartRound:L.startRound,onSubmitAnswer:L.submitAnswer,onAdvanceRound:L.advanceRound,onLeaveRoom:b})}return R.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center",children:R.jsx("button",{onClick:b,className:"text-white hover:text-cyan-400",children:"Return to Menu"})})}function fz(){const[t,e]=G.useState(!1);return R.jsxs("div",{className:"min-h-screen bg-dark-950",children:[R.jsx(hz,{}),R.jsx(qP,{isOpen:t,onClose:()=>e(!1)}),R.jsx(GP,{onClick:()=>e(!t)}),R.jsx(HP,{})]})}function dz(){return R.jsx(_2,{children:R.jsx(PP,{children:R.jsx(jP,{children:R.jsx(fz,{})})})})}tC.createRoot(document.getElementById("root")).render(R.jsx(G.StrictMode,{children:R.jsx(dz,{})}));
