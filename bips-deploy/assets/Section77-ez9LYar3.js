import{j as e}from"./vendor-animation-CmxkKU9r.js";import"./vendor-react-DamxDR2H.js";import"./vendor-math-p018AHG0.js";import"./index-CsKt80eB.js";import{L as i,C as s,D as a,E as t}from"./Callout-DTLGvo9K.js";import"./vendor-firebase-functions-DDqfDrvm.js";import"./vendor-firebase-core-CzRQL6VN.js";import"./vendor-firebase-auth-C4l3lITM.js";import"./quizMap-C7tZlcUA.js";function p(){return e.jsxs(i,{sectionId:77,children:[e.jsx("h2",{className:"text-2xl font-bold text-dark-100 mb-6",children:"BIP-50: March 2013 Chain Fork"}),e.jsx("p",{className:"mb-4",children:"BIP-50 documents the accidental hard fork that occurred on March 11, 2013, when a database upgrade caused nodes to have inconsistent validation rules. This incident provides crucial lessons about consensus changes and network coordination."}),e.jsx(s,{type:"warning",title:"Historical Incident",children:e.jsx("p",{children:"This was one of Bitcoin's most serious incidents—a chain split lasting several hours with significant double-spend risk. Understanding it helps prevent similar issues."})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"What Happened"}),e.jsx("p",{className:"mb-4",children:"The incident unfolded rapidly:"}),e.jsx("div",{className:"bg-dark-800/50 rounded-xl p-6 border border-dark-700/50 mb-6",children:e.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-dark-300",children:[e.jsx("li",{children:"Bitcoin Core 0.8.0 released with new database (LevelDB replacing BDB)"}),e.jsx("li",{children:"Block 225,430 had more transaction inputs than BDB could handle"}),e.jsx("li",{children:"0.8.0 nodes (LevelDB) accepted the block"}),e.jsx("li",{children:"Pre-0.8.0 nodes (BDB) rejected it"}),e.jsx("li",{children:"Network split into two chains"})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"The Technical Cause"}),e.jsx(a,{title:"BDB Lock Limit",children:e.jsx("p",{children:"Berkeley DB (BDB) had a configurable limit on simultaneous database locks. The default was too low for blocks with many inputs. LevelDB had no such limit."})}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-5 font-mono text-sm mb-6",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# The problematic block:"}),e.jsx("p",{className:"text-dark-300",children:"Height: 225,430"}),e.jsx("p",{className:"text-dark-300",children:"Transaction inputs: ~5000+ (unusually many)"}),e.jsx("p",{className:"text-dark-400 mt-3 mb-2",children:"# BDB behavior:"}),e.jsx("p",{className:"text-rose-400",children:'Exceeded lock limit → "Database error" → Reject block'}),e.jsx("p",{className:"text-dark-400 mt-2 mb-2",children:"# LevelDB behavior:"}),e.jsx("p",{className:"text-emerald-400",children:"No lock limit → Accept block normally"})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"The Chain Split"}),e.jsx(t,{title:"Divergent Chains",children:e.jsxs("div",{className:"space-y-3 font-mono text-xs",children:[e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# Common history:"}),e.jsx("p",{className:"text-dark-300",children:"... → 225,428 → 225,429 → ?"})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# 0.8.0 chain (LevelDB):"}),e.jsx("p",{className:"text-emerald-400",children:"... → 225,429 → 225,430 → 225,431 → ..."}),e.jsx("p",{className:"text-dark-500",children:'Continued building on the "big" block'})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# Pre-0.8.0 chain (BDB):"}),e.jsx("p",{className:"text-rose-400",children:"... → 225,429 → 225,430' → 225,431' → ..."}),e.jsx("p",{className:"text-dark-500",children:"Built on a different block at height 225,430"})]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"The Resolution"}),e.jsx("p",{className:"mb-4",children:"Developers coordinated an emergency response:"}),e.jsx("div",{className:"bg-dark-800/50 rounded-xl p-6 border border-dark-700/50 mb-6",children:e.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-dark-300",children:[e.jsx("li",{children:"Identified the cause (BDB lock limit)"}),e.jsx("li",{children:"Decided to roll back to pre-0.8.0 chain (more widely deployed)"}),e.jsx("li",{children:"Contacted major miners to switch to 0.7.2"}),e.jsx("li",{children:"BTCGuild (large pool) voluntarily reorged to shorter chain"}),e.jsx("li",{children:"Pre-0.8.0 chain became longest, 0.8.0 nodes reorganized"})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Double Spend Risk"}),e.jsxs(s,{type:"warning",title:"Real Danger",children:[e.jsx("p",{children:"During the split, transactions confirmed on one chain weren't on the other. An attacker could:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"Send BTC to merchant (confirmed on chain A)"}),e.jsx("li",{children:"Spend same BTC elsewhere (confirmed on chain B)"}),e.jsx("li",{children:"When chains merge, one transaction becomes invalid"})]}),e.jsx("p",{className:"mt-2",children:"OKPay reportedly lost ~$10,000 to a double spend during this incident."})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Lessons Learned"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-2",children:"Database Changes = Consensus Changes"}),e.jsx("p",{className:"text-sm text-dark-300",children:'Even "internal" changes like database backends can affect consensus if they change what blocks are accepted.'})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-2",children:"Undocumented Limits are Consensus Rules"}),e.jsx("p",{className:"text-sm text-dark-300",children:"BDB's lock limit wasn't a Bitcoin rule, but it effectively became one because nodes enforced it."})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-2",children:"Coordination Mechanisms Critical"}),e.jsx("p",{className:"text-sm text-dark-300",children:"Quick resolution required contacting miners directly. Modern alert systems and communication channels help."})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-2",children:"Exchanges Should Increase Confirmations"}),e.jsx("p",{className:"text-sm text-dark-300",children:"During network instability, requiring more confirmations reduces double-spend risk."})]})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Aftermath"}),e.jsx("p",{className:"mb-4",children:"Changes made after the incident:"}),e.jsx("div",{className:"bg-dark-800/50 rounded-xl p-6 border border-dark-700/50 mb-6",children:e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-dark-300",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"0.8.1 release:"})," Intentionally limited block complexity to match BDB"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Gradual migration:"})," Careful transition as network upgraded"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"BIP process:"})," Highlighted need for careful consensus change review"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Alert system:"})," Improved emergency communication"]})]})}),e.jsx(s,{type:"success",title:"Learning from Failure",children:e.jsx("p",{children:"The March 2013 incident demonstrated Bitcoin's resilience—the community coordinated to resolve the issue within hours. More importantly, it taught that ANY change to validation logic is a potential consensus change, leading to more careful review processes."})})]})}export{p as default};
