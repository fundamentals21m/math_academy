import{j as e}from"./vendor-animation-CmxkKU9r.js";import"./vendor-react-DamxDR2H.js";import"./vendor-math-p018AHG0.js";import"./index-CsKt80eB.js";import{L as t,C as s,D as a,E as i}from"./Callout-DTLGvo9K.js";import"./vendor-firebase-functions-DDqfDrvm.js";import"./vendor-firebase-core-CzRQL6VN.js";import"./vendor-firebase-auth-C4l3lITM.js";import"./quizMap-C7tZlcUA.js";function p(){return e.jsxs(t,{sectionId:85,children:[e.jsx("h2",{className:"text-2xl font-bold text-dark-100 mb-6",children:"Lightning Network Overview"}),e.jsx("p",{className:"mb-4",children:"The Lightning Network is Bitcoin's primary Layer 2 scaling solution, enabling instant, low-cost payments through a network of payment channels. While not defined by a single BIP, it builds on numerous Bitcoin improvements."}),e.jsx(s,{type:"info",title:"BOLTs, Not BIPs",children:e.jsx("p",{children:"Lightning is specified by BOLTs (Basis of Lightning Technology), a separate specification process. However, it relies heavily on BIPs including SegWit (BIP-141), HTLCs (BIP-199), and various signature schemes."})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Core Concept"}),e.jsx(a,{title:"Payment Channel",children:e.jsx("p",{children:"A two-party agreement backed by on-chain Bitcoin that enables unlimited off-chain transactions. Only opening and closing transactions require blockchain confirmation."})}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-5 font-mono text-sm mb-6",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# Lightning channel lifecycle:"}),e.jsx("p",{className:"text-dark-300",children:"1. Open: Fund 2-of-2 multisig on-chain"}),e.jsx("p",{className:"text-dark-300",children:'2. Transact: Exchange signed "commitment" txs'}),e.jsx("p",{className:"text-dark-300",children:"3. Route: Payments hop across channels"}),e.jsx("p",{className:"text-dark-300",children:"4. Close: Broadcast final state to chain"}),e.jsx("p",{className:"text-dark-500 mt-3",children:"Thousands of payments, only 2 on-chain transactions"})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Channel Architecture"}),e.jsx(i,{title:"Commitment Transaction Structure",children:e.jsxs("div",{className:"space-y-3 font-mono text-xs",children:[e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# Funding transaction (on-chain):"}),e.jsx("p",{className:"text-dark-300",children:"Input: Alice's UTXO(s)"}),e.jsx("p",{className:"text-dark-300",children:"Output: 2-of-2 multisig(Alice, Bob)"})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# Commitment transaction (off-chain):"}),e.jsx("p",{className:"text-dark-300",children:"Input: Funding tx output"}),e.jsx("p",{className:"text-dark-300",children:"Outputs:"}),e.jsx("p",{className:"text-dark-300 ml-4",children:"- Alice's balance (immediately spendable by Alice)"}),e.jsx("p",{className:"text-dark-300 ml-4",children:"- Bob's balance (timelocked OR revocation key)"})]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Revocation Mechanism"}),e.jsx("p",{className:"mb-4",children:"Old channel states must be revocable to prevent fraud:"}),e.jsx("div",{className:"bg-dark-800/50 rounded-xl p-6 border border-dark-700/50 mb-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-amber-400 font-bold",children:"Commitment Transaction Asymmetry"}),e.jsx("p",{className:"text-sm text-dark-300",children:"Each party holds a different version where their own output has a timelock + revocation condition."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-amber-400 font-bold",children:"Revocation Keys"}),e.jsx("p",{className:"text-sm text-dark-300",children:"When updating state, parties exchange revocation secrets for old commitments. Publishing old state allows counterparty to claim all funds."})]})]})}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-5 font-mono text-sm mb-6",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# Bob's output in Alice's commitment:"}),e.jsx("p",{className:"text-dark-300",children:"IF"}),e.jsx("p",{className:"text-dark-300 ml-4",children:"Alice_revocation_key"}),e.jsx("p",{className:"text-dark-300",children:"ELSE"}),e.jsx("p",{className:"text-dark-300 ml-4",children:"to_self_delay CSV AND Bob_delayed_key"}),e.jsx("p",{className:"text-dark-300",children:"ENDIF"}),e.jsx("p",{className:"text-dark-500 mt-2",children:"If Alice broadcasts old state, Bob uses revocation key"})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Multi-Hop Routing"}),e.jsx("p",{className:"mb-4",children:"Lightning's power comes from routing payments across multiple channels:"}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-5 font-mono text-sm mb-6",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# Payment routing with HTLCs:"}),e.jsx("p",{className:"text-dark-300",children:"Alice wants to pay Dave 10,000 sats"}),e.jsx("p",{className:"text-dark-300",children:"Path: Alice → Bob → Carol → Dave"}),e.jsx("p",{className:"text-dark-400 mt-3 mb-2",children:"# HTLC chain:"}),e.jsx("p",{className:"text-dark-300",children:"Alice→Bob: HTLC 10,300 sats (fees)"}),e.jsx("p",{className:"text-dark-300",children:"Bob→Carol: HTLC 10,150 sats"}),e.jsx("p",{className:"text-dark-300",children:"Carol→Dave: HTLC 10,000 sats"}),e.jsx("p",{className:"text-amber-400 mt-2",children:"Dave reveals preimage → all HTLCs settle atomically"})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Channel States"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm mb-6",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-dark-700",children:[e.jsx("th",{className:"text-left py-3 text-dark-300",children:"State"}),e.jsx("th",{className:"text-left py-3 text-dark-300",children:"Description"})]})}),e.jsxs("tbody",{className:"text-dark-400",children:[e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-3 font-mono text-amber-400",children:"PENDING_OPEN"}),e.jsx("td",{children:"Funding tx broadcast, awaiting confirmations"})]}),e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-3 font-mono text-amber-400",children:"OPEN"}),e.jsx("td",{children:"Channel active, can route payments"})]}),e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-3 font-mono text-amber-400",children:"PENDING_CLOSE"}),e.jsx("td",{children:"Closing tx broadcast, awaiting confirmation"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-3 font-mono text-amber-400",children:"CLOSED"}),e.jsx("td",{children:"Funds returned to respective parties"})]})]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Closing Channels"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 border border-emerald-500/30",children:[e.jsx("p",{className:"text-emerald-400 font-bold mb-2",children:"Cooperative Close"}),e.jsxs("ul",{className:"text-sm text-dark-300 space-y-1",children:[e.jsx("li",{children:"Both parties sign closing tx"}),e.jsx("li",{children:"No timelocks needed"}),e.jsx("li",{children:"Lowest fees, fastest"})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 border border-amber-500/30",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-2",children:"Force Close"}),e.jsxs("ul",{className:"text-sm text-dark-300 space-y-1",children:[e.jsx("li",{children:"Broadcast commitment tx"}),e.jsx("li",{children:"Timelock delay for initiator"}),e.jsx("li",{children:"Used when peer unresponsive"})]})]})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"BIP Dependencies"}),e.jsx(s,{type:"info",title:"Required Bitcoin Features",children:e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"BIP-141 SegWit:"})," Fixes malleability for commitment txs"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"BIP-68/112 CSV:"})," Relative timelocks for revocation"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"BIP-65 CLTV:"})," Absolute timelocks for HTLCs"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"BIP-199 HTLCs:"})," Atomic multi-hop payments"]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Network Statistics"}),e.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-6 border border-dark-700/50 mb-6",children:[e.jsx("p",{className:"text-dark-400 mb-3",children:"Lightning Network capabilities:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-dark-300",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Capacity:"})," Thousands of BTC in channels"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Nodes:"})," Tens of thousands active nodes"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Speed:"})," Sub-second payments"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Cost:"})," Typically <1 satoshi per hop"]})]})]}),e.jsx(s,{type:"success",title:"Bitcoin's Scaling Solution",children:e.jsx("p",{children:"Lightning Network demonstrates that Bitcoin can scale to millions of transactions per second while preserving its security model. By moving most transactions off-chain and settling only when necessary, Lightning transforms Bitcoin from digital gold into digital cash."})})]})}export{p as default};
