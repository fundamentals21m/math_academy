import{j as e}from"./vendor-animation-CmxkKU9r.js";import"./vendor-react-DamxDR2H.js";import"./vendor-math-p018AHG0.js";import"./index-CsKt80eB.js";import{L as t,C as s,D as r,E as i}from"./Callout-DTLGvo9K.js";import"./vendor-firebase-functions-DDqfDrvm.js";import"./vendor-firebase-core-CzRQL6VN.js";import"./vendor-firebase-auth-C4l3lITM.js";import"./quizMap-C7tZlcUA.js";function p(){return e.jsxs(t,{sectionId:28,children:[e.jsx("h2",{className:"text-2xl font-bold text-dark-100 mb-6",children:"Structure for Multisignature HD Wallets"}),e.jsx("p",{className:"mb-4",children:"BIP-45 defines a derivation path structure for HD wallets used in multi-party multisig setups. It enables multiple cosigners to share extended public keys and collaboratively generate addresses without exposing private keys."}),e.jsx(s,{type:"info",title:"Cosigner Coordination",children:e.jsx("p",{children:"BIP-45 addresses a key challenge: how do multiple parties agree on which addresses to use? By defining a standard structure and sorting rule, all cosigners can independently derive the same addresses."})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"The Multisig Challenge"}),e.jsx("p",{className:"mb-4",children:"Multi-party multisig introduces unique coordination problems:"}),e.jsx("div",{className:"bg-dark-800/50 rounded-xl p-6 border border-dark-700/50 mb-6",children:e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-dark-300",children:[e.jsx("li",{children:"Each party has their own HD wallet with different keys"}),e.jsx("li",{children:"Addresses require public keys from all parties"}),e.jsx("li",{children:"Keys must be combined in a consistent order"}),e.jsx("li",{children:"New addresses must be derivable by all parties independently"})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"BIP-45 Path Structure"}),e.jsxs(r,{title:"BIP-45 Derivation Path",children:[e.jsx("div",{className:"font-mono text-lg text-amber-400 mb-4",children:"m / purpose' / cosigner_index / change / address_index"}),e.jsxs("div",{className:"space-y-2 text-dark-300",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-amber-400 font-mono",children:"purpose'"})," — Always 45'"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-amber-400 font-mono",children:"cosigner_index"})," — Position of this cosigner (sorted)"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-amber-400 font-mono",children:"change"})," — 0 for external, 1 for internal"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-amber-400 font-mono",children:"address_index"})," — Sequential address number"]})]})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Cosigner Index"}),e.jsx("p",{className:"mb-4",children:"Each cosigner's position is determined by sorting extended public keys lexicographically:"}),e.jsx(i,{title:"Cosigner Ordering",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-dark-400",children:"For a 2-of-3 multisig with xpubs A, B, C:"}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 font-mono text-xs",children:[e.jsx("p",{className:"text-dark-400 mb-1",children:"# After lexicographic sorting:"}),e.jsxs("p",{className:"text-dark-300",children:["xpub_A: ",e.jsx("span",{className:"text-amber-400",children:"cosigner_index = 0"})]}),e.jsxs("p",{className:"text-dark-300",children:["xpub_B: ",e.jsx("span",{className:"text-amber-400",children:"cosigner_index = 1"})]}),e.jsxs("p",{className:"text-dark-300",children:["xpub_C: ",e.jsx("span",{className:"text-amber-400",children:"cosigner_index = 2"})]})]}),e.jsx("p",{className:"text-dark-500 text-sm",children:"All parties sort the same way → same indices → same addresses"})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Key Exchange Process"}),e.jsx("p",{className:"mb-4",children:"Setting up a BIP-45 multisig wallet involves these steps:"}),e.jsx("div",{className:"bg-dark-800 rounded-lg p-5 mb-6",children:e.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-dark-300",children:[e.jsxs("li",{children:["Each cosigner generates their own BIP-32 seed and derives:",e.jsx("br",{}),e.jsx("span",{className:"font-mono text-amber-400 ml-6",children:"m/45'"})," (the purpose-level key)"]}),e.jsx("li",{children:"Each cosigner exports their extended public key at m/45'"}),e.jsx("li",{children:"All cosigners exchange their xpubs securely"}),e.jsx("li",{children:"Each cosigner stores all xpubs and sorts them lexicographically"}),e.jsx("li",{children:"Addresses are generated using keys from all xpubs at matching indices"})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Address Generation"}),e.jsx("p",{className:"mb-4",children:"To generate a multisig address at index N:"}),e.jsx(i,{title:"Deriving a 2-of-3 Address",children:e.jsxs("div",{className:"space-y-3 font-mono text-xs",children:[e.jsx("p",{className:"text-dark-400",children:"# For address index 0, external chain:"}),e.jsxs("div",{className:"space-y-1 text-dark-300",children:[e.jsx("p",{children:"Cosigner 0: m/45'/0/0/0 → pubkey_0"}),e.jsx("p",{children:"Cosigner 1: m/45'/1/0/0 → pubkey_1"}),e.jsx("p",{children:"Cosigner 2: m/45'/2/0/0 → pubkey_2"})]}),e.jsx("p",{className:"text-dark-400 mt-2",children:"# Create multisig script:"}),e.jsx("p",{className:"text-amber-400",children:"OP_2 <pubkey_0> <pubkey_1> <pubkey_2> OP_3 OP_CHECKMULTISIG"}),e.jsx("p",{className:"text-dark-400 mt-2",children:"# P2SH address:"}),e.jsx("p",{className:"text-emerald-400",children:"3QJmV3qfvL9SuYo34YihAf3sRCW3qSinyC"})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Why Non-Hardened Derivation?"}),e.jsx("p",{className:"mb-4",children:"Unlike BIP-44, BIP-45 uses non-hardened derivation for cosigner branches:"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 border border-emerald-500/30",children:[e.jsx("p",{className:"text-emerald-400 font-bold mb-2",children:"✓ Benefits"}),e.jsxs("ul",{className:"text-sm text-dark-300 space-y-1",children:[e.jsx("li",{children:"Watch-only wallets possible"}),e.jsx("li",{children:"Each party shares only xpub"}),e.jsx("li",{children:"Can verify addresses without private keys"})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 border border-amber-500/30",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-2",children:"⚠ Trade-offs"}),e.jsxs("ul",{className:"text-sm text-dark-300 space-y-1",children:[e.jsx("li",{children:"Weaker key isolation"}),e.jsx("li",{children:"Leaked child key + xpub = compromised branch"}),e.jsx("li",{children:"More trust in cosigner security"})]})]})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Limitations"}),e.jsxs(s,{type:"warning",title:"Practical Limitations",children:[e.jsx("p",{children:"BIP-45 has seen limited adoption due to several challenges:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"Only supports P2SH multisig (no native SegWit)"}),e.jsx("li",{children:"No standard for different script types (P2WSH, etc.)"}),e.jsx("li",{children:"Key sorting can be confusing for implementation"}),e.jsx("li",{children:"BIP-48 and output descriptors are often preferred today"})]})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Modern Alternatives"}),e.jsx("p",{className:"mb-4",children:"More recent standards have addressed BIP-45's limitations:"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-1",children:"BIP-48"}),e.jsx("p",{className:"text-sm text-dark-300",children:"Extends the concept with a script_type field, supporting P2SH-P2WSH, P2WSH, and other script types."})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-1",children:"Output Descriptors (BIP-380+)"}),e.jsx("p",{className:"text-sm text-dark-300",children:"A more flexible approach that describes complete spending conditions, including multisig with arbitrary derivation paths."})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-1",children:"BIP-129 (BSMS)"}),e.jsx("p",{className:"text-sm text-dark-300",children:"Bitcoin Secure Multisig Setup—a complete protocol for coordinating multisig wallet creation across devices."})]})]}),e.jsx(s,{type:"success",title:"Historical Significance",children:e.jsx("p",{children:"While BIP-45 isn't the dominant multisig standard today, it established important principles: deterministic sorting for consistent address generation, separation of cosigner branches, and watch-only capability for multi-party setups. These concepts carry forward into modern multisig tools."})})]})}export{p as default};
