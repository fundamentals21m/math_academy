import{j as e}from"./vendor-animation-CmxkKU9r.js";import"./vendor-react-DamxDR2H.js";import"./vendor-math-p018AHG0.js";import"./index-BjhgI7Zp.js";import{L as a,C as s,D as t,E as r}from"./Callout-Bm0ChKkk.js";import"./vendor-firebase-functions-DDqfDrvm.js";import"./vendor-firebase-core-CzRQL6VN.js";import"./vendor-firebase-auth-C4l3lITM.js";import"./quizMap-C7tZlcUA.js";function p(){return e.jsxs(a,{sectionId:34,children:[e.jsx("h2",{className:"text-2xl font-bold text-dark-100 mb-6",children:"Output Script Descriptors General Operation"}),e.jsxs("p",{className:"mb-4",children:["BIP-380 introduces ",e.jsx("strong",{children:"output script descriptors"}),'—a language for precisely describing which scripts and addresses a wallet can produce. Descriptors solve the "what can this key spend?" problem by encoding complete spending policy information.']}),e.jsx(s,{type:"info",title:"Beyond Derivation Paths",children:e.jsx("p",{children:"Traditional wallet backups (seed + derivation path) can't describe complex scripts like multisig or timelocks. Descriptors capture the full picture: keys, scripts, derivation paths, and how they combine."})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"The Backup Problem"}),e.jsx("p",{className:"mb-4",children:"Consider what you need to recover funds:"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 border border-rose-500/30",children:[e.jsx("p",{className:"text-rose-400 font-bold mb-2",children:"Traditional Backup"}),e.jsxs("ul",{className:"text-sm text-dark-300 space-y-1",children:[e.jsx("li",{children:"Seed phrase ✓"}),e.jsx("li",{children:"Derivation path ✓"}),e.jsx("li",{children:"Script type? (P2PKH, P2WPKH, ...)"}),e.jsx("li",{children:"Multisig config? (M, N, other keys)"}),e.jsx("li",{children:"Timelock conditions?"})]}),e.jsx("p",{className:"text-rose-400 text-xs mt-2",children:"Missing pieces = lost funds"})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 border border-emerald-500/30",children:[e.jsx("p",{className:"text-emerald-400 font-bold mb-2",children:"Descriptor Backup"}),e.jsx("p",{className:"text-sm text-dark-300",children:"One string encodes everything needed to reconstruct all addresses and spending conditions."}),e.jsx("p",{className:"text-emerald-400 text-xs mt-2",children:"Complete and unambiguous"})]})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Descriptor Syntax"}),e.jsxs(t,{title:"Basic Structure",children:[e.jsx("p",{children:"A descriptor has this general form:"}),e.jsx("div",{className:"font-mono text-lg text-amber-400 mt-3",children:"SCRIPT(KEY)#checksum"}),e.jsxs("ul",{className:"list-disc list-inside mt-3 space-y-1 text-dark-300",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"SCRIPT:"})," The output type (pkh, wpkh, sh, wsh, tr, ...)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"KEY:"})," Public key, xpub with derivation, or nested descriptor"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"#checksum:"})," 8-character error-detection code"]})]})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Script Types"}),e.jsx(r,{title:"Common Descriptor Patterns",children:e.jsxs("div",{className:"space-y-3 font-mono text-xs",children:[e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-dark-400 mb-1",children:"# P2PKH (legacy)"}),e.jsx("p",{className:"text-amber-400",children:"pkh(xpub.../44h/0h/0h/0/*)"})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-dark-400 mb-1",children:"# P2WPKH (native SegWit)"}),e.jsx("p",{className:"text-amber-400",children:"wpkh(xpub.../84h/0h/0h/0/*)"})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-dark-400 mb-1",children:"# P2SH-P2WPKH (nested SegWit)"}),e.jsx("p",{className:"text-amber-400",children:"sh(wpkh(xpub.../49h/0h/0h/0/*))"})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-dark-400 mb-1",children:"# P2TR (Taproot)"}),e.jsx("p",{className:"text-amber-400",children:"tr(xpub.../86h/0h/0h/0/*)"})]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Key Expressions"}),e.jsx("p",{className:"mb-4",children:"Keys in descriptors can take several forms:"}),e.jsx("div",{className:"bg-dark-800 rounded-lg p-5 font-mono text-sm mb-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-dark-400",children:"# Literal public key"}),e.jsx("p",{className:"text-dark-300",children:"wpkh(02c6047f...)"}),e.jsx("p",{className:"text-dark-400 mt-3",children:"# Extended key with derivation"}),e.jsx("p",{className:"text-dark-300",children:"wpkh(xpub.../0/*)"}),e.jsx("p",{className:"text-dark-400 mt-3",children:"# With key origin (fingerprint + path)"}),e.jsx("p",{className:"text-amber-400",children:"wpkh([d34db33f/84h/0h/0h]xpub.../0/*)"})]})}),e.jsxs(t,{title:"Key Origin Info",children:[e.jsx("p",{children:"The bracketed prefix provides crucial backup information:"}),e.jsx("div",{className:"font-mono text-sm mt-2",children:e.jsx("span",{className:"text-amber-400",children:"[d34db33f/84h/0h/0h]"})}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1 text-dark-300",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"d34db33f:"})," Master key fingerprint (identifies the seed)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"/84h/0h/0h:"})," Derivation from master to this xpub"]})]})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Wildcards and Ranges"}),e.jsx("p",{className:"mb-4",children:"Descriptors support patterns for generating multiple addresses:"}),e.jsx(r,{title:"Derivation Patterns",children:e.jsxs("div",{className:"space-y-3 font-mono text-sm",children:[e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-dark-400 mb-1",children:"# Single address"}),e.jsx("p",{className:"text-dark-300",children:"wpkh(xpub.../0/0)"})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-dark-400 mb-1",children:"# Wildcard (all indices)"}),e.jsx("p",{className:"text-amber-400",children:"wpkh(xpub.../0/*)"})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-dark-400 mb-1",children:"# Range"}),e.jsx("p",{className:"text-dark-300",children:"wpkh(xpub.../0/*) with range [0,1000]"})]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Checksums"}),e.jsx("p",{className:"mb-4",children:"Every descriptor has an 8-character checksum:"}),e.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-6 border border-dark-700/50 mb-6",children:[e.jsxs("p",{className:"font-mono text-amber-400 break-all",children:["wpkh([d34db33f/84h/0h/0h]xpub6ERApfZwUNrhLCkDt...)#",e.jsx("span",{className:"text-emerald-400",children:"2qsndvp8"})]}),e.jsx("p",{className:"text-dark-500 text-sm mt-3",children:"The checksum detects transcription errors and verifies the descriptor wasn't corrupted during storage or transmission."})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Wallet Uses"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-2",children:"Import/Export"}),e.jsx("p",{className:"text-sm text-dark-300",children:"Move wallet configurations between software without losing information about script types or derivation paths."})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-2",children:"Watch-Only Wallets"}),e.jsx("p",{className:"text-sm text-dark-300",children:"Create a watch-only wallet from an xpub descriptor. The wallet knows exactly which scripts to monitor without private keys."})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-2",children:"Backup Documentation"}),e.jsx("p",{className:"text-sm text-dark-300",children:"Store the public descriptor alongside your seed backup. Even if wallet software disappears, funds are recoverable."})]})]}),e.jsx(s,{type:"warning",title:"Private vs Public",children:e.jsx("p",{children:"Descriptors can contain either private keys (for signing) or public keys (for watch-only). Never share private descriptors! Use xpub versions for backups stored in less secure locations."})}),e.jsx(s,{type:"success",title:"Core Wallet Integration",children:e.jsx("p",{children:"Bitcoin Core has fully adopted descriptors as its native wallet format. Commands like `importdescriptors` and `listdescriptors` make it easy to manage complex wallet configurations with precision."})})]})}export{p as default};
