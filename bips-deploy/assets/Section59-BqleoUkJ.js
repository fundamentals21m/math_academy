import{j as e}from"./vendor-animation-CmxkKU9r.js";import"./vendor-react-DamxDR2H.js";import"./vendor-math-p018AHG0.js";import"./index-BjhgI7Zp.js";import{L as t,C as s,D as r,E as a}from"./Callout-Bm0ChKkk.js";import"./vendor-firebase-functions-DDqfDrvm.js";import"./vendor-firebase-core-CzRQL6VN.js";import"./vendor-firebase-auth-C4l3lITM.js";import"./quizMap-C7tZlcUA.js";function p(){return e.jsxs(t,{sectionId:59,children:[e.jsx("h2",{className:"text-2xl font-bold text-dark-100 mb-6",children:"BIP-14: Protocol Version and User Agent"}),e.jsx("p",{className:"mb-4",children:"BIP-14 standardizes how Bitcoin nodes identify themselves to peers using version messages and user agent strings. This enables network monitoring, debugging, and ensuring protocol compatibility."}),e.jsx(s,{type:"info",title:"Network Diagnostics",children:e.jsx("p",{children:"User agent strings help researchers understand network composition—what software versions are running, what features are supported, and how diverse the network is."})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Version Message"}),e.jsx(r,{title:"Version Handshake",children:e.jsx("p",{children:"When two Bitcoin nodes connect, they exchange version messages containing protocol version, services, timestamp, addresses, and user agent. This handshake establishes compatibility before further communication."})}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-5 font-mono text-sm mb-6",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# Version message fields:"}),e.jsx("p",{className:"text-dark-300",children:"version: 70015  # Protocol version"}),e.jsx("p",{className:"text-dark-300",children:"services: 0x0409  # Service flags"}),e.jsx("p",{className:"text-dark-300",children:"timestamp: 1609459200"}),e.jsx("p",{className:"text-dark-300",children:"addr_recv: peer's address"}),e.jsx("p",{className:"text-dark-300",children:"addr_from: our address"}),e.jsx("p",{className:"text-dark-300",children:"nonce: random u64"}),e.jsx("p",{className:"text-amber-400",children:'user_agent: "/Satoshi:25.0.0/"'}),e.jsx("p",{className:"text-dark-300",children:"start_height: 820000"}),e.jsx("p",{className:"text-dark-300",children:"relay: true"})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"User Agent Format"}),e.jsx("p",{className:"mb-4",children:"BIP-14 defines a standardized user agent string format:"}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-5 font-mono text-sm mb-6",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# General format:"}),e.jsx("p",{className:"text-amber-400",children:"/Name:Version/Name:Version/.../"}),e.jsx("p",{className:"text-dark-400 mt-4 mb-2",children:"# Examples:"}),e.jsx("p",{className:"text-dark-300",children:"/Satoshi:25.0.0/"}),e.jsx("p",{className:"text-dark-300",children:"/Satoshi:24.0.1/btcwire:0.5.0/"}),e.jsx("p",{className:"text-dark-300",children:"/bitcoinj:0.15.10/"}),e.jsx("p",{className:"text-dark-300",children:"/Bitcoin ABC:0.29.0/"})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Common User Agents"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm mb-6",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-dark-700",children:[e.jsx("th",{className:"text-left py-3 text-dark-300",children:"Software"}),e.jsx("th",{className:"text-left py-3 text-dark-300",children:"User Agent Pattern"})]})}),e.jsxs("tbody",{className:"text-dark-400",children:[e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-3",children:"Bitcoin Core"}),e.jsx("td",{className:"font-mono text-xs",children:"/Satoshi:XX.X.X/"})]}),e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-3",children:"btcd"}),e.jsx("td",{className:"font-mono text-xs",children:"/btcwire:X.X.X/btcd:X.X.X/"})]}),e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-3",children:"libbitcoin"}),e.jsx("td",{className:"font-mono text-xs",children:"/libbitcoin:X.X.X/"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-3",children:"BitcoinJ"}),e.jsx("td",{className:"font-mono text-xs",children:"/bitcoinj:X.X.X/"})]})]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Protocol Version Numbers"}),e.jsx("p",{className:"mb-4",children:"Protocol versions indicate supported features:"}),e.jsx("div",{className:"bg-dark-800/50 rounded-xl p-6 border border-dark-700/50 mb-6",children:e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-dark-300",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"70001:"})," BIP-31 pong messages"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"70002:"})," BIP-35 mempool message"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"70011:"})," BIP-111 NODE_BLOOM service bit"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"70012:"})," BIP-130 sendheaders"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"70013:"})," BIP-133 feefilter"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"70014:"})," BIP-152 compact blocks"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"70015:"})," BIP-339 WTXID relay"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"70016:"})," BIP-155 addrv2"]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Service Flags"}),e.jsx("p",{className:"mb-4",children:"The services field is a bitfield indicating node capabilities:"}),e.jsx(a,{title:"Common Service Bits",children:e.jsx("div",{className:"space-y-2 font-mono text-xs",children:e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-amber-400",children:"NODE_NETWORK (1 << 0)"}),e.jsx("p",{className:"text-dark-500 ml-4",children:"Full node, can serve blocks"}),e.jsx("p",{className:"text-amber-400 mt-2",children:"NODE_BLOOM (1 << 2)"}),e.jsx("p",{className:"text-dark-500 ml-4",children:"Supports Bloom filtering (BIP-37)"}),e.jsx("p",{className:"text-amber-400 mt-2",children:"NODE_WITNESS (1 << 3)"}),e.jsx("p",{className:"text-dark-500 ml-4",children:"Supports SegWit"}),e.jsx("p",{className:"text-amber-400 mt-2",children:"NODE_COMPACT_FILTERS (1 << 6)"}),e.jsx("p",{className:"text-dark-500 ml-4",children:"Serves compact filters (BIP-157/158)"}),e.jsx("p",{className:"text-amber-400 mt-2",children:"NODE_NETWORK_LIMITED (1 << 10)"}),e.jsx("p",{className:"text-dark-500 ml-4",children:"Pruned node, serves recent blocks only"})]})})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Handshake Process"}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-5 font-mono text-sm mb-6",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# Connection handshake:"}),e.jsx("p",{className:"text-dark-300",children:"1. Node A → Node B: version message"}),e.jsx("p",{className:"text-dark-300",children:"2. Node B → Node A: version message"}),e.jsx("p",{className:"text-dark-300",children:"3. Node A → Node B: verack (acknowledgment)"}),e.jsx("p",{className:"text-dark-300",children:"4. Node B → Node A: verack"}),e.jsx("p",{className:"text-emerald-400 mt-2",children:"Connection established, can exchange messages"})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Privacy Considerations"}),e.jsx(s,{type:"warning",title:"Fingerprinting Risk",children:e.jsx("p",{children:"User agents can fingerprint nodes, potentially deanonymizing users. Some privacy-focused software uses generic or configurable user agents to reduce this risk."})}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-1",children:"Detailed User Agent"}),e.jsx("p",{className:"text-sm text-dark-300",children:"Reveals software, version, OS—useful for debugging but privacy-reducing."})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-1",children:"Anonymous Option"}),e.jsx("p",{className:"text-sm text-dark-300",children:"Bitcoin Core's -uacomment option can customize user agent. Some run with generic strings."})]})]}),e.jsx(s,{type:"success",title:"Network Health",children:e.jsx("p",{children:"BIP-14's standardized identification enables monitoring network diversity and upgrade adoption. Researchers can track SegWit adoption, identify outdated nodes, and understand the network's software composition—all crucial for protocol evolution."})})]})}export{p as default};
