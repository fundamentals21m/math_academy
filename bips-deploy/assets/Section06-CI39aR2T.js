import{j as e}from"./vendor-animation-CmxkKU9r.js";import"./vendor-react-DamxDR2H.js";import"./vendor-math-p018AHG0.js";import"./index-BjhgI7Zp.js";import{L as a,C as t,D as i,E as r}from"./Callout-Bm0ChKkk.js";import{I as s}from"./MathBlock-fCav0pL3.js";import"./vendor-firebase-functions-DDqfDrvm.js";import"./vendor-firebase-core-CzRQL6VN.js";import"./vendor-firebase-auth-C4l3lITM.js";import"./quizMap-C7tZlcUA.js";function b(){return e.jsxs(a,{sectionId:6,children:[e.jsx("h2",{className:"text-2xl font-bold text-dark-100 mb-6",children:"Deploying Protocol Changes"}),e.jsxs("p",{className:"mb-4",children:["Writing a BIP is one thing; getting it deployed across thousands of independent nodes is another. This section explores the mechanisms by which Bitcoin actually upgrades, focusing on the crucial distinction between ",e.jsx("strong",{children:"soft forks"})," and"," ",e.jsx("strong",{children:"hard forks"}),"."]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"The Fundamental Constraint"}),e.jsx("p",{className:"mb-4",children:"Bitcoin has no central server that can push updates. Every upgrade must maintain backward compatibility with nodes that haven't updated, or risk splitting the network into incompatible chains."}),e.jsx(t,{type:"warning",title:"No Forced Updates",children:e.jsx("p",{children:"Unlike web services that can update overnight, Bitcoin changes must respect the fact that some nodes will never upgrade. The network must continue to function as a coherent whole."})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Soft Forks: Tightening Rules"}),e.jsxs(i,{title:"Soft Fork",children:[e.jsx("p",{children:"A change to Bitcoin's consensus rules that makes previously valid blocks/transactions invalid, while all previously invalid blocks/transactions remain invalid. Old nodes will accept all blocks created by new nodes."}),e.jsxs("p",{className:"mt-2",children:["Formally: If ",e.jsx(s,{children:"V_{\\text{old}}"})," is the set of valid states under old rules and"," ",e.jsx(s,{children:"V_{\\text{new}}"})," under new rules, a soft fork requires"," ",e.jsx(s,{children:"V_{\\text{new}} \\subseteq V_{\\text{old}}"}),"."]})]}),e.jsxs("p",{className:"mb-4",children:["Soft forks are ",e.jsx("strong",{children:"forward compatible"}),"—old nodes can still follow the chain even if they don't understand all the new features. This is why soft forks are preferred for Bitcoin upgrades."]}),e.jsxs(r,{title:"Soft Fork Example: SegWit (BIP-141)",children:[e.jsx("p",{className:"mb-3",children:'SegWit introduced a new transaction format where signatures are moved to a separate "witness" structure. To old nodes:'}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-dark-300",children:[e.jsx("li",{children:'SegWit transactions look like "anyone-can-spend" outputs (valid under old rules)'}),e.jsx("li",{children:"Old nodes see blocks as valid, just don't understand the witness data"}),e.jsx("li",{children:"New nodes enforce the actual signature requirements in the witness"})]}),e.jsx("p",{className:"mt-3 text-amber-400",children:"Result: Network continued to operate; nodes upgraded gradually over years."})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Hard Forks: Loosening Rules"}),e.jsxs(i,{title:"Hard Fork",children:[e.jsx("p",{children:"A change that makes previously invalid blocks/transactions valid. Old nodes will reject blocks created by new nodes, causing a permanent chain split if any old nodes remain."}),e.jsxs("p",{className:"mt-2",children:["Formally: ",e.jsx(s,{children:"V_{\\text{old}} \\subset V_{\\text{new}}"})," — the new rule set accepts strictly more states than the old one."]})]}),e.jsxs("p",{className:"mb-4",children:["Hard forks are ",e.jsx("strong",{children:"not forward compatible"}),". Every node must upgrade, or the network splits. This is why Bitcoin Core has never deployed a hard fork after the early days (when the network was small)."]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 border border-amber-500/30",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-2",children:"Soft Fork Properties"}),e.jsxs("ul",{className:"text-sm text-dark-300 space-y-1",children:[e.jsx("li",{children:"✓ Old nodes follow the chain (reduced security)"}),e.jsx("li",{children:"✓ Gradual migration possible"}),e.jsx("li",{children:"✓ No chain split if miners enforce"}),e.jsx("li",{children:"✗ Limited expressiveness (must fit old rules)"})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 border border-rose-500/30",children:[e.jsx("p",{className:"text-rose-400 font-bold mb-2",children:"Hard Fork Properties"}),e.jsxs("ul",{className:"text-sm text-dark-300 space-y-1",children:[e.jsx("li",{children:"✗ Old nodes reject new blocks"}),e.jsx("li",{children:"✗ Requires near-total upgrade"}),e.jsx("li",{children:"✗ Chain split if not unanimous"}),e.jsx("li",{children:"✓ Can implement any change"})]})]})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Activation Mechanisms"}),e.jsx("p",{className:"mb-4",children:'How does a soft fork actually "turn on"? Several mechanisms have been used:'}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-5 border border-dark-700/50",children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-400 mb-2",children:"Flag Day Activation"}),e.jsx("p",{className:"text-dark-300 mb-2",children:"At a predetermined block height or timestamp, new rules activate. Simple but risky—if not enough nodes have upgraded, the network could experience issues."}),e.jsx("p",{className:"text-sm text-dark-500",children:"Used for: BIP-30 (duplicate txids)"})]}),e.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-5 border border-dark-700/50",children:[e.jsx("h4",{className:"text-lg font-semibold text-amber-400 mb-2",children:"IsSuperMajority (ISM)"}),e.jsx("p",{className:"text-dark-300 mb-2",children:"New rules activate when 950 of the last 1000 blocks signal support (95% threshold). Miners signal by setting a version bit in the block header."}),e.jsx("p",{className:"text-sm text-dark-500",children:"Used for: BIP-34, BIP-66, BIP-65"})]}),e.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-5 border border-dark-700/50",children:[e.jsx("h4",{className:"text-lg font-semibold text-emerald-400 mb-2",children:"BIP-9: Version Bits"}),e.jsx("p",{className:"text-dark-300 mb-2",children:"Improved ISM with a timeout. Multiple soft forks can be signaled simultaneously using different bits. If the threshold isn't reached by timeout, activation fails."}),e.jsx("p",{className:"text-sm text-dark-500",children:"Used for: SegWit (BIP-141), but activation was contentious"})]}),e.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-5 border border-dark-700/50",children:[e.jsx("h4",{className:"text-lg font-semibold text-purple-400 mb-2",children:"Speedy Trial (BIP-8 variant)"}),e.jsx("p",{className:"text-dark-300 mb-2",children:"Quick signaling period followed by locked-in activation. Gives miners a chance to signal, but has a flag day fallback if they don't."}),e.jsx("p",{className:"text-sm text-dark-500",children:"Used for: Taproot (BIP-341)"})]})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"The SegWit Wars: A Case Study"}),e.jsx("p",{className:"mb-4",children:"The activation of SegWit in 2017 was contentious, illustrating the challenges of decentralized upgrades:"}),e.jsxs(r,{title:"SegWit Activation Timeline",children:[e.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-dark-300",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"2015-12:"})," SegWit BIP drafted"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"2016-10:"})," Bitcoin Core 0.13.1 released with SegWit support"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"2016-11:"})," BIP-9 signaling begins, requires 95% miner threshold"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"2017-03:"})," Signaling stalls around 30%—miners demand block size increase"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"2017-08:"})," BIP-91 lowers threshold; User Activated Soft Fork (UASF) threatened"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"2017-08-24:"})," SegWit finally activates"]})]}),e.jsx("p",{className:"mt-3 text-amber-400",children:"Lesson: Technical readiness ≠ political readiness. Soft forks involving economic changes face additional hurdles."})]}),e.jsx(t,{type:"info",title:"UASF: User Power",children:e.jsx("p",{children:`BIP-148 proposed that users (not miners) could force SegWit activation by rejecting blocks that didn't signal support. This "User Activated Soft Fork" threatened a chain split, pressuring miners to signal. It demonstrated that miners don't have absolute power over protocol changes.`})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Post-Activation Considerations"}),e.jsx("p",{className:"mb-4",children:"Even after activation, there's a transition period:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-6 text-dark-300",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Grace period:"})," Old transaction formats remain valid to allow wallet updates"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Economic incentives:"})," New features must provide enough benefit to drive adoption"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"SPV wallets:"})," Lightweight clients may need specific updates to use new features"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Exchange support:"})," Services must update to recognize new address formats"]})]}),e.jsx(t,{type:"success",title:"Taproot: Smoother Activation",children:e.jsx("p",{children:"Taproot (BIP-341/342) activated via Speedy Trial in November 2021, with much less controversy than SegWit. The community had learned from the SegWit Wars, and there was broad consensus on Taproot's benefits."})})]})}export{b as default};
