import{j as e}from"./vendor-animation-CmxkKU9r.js";import"./vendor-react-DamxDR2H.js";import"./vendor-math-p018AHG0.js";import"./index-BjhgI7Zp.js";import{L as l,C as s,D as i,E as t}from"./Callout-Bm0ChKkk.js";import"./vendor-firebase-functions-DDqfDrvm.js";import"./vendor-firebase-core-CzRQL6VN.js";import"./vendor-firebase-auth-C4l3lITM.js";import"./quizMap-C7tZlcUA.js";function p(){return e.jsxs(l,{sectionId:74,children:[e.jsx("h2",{className:"text-2xl font-bold text-dark-100 mb-6",children:"BIP-23: getblocktemplate Pooled Mining"}),e.jsx("p",{className:"mb-4",children:"BIP-23 extends BIP-22 with additional features for mining pools, including server-specified coinbase transactions, mutations for pool optimization, and submission tracking."}),e.jsx(s,{type:"info",title:"Pool Operations",children:e.jsx("p",{children:"Mining pools need more control than solo miners. BIP-23 provides extensions for pools to manage coinbase transactions, track work submissions, and coordinate many workers efficiently."})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Pool-Specific Needs"}),e.jsx("p",{className:"mb-4",children:"Mining pools have additional requirements:"}),e.jsx("div",{className:"bg-dark-800/50 rounded-xl p-6 border border-dark-700/50 mb-6",children:e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-dark-300",children:[e.jsx("li",{children:"Control coinbase outputs (pay miners)"}),e.jsx("li",{children:"Include pool identification in coinbase"}),e.jsx("li",{children:"Track which worker found the block"}),e.jsx("li",{children:"Efficient work distribution to many miners"}),e.jsx("li",{children:"Handle variable-difficulty shares"})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Coinbase Transaction"}),e.jsx(i,{title:"coinbasetxn Field",children:e.jsx("p",{children:"BIP-23 adds a coinbasetxn field to templates, providing either a complete coinbase transaction or instructions for constructing one."})}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-5 font-mono text-sm mb-6",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# Template with coinbase info:"}),e.jsxs("p",{className:"text-dark-300",children:['"coinbasetxn": ',"{"]}),e.jsx("p",{className:"text-dark-300 ml-4",children:'"data": "01000000010000...",'}),e.jsx("p",{className:"text-dark-300 ml-4",children:'"fee": 0,'}),e.jsx("p",{className:"text-dark-300 ml-4",children:'"sigops": 0,'}),e.jsx("p",{className:"text-dark-300 ml-4",children:'"required": true'}),e.jsx("p",{className:"text-dark-300",children:"}"})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Coinbase Mutations"}),e.jsx("p",{className:"mb-4",children:"Pools control how miners can modify the coinbase:"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm mb-6",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-dark-700",children:[e.jsx("th",{className:"text-left py-3 text-dark-300",children:"Mutation"}),e.jsx("th",{className:"text-left py-3 text-dark-300",children:"Meaning"})]})}),e.jsxs("tbody",{className:"text-dark-400",children:[e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-3 font-mono text-amber-400",children:"coinbase/append"}),e.jsx("td",{children:"Miners can append to scriptSig"})]}),e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-3 font-mono text-amber-400",children:"generation"}),e.jsx("td",{children:"Miners can add outputs"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-3 font-mono text-amber-400",children:"coinbase"}),e.jsx("td",{children:"Full coinbase replacement allowed"})]})]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Work ID Tracking"}),e.jsx("p",{className:"mb-4",children:"The workid field tracks which template produced a submission:"}),e.jsx(t,{title:"Work ID Flow",children:e.jsxs("div",{className:"space-y-3 font-mono text-xs",children:[e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# Template includes workid:"}),e.jsx("p",{className:"text-dark-300",children:'"workid": "abc123"'})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# Miner submits block:"}),e.jsxs("p",{className:"text-dark-300",children:['submitblock "hexdata" ',"{",'"workid": "abc123"',"}"]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# Pool benefits:"}),e.jsx("p",{className:"text-dark-500",children:"- Credit correct miner for block"}),e.jsx("p",{className:"text-dark-500",children:"- Track stale vs valid submissions"}),e.jsx("p",{className:"text-dark-500",children:"- Debug template issues"})]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Long Polling"}),e.jsx("p",{className:"mb-4",children:"Efficient notification of new work:"}),e.jsx("div",{className:"bg-dark-800/50 rounded-xl p-6 border border-dark-700/50 mb-6",children:e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-dark-300",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"longpollid:"})," Identifier for current template state"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Request:"})," Include previous longpollid to wait for changes"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Response:"})," Returns immediately if template changed, else waits"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Efficiency:"})," No constant polling, instant notification"]})]})}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-5 font-mono text-sm mb-6",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# Long poll request:"}),e.jsxs("p",{className:"text-dark-300",children:["getblocktemplate ","{"]}),e.jsx("p",{className:"text-dark-300 ml-4",children:'"longpollid": "prev_template_id",'}),e.jsx("p",{className:"text-dark-300 ml-4",children:'"capabilities": ["longpoll"]'}),e.jsx("p",{className:"text-dark-300",children:"}"}),e.jsx("p",{className:"text-dark-500 mt-3",children:"Server holds connection until new template available"})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Submission Modes"}),e.jsx("p",{className:"mb-4",children:"Different submission types for different purposes:"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-2",children:"Full Block"}),e.jsxs("ul",{className:"text-sm text-dark-300 space-y-1",children:[e.jsx("li",{children:"Complete block submission"}),e.jsx("li",{children:"For valid blocks meeting network target"}),e.jsx("li",{children:"Broadcast to network"})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-2",children:"Share Submission"}),e.jsxs("ul",{className:"text-sm text-dark-300 space-y-1",children:[e.jsx("li",{children:"Proof of work at lower difficulty"}),e.jsx("li",{children:"For pool accounting"}),e.jsx("li",{children:"Not broadcast (not valid blocks)"})]})]})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Server Extensions"}),e.jsxs(s,{type:"info",title:"Additional Fields",children:[e.jsx("p",{children:"BIP-23 allows servers to include custom fields:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"expires:"})," Template validity duration"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"submitold:"})," Whether to accept old templates"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"target:"})," Pool difficulty target"]})]})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Pool Architecture"}),e.jsx(t,{title:"Typical Pool Setup",children:e.jsx("div",{className:"space-y-3 text-dark-300",children:e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 font-mono text-xs",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# Pool infrastructure:"}),e.jsx("p",{className:"text-dark-300",children:"Bitcoin Node → Pool Server → Workers"}),e.jsx("p",{className:"text-dark-300 mt-2",children:"Node: getblocktemplate → Pool"}),e.jsx("p",{className:"text-dark-300",children:"Pool: Distributes work to workers"}),e.jsx("p",{className:"text-dark-300",children:"Workers: Return shares/blocks"}),e.jsx("p",{className:"text-dark-300",children:"Pool: submitblock for valid blocks"})]})})}),e.jsx(s,{type:"success",title:"Pool Foundation",children:e.jsx("p",{children:"BIP-23 provides the infrastructure for modern mining pools. While newer protocols like Stratum V2 are emerging, GBT remains the interface between pool servers and Bitcoin nodes, ensuring pools can construct valid blocks."})})]})}export{p as default};
