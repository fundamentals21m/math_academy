import{j as e}from"./vendor-animation-CmxkKU9r.js";import"./vendor-react-DamxDR2H.js";import"./vendor-math-p018AHG0.js";import"./index-BjhgI7Zp.js";import{L as t,C as s,D as r,E as i}from"./Callout-Bm0ChKkk.js";import"./vendor-firebase-functions-DDqfDrvm.js";import"./vendor-firebase-core-CzRQL6VN.js";import"./vendor-firebase-auth-C4l3lITM.js";import"./quizMap-C7tZlcUA.js";function p(){return e.jsxs(t,{sectionId:50,children:[e.jsx("h2",{className:"text-2xl font-bold text-dark-100 mb-6",children:"BIP-70: Payment Protocol (Deprecated)"}),e.jsx("p",{className:"mb-4",children:"BIP-70 defined a payment protocol that enabled merchants to send signed payment requests to customers. While innovative, it was deprecated due to complexity, security concerns, and the rise of simpler alternatives."}),e.jsx(s,{type:"warning",title:"Deprecated Standard",children:e.jsx("p",{children:"BIP-70 is deprecated and removed from most wallet implementations. This section covers it for historical context and to understand why simpler approaches won."})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"The Vision"}),e.jsx("p",{className:"mb-4",children:"BIP-70 aimed to solve several payment UX problems:"}),e.jsx("div",{className:"bg-dark-800/50 rounded-xl p-6 border border-dark-700/50 mb-6",children:e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-dark-300",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Address verification:"})," Cryptographically prove payment destination"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Refund addresses:"})," Customer provides refund address upfront"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Payment ACK:"})," Merchant confirms payment received"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Human-readable:"})," Show merchant name instead of raw address"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Memo fields:"})," Attach payment descriptions"]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Protocol Flow"}),e.jsx(r,{title:"Payment Protocol Messages",children:e.jsx("p",{children:"BIP-70 used Protocol Buffers (protobuf) to define structured messages exchanged between merchant servers and customer wallets."})}),e.jsx(i,{title:"BIP-70 Payment Flow",children:e.jsx("div",{className:"space-y-3 text-dark-300",children:e.jsxs("ol",{className:"list-decimal list-inside space-y-2 ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"PaymentRequest:"})," Merchant creates signed request with destination, amount, expiration, and X.509 certificate"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Wallet displays:"})," User sees verified merchant name, amount, and memo"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Payment:"})," User's wallet sends signed transaction plus refund addresses and memo"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"PaymentACK:"})," Merchant confirms receipt, optionally broadcasts transaction"]})]})})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Message Structure"}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-5 font-mono text-sm mb-6",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# PaymentDetails (inside PaymentRequest):"}),e.jsx("p",{className:"text-dark-300",children:'network: "main" | "test"'}),e.jsxs("p",{className:"text-dark-300",children:["outputs: [","{ script, amount }","]"]}),e.jsx("p",{className:"text-dark-300",children:"time: creation timestamp"}),e.jsx("p",{className:"text-dark-300",children:"expires: expiration timestamp"}),e.jsx("p",{className:"text-dark-300",children:"memo: human-readable description"}),e.jsx("p",{className:"text-dark-300",children:"payment_url: where to POST Payment"}),e.jsx("p",{className:"text-dark-300",children:"merchant_data: opaque order data"})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"X.509 PKI Integration"}),e.jsx("p",{className:"mb-4",children:"BIP-70's signature system used X.509 certificates:"}),e.jsx("div",{className:"bg-dark-800/50 rounded-xl p-6 border border-dark-700/50 mb-6",children:e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-dark-300",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Certificate chain:"})," Merchant's cert signed by trusted CA"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Signature:"})," PaymentDetails signed with merchant's private key"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Verification:"})," Wallet validates chain back to trusted root"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Display:"})," Show verified merchant name (from cert) to user"]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Why It Failed"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 border border-rose-500/30",children:[e.jsx("p",{className:"text-rose-400 font-bold mb-2",children:"X.509 Dependency"}),e.jsx("p",{className:"text-sm text-dark-300",children:"Required trusting certificate authorities—the same centralized PKI system Bitcoin was designed to avoid. CAs have been compromised multiple times."})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 border border-rose-500/30",children:[e.jsx("p",{className:"text-rose-400 font-bold mb-2",children:"Implementation Complexity"}),e.jsx("p",{className:"text-sm text-dark-300",children:"Protocol Buffers, certificate handling, HTTP communication—all added attack surface and development burden for wallet makers."})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 border border-rose-500/30",children:[e.jsx("p",{className:"text-rose-400 font-bold mb-2",children:"Privacy Concerns"}),e.jsx("p",{className:"text-sm text-dark-300",children:"Required connecting to merchant servers, potentially leaking IP addresses and payment metadata before transaction broadcast."})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 border border-rose-500/30",children:[e.jsx("p",{className:"text-rose-400 font-bold mb-2",children:"Centralization Risk"}),e.jsx("p",{className:"text-sm text-dark-300",children:"Merchants could refuse payments not going through their server, potentially enabling censorship or surveillance."})]})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Security Incidents"}),e.jsxs(s,{type:"warning",title:"Real-World Problems",children:[e.jsx("p",{children:"BIP-70 had notable security issues:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"Certificate validation bugs in major wallets"}),e.jsx("li",{children:"Man-in-the-middle attacks if HTTPS misconfigured"}),e.jsx("li",{children:"Payment URL could be pointed to malicious servers"}),e.jsx("li",{children:"Complex code led to implementation errors"})]})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Modern Alternatives"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-2",children:"Simple BIP-21 URIs"}),e.jsx("p",{className:"text-sm text-dark-300",children:"Basic addresses work for most use cases. No server required."})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-2",children:"Lightning Invoices"}),e.jsx("p",{className:"text-sm text-dark-300",children:"BOLT-11 invoices include amount, memo, and expiration without PKI."})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-2",children:"Payjoin (BIP-78)"}),e.jsx("p",{className:"text-sm text-dark-300",children:"Interactive protocol that improves privacy without certificates."})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-2",children:"LNURL"}),e.jsx("p",{className:"text-sm text-dark-300",children:"Lightning-focused protocol for dynamic invoice generation."})]})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Lessons Learned"}),e.jsx("div",{className:"bg-dark-800/50 rounded-xl p-6 border border-dark-700/50 mb-6",children:e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-dark-300",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Simplicity wins:"})," Simpler protocols get wider adoption"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Minimize trust:"})," Relying on CAs contradicts Bitcoin's ethos"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Optional complexity:"})," Advanced features should be opt-in"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Privacy first:"})," Protocols shouldn't require server contact"]})]})}),e.jsx(s,{type:"success",title:"Historical Significance",children:e.jsx("p",{children:"While BIP-70 failed as a standard, its goals were valid. The lessons learned influenced better designs like Lightning invoices and Payjoin. Understanding BIP-70's failures helps appreciate why Bitcoin favors simpler, more decentralized approaches."})})]})}export{p as default};
