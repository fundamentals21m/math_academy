import{j as e}from"./vendor-animation-CmxkKU9r.js";import"./vendor-react-DamxDR2H.js";import"./vendor-math-p018AHG0.js";import"./index-CsKt80eB.js";import{L as a,C as s,D as r,E as t}from"./Callout-DTLGvo9K.js";import"./vendor-firebase-functions-DDqfDrvm.js";import"./vendor-firebase-core-CzRQL6VN.js";import"./vendor-firebase-auth-C4l3lITM.js";import"./quizMap-C7tZlcUA.js";function b(){return e.jsxs(a,{sectionId:73,children:[e.jsx("h2",{className:"text-2xl font-bold text-dark-100 mb-6",children:"BIP-22: getblocktemplate Fundamentals"}),e.jsx("p",{className:"mb-4",children:"BIP-22 introduced the getblocktemplate (GBT) RPC method, replacing the older getwork protocol. GBT gives miners more flexibility in block construction while reducing reliance on pool operators."}),e.jsx(s,{type:"info",title:"Decentralized Mining",children:e.jsx("p",{children:"Before GBT, pool operators had complete control over block contents. GBT empowers miners to validate and modify block templates, improving decentralization."})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"The Problem"}),e.jsx("p",{className:"mb-4",children:"The old getwork protocol had limitations:"}),e.jsx("div",{className:"bg-dark-800/50 rounded-xl p-6 border border-rose-500/30 mb-6",children:e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-dark-300",children:[e.jsx("li",{children:"Limited nonce space (~4 billion attempts before rollover)"}),e.jsx("li",{children:"Miners couldn't see or modify transactions"}),e.jsx("li",{children:"Pools had complete control over block contents"}),e.jsx("li",{children:"No support for variable difficulty work"}),e.jsx("li",{children:"Inefficient polling model"})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"getblocktemplate Method"}),e.jsx(r,{title:"Block Template",children:e.jsx("p",{children:"A complete specification for constructing a valid block, including the block header fields, coinbase transaction, and list of transactions to include."})}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-5 font-mono text-sm mb-6",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# RPC call:"}),e.jsxs("p",{className:"text-dark-300",children:["getblocktemplate ","{",'"rules": ["segwit"]',"}"]}),e.jsx("p",{className:"text-dark-400 mt-4 mb-2",children:"# Returns template with:"}),e.jsx("p",{className:"text-dark-300",children:"version, previousblockhash, transactions,"}),e.jsx("p",{className:"text-dark-300",children:"coinbasevalue, target, mutable, ..."})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Template Fields"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm mb-6",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-dark-700",children:[e.jsx("th",{className:"text-left py-3 text-dark-300",children:"Field"}),e.jsx("th",{className:"text-left py-3 text-dark-300",children:"Description"})]})}),e.jsxs("tbody",{className:"text-dark-400",children:[e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-3 font-mono text-amber-400",children:"version"}),e.jsx("td",{children:"Block version number"})]}),e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-3 font-mono text-amber-400",children:"previousblockhash"}),e.jsx("td",{children:"Hash of the best known block"})]}),e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-3 font-mono text-amber-400",children:"transactions"}),e.jsx("td",{children:"Array of transaction objects"})]}),e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-3 font-mono text-amber-400",children:"coinbasevalue"}),e.jsx("td",{children:"Maximum coinbase output value (subsidy + fees)"})]}),e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-3 font-mono text-amber-400",children:"target"}),e.jsx("td",{children:"Required target for valid block"})]}),e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-3 font-mono text-amber-400",children:"bits"}),e.jsx("td",{children:"Compact target representation"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-3 font-mono text-amber-400",children:"curtime"}),e.jsx("td",{children:"Current timestamp"})]})]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Mutable Fields"}),e.jsx("p",{className:"mb-4",children:'The "mutable" array indicates what miners can modify:'}),e.jsx(t,{title:"Mutable Options",children:e.jsxs("div",{className:"space-y-3 text-dark-300",children:[e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 font-mono text-xs",children:[e.jsx("p",{className:"text-amber-400",children:'"mutable": ['}),e.jsx("p",{className:"text-dark-300 ml-4",children:'"time",        // Can adjust timestamp'}),e.jsx("p",{className:"text-dark-300 ml-4",children:'"transactions", // Can add/remove txs'}),e.jsx("p",{className:"text-dark-300 ml-4",children:'"prevblock",   // Can update parent'}),e.jsx("p",{className:"text-dark-300 ml-4",children:'"coinbase/append", // Can add to coinbase'}),e.jsx("p",{className:"text-amber-400",children:"]"})]}),e.jsx("p",{className:"text-dark-500 text-sm mt-2",children:"Miners can customize within these bounds"})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Transaction Format"}),e.jsx("p",{className:"mb-4",children:"Each transaction in the template includes:"}),e.jsx("div",{className:"bg-dark-800/50 rounded-xl p-6 border border-dark-700/50 mb-6",children:e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-dark-300",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"data:"})," Hex-encoded transaction"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"txid:"})," Transaction ID (for Merkle tree)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"hash:"})," wtxid for SegWit transactions"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"fee:"})," Transaction fee in satoshis"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"sigops:"})," Signature operations count"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"depends:"})," Indices of parent transactions"]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Block Submission"}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-5 font-mono text-sm mb-6",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# After finding valid nonce:"}),e.jsx("p",{className:"text-dark-300",children:'submitblock "hexdata"'}),e.jsx("p",{className:"text-dark-400 mt-3 mb-2",children:"# Returns:"}),e.jsx("p",{className:"text-dark-300",children:"null (success) or error reason"})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Miner Workflow"}),e.jsx(t,{title:"GBT Mining Flow",children:e.jsxs("div",{className:"space-y-3 font-mono text-xs",children:[e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# 1. Get template:"}),e.jsx("p",{className:"text-dark-300",children:"template = getblocktemplate()"})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# 2. Construct block header:"}),e.jsx("p",{className:"text-dark-300",children:"header = build_header(template)"}),e.jsx("p",{className:"text-dark-300",children:"merkle_root = compute_merkle(coinbase, txs)"})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# 3. Search for valid nonce:"}),e.jsx("p",{className:"text-dark-300",children:"while hash(header) > target:"}),e.jsx("p",{className:"text-dark-500 ml-4",children:"header.nonce++"}),e.jsx("p",{className:"text-dark-500 ml-4",children:"if nonce exhausted: modify extranonce, recalc merkle"})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# 4. Submit found block:"}),e.jsx("p",{className:"text-amber-400",children:"submitblock(serialize(header, txs))"})]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Capabilities"}),e.jsxs(s,{type:"info",title:"Request Capabilities",children:[e.jsx("p",{children:"Miners specify capabilities when requesting templates:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"longpoll:"})," Wait for new block notification"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"coinbasetxn:"})," Include full coinbase transaction"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"workid:"})," Track which template was used"]})]})]}),e.jsx(s,{type:"success",title:"Foundation for Mining",children:e.jsx("p",{children:"GBT remains the standard interface between Bitcoin nodes and mining software. It gives miners transparency into block contents while maintaining compatibility with pool infrastructure. BIP-23 extends it for pooled mining scenarios."})})]})}export{b as default};
