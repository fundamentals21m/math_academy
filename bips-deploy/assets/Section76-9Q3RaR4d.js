import{j as e}from"./vendor-animation-CmxkKU9r.js";import"./vendor-react-DamxDR2H.js";import"./vendor-math-p018AHG0.js";import"./index-CsKt80eB.js";import{L as t,C as s,D as i,E as l}from"./Callout-DTLGvo9K.js";import"./vendor-firebase-functions-DDqfDrvm.js";import"./vendor-firebase-core-CzRQL6VN.js";import"./vendor-firebase-auth-C4l3lITM.js";import"./quizMap-C7tZlcUA.js";function p(){return e.jsxs(t,{sectionId:76,children:[e.jsx("h2",{className:"text-2xl font-bold text-dark-100 mb-6",children:"BIP-42: Finite Monetary Supply"}),e.jsx("p",{className:"mb-4",children:"BIP-42 humorously documents a fix for a theoretical bug where Bitcoin's supply could exceed 21 million due to integer overflow in the subsidy calculation. While the fix was technically necessary, the bug wouldn't manifest for over a century."}),e.jsx(s,{type:"info",title:"Satirical BIP",children:e.jsx("p",{children:"BIP-42 is written in a satirical style, published on April 1st, 2014. However, the technical issue it describes is real, and the fix was implemented."})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"The 21 Million Limit"}),e.jsx("p",{className:"mb-4",children:"Bitcoin's supply schedule is well-known:"}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-5 font-mono text-sm mb-6",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# Subsidy schedule:"}),e.jsx("p",{className:"text-dark-300",children:"Blocks 0-209,999:      50 BTC"}),e.jsx("p",{className:"text-dark-300",children:"Blocks 210,000-419,999: 25 BTC"}),e.jsx("p",{className:"text-dark-300",children:"Blocks 420,000-629,999: 12.5 BTC"}),e.jsx("p",{className:"text-dark-300",children:"...halving every 210,000 blocks..."}),e.jsx("p",{className:"text-dark-400 mt-3 mb-2",children:"# Geometric series:"}),e.jsx("p",{className:"text-amber-400",children:"Total = 210,000 × 50 × 2 = 21,000,000 BTC"})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"The Bug"}),e.jsx(i,{title:"Integer Overflow",children:e.jsx("p",{children:"The original Bitcoin code calculated the number of halvings by right-shifting the block height. After 64 halvings, the shift amount would overflow, causing the subsidy calculation to produce unexpected results."})}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-5 font-mono text-sm mb-6",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# Original code (simplified):"}),e.jsx("p",{className:"text-dark-300",children:"halvings = height / 210000"}),e.jsx("p",{className:"text-dark-300",children:"subsidy = 50 BTC >> halvings"}),e.jsx("p",{className:"text-dark-400 mt-3 mb-2",children:"# Problem after 64 halvings:"}),e.jsx("p",{className:"text-dark-300",children:"halvings = 64"}),e.jsx("p",{className:"text-rose-400",children:"subsidy = 50 >> 64  // Undefined behavior!"}),e.jsx("p",{className:"text-dark-500 mt-2",children:"In many implementations: wraps around to 50 BTC again"})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"When Would This Occur?"}),e.jsx("p",{className:"mb-4",children:"The overflow would happen far in the future:"}),e.jsx("div",{className:"bg-dark-800/50 rounded-xl p-6 border border-dark-700/50 mb-6",children:e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-dark-300",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"64th halving:"})," Block 13,440,000"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"At ~10 min/block:"})," Approximately year 2262"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"By then:"})," Subsidy already 0 satoshis (after ~33 halvings)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"But code:"})," Would erroneously allow new subsidies"]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"The Fix"}),e.jsx(l,{title:"BIP-42 Solution",children:e.jsxs("div",{className:"space-y-3 font-mono text-xs",children:[e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# Fixed code:"}),e.jsx("p",{className:"text-dark-300",children:"halvings = height / 210000"}),e.jsx("p",{className:"text-emerald-400",children:"if halvings >= 64:"}),e.jsx("p",{className:"text-emerald-400 ml-4",children:"return 0  // No subsidy"}),e.jsx("p",{className:"text-dark-300",children:"subsidy = 50 BTC >> halvings"})]}),e.jsx("p",{className:"text-dark-500 mt-2",children:"Simple bounds check prevents the overflow"})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Humor in BIP-42"}),e.jsx("p",{className:"mb-4",children:"The BIP's satirical style includes gems like:"}),e.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-6 border border-dark-700/50 mb-6",children:[e.jsx("blockquote",{className:"italic text-dark-300",children:'"The Bitcoin community has seen much debate recently over whether the apparent promise of a finite monetary supply of 21 million bitcoins should be fulfilled or not. This BIP seeks to confirm it."'}),e.jsx("p",{className:"text-dark-500 text-sm mt-3",children:"— BIP-42, treating an obvious answer as if it needed debate"})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Why It Matters"}),e.jsxs(s,{type:"info",title:"Monetary Policy",children:[e.jsx("p",{children:"Even though the bug wouldn't manifest for centuries, fixing it was important:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"Confirms the 21 million supply cap at code level"}),e.jsx("li",{children:"Removes any ambiguity about future monetary policy"}),e.jsx("li",{children:"Demonstrates Bitcoin's commitment to sound money"}),e.jsx("li",{children:"Shows that even theoretical bugs get fixed"})]})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Soft Fork Details"}),e.jsx("p",{className:"mb-4",children:"BIP-42 was a soft fork (technically):"}),e.jsx("div",{className:"bg-dark-800/50 rounded-xl p-6 border border-dark-700/50 mb-6",children:e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-dark-300",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Forward-compatible:"})," Old nodes would accept blocks with zero subsidy"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Activation:"})," No special activation needed (immediate deployment)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Effect:"})," No observable change until year ~2262"]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Implementation"}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-5 font-mono text-sm mb-6",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# Bitcoin Core validation.cpp:"}),e.jsxs("p",{className:"text-dark-300",children:["CAmount GetBlockSubsidy(int nHeight, ...) ","{"]}),e.jsx("p",{className:"text-dark-300 ml-4",children:"int halvings = nHeight / 210000;"}),e.jsx("p",{className:"text-emerald-400 ml-4",children:"if (halvings >= 64)"}),e.jsx("p",{className:"text-emerald-400 ml-8",children:"return 0;"}),e.jsx("p",{className:"text-dark-300 ml-4",children:"CAmount nSubsidy = 50 * COIN;"}),e.jsx("p",{className:"text-dark-300 ml-4",children:"nSubsidy >>= halvings;"}),e.jsx("p",{className:"text-dark-300 ml-4",children:"return nSubsidy;"}),e.jsx("p",{className:"text-dark-300",children:"}"})]}),e.jsx(s,{type:"success",title:"Future-Proofing Bitcoin",children:e.jsx("p",{children:"BIP-42 exemplifies Bitcoin's approach to protocol development: even bugs that won't matter for hundreds of years get fixed. The 21 million limit isn't just a promise—it's enforced in code, verified by every node, forever."})})]})}export{p as default};
