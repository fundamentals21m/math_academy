import{j as s}from"./vendor-animation-CmxkKU9r.js";import"./vendor-react-DamxDR2H.js";import"./vendor-math-p018AHG0.js";import"./index-BjhgI7Zp.js";import{L as l,C as t,D as e,E as i}from"./Callout-Bm0ChKkk.js";import"./vendor-firebase-functions-DDqfDrvm.js";import"./vendor-firebase-core-CzRQL6VN.js";import"./vendor-firebase-auth-C4l3lITM.js";import"./quizMap-C7tZlcUA.js";function p(){return s.jsxs(l,{sectionId:35,children:[s.jsx("h2",{className:"text-2xl font-bold text-dark-100 mb-6",children:"Output Descriptor Extensions"}),s.jsx("p",{className:"mb-4",children:"BIPs 381-384 extend the base descriptor language (BIP-380) with additional script functions. These extensions enable descriptors for non-segwit scripts, multisig configurations, and complex spending conditions."}),s.jsx(t,{type:"info",title:"Building Blocks",children:s.jsx("p",{children:"While BIP-380 defines the core syntax, these extension BIPs add the specific functions needed to describe the full range of Bitcoin output scripts."})}),s.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"BIP-381: Non-SegWit Descriptors"}),s.jsx("p",{className:"mb-4",children:"BIP-381 defines functions for legacy (non-SegWit) script types:"}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs(e,{title:"pk(KEY)",children:[s.jsx("p",{children:"Pay-to-Public-Key: The simplest script type. Rarely used today but historically important (early Bitcoin transactions)."}),s.jsxs("div",{className:"font-mono text-sm mt-2",children:[s.jsx("p",{className:"text-dark-400",children:"# Script:"}),s.jsx("p",{className:"text-amber-400",children:"<pubkey> OP_CHECKSIG"})]})]}),s.jsxs(e,{title:"pkh(KEY)",children:[s.jsx("p",{children:'Pay-to-Public-Key-Hash: Classic "1..." addresses. Hides the public key until spending.'}),s.jsxs("div",{className:"font-mono text-sm mt-2",children:[s.jsx("p",{className:"text-dark-400",children:"# Descriptor:"}),s.jsx("p",{className:"text-amber-400",children:"pkh(xpub.../44h/0h/0h/0/*)"})]})]}),s.jsxs(e,{title:"sh(SCRIPT)",children:[s.jsx("p",{children:'Pay-to-Script-Hash: Wraps any script in a P2SH output ("3..." address). Used for nested SegWit and legacy multisig.'}),s.jsxs("div",{className:"font-mono text-sm mt-2",children:[s.jsx("p",{className:"text-dark-400",children:"# Nested SegWit:"}),s.jsx("p",{className:"text-amber-400",children:"sh(wpkh(KEY))"})]})]})]}),s.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"BIP-382: SegWit Descriptors"}),s.jsx("p",{className:"mb-4",children:"BIP-382 adds native SegWit script functions:"}),s.jsx(i,{title:"SegWit Functions",children:s.jsxs("div",{className:"space-y-3 font-mono text-sm",children:[s.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[s.jsx("p",{className:"text-dark-400 mb-1",children:"# wpkh - Native SegWit single-key"}),s.jsx("p",{className:"text-amber-400",children:"wpkh(xpub.../84h/0h/0h/0/*)"}),s.jsx("p",{className:"text-dark-500 text-xs mt-1",children:"→ bc1q... addresses"})]}),s.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[s.jsx("p",{className:"text-dark-400 mb-1",children:"# wsh - Native SegWit script"}),s.jsx("p",{className:"text-amber-400",children:"wsh(multi(2,KEY1,KEY2,KEY3))"}),s.jsx("p",{className:"text-dark-500 text-xs mt-1",children:"→ bc1q... (longer) addresses"})]})]})}),s.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"BIP-383: Multisig Descriptors"}),s.jsx("p",{className:"mb-4",children:"BIP-383 defines functions for threshold multisig scripts:"}),s.jsxs(e,{title:"multi(K, KEY1, KEY2, ...)",children:[s.jsx("p",{children:"Standard K-of-N multisig. Keys are used in the exact order specified."}),s.jsxs("div",{className:"font-mono text-sm mt-2",children:[s.jsx("p",{className:"text-dark-400",children:"# 2-of-3 multisig:"}),s.jsx("p",{className:"text-amber-400",children:"multi(2, xpub1/.../0/*, xpub2/.../0/*, xpub3/.../0/*)"})]})]}),s.jsxs(e,{title:"sortedmulti(K, KEY1, KEY2, ...)",children:[s.jsx("p",{children:"K-of-N multisig with keys sorted lexicographically. Produces consistent scripts regardless of the order keys are specified."}),s.jsxs("div",{className:"font-mono text-sm mt-2",children:[s.jsx("p",{className:"text-dark-400",children:"# Order-independent 2-of-3:"}),s.jsx("p",{className:"text-amber-400",children:"sortedmulti(2, xpub1/...*, xpub2/...*, xpub3/...*)"})]})]}),s.jsx(i,{title:"Multisig Descriptor Examples",children:s.jsxs("div",{className:"space-y-3 font-mono text-xs",children:[s.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[s.jsx("p",{className:"text-dark-400 mb-1",children:"# Legacy P2SH multisig (3... address)"}),s.jsx("p",{className:"text-dark-300",children:"sh(sortedmulti(2,[fp1/45h]xpub1/0/*,[fp2/45h]xpub2/0/*,[fp3/45h]xpub3/0/*))"})]}),s.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[s.jsx("p",{className:"text-dark-400 mb-1",children:"# Native SegWit multisig (bc1q... address)"}),s.jsx("p",{className:"text-amber-400",children:"wsh(sortedmulti(2,[fp1/48h/0h/0h/2h]xpub1/0/*,...))"})]})]})}),s.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"BIP-384: Combo Descriptor"}),s.jsx("p",{className:"mb-4",children:"BIP-384 defines a convenience function for wallet scanning:"}),s.jsxs(e,{title:"combo(KEY)",children:[s.jsx("p",{children:"Represents multiple output types for the same key. Useful for scanning when you don't know which script type was used."}),s.jsx("p",{className:"text-dark-400 mt-2",children:"Expands to:"}),s.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1 text-dark-300",children:[s.jsx("li",{children:"pk(KEY) — if uncompressed"}),s.jsx("li",{children:"pkh(KEY)"}),s.jsx("li",{children:"wpkh(KEY) — if compressed"}),s.jsx("li",{children:"sh(wpkh(KEY)) — if compressed"})]})]}),s.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Nesting Rules"}),s.jsx("p",{className:"mb-4",children:"Not all combinations are valid. The rules follow Bitcoin consensus:"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm mb-6",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-dark-700",children:[s.jsx("th",{className:"text-left py-3 text-dark-300",children:"Outer"}),s.jsx("th",{className:"text-left py-3 text-dark-300",children:"Can Contain"}),s.jsx("th",{className:"text-left py-3 text-dark-300",children:"Example"})]})}),s.jsxs("tbody",{className:"text-dark-400",children:[s.jsxs("tr",{className:"border-b border-dark-800",children:[s.jsx("td",{className:"py-3 font-mono",children:"sh()"}),s.jsx("td",{children:"wpkh, wsh, multi, sortedmulti"}),s.jsx("td",{className:"font-mono text-xs",children:"sh(wpkh(KEY))"})]}),s.jsxs("tr",{className:"border-b border-dark-800",children:[s.jsx("td",{className:"py-3 font-mono",children:"wsh()"}),s.jsx("td",{children:"pk, pkh, multi, sortedmulti"}),s.jsx("td",{className:"font-mono text-xs",children:"wsh(multi(...))"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-3 font-mono",children:"sh(wsh())"}),s.jsx("td",{children:"pk, pkh, multi, sortedmulti"}),s.jsx("td",{className:"font-mono text-xs",children:"sh(wsh(multi(...)))"})]})]})]})}),s.jsxs(t,{type:"warning",title:"Invalid Nestings",children:[s.jsx("p",{children:"Some combinations are invalid:"}),s.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[s.jsxs("li",{children:[s.jsx("code",{children:"wsh(wpkh(KEY))"})," — Can't nest witness inside witness"]}),s.jsxs("li",{children:[s.jsx("code",{children:"sh(sh(...))"})," — Can't double-wrap P2SH"]}),s.jsxs("li",{children:[s.jsx("code",{children:"wpkh(multi(...))"})," — wpkh only takes single keys"]})]})]}),s.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Practical Usage"}),s.jsxs(i,{title:"Complete Multisig Wallet",children:[s.jsxs("div",{className:"space-y-2 font-mono text-xs break-all",children:[s.jsx("p",{className:"text-dark-400",children:"# External (receiving) addresses:"}),s.jsx("p",{className:"text-dark-300",children:"wsh(sortedmulti(2,[aabbccdd/48h/0h/0h/2h]xpub1/0/*,[11223344/48h/0h/0h/2h]xpub2/0/*))#checksum"}),s.jsx("p",{className:"text-dark-400 mt-3",children:"# Internal (change) addresses:"}),s.jsx("p",{className:"text-dark-300",children:"wsh(sortedmulti(2,[aabbccdd/48h/0h/0h/2h]xpub1/1/*,[11223344/48h/0h/0h/2h]xpub2/1/*))#checksum"})]}),s.jsx("p",{className:"text-dark-500 text-sm mt-3",children:"Two descriptors fully define a 2-of-2 native SegWit multisig wallet"})]}),s.jsx(t,{type:"success",title:"Complete Description",children:s.jsx("p",{children:"Together, BIPs 380-384 provide a complete language for describing any standard Bitcoin output script. This enables precise wallet backup, restoration, and interoperability across different software implementations."})})]})}export{p as default};
