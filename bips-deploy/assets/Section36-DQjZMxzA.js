import{j as e}from"./vendor-animation-CmxkKU9r.js";import"./vendor-react-DamxDR2H.js";import"./vendor-math-p018AHG0.js";import"./index-BjhgI7Zp.js";import{L as a,C as t,D as r,E as s}from"./Callout-Bm0ChKkk.js";import"./vendor-firebase-functions-DDqfDrvm.js";import"./vendor-firebase-core-CzRQL6VN.js";import"./vendor-firebase-auth-C4l3lITM.js";import"./quizMap-C7tZlcUA.js";function o(){return e.jsxs(a,{sectionId:36,children:[e.jsx("h2",{className:"text-2xl font-bold text-dark-100 mb-6",children:"Multipath Descriptors"}),e.jsx("p",{className:"mb-4",children:"BIP-389 introduces multipath expressions in output descriptors, allowing a single descriptor to specify multiple derivation paths. This elegant extension enables one descriptor to represent both receiving and change addresses—a critical improvement for wallet backup and restoration."}),e.jsx(t,{type:"info",title:"Unified Backup",children:e.jsx("p",{children:"Before BIP-389, wallets needed separate descriptors for external (receiving) and internal (change) address chains. Multipath descriptors combine them into one, simplifying backup and reducing the chance of incomplete restoration."})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"The Problem"}),e.jsx("p",{className:"mb-4",children:"Standard BIP-44 wallets have two address chains:"}),e.jsxs("div",{className:"bg-dark-800/50 rounded-xl p-6 border border-dark-700/50 mb-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-amber-400 font-semibold mb-2",children:"External Chain (0)"}),e.jsx("p",{className:"font-mono text-xs text-dark-300",children:"m/84h/0h/0h/0/*"}),e.jsx("p",{className:"text-dark-500 text-sm mt-1",children:"For receiving addresses"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-amber-400 font-semibold mb-2",children:"Internal Chain (1)"}),e.jsx("p",{className:"font-mono text-xs text-dark-300",children:"m/84h/0h/0h/1/*"}),e.jsx("p",{className:"text-dark-500 text-sm mt-1",children:"For change addresses"})]})]}),e.jsx("p",{className:"text-rose-400 text-sm mt-4",children:"Without BIP-389: Two separate descriptors needed for complete wallet"})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Multipath Syntax"}),e.jsxs(r,{title:"Angle Bracket Notation",children:[e.jsx("p",{children:"BIP-389 uses angle brackets to specify multiple path options:"}),e.jsx("div",{className:"font-mono text-lg text-amber-400 mt-3",children:"xpub.../<0;1>/*"}),e.jsxs("p",{className:"mt-2",children:["This expands to both ",e.jsx("code",{children:".../0/*"})," and ",e.jsx("code",{children:".../1/*"}),", representing both address chains in a single expression."]})]}),e.jsx(s,{title:"Single vs Multipath Descriptor",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"Traditional (two descriptors):"}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4 font-mono text-xs space-y-2",children:[e.jsx("p",{className:"text-dark-300",children:"wpkh([fp/84h/0h/0h]xpub.../0/*)"}),e.jsx("p",{className:"text-dark-300",children:"wpkh([fp/84h/0h/0h]xpub.../1/*)"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"Multipath (one descriptor):"}),e.jsx("div",{className:"bg-dark-800 rounded-lg p-4 font-mono text-xs",children:e.jsx("p",{className:"text-amber-400",children:"wpkh([fp/84h/0h/0h]xpub.../<0;1>/*)"})})]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Expansion Rules"}),e.jsx("p",{className:"mb-4",children:"The multipath expression expands predictably:"}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-5 font-mono text-sm mb-6",children:[e.jsx("p",{className:"text-dark-400 mb-2",children:"# Input:"}),e.jsx("p",{className:"text-dark-300 mb-4",children:"wpkh(xpub.../<0;1>/*)"}),e.jsx("p",{className:"text-dark-400 mb-2",children:"# Expands to:"}),e.jsx("p",{className:"text-dark-300",children:"[0] wpkh(xpub.../0/*) ← external"}),e.jsx("p",{className:"text-dark-300",children:"[1] wpkh(xpub.../1/*) ← internal"})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Multiple Multipaths"}),e.jsx("p",{className:"mb-4",children:"In multisig descriptors, each key can have its own multipath:"}),e.jsxs(s,{title:"Multisig with Multipaths",children:[e.jsxs("div",{className:"space-y-2 font-mono text-xs break-all",children:[e.jsx("p",{className:"text-dark-400",children:"# 2-of-2 with both chains:"}),e.jsx("p",{className:"text-amber-400",children:"wsh(sortedmulti(2,[fp1/48h/0h/0h/2h]xpub1/<0;1>/*,[fp2/48h/0h/0h/2h]xpub2/<0;1>/*))"})]}),e.jsx("p",{className:"text-dark-500 text-sm mt-3",children:"All keys must have the same number of multipath options"})]}),e.jsx(t,{type:"warning",title:"Matching Paths Required",children:e.jsx("p",{children:"When using multipaths in multi-key descriptors, each key expression must have the same number of path options. The wallet expands all multipaths together: first option from each key forms descriptor 0, second option forms descriptor 1, etc."})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Beyond 0/1"}),e.jsx("p",{className:"mb-4",children:"While the common case is external/internal (0/1), the syntax supports any values:"}),e.jsx("div",{className:"bg-dark-800/50 rounded-xl p-6 border border-dark-700/50 mb-6",children:e.jsxs("div",{className:"space-y-3 font-mono text-sm",children:[e.jsx("p",{className:"text-dark-400",children:"# Standard external/internal:"}),e.jsx("p",{className:"text-dark-300",children:"xpub/<0;1>/*"}),e.jsx("p",{className:"text-dark-400 mt-3",children:"# Multiple receive accounts:"}),e.jsx("p",{className:"text-dark-300",children:"xpub/<0;1;2;3>/*"}),e.jsx("p",{className:"text-dark-400 mt-3",children:"# Hardened paths:"}),e.jsx("p",{className:"text-dark-300",children:"xpub/<0h;1h>/*"})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Wallet Support"}),e.jsx("p",{className:"mb-4",children:"When importing a multipath descriptor, wallets should:"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-2",children:"1. Expand to Component Descriptors"}),e.jsx("p",{className:"text-sm text-dark-300",children:"Split the multipath descriptor into individual descriptors, one per path option."})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-2",children:"2. Assign Semantic Meaning"}),e.jsx("p",{className:"text-sm text-dark-300",children:"Conventionally, index 0 = external (receiving), index 1 = internal (change)."})]}),e.jsxs("div",{className:"bg-dark-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-amber-400 font-bold mb-2",children:"3. Preserve Original"}),e.jsx("p",{className:"text-sm text-dark-300",children:"When exporting, reconstruct the multipath form if the components match the expected pattern."})]})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Checksum Handling"}),e.jsx("p",{className:"mb-4",children:"Checksums for multipath descriptors work on the unexpanded form:"}),e.jsx(s,{title:"Checksum Calculation",children:e.jsxs("div",{className:"space-y-2 font-mono text-xs",children:[e.jsx("p",{className:"text-dark-400",children:"# Checksum covers the multipath syntax:"}),e.jsxs("p",{className:"text-amber-400",children:["wpkh([fp/84h/0h/0h]xpub.../<0;1>/*)#",e.jsx("span",{className:"text-emerald-400",children:"abcd1234"})]}),e.jsx("p",{className:"text-dark-400 mt-3",children:"# NOT computed from expanded forms:"}),e.jsx("p",{className:"text-dark-500",children:"wpkh([fp/84h/0h/0h]xpub.../0/*)#different1"}),e.jsx("p",{className:"text-dark-500",children:"wpkh([fp/84h/0h/0h]xpub.../1/*)#different2"})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Complete Wallet Descriptor"}),e.jsxs(s,{title:"Full BIP-84 Wallet in One Line",children:[e.jsxs("div",{className:"space-y-2 font-mono text-xs break-all",children:[e.jsx("p",{className:"text-dark-400",children:"# Complete native SegWit wallet backup:"}),e.jsx("p",{className:"text-amber-400",children:"wpkh([d34db33f/84h/0h/0h]xpub6ERApfZwUNrhLCkDtcHTcxvPn4SEKBsmMKrVDCDZxsgnipnb8V5bwPaFZ8bpRVuXuKNhT3r3v2aK6XBqNEYj3RMzCFZHbP1bCMKKMuhCmTz/<0;1>/*)#9d0s498j"})]}),e.jsx("p",{className:"text-dark-500 text-sm mt-3",children:"One string captures everything: key origin, xpub, both address chains, and checksum"})]}),e.jsx(t,{type:"success",title:"Simplified Backups",children:e.jsx("p",{children:"BIP-389 is a quality-of-life improvement that makes descriptor backups more practical. A single line can now fully describe a wallet's address derivation, reducing the chance of incomplete backups that would miss change addresses."})})]})}export{o as default};
