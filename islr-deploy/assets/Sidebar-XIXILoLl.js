import{j as e,A as j,m as b}from"./vendor-animation-0o8UKZ_1.js";import{r as m,L as x,N as g}from"./vendor-react-Drj8qL0h.js";import{g as y,a as w,e as C,i as L,u as v,b as P,C as M,H as B,S,X as E,c as $,d as I}from"./index-Bo7cSuIE.js";import"./vendor-math-p018AHG0.js";function R({level:a,showLabel:n=!1}){const{label:o,color:t,symbol:l}=y(a);return e.jsxs("div",{className:`flex items-center gap-1.5 ${t}`,children:[e.jsx("span",{className:"text-sm",children:l}),n&&e.jsx("span",{className:"text-xs",children:o})]})}function W({onImportSuccess:a}){const[n,o]=m.useState(!1),[t,l]=m.useState(null),[c,h]=m.useState(!1),d=m.useRef(null),s=w(),i=()=>{C(),l({type:"success",text:"Progress exported! Check your downloads folder."}),setTimeout(()=>l(null),3e3)},r=()=>{var p;(p=d.current)==null||p.click()},N=async p=>{var f;const k=(f=p.target.files)==null?void 0:f[0];if(!k)return;h(!0),l(null);const u=await L(k);h(!1),l({type:u.success?"success":"error",text:u.message}),u.success&&(a==null||a(),setTimeout(()=>{window.location.reload()},1500)),d.current&&(d.current.value="")};return e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>o(!n),className:"p-2 rounded-lg hover:bg-dark-800 transition-colors","aria-label":"Backup & restore progress",title:"Backup & restore progress",children:e.jsx("svg",{className:"w-5 h-5 text-dark-400 hover:text-dark-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-72 bg-dark-800 rounded-lg shadow-xl border border-dark-700 z-50 p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-dark-100 mb-3",children:"Progress Backup"}),s&&e.jsxs("div",{className:"mb-4 p-3 bg-dark-900 rounded-lg",children:[e.jsx("div",{className:"text-xs text-dark-400 mb-1",children:"Current Progress"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"text-accent-400 font-semibold",children:[s.totalXP," XP"]}),e.jsxs("span",{className:"text-dark-300",children:["Level ",s.level]}),e.jsxs("span",{className:"text-dark-400",children:[s.sectionsCompleted," sections"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:i,disabled:!s,className:"w-full flex items-center gap-2 px-3 py-2 bg-dark-700 hover:bg-dark-600 rounded-lg text-sm text-dark-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export Progress"]}),e.jsxs("button",{onClick:r,disabled:c,className:"w-full flex items-center gap-2 px-3 py-2 bg-dark-700 hover:bg-dark-600 rounded-lg text-sm text-dark-100 transition-colors disabled:opacity-50",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),c?"Importing...":"Import Backup"]}),e.jsx("input",{ref:d,type:"file",accept:".json",onChange:N,className:"hidden"})]}),t&&e.jsx("div",{className:`mt-3 p-2 rounded text-xs ${t.type==="success"?"bg-green-900/50 text-green-300 border border-green-700":"bg-red-900/50 text-red-300 border border-red-700"}`,children:t.text}),e.jsx("p",{className:"mt-3 text-xs text-dark-500",children:"Export your progress regularly to avoid losing your XP. Import to restore from a backup file."})]})]})]})}function U({onToggleSidebar:a,sidebarOpen:n}){const t=v();return e.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-dark-900/95 backdrop-blur-sm border-b border-dark-800",children:e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:a,className:"p-2 rounded-lg hover:bg-dark-800 transition-colors","aria-label":n?"Close sidebar":"Open sidebar",children:e.jsx("svg",{className:"w-6 h-6 text-dark-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsxs(x,{to:"/",className:"flex items-center gap-3 hover:opacity-80 transition-opacity",children:[e.jsx("span",{className:"text-2xl",children:P}),e.jsx("h1",{className:"text-lg font-semibold text-dark-100 hidden sm:block",children:M})]})]}),e.jsxs("nav",{className:"hidden md:flex items-center gap-6",children:[e.jsx("a",{href:B,className:"text-dark-400 hover:text-dark-100 transition-colors text-sm font-medium",children:"Hub"}),e.jsx(x,{to:"/",className:"text-dark-400 hover:text-dark-100 transition-colors text-sm font-medium",children:"Home"}),e.jsx(x,{to:"/theorems",className:"text-dark-400 hover:text-dark-100 transition-colors text-sm font-medium",children:"Theorems"}),e.jsx(x,{to:"/interactive",className:"text-dark-400 hover:text-dark-100 transition-colors text-sm font-medium",children:"Interactive"}),e.jsx(x,{to:"/leaderboard",className:"text-dark-400 hover:text-dark-100 transition-colors text-sm font-medium",children:"Leaderboard"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[t&&e.jsxs(e.Fragment,{children:[e.jsx(S,{streak:t.state.streak.currentStreak}),e.jsx(E,{xp:t.state.user.totalXP,level:t.state.user.level})]}),e.jsx(W,{})]})]})})}function F({isOpen:a,onClose:n}){const[o,t]=m.useState(new Set([1])),c=v(),h=s=>{t(i=>{const r=new Set(i);return r.has(s)?r.delete(s):r.add(s),r})},d=s=>{var r;if(!c)return"none";const i=`${I}:${s}`;return((r=c.state.sections[i])==null?void 0:r.masteryLevel)??"none"};return e.jsxs(e.Fragment,{children:[e.jsx(j,{children:a&&e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n,className:"fixed inset-0 bg-black/50 z-40 lg:hidden"})}),e.jsx("aside",{className:`
          fixed top-16 left-0 bottom-0 z-40
          w-72 bg-dark-900 border-r border-dark-800
          transform transition-transform duration-300 ease-in-out
          ${a?"translate-x-0":"-translate-x-full"}
          lg:translate-x-0
          overflow-y-auto
        `,children:e.jsxs("nav",{className:"p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-amber-500/20 to-orange-500/10 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-amber-400",children:"â˜…"})}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-dark-500",children:"Reference"})]}),e.jsxs("ul",{className:"space-y-0.5",children:[e.jsx("li",{children:e.jsxs(g,{to:"/theorems",className:({isActive:s})=>`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors ${s?"bg-primary-500/10 text-primary-400":"text-dark-300 hover:bg-dark-800 hover:text-dark-100"}`,children:[e.jsx("span",{className:"text-lg",children:"ðŸ“œ"}),"Theorems"]})}),e.jsx("li",{children:e.jsxs(g,{to:"/interactive",className:({isActive:s})=>`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors ${s?"bg-primary-500/10 text-primary-400":"text-dark-300 hover:bg-dark-800 hover:text-dark-100"}`,children:[e.jsx("span",{className:"text-lg",children:"ðŸŽ®"}),"Interactive Modules"]})})]})]}),e.jsx("div",{className:"space-y-2",children:$.map(s=>e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>h(s.id),className:"w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-dark-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-primary-500/20 to-primary-600/10 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-primary-400",children:s.id})}),e.jsx("span",{className:"text-sm font-medium text-dark-200",children:s.title})]}),e.jsx("svg",{className:`w-4 h-4 text-dark-500 transition-transform ${o.has(s.id)?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsx(j,{children:o.has(s.id)&&e.jsx(b.ul,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"ml-4 mt-1 space-y-0.5 overflow-hidden",children:s.sections.map(i=>e.jsx("li",{children:e.jsxs(g,{to:`/section/${i.id}`,onClick:()=>{window.innerWidth<1024&&n()},className:({isActive:r})=>`flex items-center justify-between px-3 py-2 rounded-lg text-sm transition-colors ${r?"bg-primary-500/10 text-primary-400":"text-dark-400 hover:bg-dark-800 hover:text-dark-200"}`,children:[e.jsx("span",{className:"truncate",children:i.title}),e.jsx(R,{level:d(i.id)})]})},i.id))})})]},s.id))})]})})]})}export{U as H,F as S};
