import{j as n,m as De}from"./vendor-animation-0o8UKZ_1.js";import{r as D,u as Zt,L as Ie}from"./vendor-react-Drj8qL0h.js";import{u as Ft,c as Jt,X as en,g as tn,a as nn}from"./index-E35Y07J2.js";import{k as Ct}from"./vendor-math-p018AHG0.js";import{g as rn}from"./quizMap-CBRl9XRR.js";import"./vendor-firebase-functions-Bu93Ly_7.js";import"./vendor-firebase-core-_7V-tLLm.js";import"./vendor-firebase-auth-Br51EKMN.js";/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:Ht,setPrototypeOf:Lt,isFrozen:an,getPrototypeOf:on,getOwnPropertyDescriptor:sn}=Object;let{freeze:v,seal:M,create:st}=Object,{apply:lt,construct:ct}=typeof Reflect<"u"&&Reflect;v||(v=function(r){return r});M||(M=function(r){return r});lt||(lt=function(r,l){for(var o=arguments.length,d=new Array(o>2?o-2:0),h=2;h<o;h++)d[h-2]=arguments[h];return r.apply(l,d)});ct||(ct=function(r){for(var l=arguments.length,o=new Array(l>1?l-1:0),d=1;d<l;d++)o[d-1]=arguments[d];return new r(...o)});const Me=C(Array.prototype.forEach),ln=C(Array.prototype.lastIndexOf),Ot=C(Array.prototype.pop),pe=C(Array.prototype.push),cn=C(Array.prototype.splice),je=C(String.prototype.toLowerCase),Je=C(String.prototype.toString),et=C(String.prototype.match),he=C(String.prototype.replace),un=C(String.prototype.indexOf),mn=C(String.prototype.trim),j=C(Object.prototype.hasOwnProperty),k=C(RegExp.prototype.test),ge=dn(TypeError);function C(i){return function(r){r instanceof RegExp&&(r.lastIndex=0);for(var l=arguments.length,o=new Array(l>1?l-1:0),d=1;d<l;d++)o[d-1]=arguments[d];return lt(i,r,o)}}function dn(i){return function(){for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return ct(i,l)}}function m(i,r){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:je;Lt&&Lt(i,null);let o=r.length;for(;o--;){let d=r[o];if(typeof d=="string"){const h=l(d);h!==d&&(an(r)||(r[o]=h),d=h)}i[d]=!0}return i}function fn(i){for(let r=0;r<i.length;r++)j(i,r)||(i[r]=null);return i}function B(i){const r=st(null);for(const[l,o]of Ht(i))j(i,l)&&(Array.isArray(o)?r[l]=fn(o):o&&typeof o=="object"&&o.constructor===Object?r[l]=B(o):r[l]=o);return r}function xe(i,r){for(;i!==null;){const o=sn(i,r);if(o){if(o.get)return C(o.get);if(typeof o.value=="function")return C(o.value)}i=on(i)}function l(){return null}return l}const Dt=v(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),tt=v(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),nt=v(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),pn=v(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),rt=v(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),hn=v(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),It=v(["#text"]),Mt=v(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),at=v(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Pt=v(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Pe=v(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),gn=M(/\{\{[\w\W]*|[\w\W]*\}\}/gm),xn=M(/<%[\w\W]*|[\w\W]*%>/gm),Tn=M(/\$\{[\w\W]*/gm),bn=M(/^data-[\-\w.\u00B7-\uFFFF]+$/),En=M(/^aria-[\-\w]+$/),zt=M(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),An=M(/^(?:\w+script|data):/i),_n=M(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Bt=M(/^html$/i),yn=M(/^[a-z][.\w]*(-[.\w]+)+$/i);var jt=Object.freeze({__proto__:null,ARIA_ATTR:En,ATTR_WHITESPACE:_n,CUSTOM_ELEMENT:yn,DATA_ATTR:bn,DOCTYPE_NAME:Bt,ERB_EXPR:xn,IS_ALLOWED_URI:zt,IS_SCRIPT_OR_DATA:An,MUSTACHE_EXPR:gn,TMPLIT_EXPR:Tn});const Te={element:1,text:3,progressingInstruction:7,comment:8,document:9},Nn=function(){return typeof window>"u"?null:window},Sn=function(r,l){if(typeof r!="object"||typeof r.createPolicy!="function")return null;let o=null;const d="data-tt-policy-suffix";l&&l.hasAttribute(d)&&(o=l.getAttribute(d));const h="dompurify"+(o?"#"+o:"");try{return r.createPolicy(h,{createHTML(S){return S},createScriptURL(S){return S}})}catch{return console.warn("TrustedTypes policy "+h+" could not be created."),null}},Ut=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Gt(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Nn();const r=s=>Gt(s);if(r.version="3.3.1",r.removed=[],!i||!i.document||i.document.nodeType!==Te.document||!i.Element)return r.isSupported=!1,r;let{document:l}=i;const o=l,d=o.currentScript,{DocumentFragment:h,HTMLTemplateElement:S,Node:w,Element:L,NodeFilter:x,NamedNodeMap:se=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:q,DOMParser:le,trustedTypes:R}=i,P=L.prototype,Ue=xe(P,"cloneNode"),K=xe(P,"remove"),be=xe(P,"nextSibling"),Z=xe(P,"childNodes"),J=xe(P,"parentNode");if(typeof S=="function"){const s=l.createElement("template");s.content&&s.content.ownerDocument&&(l=s.content.ownerDocument)}let _,$="";const{implementation:U,createNodeIterator:Ee,createDocumentFragment:Ae,getElementsByTagName:_e}=l,{importNode:ye}=o;let u=Ut();r.isSupported=typeof Ht=="function"&&typeof J=="function"&&U&&U.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:I,ERB_EXPR:F,TMPLIT_EXPR:ce,DATA_ATTR:Fe,ARIA_ATTR:He,IS_SCRIPT_OR_DATA:ze,ATTR_WHITESPACE:Ne,CUSTOM_ELEMENT:Se}=jt;let{IS_ALLOWED_URI:ue}=jt,b=null;const f=m({},[...Dt,...tt,...nt,...rt,...It]);let c=null;const T=m({},[...Mt,...at,...Pt,...Pe]);let p=Object.seal(st(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),X=null,me=null;const ee=Object.seal(st(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ut=!0,Be=!0,mt=!1,dt=!0,te=!1,we=!0,Q=!1,Ge=!1,We=!1,ne=!1,Re=!1,ke=!1,ft=!0,pt=!1;const Wt="user-content-";let Ye=!0,de=!1,re={},H=null;const $e=m({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ht=null;const gt=m({},["audio","video","img","source","image","track"]);let Xe=null;const xt=m({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ve="http://www.w3.org/1998/Math/MathML",Ce="http://www.w3.org/2000/svg",G="http://www.w3.org/1999/xhtml";let ae=G,Qe=!1,Ve=null;const Yt=m({},[ve,Ce,G],Je);let Le=m({},["mi","mo","mn","ms","mtext"]),Oe=m({},["annotation-xml"]);const $t=m({},["title","style","font","a","script"]);let fe=null;const Xt=["application/xhtml+xml","text/html"],Qt="text/html";let A=null,oe=null;const Vt=l.createElement("form"),Tt=function(e){return e instanceof RegExp||e instanceof Function},qe=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(oe&&oe===e)){if((!e||typeof e!="object")&&(e={}),e=B(e),fe=Xt.indexOf(e.PARSER_MEDIA_TYPE)===-1?Qt:e.PARSER_MEDIA_TYPE,A=fe==="application/xhtml+xml"?Je:je,b=j(e,"ALLOWED_TAGS")?m({},e.ALLOWED_TAGS,A):f,c=j(e,"ALLOWED_ATTR")?m({},e.ALLOWED_ATTR,A):T,Ve=j(e,"ALLOWED_NAMESPACES")?m({},e.ALLOWED_NAMESPACES,Je):Yt,Xe=j(e,"ADD_URI_SAFE_ATTR")?m(B(xt),e.ADD_URI_SAFE_ATTR,A):xt,ht=j(e,"ADD_DATA_URI_TAGS")?m(B(gt),e.ADD_DATA_URI_TAGS,A):gt,H=j(e,"FORBID_CONTENTS")?m({},e.FORBID_CONTENTS,A):$e,X=j(e,"FORBID_TAGS")?m({},e.FORBID_TAGS,A):B({}),me=j(e,"FORBID_ATTR")?m({},e.FORBID_ATTR,A):B({}),re=j(e,"USE_PROFILES")?e.USE_PROFILES:!1,ut=e.ALLOW_ARIA_ATTR!==!1,Be=e.ALLOW_DATA_ATTR!==!1,mt=e.ALLOW_UNKNOWN_PROTOCOLS||!1,dt=e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,te=e.SAFE_FOR_TEMPLATES||!1,we=e.SAFE_FOR_XML!==!1,Q=e.WHOLE_DOCUMENT||!1,ne=e.RETURN_DOM||!1,Re=e.RETURN_DOM_FRAGMENT||!1,ke=e.RETURN_TRUSTED_TYPE||!1,We=e.FORCE_BODY||!1,ft=e.SANITIZE_DOM!==!1,pt=e.SANITIZE_NAMED_PROPS||!1,Ye=e.KEEP_CONTENT!==!1,de=e.IN_PLACE||!1,ue=e.ALLOWED_URI_REGEXP||zt,ae=e.NAMESPACE||G,Le=e.MATHML_TEXT_INTEGRATION_POINTS||Le,Oe=e.HTML_INTEGRATION_POINTS||Oe,p=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Tt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(p.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Tt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(p.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(p.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),te&&(Be=!1),Re&&(ne=!0),re&&(b=m({},It),c=[],re.html===!0&&(m(b,Dt),m(c,Mt)),re.svg===!0&&(m(b,tt),m(c,at),m(c,Pe)),re.svgFilters===!0&&(m(b,nt),m(c,at),m(c,Pe)),re.mathMl===!0&&(m(b,rt),m(c,Pt),m(c,Pe))),e.ADD_TAGS&&(typeof e.ADD_TAGS=="function"?ee.tagCheck=e.ADD_TAGS:(b===f&&(b=B(b)),m(b,e.ADD_TAGS,A))),e.ADD_ATTR&&(typeof e.ADD_ATTR=="function"?ee.attributeCheck=e.ADD_ATTR:(c===T&&(c=B(c)),m(c,e.ADD_ATTR,A))),e.ADD_URI_SAFE_ATTR&&m(Xe,e.ADD_URI_SAFE_ATTR,A),e.FORBID_CONTENTS&&(H===$e&&(H=B(H)),m(H,e.FORBID_CONTENTS,A)),e.ADD_FORBID_CONTENTS&&(H===$e&&(H=B(H)),m(H,e.ADD_FORBID_CONTENTS,A)),Ye&&(b["#text"]=!0),Q&&m(b,["html","head","body"]),b.table&&(m(b,["tbody"]),delete X.tbody),e.TRUSTED_TYPES_POLICY){if(typeof e.TRUSTED_TYPES_POLICY.createHTML!="function")throw ge('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof e.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ge('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');_=e.TRUSTED_TYPES_POLICY,$=_.createHTML("")}else _===void 0&&(_=Sn(R,d)),_!==null&&typeof $=="string"&&($=_.createHTML(""));v&&v(e),oe=e}},bt=m({},[...tt,...nt,...pn]),Et=m({},[...rt,...hn]),qt=function(e){let t=J(e);(!t||!t.tagName)&&(t={namespaceURI:ae,tagName:"template"});const a=je(e.tagName),g=je(t.tagName);return Ve[e.namespaceURI]?e.namespaceURI===Ce?t.namespaceURI===G?a==="svg":t.namespaceURI===ve?a==="svg"&&(g==="annotation-xml"||Le[g]):!!bt[a]:e.namespaceURI===ve?t.namespaceURI===G?a==="math":t.namespaceURI===Ce?a==="math"&&Oe[g]:!!Et[a]:e.namespaceURI===G?t.namespaceURI===Ce&&!Oe[g]||t.namespaceURI===ve&&!Le[g]?!1:!Et[a]&&($t[a]||!bt[a]):!!(fe==="application/xhtml+xml"&&Ve[e.namespaceURI]):!1},z=function(e){pe(r.removed,{element:e});try{J(e).removeChild(e)}catch{K(e)}},V=function(e,t){try{pe(r.removed,{attribute:t.getAttributeNode(e),from:t})}catch{pe(r.removed,{attribute:null,from:t})}if(t.removeAttribute(e),e==="is")if(ne||Re)try{z(t)}catch{}else try{t.setAttribute(e,"")}catch{}},At=function(e){let t=null,a=null;if(We)e="<remove></remove>"+e;else{const E=et(e,/^[\r\n\t ]+/);a=E&&E[0]}fe==="application/xhtml+xml"&&ae===G&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const g=_?_.createHTML(e):e;if(ae===G)try{t=new le().parseFromString(g,fe)}catch{}if(!t||!t.documentElement){t=U.createDocument(ae,"template",null);try{t.documentElement.innerHTML=Qe?$:g}catch{}}const N=t.body||t.documentElement;return e&&a&&N.insertBefore(l.createTextNode(a),N.childNodes[0]||null),ae===G?_e.call(t,Q?"html":"body")[0]:Q?t.documentElement:N},_t=function(e){return Ee.call(e.ownerDocument||e,e,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT|x.SHOW_PROCESSING_INSTRUCTION|x.SHOW_CDATA_SECTION,null)},Ke=function(e){return e instanceof q&&(typeof e.nodeName!="string"||typeof e.textContent!="string"||typeof e.removeChild!="function"||!(e.attributes instanceof se)||typeof e.removeAttribute!="function"||typeof e.setAttribute!="function"||typeof e.namespaceURI!="string"||typeof e.insertBefore!="function"||typeof e.hasChildNodes!="function")},yt=function(e){return typeof w=="function"&&e instanceof w};function W(s,e,t){Me(s,a=>{a.call(r,e,t,oe)})}const Nt=function(e){let t=null;if(W(u.beforeSanitizeElements,e,null),Ke(e))return z(e),!0;const a=A(e.nodeName);if(W(u.uponSanitizeElement,e,{tagName:a,allowedTags:b}),we&&e.hasChildNodes()&&!yt(e.firstElementChild)&&k(/<[/\w!]/g,e.innerHTML)&&k(/<[/\w!]/g,e.textContent)||e.nodeType===Te.progressingInstruction||we&&e.nodeType===Te.comment&&k(/<[/\w]/g,e.data))return z(e),!0;if(!(ee.tagCheck instanceof Function&&ee.tagCheck(a))&&(!b[a]||X[a])){if(!X[a]&&wt(a)&&(p.tagNameCheck instanceof RegExp&&k(p.tagNameCheck,a)||p.tagNameCheck instanceof Function&&p.tagNameCheck(a)))return!1;if(Ye&&!H[a]){const g=J(e)||e.parentNode,N=Z(e)||e.childNodes;if(N&&g){const E=N.length;for(let O=E-1;O>=0;--O){const Y=Ue(N[O],!0);Y.__removalCount=(e.__removalCount||0)+1,g.insertBefore(Y,be(e))}}}return z(e),!0}return e instanceof L&&!qt(e)||(a==="noscript"||a==="noembed"||a==="noframes")&&k(/<\/no(script|embed|frames)/i,e.innerHTML)?(z(e),!0):(te&&e.nodeType===Te.text&&(t=e.textContent,Me([I,F,ce],g=>{t=he(t,g," ")}),e.textContent!==t&&(pe(r.removed,{element:e.cloneNode()}),e.textContent=t)),W(u.afterSanitizeElements,e,null),!1)},St=function(e,t,a){if(ft&&(t==="id"||t==="name")&&(a in l||a in Vt))return!1;if(!(Be&&!me[t]&&k(Fe,t))){if(!(ut&&k(He,t))){if(!(ee.attributeCheck instanceof Function&&ee.attributeCheck(t,e))){if(!c[t]||me[t]){if(!(wt(e)&&(p.tagNameCheck instanceof RegExp&&k(p.tagNameCheck,e)||p.tagNameCheck instanceof Function&&p.tagNameCheck(e))&&(p.attributeNameCheck instanceof RegExp&&k(p.attributeNameCheck,t)||p.attributeNameCheck instanceof Function&&p.attributeNameCheck(t,e))||t==="is"&&p.allowCustomizedBuiltInElements&&(p.tagNameCheck instanceof RegExp&&k(p.tagNameCheck,a)||p.tagNameCheck instanceof Function&&p.tagNameCheck(a))))return!1}else if(!Xe[t]){if(!k(ue,he(a,Ne,""))){if(!((t==="src"||t==="xlink:href"||t==="href")&&e!=="script"&&un(a,"data:")===0&&ht[e])){if(!(mt&&!k(ze,he(a,Ne,"")))){if(a)return!1}}}}}}}return!0},wt=function(e){return e!=="annotation-xml"&&et(e,Se)},Rt=function(e){W(u.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||Ke(e))return;const a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:c,forceKeepAttr:void 0};let g=t.length;for(;g--;){const N=t[g],{name:E,namespaceURI:O,value:Y}=N,ie=A(E),Ze=Y;let y=E==="value"?Ze:mn(Ze);if(a.attrName=ie,a.attrValue=y,a.keepAttr=!0,a.forceKeepAttr=void 0,W(u.uponSanitizeAttribute,e,a),y=a.attrValue,pt&&(ie==="id"||ie==="name")&&(V(E,e),y=Wt+y),we&&k(/((--!?|])>)|<\/(style|title|textarea)/i,y)){V(E,e);continue}if(ie==="attributename"&&et(y,"href")){V(E,e);continue}if(a.forceKeepAttr)continue;if(!a.keepAttr){V(E,e);continue}if(!dt&&k(/\/>/i,y)){V(E,e);continue}te&&Me([I,F,ce],vt=>{y=he(y,vt," ")});const kt=A(e.nodeName);if(!St(kt,ie,y)){V(E,e);continue}if(_&&typeof R=="object"&&typeof R.getAttributeType=="function"&&!O)switch(R.getAttributeType(kt,ie)){case"TrustedHTML":{y=_.createHTML(y);break}case"TrustedScriptURL":{y=_.createScriptURL(y);break}}if(y!==Ze)try{O?e.setAttributeNS(O,E,y):e.setAttribute(E,y),Ke(e)?z(e):Ot(r.removed)}catch{V(E,e)}}W(u.afterSanitizeAttributes,e,null)},Kt=function s(e){let t=null;const a=_t(e);for(W(u.beforeSanitizeShadowDOM,e,null);t=a.nextNode();)W(u.uponSanitizeShadowNode,t,null),Nt(t),Rt(t),t.content instanceof h&&s(t.content);W(u.afterSanitizeShadowDOM,e,null)};return r.sanitize=function(s){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=null,a=null,g=null,N=null;if(Qe=!s,Qe&&(s="<!-->"),typeof s!="string"&&!yt(s))if(typeof s.toString=="function"){if(s=s.toString(),typeof s!="string")throw ge("dirty is not a string, aborting")}else throw ge("toString is not a function");if(!r.isSupported)return s;if(Ge||qe(e),r.removed=[],typeof s=="string"&&(de=!1),de){if(s.nodeName){const Y=A(s.nodeName);if(!b[Y]||X[Y])throw ge("root node is forbidden and cannot be sanitized in-place")}}else if(s instanceof w)t=At("<!---->"),a=t.ownerDocument.importNode(s,!0),a.nodeType===Te.element&&a.nodeName==="BODY"||a.nodeName==="HTML"?t=a:t.appendChild(a);else{if(!ne&&!te&&!Q&&s.indexOf("<")===-1)return _&&ke?_.createHTML(s):s;if(t=At(s),!t)return ne?null:ke?$:""}t&&We&&z(t.firstChild);const E=_t(de?s:t);for(;g=E.nextNode();)Nt(g),Rt(g),g.content instanceof h&&Kt(g.content);if(de)return s;if(ne){if(Re)for(N=Ae.call(t.ownerDocument);t.firstChild;)N.appendChild(t.firstChild);else N=t;return(c.shadowroot||c.shadowrootmode)&&(N=ye.call(o,N,!0)),N}let O=Q?t.outerHTML:t.innerHTML;return Q&&b["!doctype"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&k(Bt,t.ownerDocument.doctype.name)&&(O="<!DOCTYPE "+t.ownerDocument.doctype.name+`>
`+O),te&&Me([I,F,ce],Y=>{O=he(O,Y," ")}),_&&ke?_.createHTML(O):O},r.setConfig=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};qe(s),Ge=!0},r.clearConfig=function(){oe=null,Ge=!1},r.isValidAttribute=function(s,e,t){oe||qe({});const a=A(s),g=A(e);return St(a,g,t)},r.addHook=function(s,e){typeof e=="function"&&pe(u[s],e)},r.removeHook=function(s,e){if(e!==void 0){const t=ln(u[s],e);return t===-1?void 0:cn(u[s],t,1)[0]}return Ot(u[s])},r.removeHooks=function(s){u[s]=[]},r.removeAllHooks=function(){u=Ut()},r}var wn=Gt();function ot(i){return i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Rn(i){if(!i)return[];const r=[];let l=0;const o=[],d=/\$\$([^$]*?)\$\$/g;let h;for(;(h=d.exec(i))!==null;)o.push({type:"display",latex:h[1],start:h.index,end:h.index+h[0].length});const S=/\$([^$]+?)\$/g;let w;for(;(w=S.exec(i))!==null;)o.some(x=>w.index>=x.start&&w.index<x.end)||o.push({type:"inline",latex:w[1],start:w.index,end:w.index+w[0].length});return o.sort((L,x)=>L.start-x.start),o.forEach(L=>{const x=i.slice(l,L.start);x&&r.push({type:"text",content:x}),r.push({type:L.type==="display"?"display-math":"inline-math",content:L.latex}),l=L.end}),l<i.length&&r.push({type:"text",content:i.slice(l)}),r}function kn(i){if(!i)return"";const l=Rn(i).map(o=>{if(o.type==="text")return ot(o.content);if(o.type==="inline-math")try{return Ct.renderToString(o.content,{throwOnError:!1,displayMode:!1})}catch{return ot(o.content)}else if(o.type==="display-math")try{return Ct.renderToString(o.content,{throwOnError:!1,displayMode:!0})}catch{return ot(o.content)}return""}).join("");return wn.sanitize(l,{ADD_TAGS:["semantics","mrow","mi","mo","mn","msup","msub","mfrac","mroot","msqrt","mtext","annotation"],ADD_ATTR:["encoding","mathvariant","stretchy","fence","separator","lspace","rspace"]})}function it(i){return typeof i=="string"?kn(i):i.map(r=>(r.type==="text",r.content)).join("")}function vn({sectionId:i,questions:r,title:l="Section Quiz"}){var Se,ue,b;const d=Ft(),[h,S]=D.useState(0),[w,L]=D.useState(null),[x,se]=D.useState(null),[q,le]=D.useState(""),[R,P]=D.useState(!1),[Ue,K]=D.useState(0),[be,Z]=D.useState([]),[J,_]=D.useState(!1),[$,U]=D.useState(""),[Ee,Ae]=D.useState(0),[_e]=D.useState(()=>r.map(()=>Math.random())),ye=D.useMemo(()=>[...r].map((f,c)=>({q:f,sort:_e[c]??0})).sort((f,c)=>f.sort-c.sort).map(({q:f})=>f).slice(0,5),[r,_e]),u=ye[h],I=ye.length,F=(u==null?void 0:u.type)??"multiple-choice",ce=f=>{if(w!==null)return;L(f);const c=f===u.correctIndex;c&&K(T=>T+1),Z(T=>[...T,c]),P(!0)},Fe=()=>{if(x===null||Number.isNaN(x)){U("Please enter a number");return}const{min:f,max:c}=u.numericRange??{};if(f!==void 0&&x<f){U(`Answer must be at least ${f}`);return}if(c!==void 0&&x>c){U(`Answer must be at most ${c}`);return}U("");const T=x===u.correctAnswer;T&&K(p=>p+1),Z(p=>[...p,T]),P(!0)},He=()=>{const f=q.trim();if(f==="")return;const c=f.toLowerCase()===String(u.correctAnswer??"").toLowerCase();c&&K(T=>T+1),Z(T=>[...T,c]),P(!0)},ze=()=>{if(h<I-1)S(f=>f+1),L(null),se(null),le(""),P(!1),U("");else{_(!0);const f=Ue+(R&&(F==="multiple-choice"&&w===u.correctIndex||F==="numeric"&&x===u.correctAnswer||F==="text"&&q.toLowerCase()===String(u.correctAnswer??"").toLowerCase())?1:0),c=globalThis.Math.round(f/I*100);let T=Jt(u.difficulty,c);c===100&&(T=globalThis.Math.round(T*(1+en.QUIZ_PERFECT_BONUS))),Ae(T),d&&d.recordQuiz(i,u.difficulty,c,f,I)}},Ne=()=>{S(0),L(null),se(null),le(""),P(!1),K(0),Z([]),_(!1),U(""),Ae(0)};if(!r||r.length===0||!u)return null;if(J){const f=be.filter(Boolean).length,c=globalThis.Math.round(f/I*100);return n.jsx("div",{className:"mt-12 p-6 rounded-2xl bg-dark-800/50 border border-dark-700/50",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:c>=80?"ðŸŽ‰":c>=60?"ðŸ‘":"ðŸ“š"}),n.jsx("h3",{className:"text-2xl font-bold text-dark-100 mb-2",children:"Quiz Complete!"}),n.jsxs("p",{className:"text-dark-400 mb-4",children:["You scored ",f," out of ",I," (",c,"%)"]}),Ee>0&&n.jsxs(De.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-amber-500/20 border border-amber-500/30 mb-4",children:[n.jsx("span",{className:"text-2xl",children:"â­"}),n.jsxs("span",{className:"text-amber-300 font-bold text-lg",children:["+",Ee," XP"]}),c===100&&n.jsx("span",{className:"text-amber-400 text-sm",children:"(Perfect bonus!)"})]}),n.jsx("div",{className:"flex items-center justify-center gap-2 mb-6",children:be.map((T,p)=>n.jsx("div",{className:`w-3 h-3 rounded-full ${T?"bg-emerald-500":"bg-red-500"}`},p))}),n.jsx("button",{onClick:Ne,className:"px-6 py-3 rounded-xl bg-primary-500 hover:bg-primary-600 text-white font-medium transition-colors",children:"Try Again"})]})})}return n.jsxs("div",{className:"mt-12 p-6 rounded-2xl bg-dark-800/50 border border-dark-700/50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-dark-100",children:l}),n.jsxs("span",{className:"text-sm text-dark-400",children:["Question ",h+1," of ",I]})]}),n.jsx("div",{className:"h-1 bg-dark-700 rounded-full mb-6 overflow-hidden",children:n.jsx(De.div,{className:"h-full bg-primary-500",initial:{width:0},animate:{width:`${(h+1)/I*100}%`}})}),n.jsx("div",{className:"mb-4",children:n.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${u.difficulty==="easy"?"bg-emerald-500/20 text-emerald-400":u.difficulty==="medium"?"bg-amber-500/20 text-amber-400":"bg-red-500/20 text-red-400"}`,children:u.difficulty.charAt(0).toUpperCase()+u.difficulty.slice(1)})}),n.jsx("p",{className:"text-lg text-dark-200 mb-6",children:n.jsx("span",{dangerouslySetInnerHTML:{__html:it(u.question)}})}),F==="multiple-choice"&&u.options&&n.jsx("div",{className:"space-y-3 mb-6",children:u.options.map((f,c)=>{const T=w===c,p=c===u.correctIndex,X=R&&p,me=R&&T&&!p;return n.jsx("button",{onClick:()=>ce(c),disabled:R,className:`w-full p-4 rounded-xl text-left transition-all ${X?"bg-emerald-500/20 border-emerald-500/50 text-emerald-300":me?"bg-red-500/20 border-red-500/50 text-red-300":T?"bg-primary-500/20 border-primary-500/50 text-primary-300":"bg-dark-700/50 border-dark-600/50 text-dark-200 hover:bg-dark-700 hover:border-dark-500"} border`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"w-6 h-6 rounded-full bg-dark-600 flex items-center justify-center text-sm font-medium",children:String.fromCharCode(65+c)}),n.jsx("span",{dangerouslySetInnerHTML:{__html:it(f)}})]})},c)})}),F==="numeric"&&n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsx("input",{type:"number",step:(Se=u.numericRange)!=null&&Se.precision?1/globalThis.Math.pow(10,u.numericRange.precision):1,min:(ue=u.numericRange)==null?void 0:ue.min,max:(b=u.numericRange)==null?void 0:b.max,value:x??"",onChange:f=>{const c=f.target.value;se(c===""?null:parseFloat(c))},disabled:R,className:"w-full px-4 py-3 rounded-xl bg-dark-800 border border-dark-700 text-dark-100 placeholder-dark-500 focus:outline-none focus:border-primary-500 transition-colors",placeholder:"Enter your answer..."}),$&&n.jsx("p",{className:"text-red-400 text-sm",children:$}),n.jsx("button",{onClick:Fe,disabled:R||x===null||Number.isNaN(x),className:"w-full py-3 rounded-xl bg-primary-500 hover:bg-primary-600 text-white font-medium transition-colors disabled:bg-dark-600 disabled:cursor-not-allowed",children:"Check Answer"})]}),F==="text"&&n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsx("input",{type:"text",value:q,onChange:f=>le(f.target.value),disabled:R,className:"w-full px-4 py-3 rounded-xl bg-dark-800 border border-dark-700 text-dark-100 placeholder-dark-500 focus:outline-none focus:border-primary-500 transition-colors",placeholder:"Type your answer..."}),n.jsx("button",{onClick:He,disabled:R||!q.trim(),className:"w-full py-3 rounded-xl bg-primary-500 hover:bg-primary-600 text-white font-medium transition-colors disabled:bg-dark-600 disabled:cursor-not-allowed",children:"Check Answer"})]}),R&&u.explanation&&n.jsx(De.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-dark-700/50 border border-dark-600/50 mb-6",children:n.jsxs("p",{className:"text-sm text-dark-300",children:[n.jsx("span",{className:"font-medium text-dark-200",children:"Explanation: "}),n.jsx("span",{dangerouslySetInnerHTML:{__html:it(u.explanation)}})]})}),R&&n.jsx(De.button,{initial:{opacity:0},animate:{opacity:1},onClick:ze,className:"w-full py-3 rounded-xl bg-primary-500 hover:bg-primary-600 text-white font-medium transition-colors",children:h<I-1?"Next Question":"See Results"})]})}function Un(){const{id:i}=Zt(),r=parseInt(i||"0",10),l=rn(r),o=tn(r),d=nn(r),S=Ft();return D.useEffect(()=>{S&&S.visitSection(r)},[r,S]),!l||l.length===0?n.jsxs("div",{className:"min-h-screen relative",children:[n.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 right-0 w-[800px] h-[800px] bg-primary-500/[0.02] rounded-full blur-[150px] -translate-y-1/2 translate-x-1/2"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-[600px] h-[600px] bg-cyan-500/[0.02] rounded-full blur-[120px] translate-y-1/2 -translate-x-1/2"})]}),n.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12 text-center",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 text-sm font-semibold bg-gradient-to-r from-dark-700/50 to-dark-800/30 text-dark-400 rounded-full border border-dark-700/50 mb-4",children:[n.jsx("span",{className:"w-2 h-2 rounded-full bg-dark-500"}),"No Quiz Available"]}),n.jsx("h1",{className:"text-3xl font-bold text-dark-100 mb-4",children:"Quiz Not Found"}),n.jsx("p",{className:"text-dark-400 text-lg mb-8",children:"There is no quiz available for this section yet."})]}),n.jsxs(Ie,{to:`/section/${r}`,className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-primary-500/10 text-primary-400 hover:bg-primary-500/20 transition-colors font-medium",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Return to Section"]})]})]}):n.jsxs("div",{className:"min-h-screen relative",children:[n.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 right-0 w-[800px] h-[800px] bg-amber-500/[0.02] rounded-full blur-[150px] -translate-y-1/2 translate-x-1/2"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-[600px] h-[600px] bg-primary-500/[0.02] rounded-full blur-[120px] translate-y-1/2 -translate-x-1/2"})]}),n.jsx("div",{className:"relative py-4 px-6 border-b border-dark-800/50 bg-dark-950/50 backdrop-blur-sm",children:n.jsxs("nav",{className:"max-w-4xl mx-auto flex items-center gap-2 text-sm",children:[n.jsxs(Ie,{to:"/",className:"text-dark-500 hover:text-dark-300 transition-colors flex items-center gap-1",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Home"]}),n.jsx("svg",{className:"w-4 h-4 text-dark-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),n.jsxs(Ie,{to:`/section/${r}`,className:"text-dark-500 hover:text-dark-300 transition-colors",children:["Section ",r]}),n.jsx("svg",{className:"w-4 h-4 text-dark-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),n.jsx("span",{className:"text-amber-400 font-medium",children:"Quiz"})]})}),n.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12",children:[n.jsxs("header",{className:"mb-10",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-6",children:[n.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-1.5 text-sm font-semibold bg-gradient-to-r from-amber-500/20 to-amber-600/10 text-amber-400 rounded-full border border-amber-500/20",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),"Section Quiz"]}),d&&n.jsxs("span",{className:"text-dark-500 text-sm",children:["Part ",d.id,": ",d.title]})]}),n.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:n.jsx("span",{className:"text-gradient",children:o==null?void 0:o.title})}),n.jsxs("p",{className:"text-dark-400 text-lg",children:["Test your understanding of this section with ",l.length," question",l.length!==1?"s":"","."]}),n.jsxs("div",{className:"mt-8 flex items-center gap-4",children:[n.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-dark-700 to-transparent"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-amber-500/50"}),n.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-amber-500/30"}),n.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-amber-500/10"})]}),n.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-dark-700 to-transparent"})]})]}),n.jsx(vn,{sectionId:r,questions:l}),n.jsx("div",{className:"mt-12 pt-8 border-t border-dark-800/50",children:n.jsxs(Ie,{to:`/section/${r}`,className:"inline-flex items-center gap-2 text-dark-400 hover:text-dark-200 transition-colors",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Section ",r]})})]})]})}export{Un as default};
