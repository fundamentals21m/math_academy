import{j as e}from"./vendor-animation-0o8UKZ_1.js";import"./vendor-react-Drj8qL0h.js";import"./vendor-math-p018AHG0.js";import"./index-BVCiRvNU.js";import{L as i}from"./LessonLayout-CT1WdmGc.js";import{D as t,C as n,E as s}from"./Callout-4_WMx_B8.js";import"./vendor-firebase-core-BXWtuYvb.js";import"./quizMap-D6hrknZo.js";function x(){return e.jsxs(i,{sectionId:7,children:[e.jsx("h2",{className:"text-2xl font-bold text-dark-100 mb-6",children:"Environments"}),e.jsx("p",{className:"mb-4",children:"Branta provides two separate environments for different stages of development and production use. Understanding when to use each environment is crucial for proper integration and testing."}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Available Environments"}),e.jsxs(t,{title:"Staging Environment",children:["A pre-production environment for development, testing, and integration work. Staging mirrors production behavior but uses separate data and API keys.",e.jsxs("div",{className:"mt-2 font-mono text-sm",children:["Base URL: ",e.jsx("code",{children:"https://staging.branta.pro/"})]})]}),e.jsxs(t,{title:"Production Environment",children:["The live environment for consumer-facing applications. Production handles real merchant registrations and customer verifications.",e.jsxs("div",{className:"mt-2 font-mono text-sm",children:["Base URL: ",e.jsx("code",{children:"https://guardrail.branta.pro/"})]})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Environment Isolation"}),e.jsx("p",{className:"mb-4",children:"Staging and Production are completely isolated from each other:"}),e.jsxs("ul",{className:"list-disc list-inside mb-6 space-y-2 text-dark-200",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Separate databases"})," - No data is shared between environments"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Separate API keys"})," - Keys from one environment don't work in the other"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Separate registrations"})," - Addresses must be registered in each environment"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Identical behavior"})," - Both environments run the same code"]})]}),e.jsx(n,{type:"info",title:"Data Isolation",children:"A payment registered in staging will NOT be verifiable in production, and vice versa. Make sure you're using the correct environment for your use case."}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"When to Use Staging"}),e.jsx("p",{className:"mb-4",children:"Use the staging environment for:"}),e.jsxs("ul",{className:"list-disc list-inside mb-6 space-y-2 text-dark-200",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Initial development"})," - Building and testing your integration"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"CI/CD pipelines"})," - Automated testing in deployment workflows"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Load testing"})," - Stress testing your integration without affecting production"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Integration testing"})," - End-to-end tests with test data"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Demo environments"})," - Showcasing functionality without real data"]})]}),e.jsx(s,{title:"Development Workflow",children:e.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[e.jsx("li",{children:"Obtain staging API key from Branta"}),e.jsx("li",{children:"Configure your development environment to use staging URL"}),e.jsx("li",{children:"Register test payment addresses"}),e.jsx("li",{children:"Build and test verification flow"}),e.jsx("li",{children:"Run automated tests against staging"}),e.jsx("li",{children:"Once verified, switch to production"})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"When to Use Production"}),e.jsx("p",{className:"mb-4",children:"Use the production environment for:"}),e.jsxs("ul",{className:"list-disc list-inside mb-6 space-y-2 text-dark-200",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Live merchant applications"})," - Real customer-facing payment flows"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Customer verification"})," - End-users verifying real payment addresses"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Production deployments"})," - Any environment serving real customers"]})]}),e.jsx(n,{type:"warning",title:"Production Best Practices",children:e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Never use production API keys in development or test environments"}),e.jsx("li",{children:"Rotate production keys if they may have been exposed"}),e.jsx("li",{children:"Monitor API usage for anomalies"}),e.jsx("li",{children:"Test all changes in staging before deploying to production"})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"API Endpoints by Environment"}),e.jsx(s,{title:"Staging Endpoints",children:e.jsxs("div",{className:"font-mono text-sm space-y-1",children:[e.jsx("p",{children:"POST https://staging.branta.pro/v1/payments"}),e.jsxs("p",{children:["GET  https://staging.branta.pro/v1/payments/","{payment_string}"]}),e.jsx("p",{children:"Web: https://staging.branta.pro/v1/verify/address"})]})}),e.jsx(s,{title:"Production Endpoints",children:e.jsxs("div",{className:"font-mono text-sm space-y-1",children:[e.jsx("p",{children:"POST https://guardrail.branta.pro/v1/payments"}),e.jsxs("p",{children:["GET  https://guardrail.branta.pro/v1/payments/","{payment_string}"]}),e.jsx("p",{children:"Web: https://guardrail.branta.pro/v1/verify/address"})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Configuration Management"}),e.jsx("p",{className:"mb-4",children:"Best practices for managing environment configuration:"}),e.jsx(s,{title:"Environment Variables",children:e.jsxs("div",{className:"font-mono text-sm space-y-2",children:[e.jsx("p",{className:"text-dark-400",children:"# Development/.env.development"}),e.jsx("p",{children:"BRANTA_API_URL=https://staging.branta.pro"}),e.jsx("p",{children:"BRANTA_API_KEY=sk_staging_xxxx"}),e.jsx("p",{className:"mt-4 text-dark-400",children:"# Production/.env.production"}),e.jsx("p",{children:"BRANTA_API_URL=https://guardrail.branta.pro"}),e.jsx("p",{children:"BRANTA_API_KEY=sk_live_xxxx"})]})}),e.jsx("p",{className:"mb-4",children:"Key configuration principles:"}),e.jsxs("ul",{className:"list-disc list-inside mb-6 space-y-2 text-dark-200",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Never hardcode URLs"})," - Use environment variables"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Separate key storage"})," - Different keys for each environment"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Validate on startup"})," - Check that the correct environment is configured"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Log the environment"})," - Make it clear which environment is in use"]})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Transitioning to Production"}),e.jsx("p",{className:"mb-4",children:"Before moving from staging to production, ensure:"}),e.jsxs("ol",{className:"list-decimal list-inside mb-6 space-y-2 text-dark-200",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Integration tested"})," - All flows work correctly in staging"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Error handling"})," - Your app handles API errors gracefully"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Key security"})," - Production keys are securely stored"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Monitoring"})," - You can observe API calls and responses"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Rollback plan"})," - You can revert if issues arise"]})]}),e.jsx(n,{type:"success",title:"Environment Parity",children:"Staging and Production have identical behavior. If something works in staging, it will work the same way in production. This makes staging a reliable preview of production behavior."}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Rate Limits and Quotas"}),e.jsx("p",{className:"mb-4",children:"Both environments have rate limits to prevent abuse:"}),e.jsxs("ul",{className:"list-disc list-inside mb-6 space-y-2 text-dark-200",children:[e.jsx("li",{children:"Rate limits are applied per API key"}),e.jsx("li",{children:"Staging may have more generous limits for testing"}),e.jsx("li",{children:"Contact Branta if you need higher production limits"}),e.jsx("li",{children:"Implement exponential backoff for rate limit responses"})]}),e.jsx("p",{className:"mb-4",children:"When you hit a rate limit, the API returns a 429 response with a Retry-After header indicating when you can retry."})]})}export{x as default};
