import{j as e}from"./vendor-animation-0o8UKZ_1.js";import{L as pe,D as V,C as G,T as D,q as ue}from"./index-D42mtZgu.js";import{M as d}from"./MathBlock-DHMt0FrA.js";import{S as je}from"./SectionQuiz-6yENJUid.js";import{r as x}from"./vendor-react-Drj8qL0h.js";import"./index-wPvFP65j.js";import"./vendor-math-p018AHG0.js";import"./vendor-firebase-functions-Bu93Ly_7.js";import"./vendor-firebase-core-_7V-tLLm.js";import"./vendor-firebase-auth-Br51EKMN.js";function fe({className:J=""}){const H=x.useRef(null),[N,_]=x.useState(0),[v,A]=x.useState(0),[S,R]=x.useState(1),[k,ee]=x.useState(90),[q,te]=x.useState(!1),[C,se]=x.useState(90),[Q,ne]=x.useState(1),[z,ie]=x.useState(0),[E,ae]=x.useState(0),g=550,I=400,X=(s,t,l)=>{const i=Math.sqrt(s*s+t*t+l*l);return i<.001?[0,0,1]:[s/i,t/i,l/i]},L=(s,t,l,i)=>{const[c,u,j]=X(s,t,l),a=i*Math.PI/360,h=Math.sin(a);return[Math.cos(a),c*h,u*h,j*h]},M=(s,t)=>{const[l,i,c,u]=s,[j,a,h,w]=t;return[l*j-i*a-c*h-u*w,l*a+i*j+c*w-u*h,l*h-i*w+c*j+u*a,l*w+i*h-c*a+u*j]},oe=s=>[s[0],-s[1],-s[2],-s[3]],T=(s,t)=>{const l=[0,t[0],t[1],t[2]],i=oe(s),c=M(M(s,l),i);return[c[1],c[2],c[3]]},r=L(N,v,S,k),p=L(Q,z,E,C);return x.useEffect(()=>{const s=H.current;if(!s)return;const t=s.getContext("2d");if(!t)return;t.fillStyle="#0f172a",t.fillRect(0,0,g,I);const l=g/2,i=I/2,c=90,u=-.4,j=.6,a=n=>{const o=Math.cos(j),f=Math.sin(j),b=Math.cos(u),y=Math.sin(u),W=n[0]*o+n[2]*f;let m=-n[0]*f+n[2]*o;const F=n[1]*b-m*y;return m=n[1]*y+m*b,[l+W*c,i-F*c]},h=1.4;[[[h,0,0],"#ef4444","x (i)"],[[0,h,0],"#22c55e","y (j)"],[[0,0,h],"#3b82f6","z (k)"]].forEach(([n,o,f])=>{const[b,y]=a(n);t.strokeStyle=o,t.lineWidth=2,t.beginPath(),t.moveTo(l,i),t.lineTo(b,y),t.stroke(),t.fillStyle=o,t.font="bold 12px sans-serif",t.fillText(f,b+5,y-5)});const[Y,Z,B]=X(N,v,S),le=[Y*1.5,Z*1.5,B*1.5],[re,ce]=a(le),[he,de]=a([-Y*1.5,-Z*1.5,-B*1.5]);t.strokeStyle="#f59e0b",t.lineWidth=3,t.setLineDash([5,5]),t.beginPath(),t.moveTo(he,de),t.lineTo(re,ce),t.stroke(),t.setLineDash([]),[[1,0,0],[0,1,0],[0,0,1],[.7,.7,0]].forEach(n=>{const[o,f]=a(n);t.fillStyle="rgba(96, 165, 250, 0.6)",t.beginPath(),t.arc(o,f,5,0,Math.PI*2),t.fill();const b=T(r,n),[y,W]=a(b);t.fillStyle="#ec4899",t.beginPath(),t.arc(y,W,6,0,Math.PI*2),t.fill(),t.strokeStyle="rgba(236, 72, 153, 0.3)",t.lineWidth=1,t.beginPath();for(let m=0;m<=1;m+=.05){const F=L(N,v,S,k*m),O=T(F,n),[$,P]=a(O);m===0?t.moveTo($,P):t.lineTo($,P)}if(t.stroke(),q){const m=T(p,b),[F,O]=a(m);t.fillStyle="#22c55e",t.beginPath(),t.arc(F,O,5,0,Math.PI*2),t.fill();const $=T(p,n),P=T(r,$),[xe,me]=a(P);t.fillStyle="#8b5cf6",t.beginPath(),t.arc(xe,me,5,0,Math.PI*2),t.fill()}}),t.fillStyle="#e2e8f0",t.font="bold 14px sans-serif",t.fillText("Quaternion Representation",20,30),t.font="12px monospace",t.fillStyle="#f59e0b",t.fillText(`q = ${r[0].toFixed(3)} + ${r[1].toFixed(3)}i + ${r[2].toFixed(3)}j + ${r[3].toFixed(3)}k`,20,50),t.fillStyle="#94a3b8",t.font="11px sans-serif";const U=(k/2).toFixed(1);t.fillText(`q = cos(${U}°) + sin(${U}°)(n₁i + n₂j + n₃k)`,20,70);const K=Math.sqrt(r[0]**2+r[1]**2+r[2]**2+r[3]**2);if(t.fillStyle=Math.abs(K-1)<.01?"#22c55e":"#ef4444",t.fillText(`|q| = ${K.toFixed(4)} (unit quaternion)`,20,90),q){t.fillStyle="#8b5cf6",t.font="11px sans-serif",t.fillText(`q₂ = ${p[0].toFixed(2)} + ${p[1].toFixed(2)}i + ${p[2].toFixed(2)}j + ${p[3].toFixed(2)}k`,20,110);const n=M(r,p),o=M(p,r);t.fillStyle="#22c55e",t.fillText(`q₁q₂ = ${n[0].toFixed(2)} + ${n[1].toFixed(2)}i + ${n[2].toFixed(2)}j + ${n[3].toFixed(2)}k`,20,130),t.fillStyle="#8b5cf6",t.fillText(`q₂q₁ = ${o[0].toFixed(2)} + ${o[1].toFixed(2)}i + ${o[2].toFixed(2)}j + ${o[3].toFixed(2)}k`,20,150);const f=Math.abs(n[0]-o[0])<.01&&Math.abs(n[1]-o[1])<.01&&Math.abs(n[2]-o[2])<.01&&Math.abs(n[3]-o[3])<.01;t.fillStyle=f?"#22c55e":"#ef4444",t.fillText(f?"✓ q₁q₂ = q₂q₁":"✗ q₁q₂ ≠ q₂q₁",20,170)}t.fillStyle="#60a5fa",t.font="11px sans-serif",t.fillText("● Original",g-100,30),t.fillStyle="#ec4899",t.fillText("● q₁(P)",g-100,50),q&&(t.fillStyle="#22c55e",t.fillText("● q₁q₂(P)",g-100,70),t.fillStyle="#8b5cf6",t.fillText("● q₂q₁(P)",g-100,90))},[N,v,S,k,q,C,Q,z,E,r,p]),e.jsxs("div",{className:`bg-slate-800/50 p-4 rounded-lg ${J}`,children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-400 mb-4",children:"Quaternion Rotations"}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("canvas",{ref:H,width:g,height:I,className:"border border-slate-700 rounded"})}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-red-400 mb-1",children:["Axis x: ",N.toFixed(1)]}),e.jsx("input",{type:"range",min:"-1",max:"1",step:"0.1",value:N,onChange:s=>_(parseFloat(s.target.value)),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-green-400 mb-1",children:["Axis y: ",v.toFixed(1)]}),e.jsx("input",{type:"range",min:"-1",max:"1",step:"0.1",value:v,onChange:s=>A(parseFloat(s.target.value)),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-blue-400 mb-1",children:["Axis z: ",S.toFixed(1)]}),e.jsx("input",{type:"range",min:"-1",max:"1",step:"0.1",value:S,onChange:s=>R(parseFloat(s.target.value)),className:"w-full"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm text-slate-400 mb-1",children:["Rotation angle: ",k,"°"]}),e.jsx("input",{type:"range",min:"0",max:"360",value:k,onChange:s=>ee(parseInt(s.target.value)),className:"w-full"})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:[e.jsx("button",{onClick:()=>{_(0),A(0),R(1)},className:"px-3 py-2 text-sm rounded bg-slate-700 text-slate-300 hover:bg-slate-600 transition",children:"Z-axis"}),e.jsx("button",{onClick:()=>{_(1),A(0),R(0)},className:"px-3 py-2 text-sm rounded bg-slate-700 text-slate-300 hover:bg-slate-600 transition",children:"X-axis"}),e.jsx("button",{onClick:()=>{_(0),A(1),R(0)},className:"px-3 py-2 text-sm rounded bg-slate-700 text-slate-300 hover:bg-slate-600 transition",children:"Y-axis"}),e.jsxs("button",{onClick:()=>te(!q),className:`px-3 py-2 text-sm rounded transition ${q?"bg-purple-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[q?"Hide":"Show"," Composition"]})]}),q&&e.jsxs("div",{className:"bg-slate-900/50 p-3 rounded mb-4",children:[e.jsx("p",{className:"text-sm text-purple-400 font-semibold mb-2",children:"Second rotation q₂:"}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-400",children:"n_x"}),e.jsx("input",{type:"range",min:"-1",max:"1",step:"0.5",value:Q,onChange:s=>ne(parseFloat(s.target.value)),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-400",children:"n_y"}),e.jsx("input",{type:"range",min:"-1",max:"1",step:"0.5",value:z,onChange:s=>ie(parseFloat(s.target.value)),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-400",children:"n_z"}),e.jsx("input",{type:"range",min:"-1",max:"1",step:"0.5",value:E,onChange:s=>ae(parseFloat(s.target.value)),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-slate-400",children:[C,"°"]}),e.jsx("input",{type:"range",min:"0",max:"360",value:C,onChange:s=>se(parseInt(s.target.value)),className:"w-full"})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-3 rounded text-sm text-slate-300",children:[e.jsx("p",{className:"mb-2",children:e.jsx("strong",{children:"Key Properties:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"q = cos(θ/2) + sin(θ/2)(n₁i + n₂j + n₃k) for rotation by θ about n"}),e.jsxs("li",{children:["Note the ",e.jsx("span",{className:"text-amber-400",children:"half angle θ/2"})," in the formula"]}),e.jsxs("li",{children:["q and −q represent the ",e.jsx("strong",{children:"same rotation"})]}),e.jsx("li",{children:"Composition: R₁R₂ ↔ q₁q₂ (quaternion multiplication)"}),e.jsx("li",{children:"Unit quaternions S³ map 2-to-1 onto SO(3)"})]})]})]})}function _e(){return e.jsxs(pe,{sectionId:53,children:[e.jsx("h2",{children:"Representing Space Rotations by Quaternions"}),e.jsx("p",{children:"Quaternions provide an elegant and computationally efficient way to represent rotations in 3D space. This representation, discovered by William Rowan Hamilton in 1843, is widely used in computer graphics, robotics, and physics."}),e.jsx("h3",{children:"Review of Quaternions"}),e.jsxs(V,{title:"Quaternions",children:[e.jsxs("p",{children:["A ",e.jsx("strong",{children:"quaternion"})," is a number of the form:"]}),e.jsx(d,{children:"\\mathbf{q} = a\\mathbf{1} + b\\mathbf{i} + c\\mathbf{j} + d\\mathbf{k}"}),e.jsx("p",{className:"mt-2",children:"where a, b, c, d ∈ ℝ and i, j, k satisfy the relations:"}),e.jsx(d,{children:"\\mathbf{i}^2 = \\mathbf{j}^2 = \\mathbf{k}^2 = \\mathbf{ijk} = -1"})]}),e.jsx("p",{children:"From these relations, we derive the multiplication rules:"}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg my-6",children:[e.jsx(d,{children:"\\mathbf{ij} = \\mathbf{k}, \\quad \\mathbf{jk} = \\mathbf{i}, \\quad \\mathbf{ki} = \\mathbf{j}"}),e.jsx(d,{children:"\\mathbf{ji} = -\\mathbf{k}, \\quad \\mathbf{kj} = -\\mathbf{i}, \\quad \\mathbf{ik} = -\\mathbf{j}"})]}),e.jsxs(G,{type:"warning",children:[e.jsx("strong",{children:"Non-Commutativity:"})," Quaternion multiplication is not commutative: ij = k but ji = −k. However, it is associative."]}),e.jsx("h3",{children:"Quaternion Norm and Conjugate"}),e.jsxs(V,{title:"Norm and Conjugate",children:[e.jsx("p",{children:"For q = a + bi + cj + dk:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Conjugate:"})," q̄ = a − bi − cj − dk"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Norm:"})," |q|² = qq̄ = a² + b² + c² + d²"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Inverse:"})," q⁻¹ = q̄/|q|² (for q ≠ 0)"]})]})]}),e.jsx("p",{children:"A key property is that the norm is multiplicative: |q₁q₂| = |q₁||q₂|."}),e.jsx("h3",{children:"Unit Quaternions and Rotations"}),e.jsxs("p",{children:["A ",e.jsx("strong",{children:"unit quaternion"})," is a quaternion with |q| = 1. These form a group under multiplication, and they correspond to rotations."]}),e.jsxs(D,{title:"Quaternion Rotation Formula",proof:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"We verify that the map p → qpq⁻¹ is indeed a rotation."}),e.jsx("p",{className:"mt-2",children:e.jsx("strong",{children:"Step 1: Pure quaternions map to pure quaternions."})}),e.jsx("p",{children:"Let p = xi + yj + zk be a pure quaternion (real part 0). We show qpq⁻¹ is also pure."}),e.jsx("p",{className:"mt-2",children:"Taking the conjugate: (qpq⁻¹)* = (q⁻¹)*p*q* = q(-p)q⁻¹ = -qpq⁻¹."}),e.jsx("p",{className:"mt-2",children:"A quaternion r satisfies r* = -r if and only if r is pure. Therefore qpq⁻¹ is pure."}),e.jsx("p",{className:"mt-2",children:e.jsx("strong",{children:"Step 2: The map preserves length."})}),e.jsx("p",{children:"For any quaternion: |qpq⁻¹|² = |q|²|p|²|q⁻¹|² = |p|² (since |q| = 1)."}),e.jsx("p",{className:"mt-2",children:e.jsx("strong",{children:"Step 3: The map is linear."})}),e.jsx("p",{children:"q(p₁ + p₂)q⁻¹ = qp₁q⁻¹ + qp₂q⁻¹ and q(λp)q⁻¹ = λ(qpq⁻¹) for real λ."}),e.jsx("p",{className:"mt-2",children:e.jsx("strong",{children:"Step 4: The map is orientation-preserving."})}),e.jsx("p",{children:"The determinant of the map is +1 (since it's conjugation by a unit quaternion, which lies in the connected identity component)."}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"Conclusion:"})," A linear, length-preserving, orientation-preserving map of ℝ³ is a rotation."]})]}),children:[e.jsx("p",{children:"Let q be a unit quaternion. The map:"}),e.jsx(d,{children:"\\mathbf{p} \\mapsto \\mathbf{qpq}^{-1}"}),e.jsx("p",{className:"mt-2 text-slate-300",children:'is a rotation of the "pure quaternions" (those with a = 0), which can be identified with ℝ³.'})]}),e.jsx("p",{children:"We identify a point (x, y, z) ∈ ℝ³ with the pure quaternion p = xi + yj + zk. Then qpq⁻¹ is also a pure quaternion, corresponding to the rotated point."}),e.jsx("h3",{children:"Axis-Angle to Quaternion"}),e.jsx("p",{children:"The unit quaternion corresponding to rotation about axis n = (n₁, n₂, n₃) through angle θ is:"}),e.jsx(d,{children:"\\mathbf{q} = \\cos\\frac{\\theta}{2} + \\sin\\frac{\\theta}{2}(n_1\\mathbf{i} + n_2\\mathbf{j} + n_3\\mathbf{k})"}),e.jsxs(G,{type:"info",children:[e.jsx("strong",{children:"Half Angles:"})," Notice the factor of θ/2 — the quaternion uses half the rotation angle. This is related to the fact that q and −q represent the same rotation."]}),e.jsx("h3",{children:"The Two-to-One Correspondence"}),e.jsx("p",{children:"There is a subtlety in the quaternion representation: both q and −q produce the same rotation."}),e.jsxs(D,{title:"Two-to-One Homomorphism",proof:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"We prove that the map φ: q → (p → qpq⁻¹) is a 2-to-1 surjective homomorphism."}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"Homomorphism:"})," For unit quaternions q₁, q₂:"]}),e.jsx(d,{math:"\\varphi(q_1)\\varphi(q_2)(p) = q_1(q_2 p q_2^{-1})q_1^{-1} = (q_1q_2)p(q_1q_2)^{-1} = \\varphi(q_1q_2)(p)"}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"Kernel:"})," φ(q) = identity means qpq⁻¹ = p for all pure p."]}),e.jsx("p",{className:"mt-2",children:"This means q commutes with all of i, j, k. Since iq = qi implies q has no j, k components, and similar reasoning for j and k, we get q = a (real). Since |q| = 1, we have q = ±1."}),e.jsxs("p",{className:"mt-2",children:["Thus ker(φ) = ","{","+1, -1","}","."]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"Surjectivity:"})," Every rotation has an axis n and angle θ. The quaternion q = cos(θ/2) + sin(θ/2)(n₁i + n₂j + n₃k) maps to this rotation (verified by direct calculation)."]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"2-to-1:"})," Since ker(φ) = ","{","±1","}"," has exactly 2 elements, each rotation is the image of exactly two unit quaternions: q and -q."]})]}),children:[e.jsx("p",{children:"The map from unit quaternions to rotations:"}),e.jsx(d,{children:"\\mathbf{q} \\mapsto (\\mathbf{p} \\mapsto \\mathbf{qpq}^{-1})"}),e.jsxs("p",{className:"mt-2 text-slate-300",children:["is a 2-to-1 homomorphism from S³ (unit quaternions) onto SO(3). The kernel consists of ","{","1, −1","}","."]})]}),e.jsx("p",{children:"This can be written as:"}),e.jsx(d,{children:"SO(3) \\cong S^3 / \\{\\pm 1\\}"}),e.jsx("h3",{children:"Advantages of Quaternions"}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg my-6",children:[e.jsx("h4",{className:"font-semibold text-blue-400 mb-3",children:"Why Use Quaternions?"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Compact:"})," Only 4 numbers (vs. 9 for a matrix)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Numerically stable:"})," Easy to renormalize to unit length"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"No gimbal lock:"})," Avoids singularities in Euler angles"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Smooth interpolation:"})," SLERP gives natural rotation paths"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Efficient composition:"})," Quaternion multiplication is fast"]})]})]}),e.jsx("h3",{children:"Composing Rotations"}),e.jsx("p",{children:"The composition of rotations corresponds to quaternion multiplication:"}),e.jsx(D,{title:"Composition of Rotations",proof:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Let R₁ and R₂ be rotations corresponding to unit quaternions q₁ and q₂ respectively."}),e.jsx("p",{className:"mt-2",children:"For any pure quaternion p (representing a point in ℝ³):"}),e.jsx(d,{math:"(R_1 \\circ R_2)(p) = R_1(R_2(p)) = R_1(q_2 p q_2^{-1}) = q_1(q_2 p q_2^{-1})q_1^{-1}"}),e.jsx("p",{className:"mt-2",children:"By associativity of quaternion multiplication:"}),e.jsx(d,{math:"= (q_1 q_2) p (q_2^{-1} q_1^{-1}) = (q_1 q_2) p (q_1 q_2)^{-1}"}),e.jsx("p",{className:"mt-2",children:"This is exactly the rotation corresponding to the quaternion q₁q₂."}),e.jsx("p",{className:"mt-2",children:"Therefore, composing rotations corresponds to multiplying their quaternion representations (in the same order)."})]}),children:e.jsx("p",{children:"If rotation R₁ corresponds to quaternion q₁ and rotation R₂ corresponds to quaternion q₂, then the composition R₁ ∘ R₂ corresponds to q₁q₂."})}),e.jsx("p",{children:"This is much simpler than multiplying 3×3 matrices!"}),e.jsx("h3",{children:"Exercises"}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg my-6",children:[e.jsx("h4",{className:"font-semibold text-blue-400 mb-3",children:"Exercise 7.6.1"}),e.jsx("p",{className:"text-slate-300",children:"Show that q = cos(π/4) + sin(π/4)k represents rotation by π/2 about the z-axis, and compute qiq⁻¹ to verify."})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg my-6",children:[e.jsx("h4",{className:"font-semibold text-blue-400 mb-3",children:"Exercise 7.6.2"}),e.jsx("p",{className:"text-slate-300",children:"Verify that q and −q give the same rotation by computing qpq⁻¹ and (−q)p(−q)⁻¹ for p = i."})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg my-6",children:[e.jsx("h4",{className:"font-semibold text-blue-400 mb-3",children:"Exercise 7.6.3"}),e.jsx("p",{className:"text-slate-300",children:"Find the quaternion representing rotation by π about the axis (1, 1, 0)/√2."})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg my-6",children:[e.jsx("h4",{className:"font-semibold text-blue-400 mb-3",children:"Exercise 7.6.4"}),e.jsx("p",{className:"text-slate-300",children:"Compute the composition of 90° rotation about the z-axis followed by 90° rotation about the x-axis using quaternions."})]}),e.jsx(fe,{className:"my-6"}),e.jsx(je,{sectionId:53,questions:ue[53]||[],title:"Representing Space Rotations by Quaternions Quiz"})]})}export{_e as default};
