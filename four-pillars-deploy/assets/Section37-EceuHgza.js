import{j as e}from"./vendor-animation-0o8UKZ_1.js";import{L as G,C as O,D as K,T as H,q as V}from"./index-BTlU4ICT.js";import{M as h}from"./MathBlock-DHMt0FrA.js";import{S as X}from"./SectionQuiz-BeoSbGTB.js";import{r as p}from"./vendor-react-Drj8qL0h.js";import"./index-9ARvsEpo.js";import"./vendor-math-p018AHG0.js";import"./vendor-firebase-functions-Bu93Ly_7.js";import"./vendor-firebase-core-_7V-tLLm.js";import"./vendor-firebase-auth-Br51EKMN.js";function J({className:U=""}){const z=p.useRef(null),[x,T]=p.useState(0),[m,N]=p.useState(1),[f,S]=p.useState(2),[u,C]=p.useState(3),[c,q]=p.useState("none"),[d,A]=p.useState(1),i=600,w=350,L=(t,s,l,n)=>{const $=(l-t)*(n-s),k=(l-s)*(n-t);return Math.abs(k)<1e-4?1/0:$/k},v=t=>{switch(c){case"translate":return t+d;case"scale":return t*d;case"reciprocal":return t===0?1/0:1/t;default:return t}},b=L(x,m,f,u),R=v(x),F=v(m),E=v(f),P=v(u),g=L(R,F,E,P);return p.useEffect(()=>{const t=z.current;if(!t)return;const s=t.getContext("2d");if(!s)return;s.fillStyle="#0f172a",s.fillRect(0,0,i,w);const l=120,n=250,$=i/2,k=40,j=a=>isFinite(a)?$+a*k:a>0?i+50:-50;s.strokeStyle="#60a5fa",s.lineWidth=3,s.beginPath(),s.moveTo(30,l),s.lineTo(i-30,l),s.stroke(),s.strokeStyle="#34d399",s.lineWidth=3,s.beginPath(),s.moveTo(30,n),s.lineTo(i-30,n),s.stroke(),s.font="bold 14px sans-serif",s.fillStyle="#60a5fa",s.fillText("Original points",30,l-30),s.fillStyle="#34d399",s.fillText("Transformed points",30,n-30),s.strokeStyle="#475569",s.lineWidth=1,s.font="10px sans-serif",s.fillStyle="#64748b";for(let a=-5;a<=5;a++){const r=j(a);r>30&&r<i-30&&(s.beginPath(),s.moveTo(r,l-5),s.lineTo(r,l+5),s.stroke(),s.fillText(a.toString(),r-3,l+18),s.beginPath(),s.moveTo(r,n-5),s.lineTo(r,n+5),s.stroke(),s.fillText(a.toString(),r-3,n+18))}const I=["#ef4444","#f59e0b","#8b5cf6","#ec4899"],M=["p","q","r","s"],Q=[x,m,f,u],Y=[R,F,E,P];s.setLineDash([4,4]),s.strokeStyle="rgba(148, 163, 184, 0.4)",s.lineWidth=1,Q.forEach((a,r)=>{const o=Y[r];if(isFinite(a)&&isFinite(o)){const D=j(a),W=j(o);D>30&&D<i-30&&W>30&&W<i-30&&(s.beginPath(),s.moveTo(D,l+8),s.lineTo(W,n-8),s.stroke())}}),s.setLineDash([]),Q.forEach((a,r)=>{const o=j(a);o>20&&o<i-20&&(s.fillStyle=I[r],s.beginPath(),s.arc(o,l,8,0,Math.PI*2),s.fill(),s.font="bold 12px sans-serif",s.fillText(`${M[r]}=${a.toFixed(1)}`,o-15,l-15))}),Y.forEach((a,r)=>{if(isFinite(a)){const o=j(a);o>20&&o<i-20&&(s.fillStyle=I[r],s.beginPath(),s.arc(o,n,8,0,Math.PI*2),s.fill(),s.font="bold 12px sans-serif",s.fillText(`${M[r]}'=${a.toFixed(1)}`,o-15,n-15))}else s.fillStyle=I[r],s.font="bold 12px sans-serif",s.fillText(`${M[r]}'=∞`,i-40,n-15+r*15)}),s.fillStyle="#e2e8f0",s.font="bold 14px sans-serif",s.fillText("Cross-Ratio Formula:",30,35),s.font="12px sans-serif",s.fillStyle="#94a3b8",s.fillText("(r-p)(s-q) / (r-q)(s-p)",30,55),s.fillStyle="#60a5fa",s.font="bold 14px sans-serif",s.fillText(`Original CR = ${isFinite(b)?b.toFixed(4):"∞"}`,i-220,35),s.fillStyle="#34d399",s.fillText(`Transformed CR = ${isFinite(g)?g.toFixed(4):"∞"}`,i-220,55);const B=Math.abs(b-g)<.001||b===g;s.fillStyle=B?"#22c55e":"#ef4444",s.fillText(B?"✓ Cross-ratio preserved!":"✗ Cross-ratio changed",i-220,75),s.fillStyle="#c084fc",s.font="12px sans-serif";let y="";switch(c){case"none":y="No transformation";break;case"translate":y=`Translation: x → x + ${d.toFixed(1)}`;break;case"scale":y=`Scaling: x → ${d.toFixed(1)}x`;break;case"reciprocal":y="Reciprocal: x → 1/x";break}s.fillText(y,30,w-20)},[x,m,f,u,c,d,R,F,E,P,b,g]),e.jsxs("div",{className:`bg-slate-800/50 p-4 rounded-lg ${U}`,children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-400 mb-4",children:"Cross-Ratio Explorer"}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("canvas",{ref:z,width:i,height:w,className:"border border-slate-700 rounded"})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-red-400 mb-1",children:["p = ",x]}),e.jsx("input",{type:"range",min:"-3",max:"3",step:"0.5",value:x,onChange:t=>T(parseFloat(t.target.value)),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-amber-400 mb-1",children:["q = ",m]}),e.jsx("input",{type:"range",min:"-3",max:"4",step:"0.5",value:m,onChange:t=>N(parseFloat(t.target.value)),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-purple-400 mb-1",children:["r = ",f]}),e.jsx("input",{type:"range",min:"-2",max:"5",step:"0.5",value:f,onChange:t=>S(parseFloat(t.target.value)),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-pink-400 mb-1",children:["s = ",u]}),e.jsx("input",{type:"range",min:"-1",max:"6",step:"0.5",value:u,onChange:t=>C(parseFloat(t.target.value)),className:"w-full"})]})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:[e.jsx("button",{onClick:()=>q("none"),className:`px-3 py-2 text-sm rounded transition ${c==="none"?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"None"}),e.jsx("button",{onClick:()=>q("translate"),className:`px-3 py-2 text-sm rounded transition ${c==="translate"?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"Translate (x + l)"}),e.jsx("button",{onClick:()=>q("scale"),className:`px-3 py-2 text-sm rounded transition ${c==="scale"?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"Scale (kx)"}),e.jsx("button",{onClick:()=>q("reciprocal"),className:`px-3 py-2 text-sm rounded transition ${c==="reciprocal"?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"Reciprocal (1/x)"})]}),(c==="translate"||c==="scale")&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:c==="translate"?`l = ${d.toFixed(1)}`:`k = ${d.toFixed(1)}`}),e.jsx("input",{type:"range",min:c==="scale"?.5:-3,max:3,step:"0.1",value:d,onChange:t=>A(parseFloat(t.target.value)),className:"w-full"})]}),e.jsxs("div",{className:"flex justify-center gap-3 mb-4",children:[e.jsx("button",{onClick:()=>{T(0),N(1),S(2),C(3)},className:"px-3 py-2 text-sm rounded bg-slate-700 text-slate-300 hover:bg-slate-600 transition",children:"Equal Spacing (CR = 4/3)"}),e.jsx("button",{onClick:()=>{T(0),N(1),S(3),C(4)},className:"px-3 py-2 text-sm rounded bg-slate-700 text-slate-300 hover:bg-slate-600 transition",children:"Example 2"})]}),e.jsxs("div",{className:"bg-slate-900/50 p-3 rounded text-sm text-slate-300",children:[e.jsx("p",{className:"mb-2",children:e.jsx("strong",{children:"Key Insight:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsxs("li",{children:["The cross-ratio is ",e.jsx("span",{className:"text-green-400",children:"invariant under projection"})]}),e.jsx("li",{children:"Translation: l cancels in differences"}),e.jsx("li",{children:"Scaling: k cancels in ratios"}),e.jsx("li",{children:"Reciprocal: algebra shows invariance"}),e.jsxs("li",{children:["Equally spaced points 0, 1, 2, 3 have cross-ratio ",e.jsx("span",{className:"text-amber-400",children:"4/3"})]})]})]})]})}function oe(){return e.jsxs(G,{sectionId:37,children:[e.jsx("h2",{children:"The Cross-Ratio"}),e.jsxs("blockquote",{className:"border-l-4 border-blue-500 pl-4 italic text-slate-300 my-6",children:['"You might say it was a triumph of algebra to invent this quantity that turns out to be so valuable and could not be imagined geometrically. Or if you are a geometer at heart, you may say it is an invention of the devil and hate it all your life."',e.jsxs("footer",{className:"text-sm mt-2",children:["— Robin Hartshorne, ",e.jsx("em",{children:"Geometry: Euclid and Beyond"})]})]}),e.jsx("p",{children:"It is visually obvious that projection can change lengths and even the ratio of lengths, because equal lengths often appear unequal under projection. And yet we can recognize that a perspective drawing shows equal tiles, even though they are unequal in size and shape."}),e.jsxs(O,{type:"info",children:[e.jsx("strong",{children:"The Key Question:"})," Some clue to the equality must be preserved under projection. It cannot be length; it cannot be a ratio of lengths; but, surprisingly, it can be a ",e.jsx("strong",{children:"ratio of ratios"}),", called the cross-ratio."]}),e.jsx("h3",{children:"Definition of the Cross-Ratio"}),e.jsxs(K,{title:"Cross-Ratio",children:[e.jsx("p",{children:"The cross-ratio is a quantity associated with four points on a line. If the four points have coordinates p, q, r, and s, then their cross-ratio is:"}),e.jsx(h,{children:"\\frac{(r - p)/(s - p)}{(r - q)/(s - q)} = \\frac{(r - p)(s - q)}{(r - q)(s - p)}"})]}),e.jsx("h3",{children:"The Cross-Ratio is Preserved by Projection"}),e.jsx("p",{children:"To show that the cross-ratio is preserved by projection, it suffices to show that it is preserved by the three generating transformations."}),e.jsx(H,{title:"Invariance of the Cross-Ratio",proof:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"We verify invariance under each generating transformation."}),e.jsx("p",{className:"mt-2",children:e.jsx("strong",{children:"1. Translation x → x + l:"})}),e.jsx("p",{children:"Under this map, p, q, r, s become p + l, q + l, r + l, s + l. The cross-ratio becomes:"}),e.jsx(h,{math:"\\frac{((r+l) - (p+l))((s+l) - (q+l))}{((r+l) - (q+l))((s+l) - (p+l))} = \\frac{(r-p)(s-q)}{(r-q)(s-p)}"}),e.jsx("p",{children:"The l terms cancel in each difference, leaving the original cross-ratio."}),e.jsx("p",{className:"mt-2",children:e.jsx("strong",{children:"2. Scaling x → kx:"})}),e.jsx("p",{children:"Under this map, p, q, r, s become kp, kq, kr, ks. The cross-ratio becomes:"}),e.jsx(h,{math:"\\frac{(kr - kp)(ks - kq)}{(kr - kq)(ks - kp)} = \\frac{k(r-p) \\cdot k(s-q)}{k(r-q) \\cdot k(s-p)} = \\frac{k^2(r-p)(s-q)}{k^2(r-q)(s-p)} = \\frac{(r-p)(s-q)}{(r-q)(s-p)}"}),e.jsx("p",{children:"The k² factors cancel, leaving the original cross-ratio."}),e.jsx("p",{className:"mt-2",children:e.jsx("strong",{children:"3. Reciprocation x → 1/x:"})}),e.jsx("p",{children:"Under this map, p, q, r, s become 1/p, 1/q, 1/r, 1/s. Computing:"}),e.jsx(h,{math:"\\frac{(1/r - 1/p)(1/s - 1/q)}{(1/r - 1/q)(1/s - 1/p)} = \\frac{\\frac{p-r}{pr} \\cdot \\frac{q-s}{qs}}{\\frac{q-r}{qr} \\cdot \\frac{p-s}{ps}}"}),e.jsx("p",{className:"mt-2",children:"Simplifying by multiplying numerator and denominator by prqs:"}),e.jsx(h,{math:"= \\frac{(p-r)(q-s) \\cdot qs \\cdot pr}{(q-r)(p-s) \\cdot pr \\cdot qs} = \\frac{(p-r)(q-s)}{(q-r)(p-s)} = \\frac{(r-p)(s-q)}{(r-q)(s-p)}"}),e.jsx("p",{children:"The last equality follows from (p-r) = -(r-p) and similar, with signs canceling."})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-blue-400",children:"1. The map x → x + l"}),e.jsx("p",{className:"text-slate-300",children:"The numbers p, q, r, s are replaced by p + l, q + l, r + l, s + l. This does not change the cross-ratio because the l terms cancel by subtraction."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-blue-400",children:"2. The map x → kx"}),e.jsx("p",{className:"text-slate-300",children:"The numbers p, q, r, s are replaced by kp, kq, kr, ks. This does not change the cross-ratio because the k terms cancel by division."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-blue-400",children:"3. The map x → 1/x"}),e.jsx("p",{className:"text-slate-300",children:"The numbers p, q, r, s are replaced by 1/p, 1/q, 1/r, 1/s. With some algebra (taking common denominators and simplifying), the cross-ratio is unchanged."})]})]})}),e.jsx("h3",{children:"Proof for the Reciprocal Map"}),e.jsx("p",{children:"When x → 1/x, the cross-ratio transforms as:"}),e.jsx(h,{children:"\\frac{(\\frac{1}{r} - \\frac{1}{p})(\\frac{1}{s} - \\frac{1}{q})}{(\\frac{1}{r} - \\frac{1}{q})(\\frac{1}{s} - \\frac{1}{p})}"}),e.jsx("p",{children:"Taking common denominators:"}),e.jsx(h,{children:"= \\frac{\\frac{p-r}{pr} \\cdot \\frac{q-s}{qs}}{\\frac{q-r}{qr} \\cdot \\frac{p-s}{ps}}"}),e.jsx("p",{children:"Multiplying through by pqrs:"}),e.jsx(h,{children:"= \\frac{(p-r)(q-s)}{(q-r)(p-s)} = \\frac{(r-p)(s-q)}{(r-q)(s-p)}"}),e.jsx("p",{children:"The cross-ratio is unchanged!"}),e.jsx("h3",{children:"Is the Cross-Ratio Visible?"}),e.jsx("p",{children:"If we take the four equally spaced points p = 0, q = 1, r = 2, and s = 3, then their cross-ratio is:"}),e.jsx(h,{children:"\\frac{(r - p)(s - q)}{(r - q)(s - p)} = \\frac{2 \\times 2}{1 \\times 3} = \\frac{4}{3}"}),e.jsxs("p",{children:["Any projective image of these points also has cross-ratio 4/3. Do four points on a line ",e.jsx("em",{children:"look"})," equally spaced if their cross-ratio is 4/3?"]}),e.jsxs(O,{type:"info",children:[e.jsx("strong",{children:"Test Your Eye:"}),' Given any three points, there is exactly one fourth point that gives cross-ratio 4/3 with them—this is the point that "looks" evenly spaced in perspective.']}),e.jsx("h3",{children:"Exercises"}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg my-6",children:[e.jsx("h4",{className:"font-semibold text-blue-400 mb-3",children:"Exercise 5.7.1"}),e.jsx("p",{className:"text-slate-300",children:"Show that there is only one point s that has a given cross-ratio with given points p, q, and r."})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg my-6",children:[e.jsx("h4",{className:"font-semibold text-blue-400 mb-3",children:"Exercise 5.7.2"}),e.jsx("p",{className:"text-slate-300",children:"If we have p = 0, q = 2, r = 3, find the value of s that gives cross-ratio 4/3."})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg my-6",children:[e.jsx("h4",{className:"font-semibold text-blue-400 mb-3",children:"Exercise 5.7.3"}),e.jsx("p",{className:"text-slate-300",children:"Before the discovery of perspective, artists sometimes drew a tiled floor by making the width of each row a constant fraction e of the one before. Show that this method is incorrect by computing the cross-ratio of four points separated by distances 1, e, and e²."})]}),e.jsx(J,{className:"my-6"}),e.jsx(X,{sectionId:37,questions:V[37]||[],title:"The Cross-Ratio Quiz"})]})}export{oe as default};
