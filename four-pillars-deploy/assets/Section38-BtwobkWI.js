import{j as e}from"./vendor-animation-0o8UKZ_1.js";import{L as K,C as w,T as u,q as Q}from"./index-BTlU4ICT.js";import{M as r}from"./MathBlock-DHMt0FrA.js";import{S as O}from"./SectionQuiz-BeoSbGTB.js";import{r as j}from"./vendor-react-Drj8qL0h.js";import"./index-9ARvsEpo.js";import"./vendor-math-p018AHG0.js";import"./vendor-firebase-functions-Bu93Ly_7.js";import"./vendor-firebase-core-_7V-tLLm.js";import"./vendor-firebase-auth-Br51EKMN.js";function V({className:F=""}){const y=j.useRef(null),[h,T]=j.useState([1,2,4,6]),[P,C]=j.useState(null),[p,S]=j.useState(0),M=500,I=380,m=120,q=280,x=50,B=450,D=50,g=(t,s)=>({x:x+t*D,y:s}),E=(t,s,o,n)=>{const i=o-t,l=n-s,c=o-s,a=n-t;return i*l/(c*a)},A=t=>{const s=1+p*.3,o=p*.5,n=p*.1;return(s*t+o)/(n*t+1)},[k,W,L,z]=h,b=E(k,W,L,z),v=h.map(A),[U,X,G,J]=v,N=E(U,X,G,J);j.useEffect(()=>{const t=y.current;if(!t)return;const s=t.getContext("2d");if(!s)return;s.fillStyle="#0f172a",s.fillRect(0,0,M,I),s.strokeStyle="#475569",s.lineWidth=2,s.beginPath(),s.moveTo(x-20,m),s.lineTo(B+20,m),s.stroke(),s.beginPath(),s.moveTo(x-20,q),s.lineTo(B+20,q),s.stroke();const o=250,n=50;s.fillStyle="#fbbf24",s.beginPath(),s.arc(o,n,5,0,Math.PI*2),s.fill(),s.fillStyle="#fbbf24",s.font="11px sans-serif",s.fillText("Projection center",o+10,n);const i=["#f472b6","#22d3ee","#a78bfa","#34d399"],l=["A","B","C","D"];h.forEach((c,a)=>{const d=g(c,m);s.strokeStyle="rgba(251, 191, 36, 0.3)",s.lineWidth=1,s.setLineDash([3,3]),s.beginPath(),s.moveTo(o,n),s.lineTo(d.x,d.y);const f=g(v[a],q);s.lineTo(f.x,f.y),s.stroke(),s.setLineDash([]),s.fillStyle=i[a],s.beginPath(),s.arc(d.x,d.y,8,0,Math.PI*2),s.fill(),s.fillStyle="#e2e8f0",s.font="bold 12px sans-serif",s.fillText(l[a],d.x-4,d.y-12),s.fillStyle=i[a],s.beginPath(),s.arc(f.x,f.y,8,0,Math.PI*2),s.fill(),s.fillStyle="#e2e8f0",s.fillText(l[a]+"'",f.x-6,f.y+22)}),s.fillStyle="#94a3b8",s.font="12px sans-serif",s.fillText("Original line",x,m-30),s.fillText("Projected line",x,q+35),s.fillStyle="#0f172a",s.fillRect(300,310,190,60),s.strokeStyle="#334155",s.strokeRect(300,310,190,60),s.fillStyle="#e2e8f0",s.font="12px sans-serif",s.fillText(`CR(A,B;C,D) = ${b.toFixed(4)}`,310,335),s.fillText(`CR(A',B';C',D') = ${N.toFixed(4)}`,310,355),Math.abs(b-N)<.001&&(s.fillStyle="#34d399",s.fillText("✓ Equal!",430,345))},[h,p,v,b,N]);const Y=t=>{var i;const s=(i=y.current)==null?void 0:i.getBoundingClientRect();if(!s)return;const o=t.clientX-s.left,n=t.clientY-s.top;h.forEach((l,c)=>{const a=g(l,m);Math.hypot(o-a.x,n-a.y)<15&&C(c)})},$=t=>{var l;if(P===null)return;const s=(l=y.current)==null?void 0:l.getBoundingClientRect();if(!s)return;let n=(t.clientX-s.left-x)/D;n=Math.round(n*4)/4,n=Math.max(.5,Math.min(7,n));const i=[...h];i[P]=n,i.sort((c,a)=>c-a),T(i)},R=()=>{C(null)};return e.jsxs("div",{className:`bg-slate-900/50 rounded-lg p-4 ${F}`,children:[e.jsx("h4",{className:"text-blue-400 font-semibold mb-3",children:"Cross-Ratio Invariant"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("canvas",{ref:y,width:M,height:I,className:"border border-slate-700 rounded cursor-grab",onMouseDown:Y,onMouseMove:$,onMouseUp:R,onMouseLeave:R})}),e.jsxs("div",{className:"w-full md:w-52 space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-slate-300 mb-1",children:["Projection strength: ",p.toFixed(2)]}),e.jsx("input",{type:"range",min:"-1",max:"1",step:"0.05",value:p,onChange:t=>S(parseFloat(t.target.value)),className:"w-full"})]}),e.jsxs("div",{className:"p-3 bg-slate-800 rounded",children:[e.jsx("h5",{className:"text-sm font-semibold text-green-400 mb-2",children:"Cross-Ratio"}),e.jsx("p",{className:"text-xs text-slate-300 mb-2",children:"The cross-ratio of four collinear points is:"}),e.jsx("p",{className:"text-xs font-mono text-cyan-400",children:"CR(A,B;C,D) = (AC·BD)/(BC·AD)"})]}),e.jsxs("div",{className:"p-3 bg-slate-800 rounded",children:[e.jsx("h5",{className:"text-sm font-semibold text-yellow-400 mb-2",children:"Key Property"}),e.jsxs("p",{className:"text-xs text-slate-300",children:["Cross-ratio is ",e.jsx("strong",{children:"preserved"})," under projective transformations. Move points and change projection to verify!"]})]}),e.jsx("button",{onClick:()=>{T([1,2,4,6]),S(0)},className:"w-full px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-slate-200 rounded text-sm",children:"Reset"}),e.jsxs("div",{className:"text-xs text-slate-400 p-2 bg-slate-800/50 rounded",children:[e.jsx("p",{children:"Drag points A, B, C, D on the top line"}),e.jsx("p",{children:"Adjust projection to see invariance"})]})]})]})]})}function oe(){return e.jsxs(K,{sectionId:38,children:[e.jsx("h2",{children:"What is Special About the Cross-Ratio?"}),e.jsx("p",{children:"We use the abbreviation [p, q; r, s] for the cross-ratio of four points p, q, r, s:"}),e.jsx(r,{children:"[p, q; r, s] = \\frac{(r - p)(s - q)}{(r - q)(s - p)}"}),e.jsx("p",{children:"We have shown that the cross-ratio is an invariant of linear fractional transformations, but it is obviously not the only one. Examples of other invariants are (cross-ratio)² and cross-ratio + 1."}),e.jsxs(w,{type:"info",children:[e.jsx("strong",{children:"Key Point:"})," The cross-ratio is special because it is the",e.jsx("strong",{children:" defining invariant"})," of linear fractional transformations. That is, linear fractional transformations are precisely the transformations of ℝP¹ that preserve the cross-ratio. (The cross-ratio defines linear fractional transformations the way that length defines isometries.)"]}),e.jsx("h3",{children:"Fourth Point Determination"}),e.jsxs(u,{title:"Fourth Point Determination",proof:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Given three distinct points p, q, r and a value y, we show there is exactly one x satisfying [p, q; r, x] = y."}),e.jsx("p",{className:"mt-2",children:"The cross-ratio equation is:"}),e.jsx(r,{math:"\\frac{(r - p)(x - q)}{(r - q)(x - p)} = y"}),e.jsx("p",{className:"mt-2",children:"Cross-multiplying:"}),e.jsx(r,{math:"(r - p)(x - q) = y(r - q)(x - p)"}),e.jsx("p",{className:"mt-2",children:"Expanding:"}),e.jsx(r,{math:"(r-p)x - (r-p)q = y(r-q)x - y(r-q)p"}),e.jsx("p",{className:"mt-2",children:"Collecting terms in x:"}),e.jsx(r,{math:"x[(r-p) - y(r-q)] = (r-p)q - y(r-q)p"}),e.jsx("p",{className:"mt-2",children:"Since p, q, r are distinct and y is finite, the coefficient of x is nonzero (unless y = (r-p)/(r-q), but this would make the right side nonzero too). Thus we can solve uniquely:"}),e.jsx(r,{math:"x = \\frac{(r-p)q - y(r-q)p}{(r-p) - y(r-q)}"}),e.jsx("p",{className:"mt-2",children:"This gives a unique value of x for each value of y, establishing the bijection."})]}),children:[e.jsx("p",{children:"Given any three points p, q, r ∈ ℝP¹, any other point x ∈ ℝP¹ is uniquely determined by its cross-ratio [p, q; r, x] = y with p, q, r."}),e.jsx("p",{className:"mt-2 text-slate-300",children:"This holds because we can solve the equation for x uniquely in terms of p, q, r, and y."})]}),e.jsx("h3",{children:"Existence of Three-Point Maps"}),e.jsxs(u,{title:"Existence of Three-Point Maps",proof:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"We construct f explicitly. First, we find a linear fractional transformation g sending (p, q, r) to (0, 1, ∞), then a transformation h sending (0, 1, ∞) to (p′, q′, r′). The composition h ∘ g sends (p, q, r) to (p′, q′, r′)."}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"Step 1:"})," To send (p, q, r) to (0, 1, ∞), we need:"]}),e.jsx(r,{math:"g(x) = \\frac{(x - p)(q - r)}{(x - r)(q - p)}"}),e.jsx("p",{className:"mt-2",children:"Verification: g(p) = 0 (numerator vanishes), g(r) = ∞ (denominator vanishes), and g(q) = (q-p)(q-r)/((q-r)(q-p)) = 1."}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"Step 2:"})," To send (0, 1, ∞) to (p′, q′, r′), we use:"]}),e.jsx(r,{math:"h(x) = \\frac{(p' - r')x + r'(q' - p')}{(1 - 1)x + (q' - p')}"}),e.jsx("p",{className:"mt-2",children:"Actually, a simpler form: h(x) = p′ + (q′ - p′)x/(1 + (x-1)(q′-p′)/(r′-p′)) when r′ ≠ ∞. Direct verification:"}),e.jsx(r,{math:"h(x) = \\frac{p'(q'-r') + x(r'-p')}{(q'-r') + x \\cdot 0} = p' + \\frac{(r'-p')(x)}{(q'-r')}"}),e.jsx("p",{className:"mt-2",children:"The explicit formula is:"}),e.jsx(r,{math:"h(x) = \\frac{r'(q'-p')x + p'(r'-q')}{(q'-p')x + (r'-q')}"}),e.jsx("p",{className:"mt-2",children:"Composing g and h yields a linear fractional transformation (since composition of linear fractional is linear fractional) with the desired property."})]}),children:[e.jsx("p",{children:"Given three points p, q, r ∈ ℝP¹ and three points p′, q′, r′ ∈ ℝP¹, there is a linear fractional transformation f sending p, q, r to p′, q′, r′ respectively."}),e.jsx("p",{className:"mt-2 text-slate-300",children:"This holds because there is a projection sending any three points to any three points. Without loss of generality, place the two copies of ℝP¹ so that p = p′. Then project from the point P where lines qq′ and rr′ meet."})]}),e.jsx("h3",{children:"Uniqueness of Three-Point Maps"}),e.jsxs(u,{title:"Uniqueness of Three-Point Maps",proof:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Suppose f and g are two linear fractional transformations both sending p → p′, q → q′, r → r′."}),e.jsx("p",{className:"mt-2",children:"Consider any fourth point x ≠ p, q, r. Since linear fractional transformations preserve cross-ratio:"}),e.jsx(r,{math:"[p', q'; r', f(x)] = [p, q; r, x] = [p', q'; r', g(x)]"}),e.jsx("p",{className:"mt-2",children:"By the Fourth Point Determination theorem, the point with cross-ratio [p, q; r, x] relative to p′, q′, r′ is unique. Therefore f(x) = g(x)."}),e.jsx("p",{className:"mt-2",children:"Since this holds for all x in ℝP¹, we have f = g. Thus there is at most one such transformation."}),e.jsx("p",{className:"mt-2",children:"Combined with the Existence theorem, exactly one linear fractional transformation sends p, q, r to p′, q′, r′."})]}),children:[e.jsx("p",{children:"Exactly one linear fractional function sends three points p, q, r to three points p′, q′, r′ respectively."}),e.jsx("p",{className:"mt-2 text-slate-300",children:"A linear fractional f sending p, q, r to p′, q′, r′ must send any x ≠ p, q, r to x′ satisfying [p, q; r, x] = [p′, q′; r′, x′], because f preserves the cross-ratio. But x′ is unique by fourth point determination, so there is exactly one such function f."})]}),e.jsx("h3",{children:"Characterization of Linear Fractional Maps"}),e.jsxs(u,{title:"Characterization Theorem",proof:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"We prove both directions."}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"(⇒)"})," If f is linear fractional, then f preserves cross-ratio. This was proven in Section 37 by showing invariance under the generators."]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"(⇐)"})," Suppose f: ℝP¹ → ℝP¹ preserves cross-ratio. Pick three distinct points p, q, r and let p′ = f(p), q′ = f(q), r′ = f(r)."]}),e.jsx("p",{className:"mt-2",children:"By the Existence theorem, there is a linear fractional transformation g with g(p) = p′, g(q) = q′, g(r) = r′."}),e.jsx("p",{className:"mt-2",children:"Now let x be any fourth point. Since f preserves cross-ratio:"}),e.jsx(r,{math:"[p', q'; r', f(x)] = [f(p), f(q); f(r), f(x)] = [p, q; r, x]"}),e.jsx("p",{className:"mt-2",children:"Since g is linear fractional and hence preserves cross-ratio:"}),e.jsx(r,{math:"[p', q'; r', g(x)] = [g(p), g(q); g(r), g(x)] = [p, q; r, x]"}),e.jsx("p",{className:"mt-2",children:"Therefore [p′, q′; r′, f(x)] = [p′, q′; r′, g(x)]. By Fourth Point Determination, f(x) = g(x)."}),e.jsx("p",{className:"mt-2",children:"Since x was arbitrary, f = g, so f is linear fractional."})]}),children:[e.jsx("p",{children:"Linear fractional transformations are precisely the maps of ℝP¹ that preserve the cross-ratio."}),e.jsx("p",{className:"mt-2 text-slate-300",children:"By the previous section, any linear fractional map f preserves cross-ratio. Conversely, suppose f preserves cross-ratio. By existence of three-point maps, we can find a linear fractional g that agrees with f on p, q, r. Because f preserves cross-ratio, g agrees with f on s also by unique fourth point determination. Thus g agrees with f everywhere, so f is linear fractional."})]}),e.jsx("h3",{children:"Why No Invariant for Three Points?"}),e.jsx("p",{children:"The existence of three-point maps says that any three points on ℝP¹ can be sent to any three points by a linear fractional transformation. Thus, any invariant of triples of points must have the same value for any triple—so it is trivial!"}),e.jsxs(w,{type:"info",children:[e.jsx("strong",{children:"Minimum Points:"})," A nontrivial invariant must involve at least four points, and the cross-ratio is the fundamental example."]}),e.jsx("h3",{children:"The Fundamental Invariant"}),e.jsxs(u,{title:"The Fundamental Invariant",proof:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Let I(p, q, r, s) be any quantity invariant under linear fractional transformations. We show I depends only on [p, q; r, s]."}),e.jsx("p",{className:"mt-2",children:"Consider two quadruples (p, q, r, s) and (p′, q′, r′, s′) with the same cross-ratio:"}),e.jsx(r,{math:"[p, q; r, s] = [p', q'; r', s'] = y"}),e.jsx("p",{className:"mt-2",children:"By the Existence theorem, there is a linear fractional transformation f with f(p) = p′, f(q) = q′, f(r) = r′."}),e.jsx("p",{className:"mt-2",children:"Since f preserves cross-ratio:"}),e.jsx(r,{math:"[p', q'; r', f(s)] = [f(p), f(q); f(r), f(s)] = [p, q; r, s] = y"}),e.jsx("p",{className:"mt-2",children:"But we also have [p′, q′; r′, s′] = y. By Fourth Point Determination, f(s) = s′."}),e.jsx("p",{className:"mt-2",children:"Therefore f maps (p, q, r, s) to (p′, q′, r′, s′). Since I is invariant under f:"}),e.jsx(r,{math:"I(p', q', r', s') = I(p, q, r, s)"}),e.jsx("p",{className:"mt-2",children:"Thus I has the same value on any two quadruples with the same cross-ratio. This means I is determined by the cross-ratio: I(p, q, r, s) = J([p, q; r, s]) for some function J."})]}),children:[e.jsx("p",{children:"Any invariant of four points is a function of the cross-ratio."}),e.jsx("p",{className:"mt-2 text-slate-300",children:"Suppose I(p, q, r, s) is invariant under linear fractional transformations. Then I has the same value on all quadruples with the same cross-ratio, because any such quadruple results from (p, q, r, s) by a linear fractional transformation. Therefore I is really a function J of the cross-ratio: J([p, q; r, s]) = I(p, q, r, s)."})]}),e.jsx("h3",{children:"Permutations of the Cross-Ratio"}),e.jsx("p",{children:"Permuting the variables in the cross-ratio y = [p, q; r, s] gives simple functions of y:"}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg my-6",children:e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"[p, q; s, r] = 1/y"}),e.jsx("li",{children:"[q, p; r, s] = 1/y"}),e.jsx("li",{children:"[p, r; q, s] = 1 − y"})]})}),e.jsx("p",{children:"The transformations y → 1/y and y → 1 − y generate all transformations of the cross-ratio obtained by permuting its variables. There are six such transformations (even though there are 24 permutations of four variables):"}),e.jsx(r,{children:"y, \\quad \\frac{1}{y}, \\quad 1-y, \\quad 1-\\frac{1}{y}, \\quad \\frac{1}{1-y}, \\quad \\frac{y}{y-1}"}),e.jsxs(w,{type:"info",children:[e.jsx("strong",{children:"The Cross-Ratio Group:"})," These six linear fractional functions constitute the ",e.jsx("em",{children:"cross-ratio group"}),"—an example of a group of transformations, which we will study in Chapter 7. Unlike most groups studied there, this group is finite."]}),e.jsx("h3",{children:"Exercises"}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg my-6",children:[e.jsx("h4",{className:"font-semibold text-blue-400 mb-3",children:"Exercise 5.8.1"}),e.jsx("p",{className:"text-slate-300",children:"If [p, q; r, s] = y, show that [p, q; s, r] = 1/y."})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg my-6",children:[e.jsx("h4",{className:"font-semibold text-blue-400 mb-3",children:"Exercise 5.8.2"}),e.jsx("p",{className:"text-slate-300",children:"If [p, q; r, s] = y, show that [q, p; r, s] = 1/y."})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg my-6",children:[e.jsx("h4",{className:"font-semibold text-blue-400 mb-3",children:"Exercise 5.8.3"}),e.jsx("p",{className:"text-slate-300",children:"Prove that [p, q; r, s] + [p, r; q, s] = 1, so if [p, q; r, s] = y, then [p, r; q, s] = 1 − y."})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg my-6",children:[e.jsx("h4",{className:"font-semibold text-blue-400 mb-3",children:"Exercise 5.8.4"}),e.jsx("p",{className:"text-slate-300",children:"Show that the functions of y obtained by combining 1/y and 1 − y in all ways are precisely the six listed above."})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg my-6",children:[e.jsx("h4",{className:"font-semibold text-blue-400 mb-3",children:"Exercise 5.8.5"}),e.jsx("p",{className:"text-slate-300",children:"Explain why any permutation of four variables may be obtained by exchanges: either of the first two, the middle two, or the last two variables."})]}),e.jsx(V,{className:"my-6"}),e.jsx(O,{sectionId:38,questions:Q[38]||[],title:"What is Special About the Cross-Ratio? Quiz"})]})}export{oe as default};
