import{j as e,A as N,m as p}from"./vendor-animation-6GFvN5rC.js";import{r as c}from"./vendor-react-ByzHzWFU.js";import{k as x}from"./vendor-math-ClxlXyPc.js";function j(a){let r=a;r=r.replace(/\\\[([\s\S]*?)\\\]|\$\$([\s\S]*?)\$\$/g,(l,t,o)=>{const i=t||o;try{return x.renderToString(i.trim(),{displayMode:!0,throwOnError:!1})}catch{return`\\[${i}\\]`}}),r=r.replace(/\\\(([\s\S]*?)\\\)|\$([^$]+?)\$/g,(l,t,o)=>{const i=t||o;try{return x.renderToString(i.trim(),{displayMode:!1,throwOnError:!1})}catch{return`$${i}$`}});const d=[/\\begin\{pmatrix\}[\s\S]*?\\end\{pmatrix\}/g,/\\frac\{[^}]*\}\{[^}]*\}/g,/\\sqrt\{[^}]*\}/g,/[a-zA-Z]_\{[^}]*\}/g,/[a-zA-Z]\^[0-9a-zA-Z]/g];for(const l of d)r=r.replace(l,t=>{try{return x.renderToString(t,{displayMode:!1,throwOnError:!1})}catch{return t}});return r=r.replace(/\n/g,"<br>"),r}function k({solution:a,isExpanded:r,onToggle:d,onView:l}){const[t,o]=c.useState(!1),i=c.useRef(null);return c.useEffect(()=>{r&&!t&&(o(!0),l?.())},[r,t,l]),e.jsxs("div",{className:"mt-4",children:[e.jsxs("button",{onClick:d,className:`
          w-full flex items-center justify-between px-4 py-3 rounded-lg
          text-left font-medium transition-colors
          ${r?"bg-primary-500/10 text-primary-400":"bg-dark-800 text-dark-300 hover:bg-dark-700 hover:text-dark-100"}
        `,children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:`w-4 h-4 transition-transform ${r?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),r?"Hide Solution":"Show Solution"]}),t&&!r&&e.jsx("span",{className:"text-xs text-dark-500",children:"(viewed)"})]}),e.jsx(N,{children:r&&e.jsx(p.div,{ref:i,initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:e.jsxs("div",{className:"pt-4 space-y-4",children:[a.steps.map((b,m)=>e.jsxs("div",{className:"pl-4 border-l-2 border-primary-500/30",children:[e.jsx("h4",{className:"text-sm font-semibold text-primary-400 mb-2",children:b.title}),e.jsx("div",{className:"text-dark-300 text-sm leading-relaxed prose prose-invert prose-sm max-w-none",dangerouslySetInnerHTML:{__html:j(b.content)}})]},m)),a.conclusion&&e.jsxs("div",{className:"mt-4 p-4 bg-emerald-500/10 border border-emerald-500/30 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-emerald-400 mb-2",children:"Conclusion"}),e.jsx("div",{className:"text-emerald-300/90 text-sm",dangerouslySetInnerHTML:{__html:j(a.conclusion)}})]})]})})})]})}function w(a){let r=a;return r=r.replace(/\\\[([\s\S]*?)\\\]|\$\$([\s\S]*?)\$\$/g,(d,l,t)=>{const o=l||t;try{return x.renderToString(o.trim(),{displayMode:!0,throwOnError:!1})}catch{return`\\[${o}\\]`}}),r=r.replace(/\\\(([\s\S]*?)\\\)|\$([^$]+?)\$/g,(d,l,t)=>{const o=l||t;try{return x.renderToString(o.trim(),{displayMode:!1,throwOnError:!1})}catch{return`$${o}$`}}),r=r.replace(/\n/g,"<br>"),r}function $({example:a,isComplete:r,onToggleComplete:d,onSolutionView:l}){const[t,o]=c.useState(!1);return e.jsxs(p.div,{id:`problem-${a.id}`,className:`
        rounded-xl border-2 p-5 transition-colors
        ${r?"bg-amber-500/5 border-amber-500/30":"bg-gradient-to-br from-amber-500/5 to-orange-500/5 border-amber-500/20 hover:border-amber-500/40"}
      `,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-amber-500/20 text-amber-400",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-amber-500 uppercase tracking-wider block",children:"Example"}),e.jsx("span",{className:"text-sm font-semibold text-amber-300",children:a.title})]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[e.jsx("span",{className:"text-xs text-dark-400 group-hover:text-dark-300 transition-colors",children:r?"Reviewed":"Mark reviewed"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:d,className:"sr-only peer"}),e.jsx("div",{className:`
                w-5 h-5 rounded border-2 flex items-center justify-center
                transition-all cursor-pointer
                ${r?"bg-amber-500 border-amber-500 text-white":"border-dark-600 peer-hover:border-dark-500"}
              `,children:r&&e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]})]})]}),e.jsx("div",{className:"text-dark-200 leading-relaxed prose prose-invert prose-sm max-w-none",dangerouslySetInnerHTML:{__html:w(a.statement)}}),e.jsx(k,{solution:a.solution,isExpanded:t,onToggle:()=>o(!t),onView:l})]})}function S(a){let r=a;r=r.replace(/\\\[([\s\S]*?)\\\]|\$\$([\s\S]*?)\$\$/g,(l,t,o)=>{const i=t||o;try{return x.renderToString(i.trim(),{displayMode:!0,throwOnError:!1})}catch{return`\\[${i}\\]`}}),r=r.replace(/\\\(([\s\S]*?)\\\)|\$([^$]+?)\$/g,(l,t,o)=>{const i=t||o;try{return x.renderToString(i.trim(),{displayMode:!1,throwOnError:!1})}catch{return`$${i}$`}});const d=[/\\begin\{pmatrix\}[\s\S]*?\\end\{pmatrix\}/g,/\\frac\{[^}]*\}\{[^}]*\}/g,/\\sqrt\{[^}]*\}/g];for(const l of d)r=r.replace(l,t=>{try{return x.renderToString(t,{displayMode:!1,throwOnError:!1})}catch{return t}});return r=r.replace(/\n/g,"<br>"),r}function M({exercise:a,isComplete:r,onToggleComplete:d,onSolutionView:l}){const[t,o]=c.useState(!1),i=c.useRef(null);return e.jsxs(p.div,{ref:i,id:`problem-${a.id}`,className:`
        rounded-xl border-2 p-5 transition-colors
        ${r?"bg-emerald-500/5 border-emerald-500/30":"bg-dark-900 border-dark-700 hover:border-dark-600"}
      `,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-dark-800 text-dark-300 text-sm font-bold",children:a.number}),e.jsx("span",{className:"text-xs font-medium text-dark-500 uppercase tracking-wider",children:"Exercise"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[e.jsx("span",{className:"text-xs text-dark-400 group-hover:text-dark-300 transition-colors",children:r?"Completed":"Mark complete"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:d,className:"sr-only peer"}),e.jsx("div",{className:`
                w-5 h-5 rounded border-2 flex items-center justify-center
                transition-all cursor-pointer
                ${r?"bg-emerald-500 border-emerald-500 text-white":"border-dark-600 peer-hover:border-dark-500"}
              `,children:r&&e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]})]})]}),e.jsx("div",{className:"text-dark-200 leading-relaxed prose prose-invert prose-sm max-w-none",dangerouslySetInnerHTML:{__html:S(a.statement)}}),e.jsx(k,{solution:a.solution,isExpanded:t,onToggle:()=>o(!t),onView:l})]})}function T({problemIds:a,completedIds:r,onProblemClick:d,columns:l=10}){return e.jsx("div",{className:"grid gap-1.5",style:{gridTemplateColumns:`repeat(${l}, minmax(0, 1fr))`},children:a.map((t,o)=>{const i=r.has(t);return e.jsx(p.button,{onClick:()=>d?.(t),className:`
              aspect-square rounded-md text-xs font-medium
              flex items-center justify-center
              transition-colors cursor-pointer
              ${i?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30 hover:bg-emerald-500/30":"bg-dark-800 text-dark-400 border border-dark-700 hover:bg-dark-700 hover:text-dark-200"}
            `,whileHover:{scale:1.1},whileTap:{scale:.95},title:`Problem ${o+1}${i?" (Complete)":""}`,children:o+1},t)})})}function C({completed:a,total:r,label:d="Progress"}){const l=r>0?Math.round(a/r*100):0;return e.jsxs("div",{className:"bg-dark-900 rounded-xl p-4 border border-dark-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-dark-300",children:d}),e.jsxs("span",{className:"text-sm font-bold text-dark-100",children:[a,"/",r," (",l,"%)"]})]}),e.jsx("div",{className:"h-3 bg-dark-800 rounded-full overflow-hidden",children:e.jsx(p.div,{className:"h-full bg-gradient-to-r from-emerald-500 to-emerald-400 rounded-full",initial:{width:0},animate:{width:`${l}%`},transition:{duration:.5,ease:"easeOut"}})}),l===100&&e.jsx(p.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},className:"mt-2 text-center text-emerald-400 text-sm font-medium",children:"Section Complete!"})]})}function P({sections:a,completedIds:r,onToggleComplete:d,onSolutionView:l}){const[t,o]=c.useState("all"),[i,b]=c.useState("all"),m=c.useMemo(()=>a.flatMap(s=>[...s.examples.map(n=>n.id),...s.exercises.map(n=>n.id)]),[a]),g=c.useMemo(()=>t==="all"?a:a.filter(s=>s.sectionId===t),[a,t]),v=c.useMemo(()=>g.map(s=>{let n=s.examples,u=s.exercises;return i==="examples"?u=[]:i==="exercises"?n=[]:i==="incomplete"?(n=n.filter(h=>!r.has(h.id)),u=u.filter(h=>!r.has(h.id))):i==="complete"&&(n=n.filter(h=>r.has(h.id)),u=u.filter(h=>r.has(h.id))),{...s,examples:n,exercises:u}}),[g,i,r]),f=c.useMemo(()=>{const s=m.filter(n=>r.has(n)).length;return{completed:s,total:m.length,percentage:m.length>0?Math.round(s/m.length*100):0}},[m,r]),y=c.useCallback(s=>{const n=document.getElementById(`problem-${s}`);n&&(n.scrollIntoView({behavior:"smooth",block:"center"}),n.classList.add("ring-2","ring-primary-500"),setTimeout(()=>{n.classList.remove("ring-2","ring-primary-500")},2e3))},[]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(C,{completed:f.completed,total:f.total})}),e.jsxs("div",{className:"lg:col-span-2 bg-dark-900 rounded-xl p-4 border border-dark-800",children:[e.jsx("h3",{className:"text-sm font-medium text-dark-400 mb-3",children:"Completion Grid"}),e.jsx(T,{problemIds:m,completedIds:r,onProblemClick:y,columns:Math.min(15,Math.ceil(Math.sqrt(m.length*1.5)))})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t==="all"?"bg-primary-500 text-white":"bg-dark-800 text-dark-300 hover:bg-dark-700"}`,children:"All Sections"}),a.map(s=>e.jsx("button",{onClick:()=>o(s.sectionId),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t===s.sectionId?"bg-primary-500 text-white":"bg-dark-800 text-dark-300 hover:bg-dark-700"}`,children:s.textbookSection},s.sectionId))]}),e.jsx("div",{className:"flex flex-wrap gap-2 pb-2 border-b border-dark-800",children:[{value:"all",label:"All"},{value:"examples",label:"Examples"},{value:"exercises",label:"Exercises"},{value:"incomplete",label:"Incomplete"},{value:"complete",label:"Complete"}].map(({value:s,label:n})=>e.jsx("button",{onClick:()=>b(s),className:`px-3 py-1.5 rounded-md text-xs font-medium transition-colors ${i===s?"bg-dark-700 text-dark-100":"text-dark-400 hover:text-dark-200 hover:bg-dark-800"}`,children:n},s))}),e.jsx("div",{className:"space-y-8",children:v.map(s=>e.jsxs("div",{children:[t==="all"&&e.jsx("div",{className:"mb-4 pb-2 border-b border-dark-800",children:e.jsxs("h2",{className:"text-lg font-semibold text-dark-100",children:[s.textbookSection,": ",s.sectionTitle]})}),s.examples.length>0&&e.jsx("div",{className:"space-y-4 mb-6",children:s.examples.map(n=>e.jsx($,{example:n,isComplete:r.has(n.id),onToggleComplete:()=>d(n.id),onSolutionView:()=>l?.(n.id)},n.id))}),s.exercises.length>0&&e.jsx("div",{className:"space-y-4",children:s.exercises.map(n=>e.jsx(M,{exercise:n,isComplete:r.has(n.id),onToggleComplete:()=>d(n.id),onSolutionView:()=>l?.(n.id)},n.id))}),s.examples.length===0&&s.exercises.length===0&&e.jsx("div",{className:"text-center py-8 text-dark-500",children:"No problems match the current filter."})]},s.sectionId))})]})}export{P};
