import{j as e,m as A}from"./vendor-animation-0o8UKZ_1.js";import{r as c}from"./vendor-react-Drj8qL0h.js";import{q as J,k as K,r as V,F as H,t as ee}from"./index-DAjDLGuP.js";import{k as O}from"./vendor-math-p018AHG0.js";function T(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function te(s){if(!s)return[];const l=[];let h=0;const o=[],w=/\$\$([^$]*?)\$\$/g;let d;for(;(d=w.exec(s))!==null;)o.push({type:"display",latex:d[1],start:d.index,end:d.index+d[0].length});const N=/\$([^$]+?)\$/g;let u;for(;(u=N.exec(s))!==null;)o.some(i=>u.index>=i.start&&u.index<i.end)||o.push({type:"inline",latex:u[1],start:u.index,end:u.index+u[0].length});return o.sort((m,i)=>m.start-i.start),o.forEach(m=>{const i=s.slice(h,m.start);i&&l.push({type:"text",content:i}),l.push({type:m.type==="display"?"display-math":"inline-math",content:m.latex}),h=m.end}),h<s.length&&l.push({type:"text",content:s.slice(h)}),l}function re(s){if(!s)return"";const h=te(s).map(o=>{if(o.type==="text")return T(o.content);if(o.type==="inline-math")try{return O.renderToString(o.content,{throwOnError:!1,displayMode:!1})}catch{return T(o.content)}else if(o.type==="display-math")try{return O.renderToString(o.content,{throwOnError:!1,displayMode:!0})}catch{return T(o.content)}return""}).join("");return J.sanitize(h,{ADD_TAGS:["semantics","mrow","mi","mo","mn","msup","msub","mfrac","mroot","msqrt","mtext","annotation"],ADD_ATTR:["encoding","mathvariant","stretchy","fence","separator","lspace","rspace"]})}function $(s){return typeof s=="string"?re(s):s.map(l=>(l.type==="text",l.content)).join("")}const ne=[{id:1,type:"multiple-choice",question:"How many construction axioms did Euclid use for straightedge and compass constructions?",options:["$2$","$3$","$4$","$5$"],correctIndex:1,difficulty:"easy",explanation:"Euclid used three construction axioms: (1) draw a line segment between two points, (2) extend a line segment, and (3) draw a circle with given center and radius."},{id:2,type:"multiple-choice",question:"What is the key difference between a straightedge and a ruler?",options:["A straightedge is longer","A straightedge has no markings for measurement","A ruler can only draw curved lines","There is no difference"],correctIndex:1,difficulty:"easy",explanation:"A straightedge has no scale marked on it and can only be used for drawing straight linesâ€”not for measurement. Euclid deliberately separates the function of measurement from drawing straight lines."},{id:3,type:"multiple-choice",question:"In Euclidean geometry, which tool is used for measuring and transferring lengths?",options:["The straightedge","The protractor","The compass","The ruler"],correctIndex:2,difficulty:"easy",explanation:'The compass "stores" the length of a radius and allows this length to be transferred elsewhere. The power of measuring lengths resides in the compass.'},{id:4,type:"multiple-choice",question:"Which of the following is NOT one of Euclid's construction axioms?",options:["Draw a straight line segment between any two points","Extend a straight line segment indefinitely","Measure the angle between two lines","Draw a circle with given center and radius"],correctIndex:2,difficulty:"medium",explanation:"Euclid's three construction axioms are: (1) draw a line segment, (2) extend a line segment, and (3) draw a circle. Measuring angles is not one of the construction axioms."},{id:5,type:"multiple-choice",question:"To add the length $|AB|$ to the length $|CD|$ using a compass, what should you do?",options:["Draw a line from A to D","Set the compass to radius $|AB|$ and draw a circle centered at D","Use a ruler to measure both lengths","Draw perpendicular lines from each segment"],correctIndex:1,difficulty:"medium",explanation:"To add lengths, you pick up the compass with radius set to $|AB|$ and describe a circle with center D. Where this circle intersects the extended line CD gives you the sum $|CD| + |AB|$."},{id:6,type:"multiple-choice",question:'Why did Euclid separate the concepts of "straightness" and "length" into different tools?',options:["He didn't have access to rulers","It simplifies the axioms and clarifies the foundations of geometry","Compasses were easier to manufacture","Ancient Greek law required separate tools"],correctIndex:1,difficulty:"medium",explanation:'Separating "straightness" (straightedge) and "length" (compass) turns out to be important for understanding the foundations of geometry. This same separation reappears in different approaches to geometry.'}],se={0:ne};function ce(s){return se[s]??null}function de({sectionId:s,questions:l,title:h="Section Quiz"}){var L,P,z;const o=K(),w=H.gamification?o:null,[d,N]=c.useState(0),[u,m]=c.useState(null),[i,S]=c.useState(null),[k,C]=c.useState(""),[p,y]=c.useState(!1),[X,j]=c.useState(0),[E,v]=c.useState([]),[I,D]=c.useState(!1),[M,g]=c.useState(""),[R,q]=c.useState(0),[Q]=c.useState(()=>l.map(()=>Math.random())),_=c.useMemo(()=>[...l].map((r,t)=>({q:r,sort:Q[t]??0})).sort((r,t)=>r.sort-t.sort).map(({q:r})=>r).slice(0,5),[l,Q]),n=_[d],x=_.length,b=(n==null?void 0:n.type)??"multiple-choice";if(!n&&!I)return e.jsx("div",{className:"mt-12 p-6 rounded-2xl bg-dark-800/50 border border-dark-700/50",children:e.jsx("p",{className:"text-dark-400 text-center",children:"No quiz questions available for this section."})});const B=r=>{if(u!==null)return;m(r);const t=r===n.correctIndex;t&&j(a=>a+1),v(a=>[...a,t]),y(!0)},F=()=>{if(i===null||Number.isNaN(i)){g("Please enter a number");return}const{min:r,max:t}=n.numericRange??{};if(r!==void 0&&i<r){g(`Answer must be at least ${r}`);return}if(t!==void 0&&i>t){g(`Answer must be at most ${t}`);return}g("");const a=i===n.correctAnswer;a&&j(f=>f+1),v(f=>[...f,a]),y(!0)},U=()=>{const r=k.trim();if(r==="")return;const t=r.toLowerCase()===String(n.correctAnswer??"").toLowerCase();t&&j(a=>a+1),v(a=>[...a,t]),y(!0)},G=()=>{if(d<x-1)N(r=>r+1),m(null),S(null),C(""),y(!1),g("");else{D(!0);const r=X+(p&&(b==="multiple-choice"&&u===n.correctIndex||b==="numeric"&&i===n.correctAnswer||b==="text"&&k.toLowerCase()===String(n.correctAnswer??"").toLowerCase())?1:0),t=globalThis.Math.round(r/x*100);let a=V(n.difficulty,t);t===100&&(a=globalThis.Math.round(a*(1+ee.QUIZ_PERFECT_BONUS))),q(a),w&&w.recordQuiz(s,n.difficulty,t,r,x)}},W=()=>{N(0),m(null),S(null),C(""),y(!1),j(0),v([]),D(!1),g(""),q(0)};if(I){const r=E.filter(Boolean).length,t=globalThis.Math.round(r/x*100);return e.jsx("div",{className:"mt-12 p-6 rounded-2xl bg-dark-800/50 border border-dark-700/50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:t>=80?"ðŸŽ‰":t>=60?"ðŸ‘":"ðŸ“š"}),e.jsx("h3",{className:"text-2xl font-bold text-dark-100 mb-2",children:"Quiz Complete!"}),e.jsxs("p",{className:"text-dark-400 mb-4",children:["You scored ",r," out of ",x," (",t,"%)"]}),H.gamification&&R>0&&e.jsxs(A.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-amber-500/20 border border-amber-500/30 mb-4",children:[e.jsx("span",{className:"text-2xl",children:"â­"}),e.jsxs("span",{className:"text-amber-300 font-bold text-lg",children:["+",R," XP"]}),t===100&&e.jsx("span",{className:"text-amber-400 text-sm",children:"(Perfect bonus!)"})]}),e.jsx("div",{className:"flex items-center justify-center gap-2 mb-6",children:E.map((a,f)=>e.jsx("div",{className:`w-3 h-3 rounded-full ${a?"bg-emerald-500":"bg-red-500"}`},f))}),e.jsx("button",{onClick:W,className:"px-6 py-3 rounded-xl bg-primary-500 hover:bg-primary-600 text-white font-medium transition-colors",children:"Try Again"})]})})}return e.jsxs("div",{className:"mt-12 p-6 rounded-2xl bg-dark-800/50 border border-dark-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-dark-100",children:h}),e.jsxs("span",{className:"text-sm text-dark-400",children:["Question ",d+1," of ",x]})]}),e.jsx("div",{className:"h-1 bg-dark-700 rounded-full mb-6 overflow-hidden",children:e.jsx(A.div,{className:"h-full bg-primary-500",initial:{width:0},animate:{width:`${(d+1)/x*100}%`}})}),e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${n.difficulty==="easy"?"bg-emerald-500/20 text-emerald-400":n.difficulty==="medium"?"bg-amber-500/20 text-amber-400":"bg-red-500/20 text-red-400"}`,children:n.difficulty.charAt(0).toUpperCase()+n.difficulty.slice(1)})}),e.jsx("p",{className:"text-lg text-dark-200 mb-6",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:$(n.question)}})}),b==="multiple-choice"&&n.options&&e.jsx("div",{className:"space-y-3 mb-6",children:n.options.map((r,t)=>{const a=u===t,f=t===n.correctIndex,Y=p&&f,Z=p&&a&&!f;return e.jsx("button",{onClick:()=>B(t),disabled:p,className:`w-full p-4 rounded-xl text-left transition-all ${Y?"bg-emerald-500/20 border-emerald-500/50 text-emerald-300":Z?"bg-red-500/20 border-red-500/50 text-red-300":a?"bg-primary-500/20 border-primary-500/50 text-primary-300":"bg-dark-700/50 border-dark-600/50 text-dark-200 hover:bg-dark-700 hover:border-dark-500"} border`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-dark-600 flex items-center justify-center text-sm font-medium",children:String.fromCharCode(65+t)}),e.jsx("span",{dangerouslySetInnerHTML:{__html:$(r)}})]})},t)})}),b==="numeric"&&e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx("input",{type:"number",step:(L=n.numericRange)!=null&&L.precision?1/globalThis.Math.pow(10,n.numericRange.precision):1,min:(P=n.numericRange)==null?void 0:P.min,max:(z=n.numericRange)==null?void 0:z.max,value:i??"",onChange:r=>{const t=r.target.value;S(t===""?null:parseFloat(t))},disabled:p,className:"w-full px-4 py-3 rounded-xl bg-dark-800 border border-dark-700 text-dark-100 placeholder-dark-500 focus:outline-none focus:border-primary-500 transition-colors",placeholder:"Enter your answer..."}),M&&e.jsx("p",{className:"text-red-400 text-sm",children:M}),e.jsx("button",{onClick:F,disabled:p||i===null||Number.isNaN(i),className:"w-full py-3 rounded-xl bg-primary-500 hover:bg-primary-600 text-white font-medium transition-colors disabled:bg-dark-600 disabled:cursor-not-allowed",children:"Check Answer"})]}),b==="text"&&e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx("input",{type:"text",value:k,onChange:r=>C(r.target.value),disabled:p,className:"w-full px-4 py-3 rounded-xl bg-dark-800 border border-dark-700 text-dark-100 placeholder-dark-500 focus:outline-none focus:border-primary-500 transition-colors",placeholder:"Type your answer..."}),e.jsx("button",{onClick:U,disabled:p||!k.trim(),className:"w-full py-3 rounded-xl bg-primary-500 hover:bg-primary-600 text-white font-medium transition-colors disabled:bg-dark-600 disabled:cursor-not-allowed",children:"Check Answer"})]}),p&&n.explanation&&e.jsx(A.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-dark-700/50 border border-dark-600/50 mb-6",children:e.jsxs("p",{className:"text-sm text-dark-300",children:[e.jsx("span",{className:"font-medium text-dark-200",children:"Explanation: "}),e.jsx("span",{dangerouslySetInnerHTML:{__html:$(n.explanation)}})]})}),p&&e.jsx(A.button,{initial:{opacity:0},animate:{opacity:1},onClick:G,className:"w-full py-3 rounded-xl bg-primary-500 hover:bg-primary-600 text-white font-medium transition-colors",children:d<x-1?"Next Question":"See Results"})]})}export{de as S,ce as g,ne as s};
