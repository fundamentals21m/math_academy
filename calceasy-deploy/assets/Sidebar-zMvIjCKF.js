import{j as e}from"./vendor-animation-0o8UKZ_1.js";import{r as p,L as c,N as k}from"./vendor-react-Drj8qL0h.js";import{c as y,d as w,e as C,j as L,k as v,l as M,C as $,H as B,S as I,X as P,F as l,m as E,n as b}from"./index-yui8gAhz.js";import"./vendor-math-p018AHG0.js";function F({level:o,showLabel:n=!1}){const{label:i,color:t,symbol:d}=y(o);return e.jsxs("div",{className:`flex items-center gap-1.5 ${t}`,children:[e.jsx("span",{className:"text-sm",children:d}),n&&e.jsx("span",{className:"text-xs",children:i})]})}function R({onImportSuccess:o}){const[n,i]=p.useState(!1),[t,d]=p.useState(null),[x,s]=p.useState(!1),r=p.useRef(null),a=w(),m=()=>{C(),d({type:"success",text:"Progress exported! Check your downloads folder."}),setTimeout(()=>d(null),3e3)},h=()=>{var u;(u=r.current)==null||u.click()},N=async u=>{var j;const f=(j=u.target.files)==null?void 0:j[0];if(!f)return;s(!0),d(null);const g=await L(f);s(!1),d({type:g.success?"success":"error",text:g.message}),g.success&&(o==null||o(),setTimeout(()=>{window.location.reload()},1500)),r.current&&(r.current.value="")};return e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>i(!n),className:"p-2 rounded-lg hover:bg-dark-800 transition-colors","aria-label":"Backup & restore progress",title:"Backup & restore progress",children:e.jsx("svg",{className:"w-5 h-5 text-dark-400 hover:text-dark-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>i(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-72 bg-dark-800 rounded-lg shadow-xl border border-dark-700 z-50 p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-dark-100 mb-3",children:"Progress Backup"}),a&&e.jsxs("div",{className:"mb-4 p-3 bg-dark-900 rounded-lg",children:[e.jsx("div",{className:"text-xs text-dark-400 mb-1",children:"Current Progress"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"text-accent-400 font-semibold",children:[a.totalXP," XP"]}),e.jsxs("span",{className:"text-dark-300",children:["Level ",a.level]}),e.jsxs("span",{className:"text-dark-400",children:[a.sectionsCompleted," sections"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:m,disabled:!a,className:"w-full flex items-center gap-2 px-3 py-2 bg-dark-700 hover:bg-dark-600 rounded-lg text-sm text-dark-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export Progress"]}),e.jsxs("button",{onClick:h,disabled:x,className:"w-full flex items-center gap-2 px-3 py-2 bg-dark-700 hover:bg-dark-600 rounded-lg text-sm text-dark-100 transition-colors disabled:opacity-50",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),x?"Importing...":"Import Backup"]}),e.jsx("input",{ref:r,type:"file",accept:".json",onChange:N,className:"hidden"})]}),t&&e.jsx("div",{className:`mt-3 p-2 rounded text-xs ${t.type==="success"?"bg-green-900/50 text-green-300 border border-green-700":"bg-red-900/50 text-red-300 border border-red-700"}`,children:t.text}),e.jsx("p",{className:"mt-3 text-xs text-dark-500",children:"Export your progress regularly to avoid losing your XP. Import to restore from a backup file."})]})]})]})}function U({onToggleSidebar:o,sidebarOpen:n}){const i=v(),t=l.gamification?i:null;return e.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-dark-900/95 backdrop-blur-sm border-b border-dark-800",children:e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:o,className:"p-2 rounded-lg hover:bg-dark-800 transition-colors","aria-label":n?"Close sidebar":"Open sidebar",children:e.jsx("svg",{className:"w-6 h-6 text-dark-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsxs(c,{to:"/",className:"flex items-center gap-3 hover:opacity-80 transition-opacity",children:[e.jsx("span",{className:"text-2xl",children:M}),e.jsx("h1",{className:"text-lg font-semibold text-dark-100 hidden sm:block",children:$})]})]}),e.jsxs("nav",{className:"hidden md:flex items-center gap-6",children:[e.jsx("a",{href:B,className:"text-dark-400 hover:text-dark-100 transition-colors text-sm font-medium",children:"Hub"}),e.jsx(c,{to:"/",className:"text-dark-400 hover:text-dark-100 transition-colors text-sm font-medium",children:"Home"}),l.theoremIndex&&e.jsx(c,{to:"/theorems",className:"text-dark-400 hover:text-dark-100 transition-colors text-sm font-medium",children:"Theorems"}),l.interactiveModules&&e.jsx(c,{to:"/interactive",className:"text-dark-400 hover:text-dark-100 transition-colors text-sm font-medium",children:"Interactive"}),l.leaderboard&&e.jsx(c,{to:"/leaderboard",className:"text-dark-400 hover:text-dark-100 transition-colors text-sm font-medium",children:"Leaderboard"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[l.gamification&&t&&e.jsxs(e.Fragment,{children:[e.jsx(I,{streak:t.state.streak.currentStreak}),e.jsx(P,{xp:t.state.user.totalXP,level:t.state.user.level})]}),l.gamification&&e.jsx(R,{})]})]})})}function X({isOpen:o,onClose:n}){const i=v(),t=l.gamification?i:null,d=s=>{var a;if(!t)return"none";const r=`${b}:${s}`;return((a=t.state.sections[r])==null?void 0:a.masteryLevel)??"none"},x=s=>{if(!t)return!1;const r=`${b}:${s}`;return t.state.user.sectionsCompleted.includes(r)};return e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"fixed inset-0 bg-dark-950/80 backdrop-blur-sm z-40 lg:hidden",onClick:n}),e.jsxs("aside",{className:`
          fixed top-16 left-0 bottom-0 w-72 bg-dark-900/95 backdrop-blur-xl border-r border-dark-700/50
          overflow-y-auto scrollbar-thin z-40
          transform transition-transform duration-300 ease-out
          ${o?"translate-x-0":"-translate-x-full"}
          lg:translate-x-0
        `,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-primary-500/[0.02] to-transparent pointer-events-none"}),e.jsxs("nav",{className:"relative p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-amber-500/20 to-orange-500/10 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-amber-400",children:"★"})}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-dark-500",children:"Reference"})]}),e.jsxs("ul",{className:"space-y-0.5",children:[l.theoremIndex&&e.jsx("li",{children:e.jsx(k,{to:"/theorems",onClick:()=>n(),className:({isActive:s})=>`group flex items-center gap-3 px-3 py-2.5 text-sm rounded-xl transition-all duration-200 ${s?"text-amber-400 bg-amber-500/10 shadow-sm shadow-amber-500/5":"text-dark-400 hover:text-dark-100 hover:bg-dark-800/50"}`,children:({isActive:s})=>e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`w-6 h-6 rounded-lg flex items-center justify-center text-xs transition-all duration-200 ${s?"bg-amber-500/20 text-amber-400":"bg-dark-800/50 text-dark-500 group-hover:bg-dark-700/50 group-hover:text-dark-300"}`,children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("span",{className:"truncate flex-1",children:"Theorems"}),s&&e.jsx("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-amber-400"})]})})}),l.interactiveModules&&e.jsx("li",{children:e.jsx(k,{to:"/interactive",onClick:()=>n(),className:({isActive:s})=>`group flex items-center gap-3 px-3 py-2.5 text-sm rounded-xl transition-all duration-200 ${s?"text-cyan-400 bg-cyan-500/10 shadow-sm shadow-cyan-500/5":"text-dark-400 hover:text-dark-100 hover:bg-dark-800/50"}`,children:({isActive:s})=>e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`w-6 h-6 rounded-lg flex items-center justify-center text-xs transition-all duration-200 ${s?"bg-cyan-500/20 text-cyan-400":"bg-dark-800/50 text-dark-500 group-hover:bg-dark-700/50 group-hover:text-dark-300"}`,children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsx("span",{className:"truncate flex-1",children:"Interactive Modules"}),s&&e.jsx("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-cyan-400"})]})})})]})]}),E.map(s=>e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-primary-500/20 to-cyan-500/10 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-primary-400",children:s.id})}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-dark-500 truncate",children:s.title})]}),e.jsx("ul",{className:"space-y-0.5",children:s.sections.map(r=>e.jsx("li",{children:e.jsx(k,{to:`/section/${r.id}`,onClick:()=>n(),className:({isActive:a})=>`group flex items-center gap-3 px-3 py-2.5 text-sm rounded-xl transition-all duration-200 ${a?"text-primary-400 bg-primary-500/10 shadow-sm shadow-primary-500/5":"text-dark-400 hover:text-dark-100 hover:bg-dark-800/50"}`,children:({isActive:a})=>{const m=d(r.id),h=x(r.id);return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`w-6 h-6 rounded-lg flex items-center justify-center text-xs font-medium transition-all duration-200 ${a?"bg-primary-500/20 text-primary-400":h?"bg-emerald-500/20 text-emerald-400":"bg-dark-800/50 text-dark-500 group-hover:bg-dark-700/50 group-hover:text-dark-300"}`,children:h?"✓":r.id}),e.jsx("span",{className:"truncate flex-1",children:r.title}),e.jsxs("div",{className:"ml-auto flex items-center gap-1",children:[l.gamification&&m!=="none"&&e.jsx(F,{level:m}),a&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary-400"})]})]})}})},r.id))})]},`part-${s.id}`))]})]})]})}export{U as H,X as S};
