#!/usr/bin/env python3
"""
Previously On... Recaps for Atlas Shrugged YouTube Series

Contains recap text for episodes 2-30 that references key events from the prior episode.
Each recap is ~15-20 seconds of narration.

Usage:
    Import RECAPS dict and prepend to introduction section of each episode.
"""

RECAPS = {
    2: """Previously on Atlas Shrugged: We entered a world where the lights are going out. We met Dagny Taggart, fighting to keep civilization running. And we heard the question that haunts everyone: "Who is John Galt?"

Now, in Episode 2...""",

    3: """Previously: Hank Rearden watched the first pour of his revolutionary metal—ten years of work made real. But instead of celebration, his family met his triumph with contempt. His wife called it vulgar. His brother called it showing off.

Achievement, it seems, is something to feel guilty about.""",

    4: """Previously: We saw the looters' conspiracy take shape. The "Anti-dog-eat-dog Rule" destroyed Dan Conway's Phoenix-Durango Railroad—all in the name of preventing "destructive competition."

The pattern is becoming clear: use the language of fairness to destroy the capable.""",

    5: """Previously: Francisco d'Anconia—once the greatest industrialist of his generation—now squanders his fortune on scandals. His copper mines produce less each year. He seems to be deliberately destroying everything he built.

Why would a man of such ability choose destruction? What does he know that we don't?""",

    6: """Previously: At the Rearden party, Francisco dropped his mask and delivered the Money Speech. "So you think that money is the root of all evil? Have you ever asked what is the root of money?"

He argued that money is a tool of virtue, not evil—that it represents trade, not exploitation. The intellectuals were stunned. Rearden was intrigued.""",

    7: """Previously: The State Science Institute published a report attacking Rearden Metal. Not because it's dangerous—but because Rearden succeeded without their permission.

Even Dr. Robert Stadler, a brilliant physicist who knows the truth, signed off on the false report. Science has been corrupted by politics.""",

    8: """Previously: The Equalization of Opportunity Bill passed. No person may own more than one business. Wesley Mouch—Rearden's own lobbyist—betrayed his employer to gain political power.

The pattern is undeniable: in this new world, success is not earned through ability, but through political connection.""",

    9: """Previously: Against all predictions of disaster, the John Galt Line's first run was a triumph. Dagny and Rearden rode the new rails at unprecedented speed, the bridge held, and they proved that achievement is still possible.

It was the novel's high point—and the last moment of pure triumph before everything changes.""",

    10: """Previously: Dagny and Rearden discovered something their world tries to deny: that the mind and body are not enemies. That the man who builds railroads can also experience joy without guilt. That achievement in business and happiness in living belong together.

The sacred and the profane are one.""",

    11: """Previously: Wyatt's Torch. Rather than surrender his oil fields to the looters, Ellis Wyatt set fire to everything he built and vanished. He left behind a pillar of flame that will burn for years, and a note: "I am leaving it as I found it. Take over. It's yours."

Part One has ended in fire. Welcome to Part Two: Either-Or.""",

    12: """Welcome to Part Two. The world has changed since Wyatt's Torch. Producers are vanishing faster now. The economy spirals downward.

And somewhere, someone is recruiting the best minds for a purpose no one yet understands.""",

    13: """Previously: The aristocracy of pull has replaced the aristocracy of ability. Wesley Mouch holds power—not through productive achievement, but through betrayal. James Taggart succeeds—not by running a railroad, but by having political allies.

These are the new lords of America. Their weapon is regulation.""",

    14: """Previously: We saw white blackmail in action—guilt as a weapon against the productive. Are you successful? Feel guilty. Are you intelligent? Feel guilty. The looters can't match the producers in ability, so they attack through morality.

They make excellence feel like sin.""",

    15: """Previously: The sanction of the victim. Evil is powerless without the cooperation of the good. The looters cannot function without producers to loot. They depend entirely on the producers' compliance.

The moment the producers withdraw their sanction—they are free. And the looters are powerless.""",

    16: """Previously: The economic account is overdrawn. You can only consume what has been produced. And for decades, America has been writing checks against a shrinking account.

Trains stop running. Factories close. Crops rot. Not from external disaster—but from the absence of the minds that made everything work.""",

    17: """Previously: Rearden Metal—the miracle that could transform civilization—has been seized by the government. Not purchased, not traded for, but taken by decree.

Because a miracle, they say, is too important to belong to one man.""",

    18: """Previously: The moratorium on brains. No new inventions. No new processes. No new products. Everything must stay as it is.

The official reason is stability. The real reason is fear—fear of anyone who might create something the looters can't control.""",

    19: """Previously: We explored what love reveals about our values. Do we love people for their weaknesses or their strengths? Do we seek partners who need us or who inspire us?

The heroes of this story love strength. The villains seek weakness. By our love, we show who we are.""",

    20: """Previously: Dagny glimpsed a face without pain or fear or guilt—someone who has solved the problem of living. A face that shows serenity, resolution, inner peace.

Part Two draws toward its climax. The answer is close.""",

    21: """Previously: The dollar sign. Symbol of free trade. Emblem of voluntary exchange. The strikers have chosen it as their banner—reclaiming what the looters despise.

Part Two ends with the lines clearly drawn. Welcome to Part Three: A Is A.""",

    22: """Welcome to Part Three. Dagny has discovered Atlantis—the hidden valley where the best minds have gathered. The vanishing producers weren't destroyed. They withdrew.

Ellis Wyatt runs an oil operation. Richard Halley writes music. Midas Mulligan has built a bank. The best of a generation, waiting.""",

    23: """Previously: We saw the valley in action—the so-called utopia of greed. No taxes, no regulations, no bureaucracy. Just one rule: no one initiates force against another.

When people can only acquire things through trade, everyone's self-interest serves everyone else. Greed builds paradise.""",

    24: """Previously: The outside world continues its descent into anti-greed—policies driven not by love of the poor, but by hatred of the successful.

The policies aren't designed to produce prosperity. They're designed to prevent it. Their goal isn't abundance—it's equality of misery.""",

    25: """Previously: Anti-life. The looters' philosophy treats sacrifice as virtue and life as something to be surrendered. Suffering is redemptive. Happiness is suspicious.

Their policies consistently destroy because destruction—sacrifice—is their hidden goal.""",

    26: """Previously: Their brothers' keepers. Unlimited obligation. Need as a claim on life. If his need creates your obligation, then the needier he is, the more you owe him.

We saw brotherhood pushed to its logical conclusion—and it looked like slavery.""",

    27: """Previously: The Concerto of Deliverance. Richard Halley's final masterwork, hidden from the world, finally heard in the valley. Music that captures the emotional meaning of liberation.

The sound of a mind freed from the need for permission, validation, approval.""",

    28: """Previously: "This is John Galt speaking." In a broadcast that interrupted every station in the country, John Galt explained why the producers went on strike and what they demand for their return.

The morality of sacrifice is wrong. The strike will continue until the mind is respected.""",

    29: """Previously: The egoist. Rational self-interest as virtue—not the petty grabbing of desires, but the systematic philosophy of self-value.

John Galt showed that selfishness, properly understood, is not a crime but the foundation of the good life.""",

    30: """Previously: The generator. John Galt's motor sits in an abandoned factory—technology that could power the world, left to rust.

He could have transformed civilization. But not under compulsion. Not for those who despise creation. The story nears its end."""
}


def get_recap(episode_num):
    """Get recap text for an episode, or None if not applicable."""
    return RECAPS.get(episode_num)


def format_recap_for_tts(recap_text):
    """Format recap text with pauses for natural TTS delivery."""
    # Add pauses after sentences
    text = recap_text.replace('. ', '.\n\n')
    text = text.replace('? ', '?\n\n')
    text = text.replace('— ', '—\n')
    return text


if __name__ == "__main__":
    print("Atlas Shrugged - Previously On... Recaps")
    print("=" * 50)
    print()

    for ep_num, recap in RECAPS.items():
        word_count = len(recap.split())
        duration_estimate = word_count / 150 * 60  # 150 WPM

        print(f"Episode {ep_num}: {word_count} words (~{duration_estimate:.0f} seconds)")

    print()
    print(f"Total recaps: {len(RECAPS)}")
