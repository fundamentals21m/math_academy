import{j as e,m as k}from"./vendor-animation-0o8UKZ_1.js";import{r as m}from"./vendor-react-Drj8qL0h.js";import{k as W}from"./vendor-math-p018AHG0.js";import{p as Y,e as Z,h as J,X as K}from"./index-GpIhfX_l.js";function C(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function V(s){if(!s)return[];const c=[];let h=0;const o=[],$=/\$\$([^$]*?)\$\$/g;let l;for(;(l=$.exec(s))!==null;)o.push({type:"display",latex:l[1],start:l.index,end:l.index+l[0].length});const w=/\$([^$]+?)\$/g;let d;for(;(d=w.exec(s))!==null;)o.some(i=>d.index>=i.start&&d.index<i.end)||o.push({type:"inline",latex:d[1],start:d.index,end:d.index+d[0].length});return o.sort((u,i)=>u.start-i.start),o.forEach(u=>{const i=s.slice(h,u.start);i&&c.push({type:"text",content:i}),c.push({type:u.type==="display"?"display-math":"inline-math",content:u.latex}),h=u.end}),h<s.length&&c.push({type:"text",content:s.slice(h)}),c}function ee(s){if(!s)return"";const h=V(s).map(o=>{if(o.type==="text")return C(o.content);if(o.type==="inline-math")try{return W.renderToString(o.content,{throwOnError:!1,displayMode:!1})}catch{return C(o.content)}else if(o.type==="display-math")try{return W.renderToString(o.content,{throwOnError:!1,displayMode:!0})}catch{return C(o.content)}return""}).join("");return Y.sanitize(h,{ADD_TAGS:["semantics","mrow","mi","mo","mn","msup","msub","mfrac","mroot","msqrt","mtext","annotation"],ADD_ATTR:["encoding","mathvariant","stretchy","fence","separator","lspace","rspace"]})}function S(s){return typeof s=="string"?ee(s):s.map(c=>(c.type==="text",c.content)).join("")}const te=[{id:1,type:"multiple-choice",question:"What are the natural numbers?",options:["All positive and negative whole numbers","The objects produced by the counting process: $1, 2, 3, 4, \\ldots$","All fractions between 0 and 1","Numbers that occur in nature"],correctIndex:1,difficulty:"easy",explanation:"Natural numbers are defined as the objects produced by the counting process: $1, 2, 3, 4, \\ldots$ They are the simplest mathematical objects, yet they are defined by an infinite process."},{id:2,type:"multiple-choice",question:'What is the technique of "infinite descent" used to prove?',options:["That certain things exist","That certain things are impossible","That sequences always converge","That all numbers are rational"],correctIndex:1,difficulty:"easy",explanation:"Infinite descent proves impossibility: if assuming something exists leads to an infinite descending sequence of natural numbers (which is impossible), then the assumption must be false."},{id:3,type:"multiple-choice",question:"In the proof that $\\sqrt{2}$ is irrational, what happens when we assume $m^2 = 2n^2$?",options:["We find that $m$ and $n$ must both be odd","We get smaller numbers $m_1, n_1$ with $m_1^2 = 2n_1^2$, leading to infinite descent","We prove that $m = n$","We find a unique solution"],correctIndex:1,difficulty:"medium",explanation:"Starting from $m^2 = 2n^2$, we show both $m$ and $n$ are even, giving $m_1^2 = 2n_1^2$ with $m_1 < m$. Repeating creates an infinite descending sequence, which is impossible."},{id:4,type:"multiple-choice",question:'What does "irrational" mean in the context of numbers?',options:["The number makes no sense","The number is negative","The number is not a ratio of natural numbers","The number is very large"],correctIndex:2,difficulty:"easy",explanation:'The word "irrational" simply means "not a ratio." An irrational number like $\\sqrt{2}$ cannot be expressed as a fraction $m/n$ where $m$ and $n$ are natural numbers.'},{id:5,type:"multiple-choice",question:"What is an Egyptian fraction?",options:["A fraction used only in ancient Egypt","A sum of distinct unit fractions (fractions of the form $1/n$)","Any fraction less than 1","A fraction with denominator 10"],correctIndex:1,difficulty:"easy",explanation:"An Egyptian fraction is a sum of distinct unit fractions. For example, $\\frac{2}{3} = \\frac{1}{2} + \\frac{1}{6}$ is an Egyptian fraction representation."},{id:6,type:"multiple-choice",question:"Which fraction equals $\\frac{1}{2} + \\frac{1}{6}$?",options:["$\\frac{1}{3}$","$\\frac{2}{3}$","$\\frac{1}{8}$","$\\frac{3}{4}$"],correctIndex:1,difficulty:"medium",explanation:"$\\frac{1}{2} + \\frac{1}{6} = \\frac{3}{6} + \\frac{1}{6} = \\frac{4}{6} = \\frac{2}{3}$"},{id:7,type:"multiple-choice",question:"In Fibonacci's method for Egyptian fractions, why does the process always terminate?",options:["Because the denominator increases","Because the numerator decreases, and we cannot descend infinitely","Because fractions have a maximum size","Because there are only finitely many unit fractions"],correctIndex:1,difficulty:"hard",explanation:"Fibonacci's method works by repeatedly subtracting the largest unit fraction. Each step decreases the numerator of the remaining fraction. By infinite descent, a decreasing sequence of natural numbers must terminate."},{id:8,type:"multiple-choice",question:"If $m^2 = 2n^2$ and $m$ is even, what can we conclude about $n$?",options:["$n$ must be odd","$n$ must also be even","$n$ must equal $m$","Nothing can be concluded about $n$"],correctIndex:1,difficulty:"medium",explanation:"If $m = 2m_1$, then $4m_1^2 = 2n^2$, so $n^2 = 2m_1^2$. This means $n^2$ is even, which implies $n$ is even (since the square of an odd number is odd)."}],ne={0:te};function oe(s){return ne[s]??null}function ce({sectionId:s,questions:c,title:h="Section Quiz"}){var Q,L,P;const $=Z(),[l,w]=m.useState(0),[d,u]=m.useState(null),[i,T]=m.useState(null),[N,A]=m.useState(""),[p,g]=m.useState(!1),[z,j]=m.useState(0),[I,v]=m.useState([]),[X,q]=m.useState(!1),[_,b]=m.useState(""),[E,R]=m.useState(0),M=m.useMemo(()=>[...c].sort(()=>globalThis.Math.random()-.5).slice(0,5),[c]),n=M[l],f=M.length,y=(n==null?void 0:n.type)??"multiple-choice",B=r=>{if(d!==null)return;u(r);const t=r===n.correctIndex;t&&j(a=>a+1),v(a=>[...a,t]),g(!0)},D=()=>{if(i===null||Number.isNaN(i)){b("Please enter a number");return}const{min:r,max:t}=n.numericRange??{};if(r!==void 0&&i<r){b(`Answer must be at least ${r}`);return}if(t!==void 0&&i>t){b(`Answer must be at most ${t}`);return}b("");const a=i===n.correctAnswer;a&&j(x=>x+1),v(x=>[...x,a]),g(!0)},F=()=>{const r=N.trim();if(r==="")return;const t=r.toLowerCase()===String(n.correctAnswer??"").toLowerCase();t&&j(a=>a+1),v(a=>[...a,t]),g(!0)},O=()=>{if(l<f-1)w(r=>r+1),u(null),T(null),A(""),g(!1),b("");else{q(!0);const r=z+(p&&(y==="multiple-choice"&&d===n.correctIndex||y==="numeric"&&i===n.correctAnswer||y==="text"&&N.toLowerCase()===String(n.correctAnswer??"").toLowerCase())?1:0),t=globalThis.Math.round(r/f*100);let a=J(n.difficulty,t);t===100&&(a=globalThis.Math.round(a*(1+K.QUIZ_PERFECT_BONUS))),R(a),$&&$.recordQuiz(s,n.difficulty,t,r,f)}},H=()=>{w(0),u(null),T(null),A(""),g(!1),j(0),v([]),q(!1),b(""),R(0)};if(X){const r=I.filter(Boolean).length,t=globalThis.Math.round(r/f*100);return e.jsx("div",{className:"mt-12 p-6 rounded-2xl bg-dark-800/50 border border-dark-700/50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:t>=80?"ðŸŽ‰":t>=60?"ðŸ‘":"ðŸ“š"}),e.jsx("h3",{className:"text-2xl font-bold text-dark-100 mb-2",children:"Quiz Complete!"}),e.jsxs("p",{className:"text-dark-400 mb-4",children:["You scored ",r," out of ",f," (",t,"%)"]}),E>0&&e.jsxs(k.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-amber-500/20 border border-amber-500/30 mb-4",children:[e.jsx("span",{className:"text-2xl",children:"â­"}),e.jsxs("span",{className:"text-amber-300 font-bold text-lg",children:["+",E," XP"]}),t===100&&e.jsx("span",{className:"text-amber-400 text-sm",children:"(Perfect bonus!)"})]}),e.jsx("div",{className:"flex items-center justify-center gap-2 mb-6",children:I.map((a,x)=>e.jsx("div",{className:`w-3 h-3 rounded-full ${a?"bg-emerald-500":"bg-red-500"}`},x))}),e.jsx("button",{onClick:H,className:"px-6 py-3 rounded-xl bg-primary-500 hover:bg-primary-600 text-white font-medium transition-colors",children:"Try Again"})]})})}return e.jsxs("div",{className:"mt-12 p-6 rounded-2xl bg-dark-800/50 border border-dark-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-dark-100",children:h}),e.jsxs("span",{className:"text-sm text-dark-400",children:["Question ",l+1," of ",f]})]}),e.jsx("div",{className:"h-1 bg-dark-700 rounded-full mb-6 overflow-hidden",children:e.jsx(k.div,{className:"h-full bg-primary-500",initial:{width:0},animate:{width:`${(l+1)/f*100}%`}})}),e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${n.difficulty==="easy"?"bg-emerald-500/20 text-emerald-400":n.difficulty==="medium"?"bg-amber-500/20 text-amber-400":"bg-red-500/20 text-red-400"}`,children:n.difficulty.charAt(0).toUpperCase()+n.difficulty.slice(1)})}),e.jsx("p",{className:"text-lg text-dark-200 mb-6",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:S(n.question)}})}),y==="multiple-choice"&&n.options&&e.jsx("div",{className:"space-y-3 mb-6",children:n.options.map((r,t)=>{const a=d===t,x=t===n.correctIndex,G=p&&x,U=p&&a&&!x;return e.jsx("button",{onClick:()=>B(t),disabled:p,className:`w-full p-4 rounded-xl text-left transition-all ${G?"bg-emerald-500/20 border-emerald-500/50 text-emerald-300":U?"bg-red-500/20 border-red-500/50 text-red-300":a?"bg-primary-500/20 border-primary-500/50 text-primary-300":"bg-dark-700/50 border-dark-600/50 text-dark-200 hover:bg-dark-700 hover:border-dark-500"} border`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-dark-600 flex items-center justify-center text-sm font-medium",children:String.fromCharCode(65+t)}),e.jsx("span",{dangerouslySetInnerHTML:{__html:S(r)}})]})},t)})}),y==="numeric"&&e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx("input",{type:"number",step:(Q=n.numericRange)!=null&&Q.precision?1/globalThis.Math.pow(10,n.numericRange.precision):1,min:(L=n.numericRange)==null?void 0:L.min,max:(P=n.numericRange)==null?void 0:P.max,value:i??"",onChange:r=>{const t=r.target.value;T(t===""?null:parseFloat(t))},disabled:p,className:"w-full px-4 py-3 rounded-xl bg-dark-800 border border-dark-700 text-dark-100 placeholder-dark-500 focus:outline-none focus:border-primary-500 transition-colors",placeholder:"Enter your answer..."}),_&&e.jsx("p",{className:"text-red-400 text-sm",children:_}),e.jsx("button",{onClick:D,disabled:p||i===null||Number.isNaN(i),className:"w-full py-3 rounded-xl bg-primary-500 hover:bg-primary-600 text-white font-medium transition-colors disabled:bg-dark-600 disabled:cursor-not-allowed",children:"Check Answer"})]}),y==="text"&&e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx("input",{type:"text",value:N,onChange:r=>A(r.target.value),disabled:p,className:"w-full px-4 py-3 rounded-xl bg-dark-800 border border-dark-700 text-dark-100 placeholder-dark-500 focus:outline-none focus:border-primary-500 transition-colors",placeholder:"Type your answer..."}),e.jsx("button",{onClick:F,disabled:p||!N.trim(),className:"w-full py-3 rounded-xl bg-primary-500 hover:bg-primary-600 text-white font-medium transition-colors disabled:bg-dark-600 disabled:cursor-not-allowed",children:"Check Answer"})]}),p&&n.explanation&&e.jsx(k.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-dark-700/50 border border-dark-600/50 mb-6",children:e.jsxs("p",{className:"text-sm text-dark-300",children:[e.jsx("span",{className:"font-medium text-dark-200",children:"Explanation: "}),e.jsx("span",{dangerouslySetInnerHTML:{__html:S(n.explanation)}})]})}),p&&e.jsx(k.button,{initial:{opacity:0},animate:{opacity:1},onClick:O,className:"w-full py-3 rounded-xl bg-primary-500 hover:bg-primary-600 text-white font-medium transition-colors",children:l<f-1?"Next Question":"See Results"})]})}export{ce as S,oe as g,te as s};
