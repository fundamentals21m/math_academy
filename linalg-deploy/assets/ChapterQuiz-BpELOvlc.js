import{j as e,m as k}from"./vendor-animation-8XabJWu9.js";import{u as E,r as i,L as b}from"./vendor-react-dnKiRYoA.js";import{c as H,u as q,F as B}from"./index-D4aEnt1z.js";import{g as Y}from"./index-CHJUcX0S.js";import"./vendor-math-ClxlXyPc.js";import{H as F,S as G}from"./Sidebar-ByRcBpap.js";import"./vendor-firebase-core-DIJkQv9Q.js";function X(){const{id:m}=E(),l=parseInt(m||"1",10),[h,u]=i.useState(!1),d=H.find(p=>p.id===l),o=Y(l);return!d||!o?e.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-dark-100 mb-4",children:"Quiz Not Found"}),e.jsx("p",{className:"text-dark-400 mb-6",children:"This chapter quiz is not yet available."}),e.jsx(b,{to:"/",className:"text-primary-400 hover:text-primary-300",children:"Return to Home"})]})}):e.jsxs("div",{className:"min-h-screen bg-dark-950",children:[e.jsx(F,{onToggleSidebar:()=>u(!h),sidebarOpen:h}),e.jsx(G,{isOpen:h,onClose:()=>u(!1)}),e.jsx("main",{className:"pt-20 pb-24 px-4 lg:pl-80 lg:pr-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("nav",{className:"mb-6 flex items-center gap-2 text-sm text-dark-400",children:[e.jsx(b,{to:"/",className:"hover:text-dark-200 transition-colors",children:"Home"}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-dark-500",children:d.title}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-dark-200",children:"Chapter Quiz"})]}),e.jsxs("header",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-primary-400",children:["Chapter ",l]}),e.jsx("span",{className:"text-dark-600",children:"â€¢"}),e.jsx("span",{className:"text-sm text-dark-500",children:"Comprehensive Quiz"})]}),e.jsxs("h1",{className:"text-3xl font-bold text-dark-100 mb-3",children:[d.title," Quiz"]}),e.jsxs("p",{className:"text-dark-400 text-lg",children:["Test your understanding of all concepts from Chapter ",l,"."]})]}),e.jsx(O,{chapterId:l,chapterTitle:d.title,questions:o}),e.jsx("div",{className:"mt-8 pt-8 border-t border-dark-800",children:e.jsxs(b,{to:`/section/${d.sections[0].id}`,className:"inline-flex items-center gap-2 text-primary-400 hover:text-primary-300 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Chapter ",l]})})]})})]})}function O({chapterId:m,chapterTitle:l,questions:h}){const u=q(),d=B.gamification?u:null,[o,p]=i.useState(0),[f,j]=i.useState(null),[c,g]=i.useState(!1),[N,v]=i.useState(0),[y,w]=i.useState([]),[L,C]=i.useState(!1),[R,I]=i.useState(!1),[S]=i.useState(()=>[...h].sort(()=>Math.random()-.5)),s=S[o],a=S.length,M=()=>{I(!0)},$=r=>{if(f!==null)return;j(r);const t=r===s.correctIndex;t&&v(n=>n+1),w(n=>[...n,t]),g(!0)},A=()=>{if(o<a-1)p(r=>r+1),j(null),g(!1);else if(C(!0),d){const r=Math.round((N+(f===s.correctIndex?1:0))/a*100),t=m;d.recordQuiz(t,"hard",r,N+(f===s.correctIndex?1:0),a)}},T=()=>{p(0),j(null),g(!1),v(0),w([]),C(!1)};if(!R)return e.jsxs("div",{className:"p-8 rounded-2xl bg-dark-800/50 border border-dark-700/50 text-center",children:[e.jsx("div",{className:"text-6xl mb-6",children:"ðŸ“š"}),e.jsxs("h2",{className:"text-2xl font-bold text-dark-100 mb-4",children:["Chapter ",m,": ",l]}),e.jsxs("p",{className:"text-dark-400 mb-6 max-w-md mx-auto",children:["This comprehensive quiz covers all sections from this chapter. You'll answer ",a," questions testing your understanding of the key concepts."]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-8",children:[e.jsxs("div",{className:"px-4 py-2 rounded-lg bg-dark-700/50",children:[e.jsx("span",{className:"text-dark-400 text-sm",children:"Questions"}),e.jsx("div",{className:"text-dark-100 font-bold",children:a})]}),e.jsxs("div",{className:"px-4 py-2 rounded-lg bg-dark-700/50",children:[e.jsx("span",{className:"text-dark-400 text-sm",children:"Difficulty"}),e.jsx("div",{className:"text-dark-100 font-bold",children:"Mixed"})]})]}),e.jsx("button",{onClick:M,className:"px-8 py-4 rounded-xl bg-primary-500 hover:bg-primary-600 text-white font-medium transition-colors text-lg",children:"Start Quiz"})]});if(L){const r=y.filter(Boolean).length,t=Math.round(r/a*100);return e.jsx("div",{className:"p-8 rounded-2xl bg-dark-800/50 border border-dark-700/50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:t>=90?"ðŸ†":t>=70?"ðŸŽ‰":t>=50?"ðŸ‘":"ðŸ“š"}),e.jsx("h3",{className:"text-2xl font-bold text-dark-100 mb-2",children:"Chapter Quiz Complete!"}),e.jsxs("p",{className:"text-dark-400 mb-6",children:["You scored ",r," out of ",a," (",t,"%)"]}),e.jsx("div",{className:"flex flex-wrap items-center justify-center gap-2 mb-8",children:y.map((n,x)=>e.jsx("div",{className:`w-4 h-4 rounded-full ${n?"bg-emerald-500":"bg-red-500"}`,title:`Question ${x+1}: ${n?"Correct":"Incorrect"}`},x))}),e.jsx("div",{className:"p-4 rounded-xl bg-dark-700/50 mb-8 max-w-md mx-auto",children:e.jsx("p",{className:"text-dark-300",children:t>=90?"Excellent! You've mastered this chapter's concepts.":t>=70?"Great job! You have a solid understanding of the material.":t>=50?"Good effort! Review the sections you struggled with.":"Keep studying! Review the chapter sections and try again."})}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("button",{onClick:T,className:"px-6 py-3 rounded-xl bg-dark-700 hover:bg-dark-600 text-dark-200 font-medium transition-colors",children:"Try Again"}),e.jsx(b,{to:"/",className:"px-6 py-3 rounded-xl bg-primary-500 hover:bg-primary-600 text-white font-medium transition-colors",children:"Return Home"})]})]})})}return e.jsxs("div",{className:"p-6 rounded-2xl bg-dark-800/50 border border-dark-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-sm text-dark-400",children:["Chapter ",m," Quiz"]}),e.jsxs("h3",{className:"text-xl font-semibold text-dark-100",children:["Question ",o+1," of ",a]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-sm text-dark-400",children:"Score"}),e.jsx("div",{className:"text-xl font-bold text-dark-100",children:N})]})]}),e.jsx("div",{className:"h-2 bg-dark-700 rounded-full mb-8 overflow-hidden",children:e.jsx(k.div,{className:"h-full bg-gradient-to-r from-primary-500 to-primary-400",initial:{width:0},animate:{width:`${(o+1)/a*100}%`}})}),e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${s.difficulty==="easy"?"bg-emerald-500/20 text-emerald-400":s.difficulty==="medium"?"bg-amber-500/20 text-amber-400":"bg-red-500/20 text-red-400"}`,children:s.difficulty.charAt(0).toUpperCase()+s.difficulty.slice(1)})}),e.jsx("p",{className:"text-xl text-dark-100 mb-8 leading-relaxed",children:s.question}),e.jsx("div",{className:"space-y-3 mb-6",children:s.options?.map((r,t)=>{const n=f===t,x=t===s.correctIndex,Q=c&&x,z=c&&n&&!x;return e.jsx("button",{onClick:()=>$(t),disabled:c,className:`w-full p-4 rounded-xl text-left transition-all ${Q?"bg-emerald-500/20 border-emerald-500/50 text-emerald-300":z?"bg-red-500/20 border-red-500/50 text-red-300":n?"bg-primary-500/20 border-primary-500/50 text-primary-300":"bg-dark-700/50 border-dark-600/50 text-dark-200 hover:bg-dark-700 hover:border-dark-500"} border`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${Q?"bg-emerald-500/30":z?"bg-red-500/30":"bg-dark-600"}`,children:String.fromCharCode(65+t)}),e.jsx("span",{className:"flex-1",children:r}),c&&x&&e.jsx("svg",{className:"w-6 h-6 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),c&&n&&!x&&e.jsx("svg",{className:"w-6 h-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})},t)})}),c&&s.explanation&&e.jsx(k.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-dark-700/50 border border-dark-600/50 mb-6",children:e.jsxs("p",{className:"text-dark-300",children:[e.jsx("span",{className:"font-medium text-dark-200",children:"Explanation: "}),s.explanation]})}),c&&e.jsx(k.button,{initial:{opacity:0},animate:{opacity:1},onClick:A,className:"w-full py-4 rounded-xl bg-primary-500 hover:bg-primary-600 text-white font-medium transition-colors text-lg",children:o<a-1?"Next Question":"See Results"})]})}export{X as default};
