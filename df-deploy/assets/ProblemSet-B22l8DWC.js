import{j as e,m as p,A as N}from"./vendor-animation-0o8UKZ_1.js";import{r as c}from"./vendor-react-Drj8qL0h.js";import{k as x}from"./vendor-math-p018AHG0.js";function $({completed:n,total:r,label:d="Progress"}){const s=r>0?Math.round(n/r*100):0;return e.jsxs("div",{className:"bg-dark-900 rounded-xl p-4 border border-dark-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-dark-300",children:d}),e.jsxs("span",{className:"text-sm font-bold text-dark-100",children:[n,"/",r," (",s,"%)"]})]}),e.jsx("div",{className:"h-3 bg-dark-800 rounded-full overflow-hidden",children:e.jsx(p.div,{className:"h-full bg-gradient-to-r from-emerald-500 to-emerald-400 rounded-full",initial:{width:0},animate:{width:`${s}%`},transition:{duration:.5,ease:"easeOut"}})}),s===100&&e.jsx(p.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},className:"mt-2 text-center text-emerald-400 text-sm font-medium",children:"Section Complete!"})]})}function w({problemIds:n,completedIds:r,onProblemClick:d,columns:s=10}){return e.jsx("div",{className:"grid gap-1.5",style:{gridTemplateColumns:`repeat(${s}, minmax(0, 1fr))`},children:n.map((t,o)=>{const i=r.has(t);return e.jsx(p.button,{onClick:()=>d==null?void 0:d(t),className:`
              aspect-square rounded-md text-xs font-medium
              flex items-center justify-center
              transition-colors cursor-pointer
              ${i?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30 hover:bg-emerald-500/30":"bg-dark-800 text-dark-400 border border-dark-700 hover:bg-dark-700 hover:text-dark-200"}
            `,whileHover:{scale:1.1},whileTap:{scale:.95},title:`Problem ${o+1}${i?" (Complete)":""}`,children:o+1},t)})})}function j(n){let r=n;r=r.replace(/\\\[([\s\S]*?)\\\]|\$\$([\s\S]*?)\$\$/g,(s,t,o)=>{const i=t||o;try{return x.renderToString(i.trim(),{displayMode:!0,throwOnError:!1})}catch{return`\\[${i}\\]`}}),r=r.replace(/\\\(([\s\S]*?)\\\)|\$([^$]+?)\$/g,(s,t,o)=>{const i=t||o;try{return x.renderToString(i.trim(),{displayMode:!1,throwOnError:!1})}catch{return`$${i}$`}});const d=[/\\begin\{pmatrix\}[\s\S]*?\\end\{pmatrix\}/g,/\\frac\{[^}]*\}\{[^}]*\}/g,/\\sqrt\{[^}]*\}/g,/[a-zA-Z]_\{[^}]*\}/g,/[a-zA-Z]\^[0-9a-zA-Z]/g];for(const s of d)r=r.replace(s,t=>{try{return x.renderToString(t,{displayMode:!1,throwOnError:!1})}catch{return t}});return r=r.replace(/\n/g,"<br>"),r}function k({solution:n,isExpanded:r,onToggle:d,onView:s}){const[t,o]=c.useState(!1),i=c.useRef(null);return c.useEffect(()=>{r&&!t&&(o(!0),s==null||s())},[r,t,s]),e.jsxs("div",{className:"mt-4",children:[e.jsxs("button",{onClick:d,className:`
          w-full flex items-center justify-between px-4 py-3 rounded-lg
          text-left font-medium transition-colors
          ${r?"bg-primary-500/10 text-primary-400":"bg-dark-800 text-dark-300 hover:bg-dark-700 hover:text-dark-100"}
        `,children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:`w-4 h-4 transition-transform ${r?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),r?"Hide Solution":"Show Solution"]}),t&&!r&&e.jsx("span",{className:"text-xs text-dark-500",children:"(viewed)"})]}),e.jsx(N,{children:r&&e.jsx(p.div,{ref:i,initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:e.jsxs("div",{className:"pt-4 space-y-4",children:[n.steps.map((g,m)=>e.jsxs("div",{className:"pl-4 border-l-2 border-primary-500/30",children:[e.jsx("h4",{className:"text-sm font-semibold text-primary-400 mb-2",children:g.title}),e.jsx("div",{className:"text-dark-300 text-sm leading-relaxed prose prose-invert prose-sm max-w-none",dangerouslySetInnerHTML:{__html:j(g.content)}})]},m)),n.conclusion&&e.jsxs("div",{className:"mt-4 p-4 bg-emerald-500/10 border border-emerald-500/30 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-emerald-400 mb-2",children:"Conclusion"}),e.jsx("div",{className:"text-emerald-300/90 text-sm",dangerouslySetInnerHTML:{__html:j(n.conclusion)}})]})]})})})]})}function S(n){let r=n;r=r.replace(/\\\[([\s\S]*?)\\\]|\$\$([\s\S]*?)\$\$/g,(s,t,o)=>{const i=t||o;try{return x.renderToString(i.trim(),{displayMode:!0,throwOnError:!1})}catch{return`\\[${i}\\]`}}),r=r.replace(/\\\(([\s\S]*?)\\\)|\$([^$]+?)\$/g,(s,t,o)=>{const i=t||o;try{return x.renderToString(i.trim(),{displayMode:!1,throwOnError:!1})}catch{return`$${i}$`}});const d=[/\\begin\{pmatrix\}[\s\S]*?\\end\{pmatrix\}/g,/\\frac\{[^}]*\}\{[^}]*\}/g,/\\sqrt\{[^}]*\}/g];for(const s of d)r=r.replace(s,t=>{try{return x.renderToString(t,{displayMode:!1,throwOnError:!1})}catch{return t}});return r=r.replace(/\n/g,"<br>"),r}function M({exercise:n,isComplete:r,onToggleComplete:d,onSolutionView:s}){const[t,o]=c.useState(!1),i=c.useRef(null);return e.jsxs(p.div,{ref:i,id:`problem-${n.id}`,className:`
        rounded-xl border-2 p-5 transition-colors
        ${r?"bg-emerald-500/5 border-emerald-500/30":"bg-dark-900 border-dark-700 hover:border-dark-600"}
      `,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-dark-800 text-dark-300 text-sm font-bold",children:n.number}),e.jsx("span",{className:"text-xs font-medium text-dark-500 uppercase tracking-wider",children:"Exercise"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[e.jsx("span",{className:"text-xs text-dark-400 group-hover:text-dark-300 transition-colors",children:r?"Completed":"Mark complete"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:d,className:"sr-only peer"}),e.jsx("div",{className:`
                w-5 h-5 rounded border-2 flex items-center justify-center
                transition-all cursor-pointer
                ${r?"bg-emerald-500 border-emerald-500 text-white":"border-dark-600 peer-hover:border-dark-500"}
              `,children:r&&e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]})]})]}),e.jsx("div",{className:"text-dark-200 leading-relaxed prose prose-invert prose-sm max-w-none",dangerouslySetInnerHTML:{__html:S(n.statement)}}),e.jsx(k,{solution:n.solution,isExpanded:t,onToggle:()=>o(!t),onView:s})]})}function T(n){let r=n;return r=r.replace(/\\\[([\s\S]*?)\\\]|\$\$([\s\S]*?)\$\$/g,(d,s,t)=>{const o=s||t;try{return x.renderToString(o.trim(),{displayMode:!0,throwOnError:!1})}catch{return`\\[${o}\\]`}}),r=r.replace(/\\\(([\s\S]*?)\\\)|\$([^$]+?)\$/g,(d,s,t)=>{const o=s||t;try{return x.renderToString(o.trim(),{displayMode:!1,throwOnError:!1})}catch{return`$${o}$`}}),r=r.replace(/\n/g,"<br>"),r}function L({example:n,isComplete:r,onToggleComplete:d,onSolutionView:s}){const[t,o]=c.useState(!1);return e.jsxs(p.div,{id:`problem-${n.id}`,className:`
        rounded-xl border-2 p-5 transition-colors
        ${r?"bg-amber-500/5 border-amber-500/30":"bg-gradient-to-br from-amber-500/5 to-orange-500/5 border-amber-500/20 hover:border-amber-500/40"}
      `,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-amber-500/20 text-amber-400",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-amber-500 uppercase tracking-wider block",children:"Example"}),e.jsx("span",{className:"text-sm font-semibold text-amber-300",children:n.title})]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[e.jsx("span",{className:"text-xs text-dark-400 group-hover:text-dark-300 transition-colors",children:r?"Reviewed":"Mark reviewed"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:d,className:"sr-only peer"}),e.jsx("div",{className:`
                w-5 h-5 rounded border-2 flex items-center justify-center
                transition-all cursor-pointer
                ${r?"bg-amber-500 border-amber-500 text-white":"border-dark-600 peer-hover:border-dark-500"}
              `,children:r&&e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]})]})]}),e.jsx("div",{className:"text-dark-200 leading-relaxed prose prose-invert prose-sm max-w-none",dangerouslySetInnerHTML:{__html:T(n.statement)}}),e.jsx(k,{solution:n.solution,isExpanded:t,onToggle:()=>o(!t),onView:s})]})}function O({sections:n,completedIds:r,onToggleComplete:d,onSolutionView:s}){const[t,o]=c.useState("all"),[i,g]=c.useState("all");c.useRef(new Map);const m=c.useMemo(()=>n.flatMap(a=>[...a.examples.map(l=>l.id),...a.exercises.map(l=>l.id)]),[n]),b=c.useMemo(()=>t==="all"?n:n.filter(a=>a.sectionId===t),[n,t]),v=c.useMemo(()=>b.map(a=>{let l=a.examples,u=a.exercises;return i==="examples"?u=[]:i==="exercises"?l=[]:i==="incomplete"?(l=l.filter(h=>!r.has(h.id)),u=u.filter(h=>!r.has(h.id))):i==="complete"&&(l=l.filter(h=>r.has(h.id)),u=u.filter(h=>r.has(h.id))),{...a,examples:l,exercises:u}}),[b,i,r]),f=c.useMemo(()=>{const a=m.filter(l=>r.has(l)).length;return{completed:a,total:m.length,percentage:m.length>0?Math.round(a/m.length*100):0}},[m,r]),y=c.useCallback(a=>{const l=document.getElementById(`problem-${a}`);l&&(l.scrollIntoView({behavior:"smooth",block:"center"}),l.classList.add("ring-2","ring-primary-500"),setTimeout(()=>{l.classList.remove("ring-2","ring-primary-500")},2e3))},[]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx($,{completed:f.completed,total:f.total})}),e.jsxs("div",{className:"lg:col-span-2 bg-dark-900 rounded-xl p-4 border border-dark-800",children:[e.jsx("h3",{className:"text-sm font-medium text-dark-400 mb-3",children:"Completion Grid"}),e.jsx(w,{problemIds:m,completedIds:r,onProblemClick:y,columns:Math.min(15,Math.ceil(Math.sqrt(m.length*1.5)))})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t==="all"?"bg-primary-500 text-white":"bg-dark-800 text-dark-300 hover:bg-dark-700"}`,children:"All Sections"}),n.map(a=>e.jsx("button",{onClick:()=>o(a.sectionId),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t===a.sectionId?"bg-primary-500 text-white":"bg-dark-800 text-dark-300 hover:bg-dark-700"}`,children:a.textbookSection},a.sectionId))]}),e.jsx("div",{className:"flex flex-wrap gap-2 pb-2 border-b border-dark-800",children:[{value:"all",label:"All"},{value:"examples",label:"Examples"},{value:"exercises",label:"Exercises"},{value:"incomplete",label:"Incomplete"},{value:"complete",label:"Complete"}].map(({value:a,label:l})=>e.jsx("button",{onClick:()=>g(a),className:`px-3 py-1.5 rounded-md text-xs font-medium transition-colors ${i===a?"bg-dark-700 text-dark-100":"text-dark-400 hover:text-dark-200 hover:bg-dark-800"}`,children:l},a))}),e.jsx("div",{className:"space-y-8",children:v.map(a=>e.jsxs("div",{children:[t==="all"&&e.jsx("div",{className:"mb-4 pb-2 border-b border-dark-800",children:e.jsxs("h2",{className:"text-lg font-semibold text-dark-100",children:[a.textbookSection,": ",a.sectionTitle]})}),a.examples.length>0&&e.jsx("div",{className:"space-y-4 mb-6",children:a.examples.map(l=>e.jsx(L,{example:l,isComplete:r.has(l.id),onToggleComplete:()=>d(l.id),onSolutionView:()=>s==null?void 0:s(l.id)},l.id))}),a.exercises.length>0&&e.jsx("div",{className:"space-y-4",children:a.exercises.map(l=>e.jsx(M,{exercise:l,isComplete:r.has(l.id),onToggleComplete:()=>d(l.id),onSolutionView:()=>s==null?void 0:s(l.id)},l.id))}),a.examples.length===0&&a.exercises.length===0&&e.jsx("div",{className:"text-center py-8 text-dark-500",children:"No problems match the current filter."})]},a.sectionId))})]})}export{O as P};
