import{j as e}from"./vendor-animation-0o8UKZ_1.js";import{L as l}from"./LessonLayout-WO30R0_w.js";import{D as i,E as n,C as t}from"./Callout-D6GJ8KQY.js";import{I as s,M as r}from"./MathBlock-uz1iP4cD.js";import"./vendor-react-Drj8qL0h.js";import"./index-CKqQQJMA.js";import"./vendor-math-p018AHG0.js";import"./vendor-firebase-core-BXWtuYvb.js";import"./quizMap-DiUM9hDs.js";function p(){return e.jsxs(l,{sectionId:47,children:[e.jsx("h2",{children:"Lightning Network Integration"}),e.jsx("p",{children:"The Lightning Network enables fast, low-cost Bitcoin payments through payment channels. FROST can enhance Lightning by providing threshold security for channel operations while maintaining on-chain efficiency."}),e.jsx("h3",{children:"Lightning Channel Basics"}),e.jsxs(i,{title:"Payment Channel Structure",children:[e.jsx("p",{children:"A Lightning channel between Alice and Bob is funded by a 2-of-2 multisig:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 mt-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Funding transaction:"})," Locks coins to"," ",e.jsx(s,{children:"\\text{PK}_A \\land \\text{PK}_B"})]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Commitment transactions:"})," Encode current balance distribution"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Close:"})," Either party can broadcast latest commitment"]})]})]}),e.jsx("h3",{children:"FROST-Enhanced Channels"}),e.jsxs(i,{title:"Threshold Lightning",children:[e.jsx("p",{children:"Replace individual keys with FROST keys:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 mt-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Alice's side:"})," 2-of-3 FROST key ",e.jsx(s,{children:"Y_A"})]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Bob's side:"})," 3-of-5 FROST key ",e.jsx(s,{children:"Y_B"})]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Channel:"})," MuSig aggregation of ",e.jsx(s,{children:"Y_A"})," and"," ",e.jsx(s,{children:"Y_B"})]})]})]}),e.jsxs(n,{title:"On-Chain Appearance",children:[e.jsx("p",{children:"Despite the complex authorization structure:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 mt-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Funding output:"})," Single Taproot address (aggregate of"," ",e.jsx(s,{children:"Y_A + Y_B"}),")"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Cooperative close:"})," Single 64-byte signature"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Observer sees:"})," Standard 2-party channel (indistinguishable from single-key control)"]})]})]}),e.jsx("h3",{children:"Commitment Transactions"}),e.jsxs(i,{title:"FROST-Signed Commitments",children:[e.jsx("p",{children:"Each commitment transaction update requires:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 mt-2",children:[e.jsx("li",{children:"Alice's FROST group produces a signature share"}),e.jsx("li",{children:"Bob's FROST group produces a signature share"}),e.jsx("li",{children:"Aggregated signature completes the commitment"})]}),e.jsx("p",{className:"mt-3",children:"Both threshold groups must agree for channel state to update."})]}),e.jsxs(n,{title:"Payment Flow",children:[e.jsx("p",{children:"Alice pays Bob 10,000 sats:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 mt-2",children:[e.jsx("li",{children:"Alice proposes new commitment (her balance down, Bob's up)"}),e.jsx("li",{children:"Alice's 2-of-3 FROST group signs the new commitment"}),e.jsx("li",{children:"Bob's 3-of-5 FROST group signs the new commitment"}),e.jsx("li",{children:"Both hold valid commitment transactions"}),e.jsx("li",{children:"Old commitments are revoked (revocation keys exchanged)"})]})]}),e.jsx("h3",{children:"HTLC Operations"}),e.jsxs(i,{title:"Hash Time-Locked Contracts",children:[e.jsx("p",{children:"HTLCs enable multi-hop payments. With FROST:"}),e.jsx(r,{children:"\\text{HTLC Output} = (Y_A \\land \\text{preimage}) \\lor (Y_B \\land \\text{timelock})"}),e.jsxs("p",{className:"mt-3",children:["Both ",e.jsx(s,{children:"Y_A"})," and ",e.jsx(s,{children:"Y_B"})," can be FROST keys."]})]}),e.jsxs(n,{title:"HTLC Claim",children:[e.jsx("p",{children:"To claim an HTLC (reveal preimage path):"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 mt-2",children:[e.jsxs("li",{children:["Alice's FROST group signs with ",e.jsx(s,{children:"Y_A"})]}),e.jsxs("li",{children:["Reveal the preimage ",e.jsx(s,{children:"r"})," such that"," ",e.jsx(s,{children:"H(r) = h"})]}),e.jsx("li",{children:"Signature + preimage satisfies the HTLC script"})]})]}),e.jsx("h3",{children:"Benefits"}),e.jsxs(t,{type:"success",children:[e.jsx("strong",{children:"Why FROST + Lightning:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Better key security:"})," No single device controls channel funds"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Business use:"})," Company treasury can run Lightning nodes with threshold authorization"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Recovery:"})," Lost device doesn't mean lost channel"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Same fees:"})," On-chain footprint unchanged"]})]})]}),e.jsx("h3",{children:"Latency Considerations"}),e.jsxs(i,{title:"Interactive Requirements",children:[e.jsx("p",{children:"Lightning requires quick signature production for:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 mt-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Payment forwarding:"})," HTLC creation/resolution"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Channel updates:"})," Balance changes"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Fee bumping:"})," Anchor outputs, CPFP"]})]}),e.jsx("p",{className:"mt-3",children:"FROST's preprocessing helps: generate commitment pairs in advance, sign in one round."})]}),e.jsxs(n,{title:"Latency Budget",children:[e.jsx("p",{children:"For a routing node handling payments:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 mt-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Without FROST:"})," ~10ms per signature (local)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"With FROST (2-of-3):"})," ~100ms (network round trip)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"HTLC timeout:"})," Typically minutes to hours"]})]}),e.jsx("p",{className:"mt-3",children:"FROST latency is acceptable for Lightning given typical HTLC timeouts."})]}),e.jsx("h3",{children:"Watchtower Integration"}),e.jsxs(i,{title:"Threshold Watchtowers",children:[e.jsx("p",{children:"Watchtowers monitor for old commitment broadcasts. With FROST, watchtowers can be threshold-secured:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 mt-2",children:[e.jsx("li",{children:"Revocation secrets shared among watchtower operators"}),e.jsx("li",{children:"Threshold required to produce justice transaction"}),e.jsx("li",{children:"No single watchtower can steal funds"})]})]}),e.jsx("h3",{children:"Channel Backup and Recovery"}),e.jsxs(n,{title:"Disaster Recovery",children:[e.jsx("p",{children:"If Alice loses her primary device:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 mt-2",children:[e.jsx("li",{children:"Her FROST share is on the lost device"}),e.jsx("li",{children:"Remaining 2 devices (of 3) can still sign"}),e.jsx("li",{children:"Initiate cooperative close with Bob"}),e.jsx("li",{children:"Set up new device, reshare FROST key"})]}),e.jsx("p",{className:"mt-3",children:"FROST provides resilience that single-key Lightning lacks."})]}),e.jsx("h3",{children:"Implementation Status"}),e.jsxs(i,{title:"Current State (2024)",children:[e.jsx("p",{children:"FROST for Lightning is actively being developed:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 mt-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Research:"})," Protocols defined, security analyzed"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Implementations:"})," Early-stage in various Lightning clients"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Standardization:"})," Work ongoing for interoperability"]})]})]}),e.jsxs(t,{type:"info",children:[e.jsx("strong",{children:"The Future:"})," As FROST implementations mature, expect Lightning nodes to offer threshold key management as a standard feature, enabling enterprise-grade security for Lightning operations."]})]})}export{p as default};
