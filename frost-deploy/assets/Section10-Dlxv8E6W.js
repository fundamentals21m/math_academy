import{j as e,A as z,m as N}from"./vendor-animation-0o8UKZ_1.js";import{L as D}from"./LessonLayout-sKo1Ukyt.js";import{D as B,T as O,E as K,C as V}from"./Callout-D6GJ8KQY.js";import{I as r,M as o}from"./MathBlock-uz1iP4cD.js";import{r as l}from"./vendor-react-Drj8qL0h.js";import{c as X,C as H}from"./CoordinateGrid-DHacsy1H.js";import"./index-LWQys88K.js";import"./vendor-math-p018AHG0.js";import"./vendor-firebase-core-BXWtuYvb.js";import"./quizMap-ySXQbKre.js";function M(a,n,u){let c=1;const x=n[a];for(let i=0;i<n.length;i++)i!==a&&(c*=(u-n[i])/(x-n[i]));return c}function P(a,n,u){let c=0;for(let x=0;x<a.length;x++)c+=n[x]*M(x,a,u);return c}function R(a,n,u,c,x,i=100){const b=[],T=(u-n)/i;for(let f=0;f<=i;f++){const g=n+f*T,v=a(g),L=Math.max(-100,Math.min(500,v)),I=c(g),h=x(L);b.push(`${f===0?"M":"L"} ${I} ${h}`)}return b.join(" ")}function J(){const a=[1,2,3],[n,u]=l.useState(67),[c,x]=l.useState(108),[i,b]=l.useState(165),[T,f]=l.useState([!0,!0,!0]),[g,v]=l.useState(!0),[L,I]=l.useState(!0),[h,F]=l.useState(0),w=520,S=400,$=50,y=-.5,_=4,E=-50,q=200,{toSvgX:m,toSvgY:p}=l.useMemo(()=>X(w,S,$,y,_,E,q),[]),d=[n,c,i],j=["#10b981","#3b82f6","#8b5cf6"],A=l.useMemo(()=>a.map((t,s)=>R(G=>M(s,a,G)*d[s],y,_,m,p)),[d,m,p]),W=l.useMemo(()=>R(s=>P(a,d,s),y,_,m,p),[d,m,p]),k=l.useMemo(()=>P(a,d,0),[d]),C=l.useMemo(()=>a.map((t,s)=>M(s,a,0)),[]);return e.jsxs("div",{className:"p-4 bg-dark-900/80 rounded-xl border border-dark-700/50",children:[e.jsx("h4",{className:"text-lg font-semibold text-indigo-400 mb-4",children:"Lagrange Interpolation Visualizer"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-dark-300 mb-1",children:["y₁ (at x=1): ",e.jsx("span",{className:"text-emerald-400 font-mono",children:n})]}),e.jsx("input",{type:"range",min:20,max:150,value:n,onChange:t=>u(Number(t.target.value)),className:"w-full h-2 bg-dark-700 rounded-lg appearance-none cursor-pointer accent-emerald-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-dark-300 mb-1",children:["y₂ (at x=2): ",e.jsx("span",{className:"text-blue-400 font-mono",children:c})]}),e.jsx("input",{type:"range",min:50,max:200,value:c,onChange:t=>x(Number(t.target.value)),className:"w-full h-2 bg-dark-700 rounded-lg appearance-none cursor-pointer accent-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-dark-300 mb-1",children:["y₃ (at x=3): ",e.jsx("span",{className:"text-violet-400 font-mono",children:i})]}),e.jsx("input",{type:"range",min:100,max:250,value:i,onChange:t=>b(Number(t.target.value)),className:"w-full h-2 bg-dark-700 rounded-lg appearance-none cursor-pointer accent-violet-500"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx("button",{onClick:()=>F(0),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${h===0?"bg-indigo-500/20 text-indigo-400 border border-indigo-500/50":"bg-dark-800 text-dark-400 border border-dark-700"}`,children:"Show All"}),[1,2,3].map(t=>e.jsxs("button",{onClick:()=>F(t),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${h===t?"bg-indigo-500/20 text-indigo-400 border border-indigo-500/50":"bg-dark-800 text-dark-400 border border-dark-700"}`,style:h===t?{borderColor:j[t-1]}:{},children:["L",t,"(x)"]},t)),e.jsx("button",{onClick:()=>v(!g),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${g?"bg-amber-500/20 text-amber-400 border border-amber-500/50":"bg-dark-800 text-dark-400 border border-dark-700"}`,children:"f(x) Combined"})]}),e.jsxs("svg",{viewBox:`0 0 ${w} ${S}`,className:"w-full bg-dark-950 rounded-lg",style:{maxHeight:"400px"},children:[e.jsx(H,{width:w,height:S,padding:$,xMin:y,xMax:_,yMin:E,yMax:q,yLabel:"f(x)"}),e.jsx(z,{children:A.map((t,s)=>h===0||h===s+1?e.jsx(N.path,{d:t,fill:"none",stroke:j[s],strokeWidth:2,strokeDasharray:"6,3",initial:{opacity:0},animate:{opacity:.7},exit:{opacity:0}},`basis-${s}`):null)}),g&&h===0&&e.jsx(N.path,{d:W,fill:"none",stroke:"#fbbf24",strokeWidth:3,initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.8}}),a.map((t,s)=>e.jsxs(N.g,{initial:{scale:0},animate:{scale:1},transition:{delay:.2+s*.1},children:[e.jsx("circle",{cx:m(t),cy:p(d[s]),r:8,fill:j[s],stroke:"white",strokeWidth:2}),e.jsxs("text",{x:m(t)+12,y:p(d[s])-12,fill:j[s],fontSize:11,fontWeight:"bold",children:["(",t,", ",d[s],")"]})]},`point-${s}`)),L&&e.jsxs(N.g,{initial:{scale:0},animate:{scale:1},transition:{delay:.5,type:"spring"},children:[e.jsx("circle",{cx:m(0),cy:p(k),r:10,fill:"#fbbf24",stroke:"#fef3c7",strokeWidth:2}),e.jsxs("text",{x:m(0)+14,y:p(k)+4,fill:"#fbbf24",fontSize:12,fontWeight:"bold",children:["s = ",Math.round(k)]})]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-dark-800/50 rounded-lg border border-dark-700/50",children:[e.jsx("h5",{className:"text-sm font-semibold text-dark-200 mb-3",children:"Reconstruction at x = 0:"}),e.jsxs("div",{className:"space-y-2 font-mono text-sm",children:[e.jsxs("p",{className:"text-dark-300",children:["f(0) = ",C.map((t,s)=>e.jsxs("span",{children:[e.jsxs("span",{style:{color:j[s]},children:["L",s+1,"(0) × y",s+1]}),s<2?" + ":""]},s))]}),e.jsxs("p",{className:"text-dark-300",children:["f(0) = ",C.map((t,s)=>e.jsxs("span",{children:[e.jsxs("span",{style:{color:j[s]},children:[t.toFixed(2)," × ",d[s]]}),s<2?" + ":""]},s))]}),e.jsxs("p",{className:"text-dark-300",children:["f(0) = ",C.map((t,s)=>e.jsxs("span",{children:[e.jsx("span",{style:{color:j[s]},children:(t*d[s]).toFixed(1)}),s<2?" + ":""]},s))]}),e.jsxs("p",{className:"text-lg text-amber-400 font-bold mt-2",children:["f(0) = ",Math.round(k)," ← Secret!"]})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 text-sm",children:[a.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-0.5",style:{backgroundColor:j[s],opacity:.7}}),e.jsxs("span",{className:"text-dark-300",children:["L",s+1,"(x) × y",s+1," (basis × value)"]})]},s)),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-0.5 bg-amber-400"}),e.jsx("span",{className:"text-dark-300",children:"f(x) combined"})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-emerald-500/10 rounded-lg border border-emerald-500/30",children:e.jsxs("p",{className:"text-sm text-emerald-200",children:[e.jsx("strong",{children:"Key Insight:"}),' Each Lagrange basis polynomial L_i(x) equals 1 at its own point and 0 at all others. This "selects" each y-value independently, then the sum reconstructs the original polynomial. Evaluating at x=0 gives us the secret!']})})]})}function oe(){return e.jsxs(D,{sectionId:10,children:[e.jsx("h2",{children:"Lagrange Interpolation"}),e.jsxs("p",{children:["Given ",e.jsx(r,{children:"t"})," points on a polynomial, how do we find the polynomial itself? Lagrange interpolation provides an elegant answer."]}),e.jsx("h3",{children:"The Goal"}),e.jsxs("p",{children:["Given ",e.jsx(r,{children:"t"})," points ",e.jsx(r,{children:"(x_1, y_1), (x_2, y_2), \\ldots, (x_t, y_t)"}),", find the unique polynomial ",e.jsx(r,{children:"f(x)"})," of degree at most",e.jsx(r,{children:"t-1"})," passing through all of them."]}),e.jsx("h3",{children:"Lagrange Basis Polynomials"}),e.jsxs(B,{title:"Lagrange Basis Polynomial",children:[e.jsxs("p",{children:["For point ",e.jsx(r,{children:"(x_i, y_i)"}),", define:"]}),e.jsx(o,{children:"L_i(x) = \\prod_{j=1, j \\neq i}^{t} \\frac{x - x_j}{x_i - x_j}"})]}),e.jsxs("p",{children:["The key properties of ",e.jsx(r,{children:"L_i(x)"}),":"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 my-6",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-dark-800/50 border border-dark-700/50",children:[e.jsx("h4",{className:"font-semibold text-emerald-400 mb-2",children:"At its own point"}),e.jsx(o,{children:"L_i(x_i) = 1"}),e.jsxs("p",{className:"text-sm mt-2",children:["All terms in the product become ",e.jsx(r,{children:"\\frac{x_i - x_j}{x_i - x_j} = 1"})]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-dark-800/50 border border-dark-700/50",children:[e.jsx("h4",{className:"font-semibold text-amber-400 mb-2",children:"At other points"}),e.jsx(o,{children:"L_i(x_j) = 0 \\text{ for } j \\neq i"}),e.jsxs("p",{className:"text-sm mt-2",children:["One term in the product becomes ",e.jsx(r,{children:"\\frac{x_j - x_j}{x_i - x_j} = 0"})]})]})]}),e.jsx("h3",{children:"The Interpolation Formula"}),e.jsxs(O,{title:"Lagrange Interpolation",children:[e.jsxs("p",{children:["The unique polynomial passing through ",e.jsx(r,{children:"(x_1, y_1), \\ldots, (x_t, y_t)"})," is:"]}),e.jsx(o,{children:"f(x) = \\sum_{i=1}^{t} y_i \\cdot L_i(x)"})]}),e.jsxs("p",{children:["Each basis polynomial ",e.jsx(r,{children:"L_i(x)"}),' "picks out" just the contribution from point ',e.jsx(r,{children:"i"}),", weighted by ",e.jsx(r,{children:"y_i"}),"."]}),e.jsx("h3",{children:"Recovering the Secret"}),e.jsxs("p",{children:["To recover ",e.jsx(r,{children:"s = f(0)"}),", we evaluate at ",e.jsx(r,{children:"x = 0"}),":"]}),e.jsx(o,{children:"s = f(0) = \\sum_{i=1}^{t} y_i \\cdot L_i(0)"}),e.jsxs(B,{title:"Lagrange Coefficients",children:[e.jsxs("p",{children:["The ",e.jsx("strong",{children:"Lagrange coefficients"})," are the basis polynomials evaluated at 0:"]}),e.jsx(o,{children:"\\lambda_i = L_i(0) = \\prod_{j=1, j \\neq i}^{t} \\frac{0 - x_j}{x_i - x_j} = \\prod_{j=1, j \\neq i}^{t} \\frac{-x_j}{x_i - x_j}"}),e.jsx("p",{className:"mt-3",children:"The secret is then:"}),e.jsx(o,{children:"s = \\sum_{i=1}^{t} y_i \\cdot \\lambda_i"})]}),e.jsxs(K,{title:"Computing Lagrange Coefficients",children:[e.jsxs("p",{children:["For shares at ",e.jsx(r,{children:"x = 1, 2, 3"}),":"]}),e.jsxs("div",{className:"mt-4 space-y-4 font-mono text-sm",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-dark-800/50",children:[e.jsx("p",{className:"text-indigo-400 mb-1",children:"For participant 1:"}),e.jsx(o,{children:"\\lambda_1 = \\frac{(0-2)(0-3)}{(1-2)(1-3)} = \\frac{(-2)(-3)}{(-1)(-2)} = \\frac{6}{2} = 3"})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-dark-800/50",children:[e.jsx("p",{className:"text-emerald-400 mb-1",children:"For participant 2:"}),e.jsx(o,{children:"\\lambda_2 = \\frac{(0-1)(0-3)}{(2-1)(2-3)} = \\frac{(-1)(-3)}{(1)(-1)} = \\frac{3}{-1} = -3"})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-dark-800/50",children:[e.jsx("p",{className:"text-amber-400 mb-1",children:"For participant 3:"}),e.jsx(o,{children:"\\lambda_3 = \\frac{(0-1)(0-2)}{(3-1)(3-2)} = \\frac{(-1)(-2)}{(2)(1)} = \\frac{2}{2} = 1"})]})]})]}),e.jsxs(V,{type:"info",children:[e.jsx("strong",{children:"Key Property:"})," The Lagrange coefficients sum to 1:",e.jsx(o,{children:"\\sum_{i=1}^{t} \\lambda_i = 1"}),"This is because ",e.jsx(r,{children:"\\sum_i L_i(x) = 1"})," for all ",e.jsx(r,{children:"x"}),"(the basis polynomials form a partition of unity)."]}),e.jsx(J,{}),e.jsx("h3",{children:"For FROST"}),e.jsxs("p",{children:["In FROST, Lagrange coefficients let participants compute with their shares",e.jsx("em",{children:"without"})," reconstructing the secret:"]}),e.jsx(o,{children:"s = \\sum_i s_i \\cdot \\lambda_i"}),e.jsxs("p",{children:["Each participant ",e.jsx(r,{children:"i"})," computes ",e.jsx(r,{children:"s_i \\cdot \\lambda_i"}),"locally, and these contributions combine to give the effect of using ",e.jsx(r,{children:"s"}),", without anyone ever computing ",e.jsx(r,{children:"s"})," directly."]})]})}export{oe as default};
