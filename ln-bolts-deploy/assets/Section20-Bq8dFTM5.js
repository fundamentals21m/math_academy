import{j as e}from"./vendor-animation-0o8UKZ_1.js";import"./vendor-react-Drj8qL0h.js";import"./vendor-math-p018AHG0.js";import"./index-BbBpzejs.js";import{L as d}from"./LessonLayout-Bq4tucEw.js";import{E as t,D as s,T as i,C as r}from"./Callout-BvJhqaqq.js";import"./vendor-firebase-core-BXWtuYvb.js";import"./quizMap-C4dST7Re.js";function p(){return e.jsxs(d,{sectionId:20,children:[e.jsx("h2",{className:"text-2xl font-bold text-dark-100 mb-6",children:"BOLT #10: DNS Bootstrap"}),e.jsx("p",{className:"mb-4",children:"BOLT #10 defines how new Lightning nodes discover their initial peers using DNS. This bootstrap mechanism allows nodes to join the network without hardcoded peer lists."}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Bootstrap Problem"}),e.jsx("p",{className:"mb-4",children:"When a Lightning node starts for the first time, it faces a chicken-and-egg problem:"}),e.jsx(t,{title:"The Bootstrap Challenge",children:e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"To learn about nodes, you need to connect to the gossip network"}),e.jsx("li",{children:"To connect to the gossip network, you need to know some node addresses"}),e.jsx("li",{children:"New nodes have no prior knowledge of any peers"})]})}),e.jsx(s,{title:"DNS Seeds",children:"DNS seeds are authoritative DNS servers that respond to queries with Lightning node addresses. They sample from known nodes and return a random subset."}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Query Format"}),e.jsx("p",{className:"mb-4",children:"DNS queries use a structured subdomain format with conditions:"}),e.jsxs(i,{title:"Query Subdomain Format",children:[e.jsx("div",{className:"font-mono text-sm bg-dark-800 p-3 rounded mt-2",children:"[conditions].<seed-root-domain>"}),"Conditions are dot-separated key-value pairs:",e.jsxs("ul",{className:"mt-2 list-disc list-inside space-y-1",children:[e.jsxs("li",{children:[e.jsx("code",{className:"bg-dark-800 px-1 rounded",children:"r"})," = realm (network)"]}),e.jsxs("li",{children:[e.jsx("code",{className:"bg-dark-800 px-1 rounded",children:"a"})," = address types"]}),e.jsxs("li",{children:[e.jsx("code",{className:"bg-dark-800 px-1 rounded",children:"l"})," = specific node ID"]}),e.jsxs("li",{children:[e.jsx("code",{className:"bg-dark-800 px-1 rounded",children:"n"})," = number of results"]})]})]}),e.jsx(t,{title:"DNS Query Examples",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-dark-700",children:[e.jsx("th",{className:"text-left py-2",children:"Query"}),e.jsx("th",{className:"text-left py-2",children:"Meaning"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-2 font-mono text-xs",children:"r0.a2.n10.seed.example.com"}),e.jsx("td",{className:"py-2",children:"10 IPv4 Bitcoin nodes"})]}),e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-2 font-mono text-xs",children:"r0.a6.seed.example.com"}),e.jsx("td",{className:"py-2",children:"IPv4+IPv6 Bitcoin nodes"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 font-mono text-xs",children:"l[node_id].seed.example.com"}),e.jsx("td",{className:"py-2",children:"Address of specific node"})]})]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Condition Parameters"}),e.jsxs(s,{title:"Realm (r)",children:["Specifies which blockchain network:",e.jsxs("ul",{className:"mt-2 list-disc list-inside space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"r0:"})," Bitcoin (default if omitted)"]}),e.jsx("li",{children:"Other realms may be defined for other chains"})]})]}),e.jsxs(s,{title:"Address Types (a)",children:["A bitfield specifying desired address types:",e.jsxs("ul",{className:"mt-2 list-disc list-inside space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Bit 0:"})," IPv4 (value 1)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Bit 1:"})," IPv6 (value 2)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"a3:"})," Both IPv4 and IPv6 (1+2)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"a6:"})," IPv4 + IPv6 (alias for a3 with IPv6 priority)"]})]})]}),e.jsxs(s,{title:"Node Lookup (l)",children:["Request the address of a specific node by providing its bech32-encoded node ID:",e.jsx("div",{className:"font-mono text-xs bg-dark-800 p-3 rounded mt-2",children:"l[bech32_node_id].seed.example.com"}),"Useful for reconnecting to a known peer whose address may have changed."]}),e.jsxs(s,{title:"Result Count (n)",children:["Request a specific number of results:",e.jsxs("ul",{className:"mt-2 list-disc list-inside space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Default:"})," 25 results"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Maximum:"})," Implementation dependent"]})]})]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Response Types"}),e.jsx("p",{className:"mb-4",children:"DNS seeds respond to different query types:"}),e.jsx(t,{title:"DNS Record Types",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-dark-700",children:[e.jsx("th",{className:"text-left py-2",children:"Type"}),e.jsx("th",{className:"text-left py-2",children:"Response"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-2 font-mono",children:"A"}),e.jsx("td",{className:"py-2",children:"IPv4 addresses (assumes port 9735)"})]}),e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-2 font-mono",children:"AAAA"}),e.jsx("td",{className:"py-2",children:"IPv6 addresses (assumes port 9735)"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 font-mono",children:"SRV"}),e.jsx("td",{className:"py-2",children:"Hostname + port (for non-standard ports)"})]})]})]})}),e.jsxs(r,{type:"info",title:"SRV Records",children:["SRV records return virtual hostnames that encode the node ID:",e.jsx("div",{className:"font-mono text-xs bg-dark-800 p-3 rounded mt-2",children:"[bech32_node_id].seed.example.com:port"}),"This allows nodes on non-standard ports to be discovered."]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Seed Requirements"}),e.jsx(i,{title:"DNS Seed Behavior",children:e.jsxs("ul",{className:"list-disc list-inside space-y-2 mt-2",children:[e.jsx("li",{children:"MUST select random subset of known listening nodes"}),e.jsx("li",{children:"MUST NOT return the same set every time"}),e.jsx("li",{children:"SHOULD verify nodes are reachable before including them"}),e.jsx("li",{children:"SHOULD filter by requested address types"}),e.jsx("li",{children:"MUST support at least A and AAAA queries"})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Security Considerations"}),e.jsx(r,{type:"warning",title:"Trust Considerations",children:e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"DNS seeds can see who's bootstrapping (privacy concern)"}),e.jsx("li",{children:"Malicious seeds could return attacker-controlled nodes"}),e.jsx("li",{children:"Use multiple seeds from different operators"}),e.jsx("li",{children:"Verify node IDs after connecting (BOLT #8 authenticates)"})]})}),e.jsx(t,{title:"Mitigation Strategies",children:e.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[e.jsx("li",{children:"Query multiple independent DNS seeds"}),e.jsx("li",{children:"Cache successful connections for future bootstrap"}),e.jsx("li",{children:"Allow users to configure manual seed nodes"}),e.jsx("li",{children:"Use DNS-over-HTTPS/TLS for query privacy"})]})})]})}export{p as default};
