import{j as e}from"./vendor-animation-0o8UKZ_1.js";import"./vendor-react-Drj8qL0h.js";import"./vendor-math-p018AHG0.js";import"./index-DFrfwBbR.js";import{L as t,E as s,D as r,C as i,T as l}from"./Callout-DlDYJSPr.js";import"./vendor-firebase-core-BXWtuYvb.js";import"./quizMap-C4dST7Re.js";function x(){return e.jsxs(t,{sectionId:22,children:[e.jsx("h2",{className:"text-2xl font-bold text-dark-100 mb-6",children:"BOLT #12: Offers"}),e.jsx("p",{className:"mb-4",children:'BOLT #12 introduces "offers"—a more flexible payment protocol that enables reusable payment codes, payer/payee negotiation, and improved privacy through blinded paths. Offers are designed to replace many use cases of BOLT #11 invoices.'}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"The Offer Flow"}),e.jsx("p",{className:"mb-4",children:"Unlike BOLT #11 where invoices are generated out-of-band, BOLT #12 uses an in-band negotiation protocol:"}),e.jsx(s,{title:"Offer Payment Flow",children:e.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Merchant publishes offer:"})," Static, reusable payment code"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Payer sends invoice_request:"})," Over onion message to merchant"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Merchant sends invoice:"})," Generated for this specific request"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Payer makes payment:"})," Using the received invoice"]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Offer Format"}),e.jsxs(r,{title:"Offer Structure",children:['Offers use the "lno" prefix and TLV encoding:',e.jsx("div",{className:"font-mono text-xs bg-dark-800 p-3 rounded mt-2 break-all",children:"lno1pqps7sjqpgtyzm3qv4uxzmtsd3jjqer9wd3hy6tsw35k7msjzfpy7nz5yqcnygrfdej82um5wf5k2uckyypwa3eyt44h6txtxquqh7lz5djge4afgfjn7k4rgrkuag0jsd5xvxg"})]}),e.jsx(s,{title:"Key Offer Fields",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-dark-700",children:[e.jsx("th",{className:"text-left py-2",children:"Field"}),e.jsx("th",{className:"text-left py-2",children:"Description"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-2 font-mono",children:"offer_chains"}),e.jsx("td",{className:"py-2",children:"Which blockchains are accepted"})]}),e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-2 font-mono",children:"offer_amount"}),e.jsx("td",{className:"py-2",children:"Price (optional—payer can specify)"})]}),e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-2 font-mono",children:"offer_description"}),e.jsx("td",{className:"py-2",children:"What's being paid for"})]}),e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-2 font-mono",children:"offer_issuer"}),e.jsx("td",{className:"py-2",children:"Human-readable merchant name"})]}),e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-2 font-mono",children:"offer_issuer_id"}),e.jsx("td",{className:"py-2",children:"Merchant's node ID (or blinded)"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 font-mono",children:"offer_paths"}),e.jsx("td",{className:"py-2",children:"Blinded paths to reach merchant"})]})]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Invoice Request"}),e.jsx("p",{className:"mb-4",children:"The payer sends an invoice_request to obtain a specific invoice:"}),e.jsx(r,{title:"Invoice Request Fields",children:e.jsxs("ul",{className:"mt-2 list-disc list-inside space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"invreq_chain:"})," Which blockchain to use"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"invreq_amount:"})," Amount to pay (if not in offer)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"invreq_payer_id:"})," Payer's ephemeral key (for privacy)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"invreq_payer_note:"})," Optional message to merchant"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"invreq_quantity:"})," Number of items (if applicable)"]})]})}),e.jsx(i,{type:"info",title:"Onion Messages",children:"Invoice requests are sent via onion messages (BOLT #4 extension), not through regular Lightning payments. This allows communication without channels."}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"BOLT #12 Invoice"}),e.jsx("p",{className:"mb-4",children:"The merchant responds with a BOLT #12 invoice (different from BOLT #11):"}),e.jsx(s,{title:"BOLT #12 Invoice Fields",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-dark-700",children:[e.jsx("th",{className:"text-left py-2",children:"Field"}),e.jsx("th",{className:"text-left py-2",children:"Description"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-2 font-mono",children:"invoice_paths"}),e.jsx("td",{className:"py-2",children:"Blinded paths for payment"})]}),e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-2 font-mono",children:"invoice_payment_hash"}),e.jsx("td",{className:"py-2",children:"The payment hash"})]}),e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-2 font-mono",children:"invoice_amount"}),e.jsx("td",{className:"py-2",children:"Exact amount to pay"})]}),e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-2 font-mono",children:"invoice_created_at"}),e.jsx("td",{className:"py-2",children:"Unix timestamp"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 font-mono",children:"invoice_relative_expiry"}),e.jsx("td",{className:"py-2",children:"Seconds until expiry"})]})]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Refunds (Merchant-Pays-User)"}),e.jsx("p",{className:"mb-4",children:"BOLT #12 also supports the reverse flow where merchants pay users:"}),e.jsxs(l,{title:"Refund Flow",children:[e.jsxs("ol",{className:"list-decimal list-inside space-y-2 mt-2",children:[e.jsx("li",{children:"User creates an offer for receiving funds"}),e.jsx("li",{children:"Merchant sends invoice_request to user's offer"}),e.jsx("li",{children:"User responds with invoice"}),e.jsx("li",{children:"Merchant pays the invoice"})]}),"This enables refunds, withdrawals, and pull payments."]}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Advantages Over BOLT #11"}),e.jsx(s,{title:"BOLT #12 Benefits",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-dark-700",children:[e.jsx("th",{className:"text-left py-2",children:"Feature"}),e.jsx("th",{className:"text-left py-2",children:"BOLT #11"}),e.jsx("th",{className:"text-left py-2",children:"BOLT #12"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-2",children:"Reusability"}),e.jsx("td",{className:"py-2",children:"Single use"}),e.jsx("td",{className:"py-2",children:"Reusable offers"})]}),e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-2",children:"Privacy"}),e.jsx("td",{className:"py-2",children:"Reveals node ID"}),e.jsx("td",{className:"py-2",children:"Blinded paths"})]}),e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-2",children:"Refunds"}),e.jsx("td",{className:"py-2",children:"Not supported"}),e.jsx("td",{className:"py-2",children:"Native support"})]}),e.jsxs("tr",{className:"border-b border-dark-800",children:[e.jsx("td",{className:"py-2",children:"Amount"}),e.jsx("td",{className:"py-2",children:"Fixed or zero"}),e.jsx("td",{className:"py-2",children:"Negotiable"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2",children:"Currency"}),e.jsx("td",{className:"py-2",children:"BTC only"}),e.jsx("td",{className:"py-2",children:"Multi-currency"})]})]})]})}),e.jsx("h3",{className:"text-xl font-semibold text-dark-100 mt-8 mb-4",children:"Encoding"}),e.jsx("p",{className:"mb-4",children:"BOLT #12 uses a modified bech32 encoding:"}),e.jsx(r,{title:"BOLT #12 Encoding",children:e.jsxs("ul",{className:"mt-2 list-disc list-inside space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Offers:"}),' "lno" prefix']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Invoice requests:"}),' "lnr" prefix']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Invoices:"}),' "lni" prefix']}),e.jsxs("li",{children:[e.jsx("strong",{children:"No checksum:"})," QR codes have built-in error correction"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"+ separator:"})," Allowed for breaking long strings"]})]})}),e.jsxs(i,{type:"success",title:"QR Code Friendly",children:["BOLT #12 is optimized for QR codes:",e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"Offers are static—print once, use forever"}),e.jsx("li",{children:"Shorter than equivalent BOLT #11 invoices"}),e.jsx("li",{children:"+ separators for multi-line display"}),e.jsx("li",{children:"No checksum overhead (QR provides it)"})]})]}),e.jsx(i,{type:"warning",title:"Current Status",children:"BOLT #12 is still being adopted. Check your wallet/node implementation for support. Some features like recurring payments are planned but not yet specified."})]})}export{x as default};
