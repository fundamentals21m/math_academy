import{r as s}from"./vendor-react-Drj8qL0h.js";import{n as C}from"./index-dwDT9AaP.js";const r=`${C}:problems:progress`;function h(){const[l,n]=s.useState({completed:new Set,solutionViewed:new Set}),[c,a]=s.useState(!1);s.useEffect(()=>{try{const e=localStorage.getItem(r);if(e){const t=JSON.parse(e);n({completed:new Set(t.completed||[]),solutionViewed:new Set(t.solutionViewed||[])})}}catch(e){console.error("Failed to load problem progress:",e)}a(!0)},[]),s.useEffect(()=>{if(c)try{const e={completed:Array.from(l.completed),solutionViewed:Array.from(l.solutionViewed)};localStorage.setItem(r,JSON.stringify(e))}catch(e){console.error("Failed to save problem progress:",e)}},[l,c]);const d=s.useCallback(e=>{n(t=>{const o=new Set(t.completed);return o.has(e)?o.delete(e):o.add(e),{...t,completed:o}})},[]),i=s.useCallback(e=>{n(t=>{const o=new Set(t.completed);return o.add(e),{...t,completed:o}})},[]),u=s.useCallback(e=>{n(t=>{const o=new Set(t.completed);return o.delete(e),{...t,completed:o}})},[]),m=s.useCallback(e=>{n(t=>{const o=new Set(t.solutionViewed);return o.add(e),{...t,solutionViewed:o}})},[]),p=s.useCallback(e=>l.completed.has(e),[l.completed]),w=s.useCallback(e=>l.solutionViewed.has(e),[l.solutionViewed]),S=s.useCallback(e=>{const t=e.filter(o=>l.completed.has(o)).length;return{completed:t,total:e.length,percentage:e.length>0?Math.round(t/e.length*100):0}},[l.completed]),g=s.useCallback(()=>{n({completed:new Set,solutionViewed:new Set})},[]);return{isLoaded:c,completed:l.completed,solutionViewed:l.solutionViewed,toggleComplete:d,markComplete:i,markIncomplete:u,markSolutionViewed:m,isComplete:p,hasSolutionViewed:w,getCompletionStats:S,resetProgress:g}}export{h as u};
