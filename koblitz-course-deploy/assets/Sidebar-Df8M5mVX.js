import{j as e,A as b,m as v}from"./vendor-animation-0o8UKZ_1.js";import{r as h,L as m,N as f}from"./vendor-react-Drj8qL0h.js";import{c as w,d as C,e as L,j as M,k as N,l as P,C as B,H as E,S,X as I,F as o,m as $,n as R}from"./index-BWUjVAcL.js";import"./vendor-math-p018AHG0.js";function W({level:a,showLabel:i=!1}){const{label:l,color:t,symbol:d}=w(a);return e.jsxs("div",{className:`flex items-center gap-1.5 ${t}`,children:[e.jsx("span",{className:"text-sm",children:d}),i&&e.jsx("span",{className:"text-xs",children:l})]})}function F({onImportSuccess:a}){const[i,l]=h.useState(!1),[t,d]=h.useState(null),[x,u]=h.useState(!1),c=h.useRef(null),s=C(),n=()=>{L(),d({type:"success",text:"Progress exported! Check your downloads folder."}),setTimeout(()=>d(null),3e3)},r=()=>{var p;(p=c.current)==null||p.click()},y=async p=>{var j;const k=(j=p.target.files)==null?void 0:j[0];if(!k)return;u(!0),d(null);const g=await M(k);u(!1),d({type:g.success?"success":"error",text:g.message}),g.success&&(a==null||a(),setTimeout(()=>{window.location.reload()},1500)),c.current&&(c.current.value="")};return e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>l(!i),className:"p-2 rounded-lg hover:bg-dark-800 transition-colors","aria-label":"Backup & restore progress",title:"Backup & restore progress",children:e.jsx("svg",{className:"w-5 h-5 text-dark-400 hover:text-dark-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})}),i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>l(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-72 bg-dark-800 rounded-lg shadow-xl border border-dark-700 z-50 p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-dark-100 mb-3",children:"Progress Backup"}),s&&e.jsxs("div",{className:"mb-4 p-3 bg-dark-900 rounded-lg",children:[e.jsx("div",{className:"text-xs text-dark-400 mb-1",children:"Current Progress"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"text-accent-400 font-semibold",children:[s.totalXP," XP"]}),e.jsxs("span",{className:"text-dark-300",children:["Level ",s.level]}),e.jsxs("span",{className:"text-dark-400",children:[s.sectionsCompleted," sections"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:n,disabled:!s,className:"w-full flex items-center gap-2 px-3 py-2 bg-dark-700 hover:bg-dark-600 rounded-lg text-sm text-dark-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export Progress"]}),e.jsxs("button",{onClick:r,disabled:x,className:"w-full flex items-center gap-2 px-3 py-2 bg-dark-700 hover:bg-dark-600 rounded-lg text-sm text-dark-100 transition-colors disabled:opacity-50",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),x?"Importing...":"Import Backup"]}),e.jsx("input",{ref:c,type:"file",accept:".json",onChange:y,className:"hidden"})]}),t&&e.jsx("div",{className:`mt-3 p-2 rounded text-xs ${t.type==="success"?"bg-green-900/50 text-green-300 border border-green-700":"bg-red-900/50 text-red-300 border border-red-700"}`,children:t.text}),e.jsx("p",{className:"mt-3 text-xs text-dark-500",children:"Export your progress regularly to avoid losing your XP. Import to restore from a backup file."})]})]})]})}function O({onToggleSidebar:a,sidebarOpen:i}){const l=N(),t=o.gamification?l:null;return e.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-dark-900/95 backdrop-blur-sm border-b border-dark-800",children:e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:a,className:"p-2 rounded-lg hover:bg-dark-800 transition-colors","aria-label":i?"Close sidebar":"Open sidebar",children:e.jsx("svg",{className:"w-6 h-6 text-dark-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsxs(m,{to:"/",className:"flex items-center gap-3 hover:opacity-80 transition-opacity",children:[e.jsx("span",{className:"text-2xl",children:P}),e.jsx("h1",{className:"text-lg font-semibold text-dark-100 hidden sm:block",children:B})]})]}),e.jsxs("nav",{className:"hidden md:flex items-center gap-6",children:[e.jsx("a",{href:E,className:"text-dark-400 hover:text-dark-100 transition-colors text-sm font-medium",children:"Hub"}),e.jsx(m,{to:"/",className:"text-dark-400 hover:text-dark-100 transition-colors text-sm font-medium",children:"Home"}),o.theoremIndex&&e.jsx(m,{to:"/theorems",className:"text-dark-400 hover:text-dark-100 transition-colors text-sm font-medium",children:"Theorems"}),o.interactiveModules&&e.jsx(m,{to:"/interactive",className:"text-dark-400 hover:text-dark-100 transition-colors text-sm font-medium",children:"Interactive"}),o.leaderboard&&e.jsx(m,{to:"/leaderboard",className:"text-dark-400 hover:text-dark-100 transition-colors text-sm font-medium",children:"Leaderboard"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[o.gamification&&t&&e.jsxs(e.Fragment,{children:[e.jsx(S,{streak:t.state.streak.currentStreak}),e.jsx(I,{xp:t.state.user.totalXP,level:t.state.user.level})]}),o.gamification&&e.jsx(F,{})]})]})})}function T({isOpen:a,onClose:i}){const[l,t]=h.useState(new Set([1])),d=N(),x=o.gamification?d:null,u=s=>{t(n=>{const r=new Set(n);return r.has(s)?r.delete(s):r.add(s),r})},c=s=>{var r;if(!x)return"none";const n=`${R}:${s}`;return((r=x.state.sections[n])==null?void 0:r.masteryLevel)??"none"};return e.jsxs(e.Fragment,{children:[e.jsx(b,{children:a&&e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:i,className:"fixed inset-0 bg-black/50 z-40 lg:hidden"})}),e.jsx("aside",{className:`
          fixed top-16 left-0 bottom-0 z-40
          w-72 bg-dark-900 border-r border-dark-800
          transform transition-transform duration-300 ease-in-out
          ${a?"translate-x-0":"-translate-x-full"}
          lg:translate-x-0
          overflow-y-auto
        `,children:e.jsxs("nav",{className:"p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-amber-500/20 to-orange-500/10 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-amber-400",children:"â˜…"})}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-dark-500",children:"Reference"})]}),e.jsxs("ul",{className:"space-y-0.5",children:[o.theoremIndex&&e.jsx("li",{children:e.jsxs(f,{to:"/theorems",className:({isActive:s})=>`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors ${s?"bg-primary-500/10 text-primary-400":"text-dark-300 hover:bg-dark-800 hover:text-dark-100"}`,children:[e.jsx("span",{className:"text-lg",children:"ðŸ“œ"}),"Theorems"]})}),o.interactiveModules&&e.jsx("li",{children:e.jsxs(f,{to:"/interactive",className:({isActive:s})=>`flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors ${s?"bg-primary-500/10 text-primary-400":"text-dark-300 hover:bg-dark-800 hover:text-dark-100"}`,children:[e.jsx("span",{className:"text-lg",children:"ðŸŽ®"}),"Interactive Modules"]})})]})]}),e.jsx("div",{className:"space-y-2",children:$.map(s=>e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>u(s.id),className:"w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-dark-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-primary-500/20 to-primary-600/10 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-primary-400",children:s.id})}),e.jsx("span",{className:"text-sm font-medium text-dark-200",children:s.title})]}),e.jsx("svg",{className:`w-4 h-4 text-dark-500 transition-transform ${l.has(s.id)?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsx(b,{children:l.has(s.id)&&e.jsx(v.ul,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"ml-4 mt-1 space-y-0.5 overflow-hidden",children:s.sections.map(n=>e.jsx("li",{children:e.jsxs(f,{to:`/section/${n.id}`,onClick:()=>{window.innerWidth<1024&&i()},className:({isActive:r})=>`flex items-center justify-between px-3 py-2 rounded-lg text-sm transition-colors ${r?"bg-primary-500/10 text-primary-400":"text-dark-400 hover:bg-dark-800 hover:text-dark-200"}`,children:[e.jsx("span",{className:"truncate",children:n.title}),o.gamification&&e.jsx(W,{level:c(n.id)})]})},n.id))})})]},s.id))})]})})]})}export{O as H,T as S};
